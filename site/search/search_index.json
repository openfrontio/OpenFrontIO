{
  "config": {
    "indexing": "full",
    "lang": ["en"],
    "min_search_length": 3,
    "prebuild_index": false,
    "separator": "[\\s\\-]+"
  },
  "docs": [
    {
      "location": "",
      "text": "OpenFront docs OpenFront.io is an online RTS io game project. This documentation serves as a place to learn about the internal workings of this project , namely: Using the API (API Reference) Contributing Orienting yourself in the project (Developer Reference) For a quick guide on how to get the repository up and running with some of your first changes, visit the Starting Guide ! In order to learn about game mechanics, check out the community run wiki , or even contribute to it!",
      "title": "Home"
    },
    {
      "location": "#openfront-docs",
      "text": "OpenFront.io is an online RTS io game project. This documentation serves as a place to learn about the internal workings of this project , namely: Using the API (API Reference) Contributing Orienting yourself in the project (Developer Reference) For a quick guide on how to get the repository up and running with some of your first changes, visit the Starting Guide ! In order to learn about game mechanics, check out the community run wiki , or even contribute to it!",
      "title": "OpenFront docs"
    },
    {
      "location": "API/",
      "text": "API Usage List Game Metadata Get game IDs and basic metadata for games that started within a specified time range. Results are sorted by start time and paginated. Constraints: Maximum time range: 2 days Maximum limit per request: 1000 games Endpoint: GET https://api.openfront.io/public/games Query Parameters: start (required): ISO 8601 timestamp end (required): ISO 8601 timestamp type (optional): Game type, must be one of [Private, Public, Singleplayer] limit (optional): Number of results (max 1000, default 50) offset (optional): Pagination offset Example Request: curl \"https://api.openfront.io/public/games?start=2025-10-25T00:00:00Z&end=2025-10-26T23:59:59Z&type=Singleplayer&limit=10&offset=5\" Response: [ { \"game\": \"ABSgwin6\", \"start\": \"2025-10-25T00:00:10.526Z\", \"end\": \"2025-10-25T00:19:45.187Z\", \"type\": \"Singleplayer\", \"mode\": \"Free For All\", \"difficulty\": \"Medium\" }, ... ] The response includes a Content-Range header indicating pagination (e.g., games 5-15/399 ). Get Game Info Retrieve detailed information about a specific game. Endpoint: GET https://api.openfront.io/public/game/:gameId Query Parameters: turns (optional): Set to false to exclude turn data and reduce response size Examples: # Full game data curl \"https://api.openfront.io/public/game/ABSgwin6\" # Without turn data curl \"https://api.openfront.io/public/game/ABSgwin6?turns=false\" Note: Public player IDs are stripped from game records for privacy. Get Player Info Retrieve information and stats for a specific player. Endpoint: GET https://api.openfront.io/public/player/:playerId Example: curl \"https://api.openfront.io/public/player/HabCsQYR\"",
      "title": "API reference"
    },
    { "location": "API/#api-usage", "text": "", "title": "API Usage" },
    {
      "location": "API/#list-game-metadata",
      "text": "Get game IDs and basic metadata for games that started within a specified time range. Results are sorted by start time and paginated. Constraints: Maximum time range: 2 days Maximum limit per request: 1000 games Endpoint: GET https://api.openfront.io/public/games Query Parameters: start (required): ISO 8601 timestamp end (required): ISO 8601 timestamp type (optional): Game type, must be one of [Private, Public, Singleplayer] limit (optional): Number of results (max 1000, default 50) offset (optional): Pagination offset Example Request: curl \"https://api.openfront.io/public/games?start=2025-10-25T00:00:00Z&end=2025-10-26T23:59:59Z&type=Singleplayer&limit=10&offset=5\" Response: [ { \"game\": \"ABSgwin6\", \"start\": \"2025-10-25T00:00:10.526Z\", \"end\": \"2025-10-25T00:19:45.187Z\", \"type\": \"Singleplayer\", \"mode\": \"Free For All\", \"difficulty\": \"Medium\" }, ... ] The response includes a Content-Range header indicating pagination (e.g., games 5-15/399 ).",
      "title": "List Game Metadata"
    },
    {
      "location": "API/#get-game-info",
      "text": "Retrieve detailed information about a specific game. Endpoint: GET https://api.openfront.io/public/game/:gameId Query Parameters: turns (optional): Set to false to exclude turn data and reduce response size Examples: # Full game data curl \"https://api.openfront.io/public/game/ABSgwin6\" # Without turn data curl \"https://api.openfront.io/public/game/ABSgwin6?turns=false\" Note: Public player IDs are stripped from game records for privacy.",
      "title": "Get Game Info"
    },
    {
      "location": "API/#get-player-info",
      "text": "Retrieve information and stats for a specific player. Endpoint: GET https://api.openfront.io/public/player/:playerId Example: curl \"https://api.openfront.io/public/player/HabCsQYR\"",
      "title": "Get Player Info"
    },
    {
      "location": "client/",
      "text": "Client reference Table of contents: Client reference Components Difficulties.ts class DifficultyDisplay private function getDifficultyIcon(difficultyKey: string) public function render() Maps.ts const MapDescription class MapDisplay private function loadMapData() public function render() ModalOverlay.ts class ModalOverlay public function render() NewsButton.ts class NewsButton private function checkForNewVersion() private function handleClick() public function render() public function createRenderRoot() PatternButton.ts const BUTTON_WIDTH class PatternButton private function translateCosmetic() private function handleClick() private function handlePurchase() public function render() public function createRenderRoot() function renderPatternPreview() ActionButton.ts function actionButton() Divider.ts class Divider public function createRenderRoot() public function render() Graphics AnimatedSprite.ts class AnimatedSprite public constructor constructor() public function update() public function isActive() public function lifeTime() public function draw() public function reset() public function setOrigin() AnimatedSpriteLoader.ts class AnimatedSpriteLoader public function loadAllAnimatedSpriteImages() private function createRegularAnimatedSprite() private function getColoredAnimatedSprite() private function createColoredAnimatedSpriteForUnit() public function createAnimatedSprite() GameRenderer.ts function createRenderer() class GameRenderer public constructor constructor() public function initialize() public function resizeCanvas() public function redraw() public function renderGame() public function tick() public function resize() NameBoxCalculator.ts interface Point interface Rectangle public function placeName() public function createGrid() public function findLargestInscribedRectangle() public function largestRectangleInHistogram() public function calculateFontSize() ProgressBar.ts class ProgressBar public constructor constructor() public function setProgress() public function clear() public function getX() public function getY() public function getProgress() SpriteLoader.ts Constants type TrainTypeSprite SPRITE_CONFIG spriteMap coloredSpriteCache public function loadAllSprites() private function trainTypeToSpriteType() private function getSpriteForUnit() public function isSpriteReady() public function colorizeCanvas() private function computeSpriteKey() public function getColoredSprite() TransformHandler.ts Constants class TransformHandler public constructor constructor() public function updateCanvasBoundingRect() public function boundingRect() public function width() public function hasChanged() public function resetChanged() public function handleTransform() public function worldToScreenCoordinates() public function screenToWorldCoordinates() public function screenBoundingRect() public function isOnScreen() public function screenCenter() public function onGoToPlayer() public function onGoToPosition() public function onGoToUnit() public function centerCamera() private function goTo() public function onZoom() UIState.ts interface UIState ./fx/ConquestFx.ts public function conquestFxFactory() ./fx/Fx.ts interface Fx public function renderTick() enum FxType ./fx/NukeArea.ts class NukeAreaFx public constructor constructor() public function end() public function renderTick() ./fx/NukeFx.ts class ShockwaveFx public constructor constructor() public function renderTick() private function addSpriteInCircle() public function nukeFxFactory() ./fx/SpriteFx.ts class MoveSpriteFx public constructor constructor() public function renderTick() class FadeFx public constructor constructor() public function renderTick() class SpriteFx public constructor constructor() public function renderTick() public function getElapsedTime() public function getDuration() ./fx/TargetFx.ts class TargetFx public function end() public function renderTick() ./fx/TextFx.ts class TextFx public function renderTick() ./fx/Timeline.ts class Timeline public function add() public function update() public function isComplete() ./fx/UnitExplosionFx.ts class UnitExplosionFx public constructor UnitExplosionFx() public function renderTick() ./layers/AdTimer.ts class AdTimer public constructor AdTimer() public function init() public async function tick() ./layers/AlertFrame.ts class AlertFrame public constructor constructor() public function init() public function tick() public function shouldTransform() private function onBrokeAllianceUpdate() private function activateAlert() public function dismissAlert() public function render() ./layers/BuildMenu.ts interface BuildItemDisplay const buildTable const flattenedBuildTable class BuildMenu public function init() public function tick() public function canBuildOrUpgrade() public function cost() public function count() public function sendBuildOrUpgrade() public function render() public function hideMenu() public function showMenu() private function refresh() private function getBuildableUnits() getter isVisible ./layers/ChatDisplay.ts interface ChatEvent class ChatDisplay private function toggleHidden() private function addEvent() private function removeEvent() public function onDisplayMessageEvent() public function init() public function tick() private function getChatContent() public function render() public function createRenderRoot() ./layers/ChatIntegration.ts class ChatIntegration public constructor constructor() public function setupChatModal() public function createQuickChatMenu() public function shortenText() ./layers/ChatModal.ts type QuickChatPhrase type QuickChatPhrases class ChatModal public function initEventBus() public function open() public function close() public function setRecipient() public function setSender() public function openWithSelection() private function selectCategory() private function selectPhrase() private function selectPlayer() private function sendChatMessage() private function onPlayerSearchInput() private function getSortedFilteredPlayers() private function getFullQuickChatKey() private function renderPhrasePreview() private function getPhrasesForCategory() ./layers/ControlPanel.ts class ControlPanel public function init() public function tick() private function updateTroopIncrease() public function onAttackRatioChange() public function renderLayer() public function shouldTransform() public function setVisibile() public function render() public function createRenderRoot() ./layers/EmojiTable.ts class EmojiTable public function initEventBus() private property onEmojiClicked public function render() public function hideTable() public function showTable() public function createRenderRoot() ./layers/EventsDisplay.ts class EventsDisplay public function init() public function tick() public function disconnectedCallback() public function shouldTransform() public function renderLayer() private function renderButton() private function renderToggleButton() private function toggleHidden() private function toggleEventFilter() private function checkForAllianceExpirations() private function addEvent() private function removeEvent() Event Handlers (onXEvent) Private helper functions for rendering public function render() public function createRenderRoot() ./layers/FPSDisplay.ts class FPSDisplay public function init() public function setVisible() private function handleClose() private function handleMouseDown() private function handleMouseMove() private function handleMouseUp() public function updateFPS() public function shouldTransform() private function getFPSColor() public function render() ./layers/FxLayer.ts class FxLayer public constructor constructor() public function shouldTransform() public function tick() private function manageBoatTargetFx() private function createNukeTargetFxIfOwned() public function onBonusEvent() public function addTextFx() public function randomEvent() public function onUnitEvent() public function onShellEvent() public function onTrainEvent() public function onRailroadEvent() public function onConquestEvent() public function onWarshipEvent() public function onStructureEvent() public function onNukeEvent() private function handleNukeExplosion() private function handleSAMInterception() public async function init() public function redraw() public function renderLayer() private function renderAllFx() private function renderContextFx() ./layers/GameLeftSidebar.ts class GameLeftSidebar public function createRenderRoot() public function init() public function tick() private function toggleLeaderboard() private function toggleTeamLeaderboard() private getter isTeamGame() private function getTranslatedPlayerTeamLabel() public function render() ./layers/GameRightSidebar.ts class GameRightSidebar public function createRenderRoot() public function init() public function tick() private function secondsToHms() private function toggleReplayPanel() private function onPauseButtonClick() private function onExitButtonClick() private function onSettingsButtonClick() public function render() private function maybeRenderReplayButtons() ./layers/HeadsUpMessage.ts class HeadsUpMessage public function createRenderRoot() public function init() public function tick() public function render() ./layers/Layer.ts interface Layer ./layers/Leaderboard.ts interface Entry class GoToPlayerEvent class GoToPositionEvent class GoToUnitEvent class Leaderboard public function createRenderRoot() public function init() public function tick() private function setSort() private function updateLeaderboard() private function handleRowClickPlayer() public function renderLayer() public function shouldTransform() public function render() private function formatPercentage() ./layers/MainRadialMenu.ts class MainRadialMenu constructor public function init() private async function updatePlayerActions() public async function tick() public function renderLayer() public function shouldTransform() public function closeMenu() ./layers/MultiTabModal.ts class MultiTabModal public function createRenderRoot() public function tick() public function init() private function generateFakeIp() private function generateDeviceFingerprint() public function show() public function hide() public function disconnectedCallback() public function render() ./layers/NameLayer.ts class RenderInfo class NameLayer implements Layer public function init() public function tick() public function renderLayer() public function shouldTransform() public function redraw() private function onAlternateViewChange() private function updateElementVisibility() private function createPlayerElement() public function renderPlayerInfo() private function createIconElement() ./layers/PlayerActionHandler.ts class PlayerActionHandler public function getPlayerActions() public function handleAttack() public function handleBoatAttack() public function findBestTransportShipSpawn() public function handleSpawn() public function handleAllianceRequest() public function handleBreakAlliance() public function handleTargetPlayer() public function handleDonateGold() public function handleDonateTroops() public function handleEmbargo() public function handleEmoji() public function handleDeleteUnit() ./layers/PlayerInfoOverlay.ts class PlayerInfoOverlay public property game public property eventBus public property transform private state _isInfoVisible private state player private state playerProfile private state unit public function init() public function hide() public function maybeShow() public function tick() public function renderLayer() public function shouldTransform() public function setVisible() private function getRelationClass() private function getRelationName() private function displayUnitCount() private function allianceExpirationText() private function renderPlayerInfo() private function renderUnitInfo() protected function createRenderRoot() ./layers/PlayerPanel.ts class PlayerPanel protected function createRenderRoot() public function initEventBus() public function init() public async function tick() public function show() public function hide() private function handleClose() private function handleAllianceClick() private function handleBreakAllianceClick() private function openSendTroops() private function openSendGold() private function handleDonateTroopClick() private function handleDonateGoldClick() private function closeSend() private function confirmSend() private function handleEmbargoClick() private function handleStopEmbargoClick() private function onStopTradingAllClick() private function onStartTradingAllClic()k private function handleEmojiClick() private function handleChat() private function handleTargetClick() private function identityChipProps() private function getRelationClass() private function getRelationName() private function getExpiryColorClass() private function getTraitorRemainingSeconds() private function renderTraitorBadge() private function renderRelationPillIfNation() private function renderIdentityRow() private function renderResources() private function renderStats() private function renderAlliances() private function renderAllianceExpiry() private function renderActions() public function render() ./layers/RadialMenu.ts class CloseRadialMenuEvent constructor CloseRadialMenuEvent() interface TooltipItem interface RadialMenuConfig class RadialMenu implements Layer constructor RadialMenu() public function init() public function showRadialMenu() public function hideRadialMenu() public function disableAllButtons() public function updateCenterButtonState() public function isMenuVisible() public function getCurrentLevel() public function setParams() public function refreshMenu() public function refresh() public function renderLayer() public function shouldTransform() ./layers/RadialMenuElements.ts interface MenuElementParams interface MenuElement interface TooltipKey interface CenterButtonElement constant COLORS enum Slot public function getAllEnabledUnits() Behavior public function createMenuElements() Behavior All exported MenuElement constants Example: deleteUnitElement action behavior exported CenterButtonElement constant ./layers/RailroadLayer.ts class RailroadLayer public constructor constructor(game: GameView, transformHandler: TransformHandler) public function shouldTransform() public function tick() public function updateRailColors() public function init() public function redraw() public function renderLayer(context: CanvasRenderingContext2D) private function handleRailroadRendering(railUpdate: RailroadUpdate) private function paintRailroad(railRoad: RailTile) private function clearRailroad(railRoad: RailTile) public function paintRail(railRoad: RailTile) private function paintRailRects(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) private function paintBridge(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) ./layers/RailroadSprites.ts function getRailroadRects(type: RailType) function horizontalRailroadRects() function verticalRailroadRects() function topRightRailroadCornerRects() function topLeftRailroadCornerRects() function bottomRightRailroadCornerRects() function bottomLeftRailroadCornerRects() function getBridgeRects(type: RailType) function horizontalBridge() function verticalBridge() function topRightBridgeCornerRects() function bottomLeftBridgeCornerRects() function topLeftBridgeCornerRects() function bottomRightBridgeCornerRects() ./layers/SAMRadiusLayer.ts class SAMRadiusLayer public constructor SAMRadiusLayer(game, eventBus, transformHandler, uiState) public function init() private function handleToggleStructure(e) private function updateStrokeVisibility() public function shouldTransform() public function tick() public function renderLayer(context) public function redraw() private function drawCirclesUnion(circles) ./layers/SendResourcesModal.ts class SendResourceModal public function createRenderRoot() protected function connectedCallback() protected function updated(changed) private function closeModal() private function confirm() private function handleKeydown(e) private function toNum(x) private function getTotalNumber() private function sanitizePercent(p) private function getCapacityLeft() private function getPercentBasis() private function limitAmount(proposed) private function clampSend(n) private function percentOfBasis(n) private function keepAfter(allowed) private function getFillColor() private function getMinKeepRatio() private function isTargetAlive() private function isSenderAlive() private function renderHeader() private function renderAvailable() private function renderPresets(percentNow) private function renderSlider(percentNow) private function renderCapacityNote(allowed) private function renderSummary(allowed) private function renderActions() private function renderDeadNote() private function renderSliderStyles() public function render() ./layers/SettingsModal.ts class ShowSettingsModalEvent public constructor ShowSettingsModalEvent(isVisible?, shouldPause?, isPaused?) class SettingsModal public function init() public function createRenderRoot() public function connectedCallback() public function disconnectedCallback() private function handleOutsideClick(event) private function handleKeyDown(event) public function openModal() public function closeModal() private function pauseGame(pause) private function onTerrainButtonClick() private function onToggleEmojisButtonClick() private function onToggleStructureSpritesButtonClick() private function onToggleSpecialEffectsButtonClick() private function onToggleDarkModeButtonClick() private function onToggleRandomNameModeButtonClick() private function onToggleLeftClickOpensMenu() private function onTogglePerformanceOverlayButtonClick() private function onExitButtonClick() private function onVolumeChange(event) private function onSoundEffectsVolumeChange(event) public function render() ./layers/SpawnTimer.ts class SpawnTimer public function createRenderRoot() public function init() public function tick() public function shouldTransform() public function render() private function sumIterator(values) ./layers/StructureDrawingUtils.ts Constants Type ShapeType class SpriteFactory constructor SpriteFactory() private function loadIcon() private function invalidateTextureCache() public function createGhostContainer() public function createUnitContainer() private function createTexture() private function createIcon() public function createRange() private function getImageColored() ./layers/StructureIconsLayer.ts class StructureRenderInfo class StructureIconsLayer public constructor StructureIconsLayer() public function setupRenderer() public function shouldTransform() public function init() public function resizeCanvas() public function tick() public function redraw() public function renderLayer() public function renderGhost() private function createStructure() private function moveGhost() private function createGhostStructure() private function clearGhostStructure() private function removeGhostStructure() private function toggleStructures() private function findRenderByUnit() private function handleActiveUnit() private function handleInactiveUnit() private function modifyVisibility() private function checkForDeletionState() private function checkForConstructionState() private function checkForOwnershipChange() private function checkForLevelChange() private function computeNewLocation() private function addNewStructure() private function createLevelSprite() private function createDotSprite() private function createIconSprite() private function deleteStructure() ./layers/StructureLayers.ts class StructureLayer public constructor StructureLayer() public function shouldTransform() public function tick() public function init() public function redraw() public function renderLayer() private function loadIcon() private function loadIconData() private function isUnitTypeSupported() private function handleUnitRendering() private function drawBorder() private function renderIcon() public function paintCell() public function clearCell() ./layers/TeamStats.ts class TeamStats public constructor public function createRenderRoot() public function init() public function tick() private function updateTeamStats() public function renderLayer() public function shouldTransform() public function render() interface TeamEntry private function formatPercentage() ./layers/TerrainLayer.ts class TerrainLayer public constructor constructor(game: GameView, transformHandler: TransformHandler) public function shouldTransform() public function tick() public function init() protected function redraw() protected function initImageData() public function renderLayer(context: CanvasRenderingContext2D) ./layers/TerritoryLayer.ts class TerritoryLayer public constructor constructor(game: GameView, eventBus: EventBus, transformHandler: TransformHandler, userSettings: UserSettings) public function shouldTransform() public async function paintPlayerBorder(player: PlayerView) public function tick() private function spawnHighlight() private function drawFocusedPlayerHighlight() public function init() public function onMouseOver(event: MouseOverEvent) private function updateHighlightedTerritory() private function getTerritoryAtCell(cell: { x: number; y: number }) public function redraw() public function redrawBorder(...players: PlayerView[]) public function initImageData() public function renderLayer(context: CanvasRenderingContext2D) protected function renderTerritory() public function paintTerritory(tile: TileRef, isBorder: boolean = false) public function alternateViewColor(other: PlayerView) public function paintAlternateViewTile(tile: TileRef, other: PlayerView) public function paintTile(imageData: ImageData, tile: TileRef, color: Colord, alpha: number) public function clearTile(tile: TileRef) public function clearAlternativeTile(tile: TileRef) public function enqueueTile(tile: TileRef) public async function enqueuePlayerBorder(player: PlayerView) public function paintHighlightTile(tile: TileRef, color: Colord, alpha: number) public function clearHighlightTile(tile: TileRef) private function drawBreathingRing(cx: number, cy: number, minRad: number, maxRad: number, radius: number, transparentColor: Colord, breathingColor: Colord) ./layers/UILayer.ts class UILayer public function shouldTransform() public function tick() public function init() public function renderLayer() public function redraw() private function onUnitEvent() private function clearIcon() private function drawIcon() private function onUnitSelection() private function clearSelectionBox() public function drawSelectionBox() public function drawHealthBar() private function updateProgressBars() private function getProgress() private function deletionProgress() public function createLoadingBar() public function paintCell() public function clearCell() ./layers/UnitDisplay.ts class UnitDisplay public function createRenderRoot() public function init() private function cost() private function canBuild() public function tick() public function render() private function renderUnitItem() ./layers/UnitLayer.ts class UnitLayer public function shouldTransform() public function tick() public function init() private function findWarshipsNearCell() private function onMouseUp() private function onUnitSelectionChange() private function handleUnitDeactivation() public function renderLayer() public function onAlternativeViewEvent() public function redraw() private function updateUnitsSprites() private function clearUnitsCells() private function drawUnitsCells() private function relationship() public function onUnitEvent() private function handleWarShipEvent() private function handleShellEvent() private function handleMissileEvent() private function drawTrail() private function clearTrail() private function handleNuke() private function handleMIRVWarhead() private function handleTradeShipEvent() private function handleTrainEvent() private function handleBoatEvent() public function paintCell() public function clearCell() public function drawSprite() ./layers/WinModal.ts class WinModal public constructor constructor() public function createRenderRoot() public function render() public function innerHtml() public function renderPatternButton() public async function loadPatternContent() public function steamWishlist() public async function show() public function hide() private function _handleExit() public function init() public function tick() public function renderLayer() public function shouldTransform() Style Data Sound SoundManager.ts class SoundManager public constructor constructor() public function playBackgroundMusic() public function stopBackgroundMusic() public function setBackgroundMusicVolume() private function playNext() public function loadSoundEffect() public function playSoundEffect() public function setSoundEffectsVolume() public function stopSoundEffect() public function unloadSoundEffect() enum SoundEffect Utilities ReplaySpeedMultiplier.ts enum ReplaySpeedMultiplier const defaultReplaySpeedMultiplier RenderUnitTypeOptions.ts interface UnitTypeRenderContext const unitOptions function renderUnitTypeOptions() Components Difficulties.ts class DifficultyDisplay Displays a visual indicator of difficulty using skull icons with different states and sizes. Properties: Name Type Description difficultyKey string Current difficulty key determining which icons are active (defaults to \"\" ). private function getDifficultyIcon(difficultyKey: string) Returns the corresponding difficulty icon markup as an HTML template. Parameter Type Description difficultyKey string Key representing the current difficulty. Returns import(\"lit\").TemplateResult . public function render() No parameters. Renders the difficulty indicator container with the appropriate difficulty icon. Returns import(\"lit\").TemplateResult . Maps.ts const MapDescription Properties: Name Type Description MapDescription Record<keyof typeof GameMapType, string> Map of GameMapType keys to human-readable map names. class MapDisplay Displays a selectable map option with loading state and rendered preview. Properties: Name Type Description mapKey string Key of the map to display (defaults to \"\" ). selected boolean Whether the map is selected (defaults to false ). translation string Optional translated map name. mapWebpPath string \\| null Path to the WebP map image (private state). mapName string \\| null Loaded map name (private state). isLoading boolean Loading state of the map (private state, defaults to true ). private function loadMapData() No parameters. Loads map data and updates mapWebpPath and mapName states. Returns Promise<void> . public function render() No parameters. Renders the map card with loading, error, or preview image and map name. Returns import(\"lit\").TemplateResult . ModalOverlay.ts class ModalOverlay Renders a full-screen overlay that can be shown or hidden and closes on click. Properties: Name Type Description visible boolean Whether the overlay is visible (defaults to false , reflected to attribute). public function render() No parameters. Renders the overlay div and sets visibility based on visible . Returns import(\"lit\").TemplateResult . NewsButton.ts class NewsButton Displays a news button that activates when a new version is detected and opens the news modal. Properties: Name Type Description hidden boolean Whether the news button is hidden (defaults to false ). isActive boolean Whether the button is active due to a new version (private state). private function checkForNewVersion() No parameters. Checks localStorage for the last seen version and updates isActive if a new version is detected. Returns void . private function handleClick() No parameters. Marks the current version as seen, deactivates the button, and opens the NewsModal . Returns void . public function render() No parameters. Renders the news button with icon and conditional active or hidden classes. Returns import(\"lit\").TemplateResult . public function createRenderRoot() No parameters. Overrides LitElement's shadow root to render in light DOM. Returns this . PatternButton.ts const BUTTON_WIDTH No parameters. Specifies the default width for pattern buttons. Returns number . class PatternButton Renders a pattern selection button with optional purchase handling and preview. Properties: Name Type Description pattern Pattern \\| null Pattern object to display (defaults to null ). colorPalette ColorPalette \\| null Associated color palette (defaults to null ). requiresPurchase boolean Whether purchase is required to select (defaults to false ). onSelect (pattern: PlayerPattern \\| null) => void Callback when the pattern is selected. onPurchase (pattern: Pattern, colorPalette: ColorPalette \\| null) => void Callback when the purchase button is clicked. private function translateCosmetic() Translates cosmetic name or formats it if translation not available Parameter Type Description prefix string Translation key prefix. patternName string Pattern or color palette name. Returns string . private function handleClick() No parameters. Triggers onSelect callback with current pattern or null . Returns void . private function handlePurchase() Parameter Type Description e Event Click event to stop propagation. Triggers onPurchase callback for the current pattern and color palette. Returns void . public function render() No parameters. Renders the pattern button, optional color palette, preview image, and purchase button if required. Returns import(\"lit\").TemplateResult . public function createRenderRoot() No parameters. Overrides shadow root to render in light DOM. Returns this . function renderPatternPreview() Renders pattern preview image or blank placeholder. Parameter Type Description pattern PlayerPattern | null Pattern to render. width number Width of the preview. height number Height of the preview. Returns import(\"lit\").TemplateResult . ActionButton.ts function actionButton() Renders a styled HTML button with icon, label, and click behavior using Lit. Properties: Name Type Description onClick (e: MouseEvent) => void Callback executed when the button is clicked. type ButtonVariant Button color variant (defaults to normal ). icon string URL or path to the button icon. iconAlt string Alternative text for the button icon. title string Tooltip and ARIA label for the button. label string Text label displayed below the icon. disabled boolean Whether the button is disabled (defaults to false ). Returns a Lit TemplateResult rendering the button with appropriate styles, icon, and label. Returns TemplateResult . Divider.ts class Divider Renders a horizontal divider with configurable spacing and color. Properties: Name Type Description spacing DividerSpacing Vertical spacing of the divider (defaults to md ). color string CSS class for divider color (defaults to bg-zinc-700/80 ). public function createRenderRoot() No parameters. Overrides LitElement's shadow root creation to render in light DOM. Returns this . public function render() No parameters. Renders the divider element with spacing and color classes. Returns TemplateResult . Graphics AnimatedSprite.ts class AnimatedSprite Represents a frame-based animation drawn on a canvas. Handles frame timing, looping, rendering, and origin offsets based on elapsed time. Properties: Name Type Description image CanvasImageSource Source image for the sprite sheet. frameWidth number Width of a single frame in pixels. frameCount number Number of frames in the sprite sheet. frameDuration number Duration of each frame in milliseconds. looping boolean Whether the animation loops (defaults to false ). originX number Horizontal origin offset in pixels. originY number Vertical origin offset in pixels. frameHeight number Height of each frame. currentFrame number Index of the current frame. elapsedTime number Accumulated time since the last frame change. active boolean Whether the animation is currently playing. public constructor constructor() Parameter Type Description image CanvasImageSource Source image for the sprite sheet. frameWidth number Width of a single frame in pixels. frameCount number Number of frames in the sprite sheet. frameDuration number Duration of each frame in milliseconds. looping boolean Whether the animation loops (default false ). originX number Horizontal origin offset in pixels. originY number Vertical origin offset in pixels. Throws an error if the image does not have a height property. public function update() Parameter Type Description deltaTime number Time passed since the last update. Updates the currentFrame and active properties based on elapsed time. Returns void . public function isActive() Returns boolean \u2014 whether the animation is currently active. public function lifeTime() Returns number | undefined \u2014 total length of the animation in milliseconds or undefined for looping animations. public function draw() Parameter Type Description ctx CanvasRenderingContext2D Rendering context. x number X-coordinate for drawing. y number Y-coordinate for drawing. Draws the current active frame onto ctx at [x, y] adjusted by origin offsets. Returns void . public function reset() Resets the animation to the first frame and resets elapsed time. Returns void . public function setOrigin() Parameter Type Description xRatio number New horizontal origin in pixels. yRatio number New vertical origin in pixels. Updates the origin offsets used for drawing. Returns void . AnimatedSpriteLoader.ts class AnimatedSpriteLoader Manages loading, colorizing, caching, and creation of class AnimatedSprite instances. Properties: Name Type Description animatedSpriteImageMap Map<FxType, HTMLCanvasElement> Stores loaded sprite images as canvases keyed by FxType . coloredAnimatedSpriteCache Map<string, HTMLCanvasElement> Caches colorized canvases per owner. public function loadAllAnimatedSpriteImages() Returns Promise<void> . Loads all images referenced in ANIMATED_SPRITE_CONFIG into canvases. Logs an error for any failed loads. private function createRegularAnimatedSprite() Parameter Type Description fxType FxType The FX type to create an animation for. Returns class AnimatedSprite | null. Returns null if the configuration or base image is missing. private function getColoredAnimatedSprite() Parameter Type Description owner PlayerView The player owning the animation. fxType FxType The FX type. theme Theme The theme to colorize with. Returns HTMLCanvasElement | null . Returns null if the configuration or base image is missing. private function createColoredAnimatedSpriteForUnit() Parameter Type Description fxType FxType The FX type. owner PlayerView The player owning the animation. theme Theme The theme to colorize with. Returns class AnimatedSprite | null. Returns null if the configuration or colorized image is missing. public function createAnimatedSprite() Parameter Type Description fxType FxType The FX type. owner? PlayerView Optional owner to colorize the sprite for. theme? Theme Optional theme for colorization. Returns class AnimatedSprite | null. Returns null if the resources or configuration are unavailable. See also: function createRegularAnimatedSprite() , function getColoredAnimatedSprite() GameRenderer.ts function createRenderer() Parameter Type Description canvas HTMLCanvasElement The canvas element for rendering. game GameView The game instance. eventBus EventBus The event bus for handling events. Returns GameRenderer . Initializes various UI layers, sets up event listeners, and prepares the canvas for rendering. Also handles references to modals, sidebars, panels, and other game layers. class GameRenderer Manages rendering of the entire game onto a canvas, including layered drawing, transformations, and FPS tracking. Properties: Name Type Description transformHandler TransformHandler Handles coordinate transformations for rendering. uiState UIState Stores state for UI layers. context CanvasRenderingContext2D 2D rendering context of the canvas. public constructor constructor() Parameter Type Description game GameView The game instance. eventBus EventBus Event bus for handling events. canvas HTMLCanvasElement Canvas element for rendering. transformHandler TransformHandler Manages rendering transformations. uiState UIState State for UI components. layers Layer[] Array of layers to render. fpsDisplay FPSDisplay Layer for FPS tracking. Throws an error if the 2D canvas context is unavailable. public function initialize() Sets up event listeners, appends canvas to the DOM, initializes layers, and starts the render loop. Returns void . public function resizeCanvas() Resizes the canvas to match the window size and updates the transform handler. Returns void . public function redraw() Calls redraw() on all layers that implement it. Returns void . public function renderGame() Handles the main render loop: clears the canvas, applies transformations, renders all layers in order, updates FPS, and logs slow frames. Returns void . public function tick() Calls tick() on all layers that implement it. Returns void . public function resize() Parameter Type Description width number New width of the canvas. height number New height of the canvas. Resizes the canvas accounting for devicePixelRatio . Returns void . NameBoxCalculator.ts interface Point Represents a 2D point. Name Type Description x number X-coordinate y number Y-coordinate interface Rectangle Represents a rectangle. Name Type Description x number X-coordinate of the top-left corner y number Y-coordinate of the top-left corner width number Width of the rectangle height number Height of the rectangle public function placeName() Parameter Type Description game Game The game instance player Player The player whose name is being placed Returns NameViewData . Computes the optimal position and font size for a player's name based on the largest cluster of tiles they control. Falls back to the bounding box of border tiles if the largest cluster is not available. See also: function createGrid() , function findLargestInscribedRectangle() , function calculateFontSize() public function createGrid() Parameter Type Description game Game The game instance player Player The player for whom the grid is created boundingBox { min: Point; max: Point } Bounding box to generate the grid within scalingFactor number Factor to scale the grid by Returns boolean[][] . Generates a boolean occupancy grid representing tiles controlled or owned by the player. Each cell is true if it is a lake, owned by the player, or contains fallout; otherwise false . See also: interface Point public function findLargestInscribedRectangle() Parameter Type Description grid boolean[][] Occupancy grid Returns Rectangle . Finds the largest rectangle of true values within a boolean grid. See also: interface Rectangle , function largestRectangleInHistogram() public function largestRectangleInHistogram() Parameter Type Description widths number[] Array representing column heights in a histogram Returns Rectangle . Computes the largest rectangle that can be formed in a histogram represented by the input array. See also: interface Rectangle public function calculateFontSize() Parameter Type Description rectangle Rectangle The rectangle to fit the name into name string The name string to fit Returns number . Calculates the font size that will fit the provided name within the given rectangle, constrained by width and height. See also: interface Rectangle ProgressBar.ts class ProgressBar Renders a progress/loading bar on a canvas context and allows updating its progress dynamically. Properties: Name Type Description colors string[] Optional array of colors used to display progress segments. Defaults to gray if empty. ctx CanvasRenderingContext2D Canvas rendering context for drawing the progress bar. x number X-coordinate of the progress bar's top-left corner. y number Y-coordinate of the progress bar's top-left corner. w number Width of the progress bar. h number Height of the progress bar. progress number Current progress value between 0 and 1. Defaults to 0. public constructor constructor() Parameter Type Description colors? string[] Optional array of colors for the progress segments. ctx CanvasRenderingContext2D Canvas context to render on. x number X-coordinate of the top-left corner. y number Y-coordinate of the top-left corner. w number Width of the progress bar. h number Height of the progress bar. progress? number Optional initial progress from 0 to 1. Defaults to 0. Returns ProgressBar . Initializes the progress bar and draws its initial state. public function setProgress() Parameter Type Description progress number Progress value between 0 and 1. Values outside this range are clamped. Returns void . Updates the progress value and redraws the bar. Fills background, draws the progress portion with the appropriate color, and stores the updated progress. public function clear() Returns void . Clears the area occupied by the progress bar, including a padding of CLEAR_PADDING pixels. public function getX() Returns number . Returns the X-coordinate of the progress bar. public function getY() Returns number . Returns the Y-coordinate of the progress bar. public function getProgress() Returns number . Returns the current progress value between 0 and 1. SpriteLoader.ts Constants type TrainTypeSprite Defines train sprite categories. Name Type Description Engine \"Engine\" Engine sprite Carriage \"Carriage\" Carriage sprite LoadedCarriage \"LoadedCarriage\" Loaded carriage sprite SPRITE_CONFIG Partial mapping of unit types and train sprites to image URLs. spriteMap Map storing loaded ImageBitmap objects for each unit type or train sprite. coloredSpriteCache Map caching colorized HTMLCanvasElement instances keyed by unit, owner, and color combination. public function loadAllSprites() Returns Promise<void> . Preloads all sprites defined in SPRITE_CONFIG as ImageBitmap and populates spriteMap . Logs warnings if URLs are missing and errors if loading fails. private function trainTypeToSpriteType() Parameter Type Description unit UnitView Unit instance representing a train Returns TrainTypeSprite . Maps train attributes (engine, carriage, loaded) to the appropriate sprite type. private function getSpriteForUnit() Parameter Type Description unit UnitView Unit instance Returns ImageBitmap | null . Retrieves the ImageBitmap for a given unit, handling train types via trainTypeToSpriteType() . Returns null if no sprite is loaded. public function isSpriteReady() Parameter Type Description unit UnitView Unit instance Returns boolean . Indicates whether the sprite for the unit is loaded and ready for rendering. public function colorizeCanvas() Parameter Type Description source CanvasImageSource & { width: number; height: number } Source image to colorize colorA Colord Territory color replacement for light gray pixels colorB Colord Border color replacement for dark gray pixels colorC Colord Spawn highlight color replacement for medium gray pixels Returns HTMLCanvasElement . Creates a new canvas, draws the source image, and replaces grayscale pixels with the provided colors. private function computeSpriteKey() Parameter Type Description unit UnitView Unit instance territoryColor Colord Territory color used for coloring borderColor Colord Border color used for coloring Returns string . Computes a unique key for caching colorized sprites based on unit, owner, train type, and colors. public function getColoredSprite() Parameter Type Description unit UnitView Unit instance to render theme Theme Theme providing spawn highlight color customTerritoryColor? Colord Optional custom territory color customBorderColor? Colord Optional custom border color Returns HTMLCanvasElement . Retrieves or generates a colorized sprite canvas for the unit using colorizeCanvas() . Uses coloredSpriteCache for performance. Throws an error if the sprite is unavailable. See also: function colorizeCanvas() , function getSpriteForUnit() TransformHandler.ts Constants Name Type Description GOTO_INTERVAL_MS number Interval in milliseconds for camera movement updates (default 16ms). CAMERA_MAX_SPEED number Maximum speed for camera movement. CAMERA_SMOOTHING number Smoothing factor for camera movement interpolation. class TransformHandler Handles camera transformations including zooming, panning, centering, and smooth movements within a game viewport. Properties: | Name | Type | Description | | ------------------ | --------------- | ------------------------------------------------------------- | ---------------------------------------- | | scale | number | Current zoom level. Defaults to 1.8. | | _boundingRect | DOMRect | Current canvas bounding rectangle. | | offsetX | number | Horizontal camera offset. | | offsetY | number | Vertical camera offset. | | lastGoToCallTime | number | null | Timestamp of the last camera goTo call. | | target | Cell | null | Current target cell for camera movement. | | intervalID | NodeJS.Timeout | null | Interval ID for smooth camera movement. | | changed | boolean | Tracks if the camera transform has changed since last update. | public constructor constructor() Parameter Type Description game GameView The game view instance. eventBus EventBus Event bus to listen for input and camera events. canvas HTMLCanvasElement Canvas element for the game viewport. Initializes the camera transform handler and registers event listeners. public function updateCanvasBoundingRect() Returns void . Updates the internal _boundingRect based on the current canvas size. public function boundingRect() Returns DOMRect . Retrieves the current canvas bounding rectangle. public function width() Returns number . Width of the canvas. public function hasChanged() Returns boolean . Indicates whether the camera transform has changed. public function resetChanged() Returns void . Resets the changed flag. public function handleTransform() Parameter Type Description context CanvasRenderingContext2D Rendering context to apply the transformation to. Returns void . Applies zoom and pan transformations to the canvas context, disabling image smoothing for pixelated effect. public function worldToScreenCoordinates() Parameter Type Description cell Cell Game world cell to convert. Returns { x: number; y: number } . Converts world coordinates to screen coordinates. public function screenToWorldCoordinates() Parameter Type Description screenX number X-coordinate on screen. screenY number Y-coordinate on screen. Returns Cell . Converts screen coordinates to world coordinates. public function screenBoundingRect() Returns [Cell, Cell] . Returns top-left and bottom-right cells currently visible on the screen. public function isOnScreen() Parameter Type Description cell Cell Cell to check. Returns boolean . Determines if a cell is within the current camera view. public function screenCenter() Returns { screenX: number; screenY: number } . Computes the screen coordinates of the viewport center. public function onGoToPlayer() Parameter Type Description event GoToPlayerEvent Event containing player to center on. Returns void . Initiates smooth camera movement to the player's position. public function onGoToPosition() Parameter Type Description event GoToPositionEvent Event containing world coordinates to center on. Returns void . Initiates smooth camera movement to the specified position. public function onGoToUnit() Parameter Type Description event GoToUnitEvent Event containing unit to center on. Returns void . Initiates smooth camera movement to the unit's last tile. public function centerCamera() Returns void . Centers the camera on the local player's position. private function goTo() Returns void . Moves the camera smoothly towards the target cell, respecting maximum speed and smoothing constraints. Clears target once reached. public function onZoom() Parameter Type Description event ZoomEvent Event containing zoom delta and mouse coordinates. Returns void . Adjusts camera scale and offsets to zoom around a point. Clamps scale and UIState.ts interface UIState Represents the current state of the user interface related to game actions. | Name | Type | Description | | ---------------- | --------- | ---------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- | | attackRatio | number | Ratio used for attacks, e.g., proportion of available units to deploy. | | ghostStructure | UnitType | null | Optional unit type representing a ghosted structure in the UI, or null if none is selected. | ./fx/ConquestFx.ts public function conquestFxFactory() Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated conquest sprites. conquest ConquestUpdate Update containing conquest information such as gold and conquered player ID. game GameView Game view instance providing player positions. Returns Fx[] . Generates a list of visual effects representing a conquest event, including: Animated conquest sprite with fade effect. Text displaying gold gained, positioned near the conquered player's location. See also: class SpriteFx , class FadeFx , class TextFx , class AnimatedSpriteLoader ./fx/Fx.ts interface Fx Represents a visual effect in the game. public function renderTick() Parameter Type Description duration number Time elapsed since the last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context used for rendering the effect. Returns boolean . Indicates whether the effect is still active ( true ) or has finished ( false ). enum FxType Enumerates types of effects available in the game. Name Description MiniFire Small fire effect MiniSmoke Small smoke effect MiniBigSmoke Large smoke effect MiniSmokeAndFire Combined smoke and fire effect MiniExplosion Small explosion effect UnitExplosion Explosion effect for units BuildingExplosion Explosion effect for buildings SinkingShip Sinking ship effect Nuke Nuclear explosion effect SAMExplosion Surface-to-air missile explosion effect UnderConstruction Effect for under-construction structures Dust Dust effect Conquest Conquest effect Tentacle Tentacle effect Shark Shark effect Bubble Bubble effect Tornado Tornado effect ./fx/NukeArea.ts class NukeAreaFx Represents a visual effect showing a nuclear explosion area with inner and outer circles. Implements: interface Fx Properties: Name Type Description lifeTime number Time elapsed since effect started. ended boolean Indicates whether the effect has been marked for fade-out. endAnimationDuration number Duration of fade-out in milliseconds. startAnimationDuration number Duration of start animation in milliseconds. innerDiameter number Diameter of the inner circle. outerDiameter number Diameter of the outer circle. offset number Current dash offset for rotating outer circle. dashSize number Length of dashes for outer circle stroke. rotationSpeed number Rotation speed of outer dashed circle in pixels per second. baseAlpha number Base transparency for the effect. public constructor constructor() Parameter Type Description x number X-coordinate of effect center. y number Y-coordinate of effect center. magnitude NukeMagnitude Nuke magnitude defining inner and outer diameters. Initializes a nuke area effect with scaling and dashed rotation for the outer circle. public function end() Returns void . Marks the effect for fade-out, resetting lifeTime for end animation. public function renderTick() Parameter Type Description frameTime number Time elapsed since last render tick in milliseconds. ctx CanvasRenderingContext2D Canvas context to render the effect. Returns boolean . Renders the nuke area effect for this tick. Returns true if the effect is still active, false if finished. Draws inner and outer circles with alpha blending and animated outer dash rotation. See also: interface Fx , type NukeMagnitude ./fx/NukeFx.ts class ShockwaveFx Represents a shockwave effect as a growing white circle for nuclear explosions. Implements: interface Fx Properties: Name Type Description lifeTime number Time elapsed since effect started. x number X-coordinate of the shockwave center. y number Y-coordinate of the shockwave center. duration number Duration of the shockwave in milliseconds. maxRadius number Maximum radius the shockwave can reach. public constructor constructor() Parameter Type Description x number X-coordinate of effect center. y number Y-coordinate of effect center. duration number Duration of the shockwave in milliseconds. maxRadius number Maximum radius of the shockwave. public function renderTick() Parameter Type Description frameTime number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context to render the effect. Returns boolean . Renders the shockwave for the current tick. Returns true if the effect is still active, false if finished. private function addSpriteInCircle() Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated sprites. x number Center X-coordinate for spawning sprites. y number Center Y-coordinate for spawning sprites. radius number Radius of the spawn circle. num number Number of sprites to spawn. type FxType Type of effect to spawn. result Fx[] Array to push spawned Fx instances into. game GameView Game view instance for validating spawn positions. Returns void . Spawns num effects of type randomly within a circular area, validating coordinates and terrain. public function nukeFxFactory() Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated nuke sprites. x number X-coordinate of nuke center. y number Y-coordinate of nuke center. radius number Radius for shockwave and debris placement. game GameView Game view instance for terrain checks. Returns Fx[] . Generates all visual effects for a nuclear explosion, including: Central explosion sprite. Shockwave ( ShockwaveFx ). Randomized debris and desolation sprites using addSpriteInCircle . See also: class SpriteFx , class FadeFx , interface Fx , enum FxType , class ShockwaveFx , class AnimatedSpriteLoader ./fx/SpriteFx.ts class MoveSpriteFx Moves an existing SpriteFx instance from its current position to a target position over time, optionally fading in and out. Implements: interface Fx Properties: Name Type Description originX number Initial X-coordinate of the sprite. originY number Initial Y-coordinate of the sprite. fxToMove SpriteFx The sprite to move. toX number Target X-coordinate. toY number Target Y-coordinate. fadeIn number Optional fade-in fraction (default 0.1). fadeOut number Optional fade-out fraction (default 0.9). public constructor constructor() Parameter Type Description fxToMove SpriteFx The sprite to move. toX number Target X-coordinate. toY number Target Y-coordinate. fadeIn? number Optional fade-in fraction. fadeOut? number Optional fade-out fraction. public function renderTick() Parameter Type Description duration number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Updates the sprite position and renders it with fade-in/out transparency. Returns false when animation ends. class FadeFx Fades an existing SpriteFx instance in and out over time. Implements: interface Fx Properties: Name Type Description fxToFade SpriteFx Sprite to fade. fadeIn number Fraction of duration for fade-in. fadeOut number Fraction of duration for fade-out. public constructor constructor() Parameter Type Description fxToFade SpriteFx Sprite to fade. fadeIn number Fraction of duration to fade in. fadeOut number Fraction of duration to fade out. public function renderTick() Parameter Type Description duration number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Renders the sprite with computed transparency based on fade-in/out. Returns false when animation ends. class SpriteFx Animated sprite effect that can be optionally colored based on owner and theme. Implements: interface Fx Properties: | Name | Type | Description | | ---------------- | --------------- | ------------------------------------------------------------------ | ------------------------------- | | animatedSprite | AnimatedSprite | null | The underlying animated sprite. | | elapsedTime | number | Time elapsed since animation started. | | duration | number | Duration of animation in milliseconds. | | waitToTheEnd | boolean | Whether to wait for sprite lifetime instead of specified duration. | | x | number | X-coordinate of sprite position. | | y | number | Y-coordinate of sprite position. | public constructor constructor() Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader to create animated sprite. x number Initial X-coordinate. y number Initial Y-coordinate. fxType FxType Type of effect. duration? number Optional duration for the effect. owner? PlayerView Optional owner to colorize sprite. theme? Theme Optional theme for coloring. public function renderTick() Parameter Type Description frameTime number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Updates the animated sprite and draws it. Returns false if the animation has finished. public function getElapsedTime() Returns number . The elapsed time since the animation started. public function getDuration() Returns number . The total duration of the animation. See also: interface Fx , class AnimatedSprite , class AnimatedSpriteLoader , enum FxType , class FadeFx ./fx/TargetFx.ts class TargetFx Implements a pulsing/red targeting effect on the canvas, optionally persistent. Properties: Name Type Description lifeTime number Tracks elapsed time of the effect. ended boolean Marks whether the effect is in fade-out phase. endFade number Duration of fade-out in milliseconds. offset number Offset for dash rotation animation. rotationSpeed number Rotation speed in pixels per second. radius number Inner circle radius. x number X-coordinate of the target effect. y number Y-coordinate of the target effect. duration number Total duration in ms if not persistent. Optional; defaults to 0 . persistent boolean If true , effect loops indefinitely until end() is called. Optional; defaults to false . public function end() Returns void . Triggers the fade-out for persistent effects. Resets lifeTime to 0 for fade timing. public function renderTick() Parameter Type Description frameTime number Elapsed time since last frame in milliseconds. ctx CanvasRenderingContext2D Canvas rendering context. Returns boolean . true if the effect is still active and should continue rendering; false if the effect has ended. Behavior: Updates internal lifeTime and computes alpha for fade-in, fade-out, or pulsing. Draws two concentric circles with dashed stroke animation. Outer circle dashes rotate in opposite directions relative to the inner circle. ./fx/TextFx.ts class TextFx Displays floating text with fade-out and vertical rise over a duration. Properties: Name Type Description lifeTime number Tracks elapsed time since creation. text string Text content to display. x number X-coordinate of text origin. y number Y-coordinate of text origin. duration number Total display duration in milliseconds. riseDistance number Vertical rise in pixels during the effect. Optional; defaults to 30 . font string CSS font string for text rendering. Optional; defaults to \"11px sans-serif\" . color { r: number; g: number; b: number } RGB color of the text. Optional; defaults to white {r:255,g:255,b:255} . public function renderTick() Parameter Type Description frameTime number Elapsed time since last frame in milliseconds. ctx CanvasRenderingContext2D Canvas rendering context. Returns boolean . true if the text is still visible; false once the duration has elapsed. Behavior: Increments lifeTime . Computes vertical position based on elapsed time and riseDistance . Computes fade-out alpha based on elapsed time. Draws the text centered at (x, currentY) with computed alpha. ./fx/Timeline.ts class Timeline Schedules and executes delayed tasks in sequence. Properties: Name Type Description tasks TimedTask[] Array of scheduled tasks with delay and execution state. timeElapsed number Total elapsed time since timeline start. public function add() Parameter Type Description delay number Delay in milliseconds before the action is triggered. action () => void Callback to execute after delay. Returns Timeline . Adds a task to the timeline and allows chaining. public function update() Parameter Type Description dt number Time delta in milliseconds since last update. Returns void . Updates the timeline, triggers any tasks whose delay has elapsed. public function isComplete() Returns boolean . true if all tasks have been triggered; otherwise false . Internal type TimedTask Name Type Description delay number Milliseconds after timeline start to trigger the action. action () => void Function to execute when delay elapses. triggered boolean Tracks whether the task has already executed. ./fx/UnitExplosionFx.ts class UnitExplosionFx Implements a timed explosion effect composed of multiple SpriteFx instances. Properties: Name Type Description timeline Timeline Manages the scheduling of multiple explosions over time. explosions Fx[] List of active explosion effects. public constructor UnitExplosionFx() Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated sprite resources. x number X-coordinate of the central explosion point. y number Y-coordinate of the central explosion point. game GameView Reference to the game view for coordinate validation. Initializes a Timeline with three explosion events at offsets relative to (x, y) . public function renderTick() Parameter Type Description frameTime number Time elapsed since last render tick in milliseconds. ctx CanvasRenderingContext2D Rendering context for drawing explosions. Returns boolean . Returns true if the explosion effect is still active; false if all explosions have completed. Behavior: Updates the timeline and triggers scheduled explosions. Renders all active SpriteFx explosions. Returns true until all explosions are done and the timeline is complete. ./layers/AdTimer.ts class AdTimer Manages timed removal of sticky advertisements based on game ticks. Implements: Layer Properties: Name Type Description isHidden boolean Tracks whether ads have been hidden. g GameView Reference to the game view instance. public constructor AdTimer() Parameter Type Description g GameView Game view instance used to track ticks and configuration. public function init() Returns void . Initializes the layer. Currently a placeholder with no behavior. public async function tick() Returns Promise<void> . Checks whether the sticky ads should be removed based on game ticks. If the ads are due to be removed, it calls window.fusetag.destroySticky() and sets isHidden to true . Logs action to the console. ./layers/AlertFrame.ts class AlertFrame Displays a visual alert border when the current player is betrayed in-game. Implements interface Layer . Properties: Name Type Description game GameView The game instance associated with this alert layer. userSettings UserSettings Stores user preferences for alert visibility. isActive boolean Internal state indicating if the alert is currently active. animationTimeout number | null Timeout ID for controlling alert animation lifecycle. public constructor constructor() Initializes the alert frame and injects the alert CSS into the document if not already present. Returns AlertFrame . public function init() Returns void . Initializes event listeners for BrokeAllianceUpdate events from the game. public function tick() Returns void . Called each frame to check for BrokeAllianceUpdate events. Triggers alerts when the current player is betrayed. public function shouldTransform() Returns boolean . Indicates that the alert frame is not affected by camera transformations. Always returns false . private function onBrokeAllianceUpdate() Parameter Type Description update BrokeAllianceUpdate Update information about the broken alliance event. Returns void . Activates the alert if the current player is the betrayed player. See also: function activateAlert() private function activateAlert() Returns void . Sets isActive to true and requests a render update if user settings allow alert frames. public function dismissAlert() Returns void . Deactivates the alert, clears any running animation timeout, and requests a render update. public function render() Returns TemplateResult . Renders the alert border using HTML and CSS if isActive is true. Automatically dismisses the alert after animation ends. ./layers/BuildMenu.ts interface BuildItemDisplay Represents an item displayed in the build menu. Name Type Description unitType UnitType The type of unit or structure icon string URL or path to the icon image description? string Optional translation key for the item's description key? string Optional translation key for the item's name countable? boolean Optional flag indicating whether to show unit count const buildTable A 2D array of BuildItemDisplay representing the layout of the build menu. const flattenedBuildTable Flattened version of buildTable for easy iteration. class BuildMenu Displays and manages the in-game build menu, allowing players to build or upgrade units and structures. Implements interface Layer . Properties: Name Type Description game GameView The game instance associated with this menu eventBus EventBus Event bus for listening to and emitting input/game events clickedTile TileRef Tile that was clicked to open the build menu playerActions PlayerActions | null Actions available to the player for the clicked tile filteredBuildTable BuildItemDisplay[][] Current filtered build table after removing disabled units transformHandler TransformHandler Handles screen-to-world coordinate conversions _hidden boolean Internal state controlling menu visibility public function init() Returns void . Sets up event listeners to open, close, or hide the build menu based on game events. public function tick() Returns void . Called each frame to refresh the menu if it is visible. public function canBuildOrUpgrade() Parameter Type Description item BuildItemDisplay The item to check for build or upgrade capability Returns boolean . Returns true if the current player can build or upgrade the specified item. public function cost() Parameter Type Description item BuildItemDisplay The item to get the cost for Returns Gold . Returns the gold cost to build or upgrade the item, or 0 if unavailable. public function count() Parameter Type Description item BuildItemDisplay The item to count units for Returns string . Returns the number of units of the specified type the player controls. Returns \"?\" if unknown. public function sendBuildOrUpgrade() Parameter Type Description buildableUnit BuildableUnit The unit or structure to build or upgrade tile TileRef The tile on which to perform the action Returns void . Emits the appropriate event to build or upgrade the unit and hides the menu. public function render() Returns TemplateResult . Renders the build menu UI with rows of build buttons, icons, names, descriptions, costs, and unit counts. Disabled buttons are styled appropriately. public function hideMenu() Returns void . Hides the build menu and triggers a render update. public function showMenu() Parameter Type Description clickedTile TileRef Tile that was clicked to open the menu Returns void . Shows the build menu at the clicked tile and refreshes available actions. private function refresh() Returns void . Updates playerActions for the clicked tile and filters the build table for enabled units. private function getBuildableUnits() Returns BuildItemDisplay[][] . Returns a filtered build table removing disabled units. getter isVisible Returns boolean . Returns true if the build menu is currently visible. ./layers/ChatDisplay.ts interface ChatEvent Represents a single chat message event in the display. Name Type Description description string The message content unsafeDescription? boolean Optional flag indicating whether HTML should be rendered unsafely createdAt number Timestamp or tick count when the message was created highlight? boolean Optional flag to highlight the message class ChatDisplay Displays in-game chat messages and updates dynamically. Implements interface Layer . Properties: Name Type Description eventBus EventBus Event bus for receiving game and input events game GameView The game instance for accessing player and update data active boolean Indicates whether the chat display is active _hidden boolean Internal state controlling visibility of the chat UI newEvents number Count of new chat events while hidden chatEvents ChatEvent[] Array of chat events displayed in the chat UI private function toggleHidden() Returns void . Toggles _hidden state and resets newEvents if chat is being shown. private function addEvent() Parameter Type Description event ChatEvent The chat event to add Returns void . Adds a chat event to chatEvents and increments newEvents if hidden. private function removeEvent() Parameter Type Description index number Index of the chat event to remove Returns void . Removes the chat event at the given index. public function onDisplayMessageEvent() Parameter Type Description event DisplayMessageUpdate Game update event containing chat message information Returns void . Adds a new chat event if it is of type MessageType.CHAT and relevant to the current player. public function init() Returns void . Placeholder for initialization logic. public function tick() Returns void . Processes game updates for display events, filters chat messages, trims to the last 100 messages, and triggers a render update. private function getChatContent() Parameter Type Description chat ChatEvent Chat event to render Returns string | DirectiveResult<typeof UnsafeHTMLDirective> . Returns sanitized HTML using unsafeHTML for messages marked as unsafeDescription , otherwise returns plain text. public function render() Returns TemplateResult . Renders the chat UI, including hide/show buttons, new event counter, and a table of chat messages. Handles CSS classes based on _hidden and newEvents . public function createRenderRoot() Returns this . Disables shadow DOM and renders directly into the host element. ./layers/ChatIntegration.ts class ChatIntegration Integrates quick chat and modal chat functionality for in-game communication. Properties: Name Type Description ctModal ChatModal Reference to the chat modal DOM element game GameView The game instance used to determine player state eventBus EventBus Event bus for sending quick chat events public constructor constructor() Parameter Type Description game GameView Game instance eventBus EventBus Event bus instance Returns ChatIntegration . Initializes the chat modal and ensures the element exists in the DOM. Throws an error if the modal is missing. public function setupChatModal() Parameter Type Description sender PlayerView The player sending chat messages recipient PlayerView The player receiving chat messages Returns void . Sets the sender and recipient on the chat modal. public function createQuickChatMenu() Parameter Type Description recipient PlayerView The player who will receive the quick chat messages Returns MenuElement[] . Generates a hierarchical menu of quick chat phrases grouped by category. Each menu item contains display text, color, tooltip, and an action that either opens the chat modal or sends a quick chat event. public function shortenText() Parameter Type Description text string The text string to shorten maxLength? number Optional maximum length for the text. Defaults to 15. Returns string . Truncates the text and appends ... if it exceeds maxLength . ./layers/ChatModal.ts type QuickChatPhrase Represents a single quick chat phrase. Property Type Description key string Unique key identifier for the phrase requiresPlayer boolean Indicates if the phrase requires a player selection type QuickChatPhrases Mapping of category IDs to arrays of QuickChatPhrase . class ChatModal Manages the chat modal UI, including phrase selection, player selection, and sending quick chat messages. Properties: Name Type Description modalEl HTMLElement & { open: () => void; close: () => void; } Reference to the underlying modal element players PlayerView[] List of players available for quick chat selection playerSearchQuery string Current search query for filtering players previewText string | null Text preview of the selected phrase with substitutions requiresPlayerSelection boolean Indicates if the current phrase requires player selection selectedCategory string | null ID of the currently selected category selectedPhraseText string | null Display text of the currently selected phrase selectedPhraseTemplate string | null Template string of the selected phrase before substitutions selectedQuickChatKey string | null Full key of the selected phrase selectedPlayer PlayerView | null Player selected for substitution in the phrase recipient PlayerView Player receiving the chat message sender PlayerView Player sending the chat message eventBus EventBus Event bus used to emit SendQuickChatEvent s g GameView Game instance for player information quickChatPhrases Record<string, Array<{ text: string; requiresPlayer: boolean }>> Predefined phrases per category categories Array<{ id: string }> List of available chat categories public function initEventBus() Parameter Type Description eventBus EventBus Event bus instance to listen for CloseViewEvent Returns void . Sets up event listeners for modal closing. public function open() Parameter Type Description sender? PlayerView Optional sender of the message recipient? PlayerView Optional recipient of the message Returns void . Opens the modal and initializes player list if sender and recipient are provided. public function close() Returns void . Resets modal state and closes the modal. public function setRecipient() Parameter Type Description value PlayerView Player to set as recipient Returns void . Updates the recipient property. public function setSender() Parameter Type Description value PlayerView Player to set as sender Returns void . Updates the sender property. public function openWithSelection() Parameter Type Description categoryId string Category ID to preselect phraseKey string Key of the phrase to preselect sender? PlayerView Optional sender recipient? PlayerView Optional recipient Returns void . Opens the modal with the given category and phrase selected. private function selectCategory() Parameter Type Description categoryId string ID of the category to select Returns void . Updates modal state to reflect selected category. private function selectPhrase() Parameter Type Description phrase QuickChatPhrase Phrase to select Returns void . Updates modal state with selected phrase and determines if player selection is required. private function selectPlayer() Parameter Type Description player PlayerView Player selected for phrase substitution Returns void . Updates modal state to include the selected player. private function sendChatMessage() Returns void . Emits a SendQuickChatEvent using the sender, recipient, selected phrase key, and optional selected player ID. Resets modal state. private function onPlayerSearchInput() Parameter Type Description e Event Input event from the player search box Returns void . Updates the player search query and triggers re-render. private function getSortedFilteredPlayers() Returns PlayerView[] . Returns the list of players sorted alphabetically and filtered based on the current search query. private function getFullQuickChatKey() Parameter Type Description category string Category ID phraseKey string Phrase key Returns string . Concatenates category and phrase key into a full quick chat key. private function renderPhrasePreview() Parameter Type Description phrase { key: string } Phrase object Returns string . Returns the translated text of the phrase for preview purposes. private function getPhrasesForCategory() Parameter Type Description categoryId string Category ID Returns QuickChatPhrase[] . Returns the list of phrases for the given category. render(): import(\"lit\").TemplateResult ./layers/ControlPanel.ts class ControlPanel Represents the in-game control panel overlay, displaying troop counts, gold, and attack ratio. Implements interface Layer . Properties: Name Type Description game GameView Reference to the current game view. clientID ClientID Identifier for the client/player. eventBus EventBus Event bus for listening and dispatching game events. uiState UIState Tracks the UI state, including attack ratio. attackRatio number Current attack ratio (0\u20131). Managed with state decorator. _maxTroops number Maximum troops for the player. Managed with state decorator. troopRate number Rate of troop increase per tick. Managed with state decorator. _troops number Current number of troops. Managed with state decorator. _isVisible boolean Whether the control panel is visible. Managed with state decorator. _gold Gold Player's current gold. Managed with state decorator. _troopRateIsIncreasing boolean Indicates if troop rate is increasing. _lastTroopIncreaseRate number Stores last tick's troop increase rate. public function init() Returns void . Initializes the control panel settings from local storage and sets up event listeners for attack ratio changes via AttackRatioEvent . Updates the UI state when the attack ratio changes. public function tick() Returns void . Updates the control panel each game tick. Shows or hides the panel based on player status, updates troop count, troop rate, maximum troops, and gold, and triggers a UI re-render. Calls updateTroopIncrease() every 5 ticks. private function updateTroopIncrease() Returns void . Compares the current troop increase rate with the previous tick and updates _troopRateIsIncreasing to reflect whether it is increasing. Updates _lastTroopIncreaseRate . public function onAttackRatioChange() Parameter Type Description newRatio number The new attack ratio (0\u20131). Returns void . Updates uiState.attackRatio to match newRatio . public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Canvas context to render on. Returns void . Renders any necessary canvas elements for the control panel. Currently empty. public function shouldTransform() Returns boolean . Indicates whether the layer should apply canvas transformations. Returns false . public function setVisibile() Parameter Type Description visible boolean Whether the control panel should be visible. Returns void . Sets _isVisible and requests a UI update. public function render() Returns import(\"lit\").TemplateResult . Renders the control panel HTML using LitElement templating. Includes troop and gold display, attack ratio slider, and dynamic styling based on state variables. public function createRenderRoot() Returns HTMLElement . Overrides LitElement method to disable shadow DOM, allowing global Tailwind CSS styling. ./layers/EmojiTable.ts class EmojiTable Displays a floating emoji selection table that can send emoji intents to players. Properties: Name Type Description isVisible boolean Reactive state indicating whether the emoji table is visible. transformHandler TransformHandler Handles screen-to-world coordinate transformations. game GameView The current game view instance. public function initEventBus() Parameter Type Description eventBus EventBus Event bus to listen for ShowEmojiMenuEvent and CloseViewEvent. Returns void . Registers event listeners to show or hide the emoji table and handle emoji selection. Handles validation of target player and tile ownership. See also: class SendEmojiIntentEvent , class TerraNulliusImpl private property onEmojiClicked Name Type Description onEmojiClicked (emoji: string) => void Callback function invoked when an emoji is clicked. Initially a no-op. public function render() Returns TemplateResult | null . Generates the HTML content for the emoji table using Lit html . Returns null if isVisible is false. Includes styling and event handlers for interaction. public function hideTable() Returns void . Hides the emoji table and requests a DOM update. public function showTable() Parameter Type Description oneEmojiClicked (emoji: string) => void Callback executed when an emoji is clicked. Returns void . Shows the emoji table and assigns the click callback. public function createRenderRoot() Returns HTMLElement . Overrides LitElement behavior to disable shadow DOM and allow Tailwind CSS styling. ./layers/EventsDisplay.ts class EventsDisplay Manages the display of in-game events, chat messages, alliance updates, and attacks. Implements the Layer interface. Properties: Name Type Description eventBus EventBus Event bus for emitting and listening to game-related events. game GameView Current game view instance. active boolean Indicates if the display is active. events GameEvent[] List of events currently shown in the display. alliancesCheckedAt Map<number, Tick> Tracks last checked tick for each alliance by ID. incomingAttacks AttackUpdate[] Tracks incoming attacks. outgoingAttacks AttackUpdate[] Tracks outgoing attacks. outgoingLandAttacks AttackUpdate[] Tracks outgoing land-based attacks. outgoingBoats UnitView[] Tracks transport ship units. _hidden boolean Whether the display is currently hidden. _isVisible boolean Visibility of the events display panel. newEvents number Counter for new events when hidden. latestGoldAmount bigint | null Tracks last gold change for animation. goldAmountAnimating boolean Controls animation state for gold change. goldAmountTimeoutId ReturnType<typeof setTimeout> | null Timeout reference for gold animation. eventsFilters Map<MessageCategory, boolean> Tracks which categories are filtered out. public function init() Returns void . Initializes the layer (currently empty placeholder). public function tick() Returns void . Updates event display state, filters expired events, updates incoming/outgoing attacks, and requests UI update. public function disconnectedCallback() Returns void . Cleans up resources like gold animation timeout when the element is removed from DOM. public function shouldTransform() Returns boolean . Returns false to indicate this layer does not require coordinate transformation. public function renderLayer() Returns void . Placeholder for Layer interface; actual rendering is handled in render() . private function renderButton() Parameter Type Description options object Options for rendering a button including content, click handler, CSS classes, disabled state, translation, and visibility. Returns TemplateResult . Generates a button with specified content and options. private function renderToggleButton() Parameter Type Description src string Image source for the toggle button. category MessageCategory Event category to toggle. Returns TemplateResult . Renders an event filter toggle button. private function toggleHidden() Returns void . Toggles the _hidden state and resets new events counter. private function toggleEventFilter() Parameter Type Description filterName MessageCategory The category of events to toggle filter state. Returns void . Updates the event filter and refreshes display. private function checkForAllianceExpirations() Returns void . Checks player's alliances for imminent expiration and adds events to notify the player. private function addEvent() Parameter Type Description event GameEvent Event object to add to the display. Returns void . Adds the event to the display and increments new event counter if hidden. private function removeEvent() Parameter Type Description index number Index of the event to remove. Returns void . Removes the event at the given index. Event Handlers (onXEvent) Each onXEvent function handles a specific game update type and adds corresponding GameEvent s: Function Parameter Description onDisplayMessageEvent DisplayMessageUpdate Handles standard messages including gold changes. onDisplayChatEvent DisplayChatMessageUpdate Handles chat messages and formatting. onAllianceRequestEvent AllianceRequestUpdate Handles incoming alliance requests. onAllianceRequestReplyEvent AllianceRequestReplyUpdate Handles replies to alliance requests. onBrokeAllianceEvent BrokeAllianceUpdate Handles events where alliances are broken. onAllianceExpiredEvent AllianceExpiredUpdate Handles notifications of alliance expiration. onTargetPlayerEvent TargetPlayerUpdate Handles attack requests between players. onEmojiMessageEvent EmojiUpdate Handles emoji messages sent between players. onUnitIncomingEvent UnitIncomingUpdate Handles incoming unit attacks. Private helper functions for rendering Function Description getEventDescription Returns event description; uses unsafeHTML if unsafeDescription is true. attackWarningOnClick Handles click on an incoming attack, navigating to attacker or position. renderIncomingAttacks Renders incoming attacks as buttons. renderOutgoingAttacks Renders outgoing attacks with cancel buttons. renderOutgoingLandAttacks Renders outgoing land attacks with cancel buttons. renderBoats Renders transport units with cancel buttons. public function render() Returns TemplateResult . Renders the events panel including toggle buttons, events table, incoming/outgoing attacks, and animation effects. public function createRenderRoot() Returns HTMLElement . Disables shadow DOM to allow global styling (Tailwind CSS). ./layers/FPSDisplay.ts class FPSDisplay Displays a draggable FPS overlay, showing current FPS, 60-second average, and frame time. Implements the Layer interface. Properties: Name Type Description eventBus EventBus Event bus for listening to performance overlay toggle events. userSettings UserSettings Stores user preferences including performance overlay visibility. currentFPS number Current FPS calculated from recent frame times. averageFPS number Average FPS over the last 60 seconds. frameTime number Duration of the last frame in milliseconds. isVisible boolean Indicates whether the FPS overlay is visible. isDragging boolean Indicates whether the overlay is being dragged. position { x: number; y: number } Overlay position in pixels. public function init() Returns void . Registers an event listener for TogglePerformanceOverlayEvent to toggle performance overlay visibility in user settings. public function setVisible() Parameter Type Description visible boolean Whether the FPS overlay should be shown Returns void . Updates the visibility state. private function handleClose() Returns void . Handles click on the close button and toggles performance overlay in user settings. private function handleMouseDown() Parameter Type Description e MouseEvent Mouse event triggered by user interaction Returns void . Initiates dragging unless the close button is clicked. private function handleMouseMove() Parameter Type Description e MouseEvent Mouse movement event during dragging Returns void . Updates the overlay position based on mouse movement, keeping it within viewport bounds. private function handleMouseUp() Returns void . Stops dragging and removes event listeners. public function updateFPS() Parameter Type Description frameDuration number Duration of the current frame (ms) Returns void . Updates current FPS, average FPS over 60 seconds, and frame time. Requests DOM update. public function shouldTransform() Returns boolean . Indicates whether the layer should be transformed; always returns false . private function getFPSColor() Parameter Type Description fps number FPS value to determine color Returns string . Returns a CSS class string based on FPS thresholds ( fps-good , fps-warning , fps-bad ). public function render() Returns TemplateResult . Generates HTML for the overlay with current FPS, average FPS, and frame time. Positions the overlay according to position and applies dragging style if isDragging is true. ./layers/FxLayer.ts class FxLayer Manages all visual effects (FX) on the game layer, including unit events, bonus events, nuke events, and environmental animations. Properties: Name Type Description canvas HTMLCanvasElement The canvas used for rendering FX. context CanvasRenderingContext2D 2D rendering context for the FX canvas. lastRandomEvent number Counter for random environmental FX. randomEventRate number Interval threshold for random FX events. lastRefresh number Timestamp of the last FX layer refresh. refreshRate number Interval threshold (ms) for redrawing FX. theme Theme Current theme configuration. animatedSpriteLoader AnimatedSpriteLoader Loads and caches animated sprites. allFx Fx[] List of active FX instances. boatTargetFxByUnitId Map<number, TargetFx> Persistent FX markers for transport ships by unit ID. nukeTargetFxByUnitId Map<number, NukeAreaFx> Persistent FX markers for nukes by unit ID. public constructor constructor() Parameter Type Description game GameView The game instance this FX layer belongs to. Initializes the FX layer, sets the theme from the game configuration, and prepares internal state. public function shouldTransform() Returns boolean . Determines whether the FX layer requires transformation; always returns true . public function tick() Returns void . Updates the FX layer state. Processes random events, boat targets, and all pending game updates (units, bonus events, railroad events, conquest events). Skips processing if FX layer is disabled in user settings. private function manageBoatTargetFx() Returns void . Removes FX markers for transport ships that have reached their target, retreated, or become inactive. private function createNukeTargetFxIfOwned() Parameter Type Description unit UnitView Unit to potentially assign a nuke target FX. Returns void . Creates a persistent nuke target FX for the current player or teammates if the unit is active and owned by the player or same team. public function onBonusEvent() Parameter Type Description bonus BonusEventUpdate Bonus event update from the game. Returns void . Displays textual FX for gold or troop bonuses for the current player only. public function addTextFx() Parameter Type Description text string Text to display. x number X-coordinate. y number Y-coordinate. Returns void . Adds a floating text FX at the specified location. public function randomEvent() Returns void . Generates random environmental FX (Shark, Bubble, Tornado, Tentacle, MiniSmoke) at random ocean locations. public function onUnitEvent() Parameter Type Description unit UnitView Unit triggering FX. Returns void . Dispatches FX handling based on the unit type (TransportShip, AtomBomb, MIRVWarhead, HydrogenBomb, Warship, Shell, Train, DefensePost, City, Port, MissileSilo, SAMLauncher, Factory). public function onShellEvent() Parameter Type Description unit UnitView Shell unit. Returns void . Generates mini explosion FX for inactive shell units that reached their target. public function onTrainEvent() Parameter Type Description unit UnitView Train unit. Returns void . Generates mini explosion FX for inactive trains that did not reach their target. public function onRailroadEvent() Parameter Type Description railroad RailroadUpdate Railroad event update. Returns void . Generates FX along railroad tiles based on a 1/3 chance per tile. public function onConquestEvent() Parameter Type Description conquest ConquestUpdate Conquest event update. Returns void . Displays FX and plays sound effect for conquests belonging to the current player. public function onWarshipEvent() Parameter Type Description unit UnitView Warship unit. Returns void . Generates explosion FX for inactive warships and adds a sinking ship sprite. public function onStructureEvent() Parameter Type Description unit UnitView Structure unit. Returns void . Adds building explosion FX for inactive structures. public function onNukeEvent() Parameter Type Description unit UnitView Nuclear unit. radius number Explosion radius. Returns void . Handles nuke impact, removing FX markers, and delegating to SAM interception or nuke explosion handlers. private function handleNukeExplosion() Parameter Type Description unit UnitView Nuclear unit. radius number Explosion radius. Returns void . Generates nuke explosion FX using nukeFxFactory . private function handleSAMInterception() Parameter Type Description unit UnitView Nuclear unit intercepted by SAM. Returns void . Generates SAM explosion and shockwave FX. public async function init() Returns Promise<void> . Initializes FX layer canvas and loads all animated sprites. public function redraw() Returns void . Prepares the canvas and context for rendering FX, disables image smoothing, and sets canvas dimensions to match the game. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Rendering context of the main game canvas. Returns void . Draws the FX layer onto the main game canvas if FX are enabled, refreshing periodically based on refreshRate . private function renderAllFx() Parameter Type Description context CanvasRenderingContext2D Rendering context. delta number Time since last render (ms). Returns void . Clears the FX canvas and renders all active FX. private function renderContextFx() Parameter Type Description duration number Duration since last render (ms). Returns void . Iterates through all FX, updating and removing inactive ones. ./layers/GameLeftSidebar.ts class GameLeftSidebar Manages the left sidebar in the game UI, displaying player team labels, leaderboard, and team statistics. Implements the Layer interface. Properties: Name Type Description isLeaderboardShow boolean Indicates whether the leaderboard is visible. isTeamLeaderboardShow boolean Indicates whether the team leaderboard is visible. isVisible boolean Indicates whether the sidebar is visible. isPlayerTeamLabelVisible boolean Indicates whether the player's team label is visible. playerTeam string \\| null Stores the player's team identifier. playerColor Colord Color associated with the player's team. game GameView Game view instance for accessing player and game state. _shownOnInit boolean Tracks whether the sidebar was initially shown on large screens. public function createRenderRoot() Returns this . Disables shadow DOM to allow global styles. public function init() Returns void . Initializes sidebar visibility, shows player team label if in a team game, and sets default visibility for large screens. public function tick() Returns void . Updates the sidebar state each game tick, including player team label, leaderboard visibility, and initial sidebar setup after spawn phase. private function toggleLeaderboard() Returns void . Toggles visibility of the main leaderboard. private function toggleTeamLeaderboard() Returns void . Toggles visibility of the team leaderboard. private getter isTeamGame() Returns boolean . Determines whether the current game mode is a team game. private function getTranslatedPlayerTeamLabel() Returns string . Retrieves the localized team label; falls back to the team identifier if no translation is found. public function render() Returns TemplateResult . Generates the sidebar HTML structure including team label, leaderboard buttons, and embedded leaderboard and team stats components. Applies dynamic visibility and styling based on state. ./layers/GameRightSidebar.ts class GameRightSidebar Manages the right sidebar in the game UI, including replay controls, pause/play functionality, timer display, settings, and exit actions. Implements the Layer interface. Properties: Name Type Description game GameView Game view instance for accessing player and game state. eventBus EventBus Event bus for emitting UI events. _isSinglePlayer boolean Indicates whether the game is single-player or a replay. _isReplayVisible boolean Indicates whether the replay panel is visible. _isVisible boolean Indicates whether the sidebar is visible. isPaused boolean Indicates whether the game is paused. timer number Tracks the game timer in seconds. hasWinner boolean Tracks whether a winner has been determined. public function createRenderRoot() Returns this . Disables shadow DOM to allow global styles. public function init() Returns void . Initializes the sidebar, sets _isSinglePlayer , visibility, and spawn phase state. public function tick() Returns void . Updates timer logic, checks for game winner, and handles spawn phase adjustments. private function secondsToHms() Parameter Type Description d number Number of seconds to convert. Returns string . Converts seconds to a human-readable format (h, m, s). Uses \"-\" as fallback for zero. private function toggleReplayPanel() Returns void . Toggles visibility of the replay panel and emits ShowReplayPanelEvent with the updated state and _isSinglePlayer flag. private function onPauseButtonClick() Returns void . Toggles the paused state and emits a PauseGameEvent . private function onExitButtonClick() Returns void . Handles exit logic, including player confirmation if alive, then redirects to the home page. private function onSettingsButtonClick() Returns void . Emits ShowSettingsModalEvent to display settings panel. public function render() Returns TemplateResult . Renders the sidebar HTML, including replay, pause/play, settings, exit buttons, and game timer. Applies dynamic visibility and styling based on state. private function maybeRenderReplayButtons() Returns TemplateResult . Conditionally renders replay and pause/play buttons if _isSinglePlayer or the game is a replay. ./layers/HeadsUpMessage.ts class HeadsUpMessage Displays a temporary spawn selection message during the game's spawn phase. Properties: Name Type Description game GameView The current game view instance. isVisible boolean Indicates whether the message is currently visible. Managed internally. public function createRenderRoot() Returns LitElement . Overrides LitElement's shadow DOM root creation to render into the light DOM, enabling external CSS styling. public function init() Returns void . Initializes the message by making it visible and requesting an update to render. public function tick() Returns void . Updates visibility based on the game state. Hides the message once the spawn phase ends. public function render() Returns TemplateResult . Renders the message element if isVisible is true . Uses translateText to display a localized prompt: \"choose_spawn\". See also: Layer interface ./layers/Layer.ts interface Layer Defines the lifecycle and rendering contract for all game layers. Layers can optionally implement these methods to manage state, rendering, and transformations. Optional Methods: Name Type Description init () => void Optional initialization logic for the layer. Called once when the layer is first set up. tick () => void Optional per-frame update logic. Called every game tick. renderLayer (context: CanvasRenderingContext2D) => void Optional rendering logic for the layer. Receives a canvas rendering context to draw to. shouldTransform () => boolean Optional indicator whether the layer should apply transformations like translation/scaling. Returns true or false . redraw () => void Optional method to refresh or re-initialize the layer's internal canvas or state. Called when the layer needs a complete redraw. Usage: Layers implementing this interface are managed by the game's rendering system. Methods are all optional, allowing flexible layer implementations that only override necessary behaviors. ./layers/Leaderboard.ts interface Entry Represents a single player entry in the leaderboard. Name Type Description name string Player's display name position number Player's position on the leaderboard score string Player's score as a formatted percentage gold string Player's gold formatted as string troops string Player's troops formatted as string isMyPlayer boolean Whether the entry corresponds to the current player isOnSameTeam boolean Whether the player is on the same team as the current player player PlayerView Reference to the PlayerView instance class GoToPlayerEvent Implements GameEvent . Event to navigate to a specific player. Parameter Type Description player PlayerView Player to navigate to Returns void . class GoToPositionEvent Implements GameEvent . Event to navigate to specific coordinates. Parameter Type Description x number X-coordinate y number Y-coordinate Returns void . class GoToUnitEvent Implements GameEvent . Event to navigate to a specific unit. Parameter Type Description unit UnitView Unit to navigate to Returns void . class Leaderboard Displays the game leaderboard and handles sorting, updating, and player navigation. Properties: Name Type Description game GameView | null Current game view instance eventBus EventBus | null Event bus for emitting player navigation events players Entry[] Array of leaderboard entries visible boolean Whether the leaderboard is visible showTopFive boolean Flag to show only the top five players _sortKey 'tiles' | 'gold' | 'troops' Current sort key _sortOrder 'asc' | 'desc' Current sort order public function createRenderRoot() Returns HTMLElement . Overrides LitElement to use light DOM for Tailwind styling. public function init() Returns void . Placeholder initialization method. public function tick() Returns void . Updates the leaderboard every 10 ticks if visible. private function setSort() Parameter Type Description key 'tiles' | 'gold' | 'troops' Sorting key to apply Returns void . Updates the sort key and order, then refreshes the leaderboard. private function updateLeaderboard() Returns void . Computes the current leaderboard entries based on game state, sort order, and whether to show only top five. Ensures current player is included if not in top five. See also: interface Entry private function handleRowClickPlayer() Parameter Type Description player PlayerView Player clicked on the leaderboard row Returns void . Emits GoToPlayerEvent via the event bus. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Canvas rendering context Returns void . Placeholder for rendering the leaderboard layer. public function shouldTransform() Returns boolean . Indicates whether the leaderboard layer requires canvas transformations. Always returns false. public function render() Returns TemplateResult . Renders the leaderboard HTML including header row, sortable columns, and entries. Handles clicks to sort and toggle top-five visibility. private function formatPercentage() Parameter Type Description value number Value between 0 and 1 to format as percentage Returns string . Formats a number as a percentage string with one decimal place. Returns 0% if the input is NaN. ./layers/MainRadialMenu.ts class MainRadialMenu Manages the main radial menu for player actions, including build menus, emoji table, chat integration, and UI updates. Properties: Name Type Description radialMenu RadialMenu Core radial menu instance handling menu display and interactions playerActionHandler PlayerActionHandler Handles player actions triggered from the radial menu chatIntegration ChatIntegration Integrates chat functionality for interacting with other players clickedTile TileRef | null The last clicked tile for which the menu was opened constructor Parameter Type Description eventBus EventBus Event bus for subscribing and emitting events game GameView Current game view instance transformHandler TransformHandler Converts screen coordinates to world coordinates emojiTable EmojiTable Reference to the emoji table component buildMenu BuildMenu Reference to the build menu component uiState UIState UI state management instance playerPanel PlayerPanel Reference to the player panel component Initializes the radial menu, player action handler, and chat integration. public function init() Returns void . Sets up the radial menu and subscribes to ContextMenuEvent to open the menu when the player right-clicks a valid tile. private async function updatePlayerActions() Parameter Type Description myPlayer PlayerView The current player actions PlayerActions Available actions for the player on the clicked tile tile TileRef The tile for which actions are computed screenX? number Optional X coordinate for menu display screenY? number Optional Y coordinate for menu display Returns Promise<void> . Updates the radial menu parameters, chat modal, build menu, and emoji table based on the provided player actions and tile. Shows or refreshes the radial menu at the specified screen coordinates. public async function tick() Returns Promise<void> . Periodically refreshes the radial menu actions every 5 game ticks if the menu is visible. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Canvas rendering context Returns void . Renders the radial menu layer onto the canvas. public function shouldTransform() Returns boolean . Indicates whether the radial menu layer requires canvas transformations. public function closeMenu() Returns void . Hides the radial menu, build menu, emoji table, and player panel if any are visible. ./layers/MultiTabModal.ts class MultiTabModal Displays a modal warning when multiple tabs are detected for the same player. Handles countdown, penalty display, and event dispatching. Properties: Name Type Description game GameView Current game view instance detector MultiTabDetector Monitors multi-tab activity duration number Duration of penalty in milliseconds (default: 5000) countdown number Countdown in seconds for the modal display isVisible boolean Whether the modal is currently visible fakeIp string Fake IP displayed in the modal deviceFingerprint string Fake device fingerprint displayed in the modal reported boolean Whether the multi-tab violation is reported intervalId number | undefined ID of the interval timer for countdown public function createRenderRoot() Returns HTMLElement . Disables shadow DOM to allow Tailwind styling. public function tick() Returns void . Monitors multi-tab activity and shows the modal when detected, unless the game is in spawn phase, singleplayer, or dev environment. public function init() Returns void . Initializes fake IP, device fingerprint, and reported status. private function generateFakeIp() Returns string . Generates a random IP address in xxx.xxx.xxx.xxx format. private function generateDeviceFingerprint() Returns string . Generates a random 32-character hexadecimal device fingerprint. public function show() Parameter Type Description duration number Duration in milliseconds to display the modal Returns void . Shows the modal, starts the countdown timer, and requests a DOM update. public function hide() Returns void . Hides the modal, clears the countdown timer, dispatches penalty-complete event, and requests a DOM update. public function disconnectedCallback() Returns void . Ensures interval timer is cleared when the element is removed from the DOM. public function render() Returns TemplateResult . Renders the modal HTML including warning messages, fake IP and fingerprint, countdown timer, progress bar, and penalty information. ./layers/NameLayer.ts class RenderInfo Tracks rendering information for a player. Properties: Name Type Description icons Map<string, HTMLImageElement> Maps icon identifiers to HTML image elements player PlayerView Player associated with this render info lastRenderCalc number Timestamp of last render calculation location Cell | null Last known screen location of the player's name fontSize number Current font size for rendering the name fontColor string Current font color for rendering the name element HTMLElement HTML element representing the player's name and icons class NameLayer implements Layer Manages the rendering of player names, flags, troops, and associated icons on a separate layer. Properties: Name Type Description canvas HTMLCanvasElement The canvas used for the layer lastChecked number Last time the layer was checked for updates renderCheckRate number Frequency (ms) for checking renders renderRefreshRate number Minimum time (ms) between individual render updates rand PseudoRandom Random number generator for slight render variations renders RenderInfo[] List of all active render info objects seenPlayers Set<PlayerView> Tracks players already initialized for rendering firstPlace PlayerView | null Player currently in first place theme Theme Current theme used for colors and fonts userSettings UserSettings User settings such as dark mode isVisible boolean Determines if the layer should be visible Constructor Parameters: Parameter Type Description game GameView The game view instance transformHandler TransformHandler Handles coordinate transforms eventBus EventBus Event bus for subscribing to game events public function init() Returns void . Initializes the canvas, container, event listeners, and prepares the layer for rendering. public function tick() Returns void . Updates the render list with alive players, initializing new RenderInfo objects for unseen players. public function renderLayer() Parameter Type Description mainContex CanvasRenderingContext2D The main canvas context to draw the layer on Returns void . Positions the layer container, triggers rendering updates based on renderCheckRate , and draws the canvas onto the main context. public function shouldTransform() Returns boolean . Always returns false , indicating the layer does not require transform scaling. public function redraw() Returns void . Updates the theme colors. private function onAlternateViewChange() Parameter Type Description event AlternateViewEvent Event indicating a change in alternate view mode Returns void . Updates isVisible and refreshes visibility for all rendered elements. private function updateElementVisibility() Parameter Type Description render RenderInfo Render info object to update visibility for Returns void . Hides or shows the HTML element based on player state, zoom scale, screen position, and visibility flags. private function createPlayerElement() Parameter Type Description player PlayerView Player for whom the element is being created Returns HTMLDivElement . Creates a new HTML element for displaying the player's name, flag, troops, and icons. Initializes it off-screen and hidden. public function renderPlayerInfo() Parameter Type Description render RenderInfo The render info object to update and display Returns void . Updates font size, color, positions, and icons for a player. Removes the element if the player is no longer alive or visible. See also: class RenderInfo private function createIconElement() Parameter Type Description src string Source URL of the icon image size number Pixel size of the icon id string Identifier for the icon center? boolean Optional. If true, centers the icon vertically Returns HTMLImageElement . Creates an icon element with appropriate size, data attributes, and optional centering. ./layers/PlayerActionHandler.ts class PlayerActionHandler Handles player action intents by emitting corresponding events through the EventBus . Constructor Parameters: Parameter Type Description eventBus EventBus Event bus used to emit player action events uiState UIState User interface state for retrieving parameters such as attack ratios public function getPlayerActions() Parameter Type Description player PlayerView Player whose available actions are being retrieved tile TileRef Tile to query actions on Returns Promise<PlayerActions> . Retrieves available actions for the player on the specified tile. public function handleAttack() Parameter Type Description player PlayerView Player performing the attack targetId string | null Optional ID of the target player Returns void . Emits a SendAttackIntentEvent with the troop count calculated from the attack ratio. public function handleBoatAttack() Parameter Type Description player PlayerView Player performing the boat attack targetId PlayerID | null Optional target player ID targetTile TileRef Tile being attacked spawnTile TileRef | null Optional spawn tile for the boat attack Returns void . Emits a SendBoatAttackIntentEvent with calculated troop count. public function findBestTransportShipSpawn() Parameter Type Description player PlayerView Player requesting a transport ship spawn tile TileRef Tile to consider for spawning Returns Promise<TileRef | false> . Finds the optimal transport ship spawn for the player at a given tile. Returns false if no valid spawn exists. public function handleSpawn() Parameter Type Description tile TileRef Tile to spawn a unit Returns void . Emits a SendSpawnIntentEvent for the specified tile. public function handleAllianceRequest() Parameter Type Description player PlayerView Player sending the alliance request recipient PlayerView Player receiving the alliance request Returns void . Emits a SendAllianceRequestIntentEvent . public function handleBreakAlliance() Parameter Type Description player PlayerView Player breaking the alliance recipient PlayerView Player with whom the alliance is broken Returns void . Emits a SendBreakAllianceIntentEvent . public function handleTargetPlayer() Parameter Type Description targetId string | null Optional ID of the target player Returns void . Emits a SendTargetPlayerIntentEvent if targetId is not null. public function handleDonateGold() Parameter Type Description recipient PlayerView Player receiving the gold donation Returns void . Emits a SendDonateGoldIntentEvent . public function handleDonateTroops() Parameter Type Description recipient PlayerView Player receiving the troop donation Returns void . Emits a SendDonateTroopsIntentEvent . public function handleEmbargo() Parameter Type Description recipient PlayerView Player being embargoed action \"start\" | \"stop\" Action to start or stop the embargo Returns void . Emits a SendEmbargoIntentEvent with the specified action. public function handleEmoji() Parameter Type Description targetPlayer PlayerView | \"AllPlayers\" Player or all players receiving the emoji emojiIndex number Index of the emoji being sent Returns void . Emits a SendEmojiIntentEvent . public function handleDeleteUnit() Parameter Type Description unitId number ID of the unit to delete Returns void . Emits a SendDeleteUnitIntentEvent . ./layers/PlayerInfoOverlay.ts class PlayerInfoOverlay Displays detailed information about players or units in an overlay. Integrates with class TransformHandler and listens for mouse and context events to determine which information to display. public property game Type: GameView The current game view instance. public property eventBus Type: EventBus Event bus for subscribing to relevant events such as mouse movement and context menu actions. public property transform Type: TransformHandler Handles coordinate transformations between screen and world space. private state _isInfoVisible Type: boolean Tracks whether the overlay is currently visible. private state player Type: PlayerView | null The currently hovered player. null if no player is hovered. private state playerProfile Type: PlayerProfile | null Profile information of the hovered player, loaded asynchronously. private state unit Type: UnitView | null The currently hovered unit. null if no unit is hovered. public function init() Initializes event listeners for mouse movements, context menus, and closing radial menus. Marks the overlay as active. public function hide() Hides the overlay and clears the currently displayed player and unit. public function maybeShow() Parameter Type Description x number X-coordinate of the mouse in screen space. y number Y-coordinate of the mouse in screen space. Displays player or unit info if the coordinates correspond to a valid tile or nearby unit. public function tick() Requests a UI update every tick. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D The rendering context to draw the layer. Implements the Layer interface. Empty placeholder for compatibility. public function shouldTransform() Returns boolean . Always returns false . public function setVisible() Parameter Type Description visible boolean Determines whether the overlay is visible. Updates _isInfoVisible and requests a UI update. private function getRelationClass() Parameter Type Description relation Relation Relation type of another player. Returns a Tailwind CSS class string for coloring relation indicators. private function getRelationName() Parameter Type Description relation Relation Relation type of another player. Returns a translated text string describing the relation. private function displayUnitCount() Parameter Type Description player PlayerView Player whose units are counted. type UnitType The type of unit to display. icon string Icon URL representing the unit type. description string Translation key for the unit description. Returns a TemplateResult displaying the unit count, or an empty string if the unit type is disabled. private function allianceExpirationText() Parameter Type Description alliance AllianceView Alliance object with expiration info. Returns a formatted string representing the remaining alliance duration. private function renderPlayerInfo() Parameter Type Description player PlayerView Player to render info for. Returns a TemplateResult rendering the player's info, including flag, name, troops, gold, units, and alliance relations. private function renderUnitInfo() Parameter Type Description unit UnitView Unit to render info for. Returns a TemplateResult rendering the unit's owner, type, and health. protected function createRenderRoot() Overrides the default LitElement render root to return this , disabling shadow DOM to allow global Tailwind styling. ./layers/PlayerPanel.ts class PlayerPanel Defines the player interaction panel component for the game UI. Displays player details, alliance information, resources, and actionable buttons (chat, trade, alliance, emoji). Implements interface Layer . Properties: Name Type Description g GameView Reference to the active class GameView . eventBus EventBus Event bus used for communication between UI elements and game logic. emojiTable EmojiTable Reference to the global emoji selector. uiState UIState The current class UIState for UI rendering context. actions PlayerActions \\ \\| null Holds the current player action permissions and statuses. tile TileRef \\ \\| null The tile currently being examined. _profileForPlayerId number \\ \\| null Caches the last loaded player profile ID for optimization. sendTarget PlayerView \\| null Target player for sending resources (stateful). sendMode \"troops\" \\| \"gold\" \\| \"none\" Current send mode type (stateful). isVisible boolean Visibility state of the panel. allianceExpiryText string \\| null Human-readable alliance expiry text. allianceExpirySeconds number \\| null Remaining seconds before alliance expires. otherProfile PlayerProfile \\| null Loaded profile of the other player. ctModal ChatModal Cached chat modal reference. protected function createRenderRoot() Returns this . Overrides LitElement\u2019s shadow DOM root creation to render directly into the main DOM tree. public function initEventBus() Parameter Type Description eventBus EventBus The central event bus instance to subscribe to. Returns void . Registers handlers for view close events and hides the panel when appropriate. public function init() Returns void . Initializes event listeners and binds the ChatModal component. Logs a warning if the modal is not found. public async function tick() Returns Promise<void> . Refreshes the displayed player data and interaction state when the panel is visible. Fetches profiles, updates alliance timers, and requests UI updates. Returns early if no visible tile is active. public function show() Parameter Type Description actions PlayerActions Current player interaction permissions. tile TileRef Tile reference used to determine ownership and context. Returns void . Displays the panel for the given tile and initializes action context. public function hide() Returns void . Hides the panel and resets transient state such as send mode and target. private function handleClose() Parameter Type Description e Event DOM event triggering panel closure. Returns void . Stops propagation and hides the panel. private function handleAllianceClick() Parameter Type Description e Event The originating UI event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Sends a class SendAllianceRequestIntentEvent via the class EventBus . Hides the panel afterward. private function handleBreakAllianceClick() Parameter Type Description e Event The UI event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Emits a class SendBreakAllianceIntentEvent to request breaking the alliance. Hides the panel afterward. private function openSendTroops() Parameter Type Description target PlayerView The player to send troops to. Returns void . Sets internal state to enable troop send mode. private function openSendGold() Parameter Type Description target PlayerView The player to send gold to. Returns void . Sets internal state to enable gold send mode. private function handleDonateTroopClick() Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Opens the send troop panel for the specified player. private function handleDonateGoldClick() Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Opens the send gold panel for the specified player. private function closeSend() Returns void . Resets sending state to default (\u201cnone\u201d). private function confirmSend() Parameter Type Description e CustomEvent<{ amount: number; closePanel?: boolean }> The confirmation event with amount and close flag. Returns void . Confirms resource send, resets send mode, and optionally hides the panel. private function handleEmbargoClick() Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView Target player. Returns void . Emits a class SendEmbargoIntentEvent with \"start\" action and hides the panel. private function handleStopEmbargoClick() Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView Target player. Returns void . Emits a class SendEmbargoIntentEvent with \"stop\" action and hides the panel. private function onStopTradingAllClick() Parameter Type Description e Event Click event. Returns void . Emits a class SendEmbargoAllIntentEvent to stop all trading. private function onStartTradingAllClic()k Parameter Type Description e Event Click event. Returns void . Emits a class SendEmbargoAllIntentEvent to resume all trading. private function handleEmojiClick() Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Displays the class EmojiTable for emoji selection and emits a class SendEmojiIntentEvent when an emoji is chosen. Hides both the emoji table and the panel after completion. private function handleChat() Parameter Type Description e Event Click event. sender PlayerView The message sender. other PlayerView The recipient player. Returns void . Opens the chat modal between the two players. Logs a warning if the chat modal is missing. private function handleTargetClick() Parameter Type Description e Event Click event. other PlayerView Target player. Returns void . Emits a class SendTargetPlayerIntentEvent and hides the panel. private function identityChipProps() Parameter Type Description type PlayerType Type of the player. Returns { labelKey: string; aria: string; classes: string; icon: string } . Provides styling and metadata for identity chips depending on player type. private function getRelationClass() Parameter Type Description relation Relation The relation state between players. Returns string . Computes the CSS class string for visual relation representation. private function getRelationName() Parameter Type Description relation Relation The relation enum value. Returns string . Translates the relation into localized text. private function getExpiryColorClass() Parameter Type Description seconds number \\| null Remaining seconds or null . Returns string . Determines color class based on remaining time thresholds. private function getTraitorRemainingSeconds() Parameter Type Description player PlayerView Player to check for traitor time. Returns number | null . Calculates the remaining seconds for traitor status or returns null if not applicable. private function renderTraitorBadge() Parameter Type Description other PlayerView The player being rendered. Returns TemplateResult . Renders the traitor badge UI with remaining time if applicable. private function renderRelationPillIfNation() Parameter Type Description other PlayerView The target player. my PlayerView The local player. Returns TemplateResult . Renders relation pill only for nation-type players when conditions are met. private function renderIdentityRow() Parameter Type Description other PlayerView The displayed player. my PlayerView The local player. Returns TemplateResult . Renders the player identity row including flag, name, player type, and relation details. private function renderResources() Parameter Type Description other PlayerView Target player. Returns TemplateResult . Displays current gold and troop resources for the given player. private function renderStats() Parameter Type Description other PlayerView Target player. my PlayerView Local player. Returns TemplateResult . Displays betrayal count and trading status between players. private function renderAlliances() Parameter Type Description other PlayerView The player whose alliances to list. Returns TemplateResult . Displays a scrollable list of the player\u2019s allies. private function renderAllianceExpiry() Returns TemplateResult . Shows remaining alliance time with dynamic color styling. Returns an empty template if expiry data is missing. private function renderActions() Parameter Type Description my PlayerView Local player. other PlayerView Target player. Returns TemplateResult . Renders all available player action buttons depending on permissions and relation state. public function render() Returns TemplateResult . Renders the entire PlayerPanel UI including identity, stats, resources, and action buttons. If visibility or ownership conditions fail, returns an empty template and logs a warning when appropriate. ./layers/RadialMenu.ts class CloseRadialMenuEvent Event emitted to signal that a RadialMenu has been closed. constructor CloseRadialMenuEvent() Initializes a new instance of CloseRadialMenuEvent . interface TooltipItem Defines a tooltip text entry. Properties: Name Type Description text string The text to display in the tooltip. className string CSS class applied to the tooltip element. interface RadialMenuConfig Configuration options for a RadialMenu instance. Properties: Name Type Description menuSize? number Optional. Base size of the menu in pixels. submenuScale? number Optional. Scale factor applied to nested submenus. centerButtonSize? number Optional. Radius of the central button. iconSize? number Optional. Default size of menu icons. centerIconSize? number Optional. Size of the icon on the center button. disabledColor? string Optional. Color applied to disabled menu items. menuTransitionDuration? number Optional. Duration of animations in milliseconds. mainMenuInnerRadius? number Optional. Inner radius of the main menu. centerButtonIcon? string Optional. URL or path to the center button icon. maxNestedLevels? number Optional. Maximum allowed submenu depth. innerRadiusIncrement? number Optional. Increase of inner radius per submenu level. tooltipStyle? string Optional. Custom CSS styles for tooltips. class RadialMenu implements Layer Manages interactive radial menus with multiple nested levels, central button actions, and tooltips. Properties: Name Type Description menuElement d3.Selection<HTMLDivElement, unknown, null, undefined> The container div holding the menu SVG. tooltipElement HTMLDivElement \\| null The DOM element used for displaying tooltips. isVisible boolean Indicates whether the menu is currently displayed. currentLevel number Current menu level (0 = main menu). menuStack MenuElement[][] Stack of previous menu levels for navigation. currentMenuItems MenuElement[] Currently active menu items. config Required<RadialMenuConfig> Effective configuration object with defaults applied. backIconSize number Computed size of the back button icon. centerButtonState \"default\" \\| \"back\" Current state of the center button. isTransitioning boolean True when a menu animation is in progress. lastHideTime number Timestamp of last menu hide event. reopenCooldownMs number Minimum interval before reopening the menu. anchorX number X-coordinate for menu center positioning. anchorY number Y-coordinate for menu center positioning. menuGroups Map<number, d3.Selection<SVGGElement, unknown, null, undefined>> Group elements for each menu level. menuPaths Map<string, d3.Selection<SVGPathElement, unknown, null, undefined>> Mapping of menu item IDs to their SVG paths. menuIcons Map<string, d3.Selection<SVGImageElement, unknown, null, undefined>> Mapping of menu item IDs to their icons/text elements. selectedItemId string \\| null ID of the currently selected menu item. submenuHoverTimeout number \\| null Timeout ID for submenu hover delay. backButtonHoverTimeout number \\| null Timeout ID for back button hover delay. navigationInProgress boolean True if a submenu navigation animation is active. originalCenterButtonIcon string Stored reference to the original center button icon. params MenuElementParams \\| null Current runtime parameters applied to menu actions. constructor RadialMenu() Parameter Type Description eventBus EventBus Event bus used for emitting menu events. rootMenu MenuElement The top-level menu item structure. centerButtonElement CenterButtonElement The central button for menu actions. config? RadialMenuConfig Optional configuration overrides. Initializes a new RadialMenu instance and applies default configuration values. public function init() Returns void . Initializes the menu by creating DOM elements and subscribing to close events. public function showRadialMenu() Parameter Type Description x number X-coordinate of menu center. y number Y-coordinate of menu center. Returns void . Displays the menu at the specified position if reopening is allowed. public function hideRadialMenu() Returns void . Hides the menu, clears hover states, tooltips, and cached elements. Updates lastHideTime . public function disableAllButtons() Returns void . Disables all current menu items and resets the center button state. public function updateCenterButtonState() Parameter Type Description state CenterButtonState New center button state ( \"default\" or \"back\" ). Returns void . Updates visual state and interactivity of the center button. public function isMenuVisible() Returns boolean . Indicates whether the radial menu is currently visible. public function getCurrentLevel() Returns number . Returns the current active menu level. public function setParams() Parameter Type Description params MenuElementParams Parameters to be used for menu actions and state. Returns void . Sets runtime parameters for menu behavior. public function refreshMenu() Returns void . Redraws the current menu level if the menu is visible. public function refresh() Returns void . Refreshes all menu items, updating disabled states, icons, and cooldowns based on current parameters. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Canvas rendering context (not used). Returns void . Implements Layer interface. Canvas rendering not required. public function shouldTransform() Returns boolean . Always returns false . Implements Layer interface. ./layers/RadialMenuElements.ts interface MenuElementParams Parameters passed to MenuElement handlers and submenus. Properties: Name Type Description myPlayer PlayerView The current player. selected PlayerView \\| null The selected player, if any. tile TileRef The tile reference associated with the menu action. playerActions PlayerActions Current player actions. game GameView Current game state. buildMenu BuildMenu Build menu instance. emojiTable EmojiTable Emoji table instance. playerActionHandler PlayerActionHandler Handles player actions. playerPanel PlayerPanel Player panel UI handler. chatIntegration ChatIntegration Handles chat menu generation. eventBus EventBus Event bus for emitting and listening to events. closeMenu () => void Callback to close the menu. interface MenuElement Represents a single element in a radial or sub-menu. Properties: | Name | Type | Description | | --------------- | ---------------------------------------------- | --------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | | id | string | Unique identifier of the menu element. | | name | string | Display name or internal key. | | displayed? | boolean | ((params: MenuElementParams) => boolean) | Optional. Determines whether the element is displayed. Can be a boolean or a function returning a boolean. | | color? | string | Optional. Color of the element. | | icon? | string | Optional. Icon image path. | | text? | string | Optional. Text to display on the element. | | fontSize? | string | Optional. Font size for text . | | tooltipItems? | TooltipItem[] | Optional. Tooltip items for the element. | | tooltipKeys? | TooltipKey[] | Optional. Tooltip keys for localization. | | cooldown? | (params: MenuElementParams) => number | Optional. Returns cooldown value for the element. | | disabled | (params: MenuElementParams) => boolean | Determines if the element is disabled. | | action? | (params: MenuElementParams) => void | Optional. Action executed when the element is activated. | | subMenu? | (params: MenuElementParams) => MenuElement[] | Optional. Returns submenu elements if the element has children. | interface TooltipKey Represents a key used to generate tooltips. Properties: | Name | Type | Description | | ----------- | ---------------------- | ---------------------------------- | ------------------------------------------------------- | | key | string | Localization key for tooltip. | | className | string | CSS class for styling the tooltip. | | params? | Record<string, string | number> | Optional. Parameters for localized string substitution. | interface CenterButtonElement Special element representing the center button of a radial menu. Properties: Name Type Description disabled (params: MenuElementParams) => boolean Determines if the center button is disabled. action (params: MenuElementParams) => void Action executed when the center button is pressed. constant COLORS Color configuration for menu elements and tooltips. Properties: Name Type Description build string Build color #ebe250 . building string Building color #2c2c2c . boat string Boat color #3f6ab1 . ally string Ally action color #53ac75 . breakAlly string Break alliance color #c74848 . delete string Delete action color #ff0000 . info string Info color #64748B . target string Target action color #ff0000 . attack string Attack color #ff0000 . infoDetails string Detailed info color #7f8c8d . infoEmoji string Emoji info color #f1c40f . trade string Trade action color #008080 . embargo string Embargo action color #6600cc . tooltip object Nested tooltip colors. chat object Nested chat message colors. enum Slot Predefined radial menu slots. Name Value Info \"info\" Boat \"boat\" Build \"build\" Attack \"attack\" Ally \"ally\" Back \"back\" Delete \"delete\" public function getAllEnabledUnits() Returns Set<UnitType> . Returns all enabled units depending on whether it is for the current player or other players, filtered by config.isUnitDisabled() . Behavior Adds specific structure and unit types depending on myPlayer . | Checks config for disabled units. public function createMenuElements() Returns MenuElement[] . Generates menu elements for attack or build submenus. Parameters: Parameter Type Description params MenuElementParams Context parameters. filterType \"attack\" | \"build\" Type of menu to create. elementIdPrefix string Prefix used for element id s. Behavior Filters flattenedBuildTable based on unitTypes and filterType . Sets disabled , color , icon , and tooltipItems for each element. Assigns an action that builds or upgrades units and closes the menu. | All exported MenuElement constants Each follows the pattern: Properties: id , name , disabled , color , icon , optional text , tooltipItems , tooltipKeys . Optional methods: action , subMenu . Exported Elements: infoMenuElement \u2014 Info button. Disabled if no selected player or in spawn phase. attackMenuElement \u2014 Attack submenu. Disabled in spawn phase. Calls createMenuElements with filterType=\"attack\" . buildMenuElement \u2014 Build submenu. Disabled in spawn phase. Calls createMenuElements with filterType=\"build\" . boatMenuElement \u2014 Boat action. Disabled if transport ship unavailable. Action is async. deleteUnitElement \u2014 Delete unit. Disabled based on ownership, land status, cooldown, and selection radius. rootMenuElement \u2014 Root menu aggregating info, build/attack, ally, delete, and boat elements based on conditions. Example: deleteUnitElement action behavior Filters units within DELETE_SELECTION_RADIUS . Sorts by Manhattan distance. Calls playerActionHandler.handleDeleteUnit() for the closest unit. Calls closeMenu() . exported CenterButtonElement constant Represents the center button in the radial menu. Properties: Name Type Description disabled (params: MenuElementParams) => boolean Returns true if the tile is water, in spawn phase with other player, or if canAttack is false. action (params: MenuElementParams) => void Executes handleSpawn if in spawn phase, otherwise handleAttack . Closes the menu afterwards. ./layers/RailroadLayer.ts class RailroadLayer Handles rendering, color management, and updating of railroad tiles within the game view. Implements interface Layer . Properties: Name Type Description canvas HTMLCanvasElement Offscreen canvas used to draw the railroad layer. context CanvasRenderingContext2D 2D drawing context of the canvas . theme Theme Theme configuration used for colorizing elements. existingRailroads Map<TileRef, RailRef> Tracks active rail tiles and their metadata. nextRailIndexToCheck number Index for iterating tiles to update colors incrementally. railTileList TileRef[] List of tiles currently containing railroads. game GameView Reference to the current game view instance. transformHandler TransformHandler Manages scaling and transformations for rendering. public constructor constructor(game: GameView, transformHandler: TransformHandler) Parameter Type Description game GameView The active game view to render railroads for. transformHandler TransformHandler Handles scaling and transformation during rendering. Initializes the theme from the game configuration. public function shouldTransform() Returns boolean . Indicates that this layer should be affected by transformations (scaling, translation) during rendering. public function tick() Returns void . Processes railroad updates received since the last tick, delegating each to private function handleRailroadRendering() . public function updateRailColors() Returns void . Incrementally updates rail colors based on ownership changes. Processes a maximum of railTileList.length / 60 tiles per call to prevent performance spikes. Updates ownership in existingRailroads and repaints affected tiles using function paintRail() . public function init() Returns void . Initializes the layer by calling function redraw() . public function redraw() Returns void . Recreates the offscreen canvas and repaints all rail tiles in existingRailroads . Enables smooth scaling for better visual quality. Throws an error if 2D context is not supported. public function renderLayer(context: CanvasRenderingContext2D) Parameter Type Description context CanvasRenderingContext2D Context to render the railroad layer onto. Returns void . Draws the offscreen canvas onto the given context , applying transparency proportional to the current transformHandler.scale . Ensures proper alpha blending for smooth zoom transitions. private function handleRailroadRendering(railUpdate: RailroadUpdate) Parameter Type Description railUpdate RailroadUpdate Update data containing the railroad tiles and their active status. Returns void . For each tile in railUpdate.railTiles , either paints or clears the railroad depending on railUpdate.isActive . See also: private function paintRailroad() , private function clearRailroad() private function paintRailroad(railRoad: RailTile) Parameter Type Description railRoad RailTile The railroad tile to paint. Returns void . Increments occurrence if the tile exists, otherwise adds it to existingRailroads and railTileList , then paints it using public function paintRail() . private function clearRailroad(railRoad: RailTile) Parameter Type Description railRoad RailTile The railroad tile to clear. Returns void . Decrements occurrence of the tile and removes it from existingRailroads and railTileList if it reaches zero. Clears the tile from context , with a larger rectangle for water tiles. Throws an error if the layer is uninitialized. public function paintRail(railRoad: RailTile) Parameter Type Description railRoad RailTile The railroad tile to render. Returns void . Paints the railroad tile on context . If the tile is over water, paints a bridge first using private function paintBridge() . Determines color based on owner; defaults to white if no owner. Uses private function paintRailRects() to render rail segments. Throws an error if context is uninitialized. private function paintRailRects(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) Parameter Type Description context CanvasRenderingContext2D Context to draw onto. x number X-coordinate of the tile. y number Y-coordinate of the tile. direction RailType Type/direction of the rail. Returns void . Paints each rectangle segment of a railroad tile as determined by getRailroadRects(direction) . private function paintBridge(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) Parameter Type Description context CanvasRenderingContext2D Context to draw onto. x number X-coordinate of the tile. y number Y-coordinate of the tile. direction RailType Type/direction of the rail. Returns void . Paints bridge underlay rectangles for water tiles using getBridgeRects(direction) . Preserves previous context state via save() / restore() . ./layers/RailroadSprites.ts function getRailroadRects(type: RailType) Parameter Type Description type RailType The type/direction of railroad for which rectangle coordinates are requested. Returns number[][] . Returns an array of rectangles [x, y, w, h] for the given RailType . Throws an error if an unsupported RailType is provided. function horizontalRailroadRects() Returns number[][] . Provides rectangle coordinates for a horizontal railroad segment. function verticalRailroadRects() Returns number[][] . Provides rectangle coordinates for a vertical railroad segment. function topRightRailroadCornerRects() Returns number[][] . Provides rectangle coordinates for a top-right railroad corner segment. function topLeftRailroadCornerRects() Returns number[][] . Provides rectangle coordinates for a top-left railroad corner segment. function bottomRightRailroadCornerRects() Returns number[][] . Provides rectangle coordinates for a bottom-right railroad corner segment. function bottomLeftRailroadCornerRects() Returns number[][] . Provides rectangle coordinates for a bottom-left railroad corner segment. function getBridgeRects(type: RailType) Parameter Type Description type RailType The type/direction of railroad for which bridge rectangles are requested. Returns number[][] . Returns an array of rectangles [x, y, w, h] representing bridge underlays for the given RailType . Throws an error if an unsupported RailType is provided. function horizontalBridge() Returns number[][] . Coordinates for horizontal bridge rectangles. function verticalBridge() Returns number[][] . Coordinates for vertical bridge rectangles. function topRightBridgeCornerRects() Returns number[][] . Coordinates for the top-right corner bridge segment. function bottomLeftBridgeCornerRects() Returns number[][] . Coordinates for the bottom-left corner bridge segment. function topLeftBridgeCornerRects() Returns number[][] . Coordinates for the top-left corner bridge segment. function bottomRightBridgeCornerRects() Returns number[][] . Coordinates for the bottom-right corner bridge segment. ./layers/SAMRadiusLayer.ts class SAMRadiusLayer Renders and manages the defense radii of SAM launchers. Implements interface Layer . Properties: Name Type Description canvas HTMLCanvasElement Internal off-screen canvas for drawing SAM radii. context CanvasRenderingContext2D 2D drawing context for canvas . samLaunchers Map<number, number> Tracks active SAM launcher IDs mapped to their owner's smallID() . needsRedraw boolean Indicates whether the layer needs to be redrawn. hoveredShow boolean True if the stroke should show due to hover over SAM/Atom/Hydrogen option. ghostShow boolean True if the stroke should show due to an active ghost build. showStroke boolean Computed stroke visibility based on hover/ghost states. dashOffset number Current offset for dashed stroke animation. rotationSpeed number Speed of stroke dash animation in pixels per second. lastTickTime number Timestamp of the last tick() for animation calculations. game GameView Reference to the game view. eventBus EventBus Event bus for listening and emitting events. transformHandler TransformHandler Tracks canvas transformations to trigger redraws. uiState UIState Current UI state, including ghost structure. public constructor SAMRadiusLayer(game, eventBus, transformHandler, uiState) Parameter Type Description game GameView The game view to track SAM launchers. eventBus EventBus Event bus for subscribing to toggle events. transformHandler TransformHandler Handles canvas transformations. uiState UIState Tracks ghost structures for display. Returns SAMRadiusLayer . Initializes internal canvas and 2D context. Throws an error if 2D context is unsupported. public function init() Returns void . Registers a listener on eventBus for class ToggleStructureEvent and performs an initial redraw() . private function handleToggleStructure(e) Parameter Type Description e ToggleStructureEvent Event indicating which structures are being hovered or toggled. Returns void . Updates hoveredShow if SAMLauncher is included in the event and updates showStroke accordingly. private function updateStrokeVisibility() Returns void . Computes showStroke from hoveredShow and ghostShow . Marks needsRedraw if visibility changes. public function shouldTransform() Returns boolean . Always returns true . Used by interface Layer to indicate that canvas transformations should be applied. public function tick() Returns void . Updates tracked SAM launchers based on game.updatesSinceLastTick() . Handles ghost structure visibility, updates animation dash offset, and triggers redraw() if necessary. public function renderLayer(context) Parameter Type Description context CanvasRenderingContext2D Context of the main canvas to render onto. Returns void . Draws the internal off-screen canvas onto the provided context. public function redraw() Returns void . Clears the internal canvas, updates active SAM launchers, computes circle positions and radii, and draws the union of all SAM ranges using private function drawCirclesUnion . private function drawCirclesUnion(circles) Parameter Type Description circles Array<{ x: number; y: number; r: number; owner: number }> Array of circles representing SAM range positions, radii, and owners. Returns void . Fills the union of circles and strokes only the outer arcs to visually combine overlapping SAM ranges. Skips drawing if showStroke is false. Uses dashed animated strokes and separates boundaries by owner for clarity. ./layers/SendResourcesModal.ts class SendResourceModal Modal for sending resources (troops or gold) to another player. Properties: Name Type Description eventBus EventBus \\| null Event bus for emitting send intent events. open boolean Whether the modal is open. Defaults to false . mode 'troops' \\| 'gold' Type of resource to send. Defaults to 'troops' . total number \\| bigint Total amount of resource available to send. uiState UIState \\| null Optional UI state to seed initial percent selection. format (n: number) => string Function to format numbers. Defaults to renderTroops() . myPlayer PlayerView \\| null The sending player. target PlayerView \\| null The receiving player. gameView GameView \\| null Reference to the current game view. heading string \\| null Optional heading text for the modal. sendAmount number Internal state representing the amount to send. selectedPercent number \\| null Internal state of currently selected percentage for sending. Constants: Name Type Description PRESETS readonly number[] Preset percentages for sending (10, 25, 50, 75, 100). public function createRenderRoot() Returns this . Overrides shadow DOM root to allow Tailwind CSS styling. protected function connectedCallback() Returns void . Initializes selectedPercent and computes sendAmount based on uiState and total resource. protected function updated(changed) Parameter Type Description changed Map<string, unknown> Map of changed properties. Returns void . Updates sendAmount when relevant properties ( total , mode , target , gameView ) change. Handles auto-closing if sender or target is dead. private function closeModal() Returns void . Dispatches a close custom event to close the modal. private function confirm() Returns void . Validates sender and target are alive and eventBus is available. Emits class SendDonateTroopsIntentEvent or class SendDonateGoldIntentEvent depending on mode. Closes the modal on success. private function handleKeydown(e) Parameter Type Description e KeyboardEvent Keyboard event. Returns void . Handles Escape to close modal and Enter to confirm send. private function toNum(x) Parameter Type Description x unknown Value to convert to number. Returns number . Converts bigint or other numeric-like values to number . private function getTotalNumber() Returns number . Returns total available resource if sender is alive, otherwise 0. private function sanitizePercent(p) Parameter Type Description p number Percent value to sanitize. Returns number . Clamps percent between 0 and 100. private function getCapacityLeft() Returns number | null . Computes remaining capacity for troops. Returns null for gold or if target/gameView is missing. private function getPercentBasis() Returns number . Returns the total number available to send. private function limitAmount(proposed) Parameter Type Description proposed number Proposed send amount. Returns number . Limits the proposed amount to total available and capacity constraints. private function clampSend(n) Parameter Type Description n number Amount to clamp. Returns number . Clamps send amount based on total and capacity. private function percentOfBasis(n) Parameter Type Description n number Amount to compute percent of basis. Returns number . Computes percentage of basis. private function keepAfter(allowed) Parameter Type Description allowed number Amount allowed to send. Returns number . Computes the remaining resource after sending allowed . private function getFillColor() Returns string . Returns purple for troops, amber for gold. private function getMinKeepRatio() Returns number . Minimum ratio to keep for troops (0.3) or gold (0). private function isTargetAlive() Returns boolean . Checks if the target player is alive. private function isSenderAlive() Returns boolean . Checks if the sending player is alive. private function renderHeader() Returns import('lit').TemplateResult . Renders modal header with optional heading and close button. private function renderAvailable() Returns import('lit').TemplateResult . Displays total available resource. private function renderPresets(percentNow) Parameter Type Description percentNow number Current percent selection. Returns import('lit').TemplateResult . Renders preset percentage buttons. private function renderSlider(percentNow) Parameter Type Description percentNow number Current percent selection. Returns import('lit').TemplateResult . Renders slider input for selecting send amount, including optional capacity marker. private function renderCapacityNote(allowed) Parameter Type Description allowed number Allowed send amount. Returns import('lit').TemplateResult . Displays note when send amount is capped by target capacity. private function renderSummary(allowed) Parameter Type Description allowed number Allowed send amount. Returns import('lit').TemplateResult . Displays summary of send and remaining resources. private function renderActions() Returns import('lit').TemplateResult . Renders Cancel and Send buttons, disables if sending is not allowed. private function renderDeadNote() Returns import('lit').TemplateResult . Displays message when target player is dead. private function renderSliderStyles() Returns import('lit').TemplateResult . Provides inline CSS styles for slider input. public function render() Returns import('lit').TemplateResult | undefined . Renders the entire modal if open is true, including header, available resource, presets, slider, capacity note, summary, actions, and slider styles. ./layers/SettingsModal.ts class ShowSettingsModalEvent Represents an event to toggle the visibility of the settings modal. public constructor ShowSettingsModalEvent(isVisible?, shouldPause?, isPaused?) Parameter Type Description isVisible? boolean Optional. Indicates whether the modal should be visible. Defaults to true . shouldPause? boolean Optional. Indicates if the game should pause when the modal opens. Defaults to false . isPaused? boolean Optional. Indicates if the game is already paused when the modal opens. Defaults to false . class SettingsModal Displays and manages the settings modal. Implements interface Layer . Properties: Name Type Description eventBus EventBus Event bus for subscribing and emitting events. userSettings UserSettings Reference to the current user settings. isVisible boolean Internal state tracking whether the modal is visible. Defaults to false . alternateView boolean Tracks whether the alternate terrain view is enabled. Defaults to false . modalOverlay HTMLElement Reference to the modal overlay element. shouldPause boolean Indicates if the game should pause when the modal opens. Defaults to false . wasPausedWhenOpened boolean Tracks if the game was paused when the modal opened. Defaults to false . public function init() Returns void . Initializes volume settings via SoundManager and subscribes to class ShowSettingsModalEvent to open the modal and optionally pause the game. public function createRenderRoot() Returns this . Overrides the default shadow DOM root to allow styling. public function connectedCallback() Returns void . Adds global event listeners for click and keydown events to detect outside clicks and escape key presses. public function disconnectedCallback() Returns void . Removes previously added global event listeners. private function handleOutsideClick(event) Parameter Type Description event MouseEvent Click event to detect if it occurred outside the modal. Returns void . Closes the modal if an outside click is detected. private function handleKeyDown(event) Parameter Type Description event KeyboardEvent Keydown event to detect Escape key. Returns void . Closes the modal if Escape is pressed. public function openModal() Returns void . Sets isVisible to true, prevents body scrolling, and requests an update. public function closeModal() Returns void . Sets isVisible to false, restores body scrolling, requests an update, and calls pauseGame(false) . private function pauseGame(pause) Parameter Type Description pause boolean Indicates whether to pause or unpause the game. Returns void . Pauses the game if shouldPause is true and the game was not already paused when opened. private function onTerrainButtonClick() Returns void . Toggles the alternate terrain view and emits class AlternateViewEvent . private function onToggleEmojisButtonClick() Returns void . Toggles emoji display in userSettings . private function onToggleStructureSpritesButtonClick() Returns void . Toggles structure sprite display in userSettings . private function onToggleSpecialEffectsButtonClick() Returns void . Toggles special effects display in userSettings . private function onToggleDarkModeButtonClick() Returns void . Toggles dark mode in userSettings and emits class RefreshGraphicsEvent . private function onToggleRandomNameModeButtonClick() Returns void . Toggles anonymous/random name display in userSettings . private function onToggleLeftClickOpensMenu() Returns void . Toggles left-click opens menu behavior in userSettings . private function onTogglePerformanceOverlayButtonClick() Returns void . Toggles performance overlay display in userSettings . private function onExitButtonClick() Returns void . Redirects the page to the home URL ( / ). private function onVolumeChange(event) Parameter Type Description event Event Input event from background music volume slider. Returns void . Updates background music volume in userSettings and via SoundManager . private function onSoundEffectsVolumeChange(event) Parameter Type Description event Event Input event from sound effects volume slider. Returns void . Updates sound effects volume in userSettings and via SoundManager . public function render() Returns import('lit').TemplateResult | null . Renders the modal when isVisible is true, including controls for volume, dark mode, terrain, emoji toggles, structure sprites, special effects, random names, left-click menu behavior, performance overlay, and exit button. ./layers/SpawnTimer.ts class SpawnTimer Displays a progress bar representing the spawn phase and team tile ratios. Implements interface Layer . Properties: Name Type Description game GameView Reference to the current game view. transformHandler TransformHandler Tracks canvas transformations, unused for this layer. ratios number[] Array of width ratios for each segment of the progress bar. colors string[] Array of colors corresponding to each ratio segment. isVisible boolean Determines whether the spawn timer is visible. Defaults to false . public function createRenderRoot() Returns this . Sets fixed position styling for the progress bar and disables pointer events. public function init() Returns void . Initializes isVisible to true. public function tick() Returns void . Updates ratios and colors based on the game state: If the game is in the spawn phase, shows a single segment filling proportionally to elapsed turns. If the game mode is Team , calculates segment ratios based on team-owned tiles and applies team colors from the theme. Requests update via requestUpdate() . public function shouldTransform() Returns boolean . Always returns false since the layer does not require canvas transformations. public function render() Returns import('lit').TemplateResult . Renders a horizontal bar composed of colored divs corresponding to ratios and colors . Returns empty content if the layer is invisible or there is no data to render. private function sumIterator(values) Parameter Type Description values MapIterator<number> Iterator over numeric values to sum. Returns number . Computes the sum of all values in the provided iterator. ./layers/StructureDrawingUtils.ts Constants STRUCTURE_SHAPES Partial<Record<UnitType, ShapeType>> Maps UnitType values to corresponding shape strings used for rendering. LEVEL_SCALE_FACTOR number \u2014 Factor used to scale level indicators. ICON_SCALE_FACTOR_ZOOMED_IN number \u2014 Scaling factor for icons when zoomed in. ICON_SCALE_FACTOR_ZOOMED_OUT number \u2014 Scaling factor for icons when zoomed out. DOTS_ZOOM_THRESHOLD number \u2014 Zoom threshold for rendering dots. ZOOM_THRESHOLD number \u2014 Zoom threshold for rendering icons or levels. ICON_SIZE { [shape in ShapeType]: number } \u2014 Default icon size per shape. OFFSET_ZOOM_Y number \u2014 Vertical offset applied when zooming. Type ShapeType Represents valid shape identifiers for structures. triangle | square | pentagon | octagon | circle | cross class SpriteFactory Responsible for generating PIXI sprites for structures, including icons, level indicators, ghost containers, and range graphics. Properties: Name Type Description theme Theme The theme used for coloring sprites. game GameView Reference to the game view for coordinate and configuration data. transformHandler TransformHandler Handles conversion between world and screen coordinates. renderSprites boolean Flag indicating whether full sprite rendering is enabled. textureCache Map<string, PIXI.Texture> Caches generated textures keyed by type and state. structuresInfos Map<UnitType, { iconPath: string; image: HTMLImageElement | null }> Stores image paths and loaded images for each structure type. constructor SpriteFactory() Parameter Type Description theme Theme Theme for coloring sprites. game GameView Game view reference. transformHandler TransformHandler Handles coordinate transformations. renderSprites boolean Whether to render sprites fully. Initializes structure icons by loading their images. private function loadIcon() Parameter Type Description unitInfo { iconPath: string; image: HTMLImageElement | null } Structure icon information. unitType UnitType Type of structure. Returns void . Loads the icon image and sets it on unitInfo.image . Logs errors on load failure. private function invalidateTextureCache() Parameter Type Description unitType UnitType Structure type whose cached textures should be invalidated. Returns void . Removes cached textures for the specified structure type. public function createGhostContainer() Parameter Type Description player PlayerView Player owning the structure. ghostStage PIXI.Container Stage to which the ghost container is added. pos { x: number; y: number } Position to place the container. structureType UnitType Type of structure. Returns PIXI.Container . Creates a semi-transparent container representing a ghost structure at the specified position. public function createUnitContainer() Parameter Type Description unit UnitView The unit to render. options { type?: \"icon\" | \"dot\" | \"level\"; stage: PIXI.Container } Rendering options; type is optional and defaults to icon rendering. Returns PIXI.Container . Creates a container for the unit with the appropriate sprite, level indicator, or dot representation. Adds container to the specified stage. private function createTexture() Parameter Type Description type UnitType Structure type. owner PlayerView Player owning the structure. isConstruction boolean Whether the structure is under construction. isMarkedForDeletion boolean Whether the structure is marked for deletion. renderIcon boolean Whether to render the full icon. Returns PIXI.Texture . Generates or retrieves a cached texture for a structure. Uses createIcon() when shape is defined. private function createIcon() Parameter Type Description owner PlayerView Player owning the structure. structureType UnitType Type of structure. isConstruction boolean Whether the structure is under construction. isMarkedForDeletion boolean Whether the structure is marked for deletion. shape string Shape to render. renderIcon boolean Whether to render the full icon. Returns PIXI.Texture . Draws the structure icon onto a canvas, including optional construction colors, borders, deletion marks, and the base image if present. Throws on unknown shapes. public function createRange() Parameter Type Description type UnitType Structure type whose range is drawn. stage PIXI.Container Stage to which the range container is added. pos { x: number; y: number } Position to place the range circle. Returns PIXI.Container | null . Returns null if type does not have a defined range. Creates a semi-transparent range indicator for structures with applicable ranges. private function getImageColored() Parameter Type Description image HTMLImageElement Base image to colorize. color string Color to apply. Returns HTMLCanvasElement . Applies the specified color to the given image using a temporary canvas and returns the result. ./layers/StructureIconsLayer.ts class StructureRenderInfo Holds rendering information for a single unit's structure icon, level, and dot representations. Properties: Name Type Description unit UnitView The unit this render info represents. owner PlayerID ID of the player owning the unit. iconContainer PIXI.Container Container for the unit's icon sprite. levelContainer PIXI.Container Container for the unit's level sprite. dotContainer PIXI.Container Container for the unit's dot representation. level number Current level of the unit. Defaults to 0. underConstruction boolean Whether the unit is under construction. Defaults to true . isOnScreen boolean Indicates if the unit is currently visible on screen. Defaults to false . class StructureIconsLayer Manages rendering, updating, and interaction for structure icons, levels, and dots on the game map. Properties: Name Type Description ghostUnit { container: PIXI.Container; range: PIXI.Container \\| null; buildableUnit: BuildableUnit; } \\| null Currently active ghost structure being placed, or null if none. pixicanvas HTMLCanvasElement Canvas used for rendering PIXI stages. iconsStage PIXI.Container Stage containing icon sprites. ghostStage PIXI.Container Stage containing ghost sprites. levelsStage PIXI.Container Stage containing level sprites. dotsStage PIXI.Container Stage containing dot sprites. rootStage PIXI.Container Root container holding all stages. playerActions PlayerActions \\| null Actions available to the current player. theme Theme Current game theme. renderer PIXI.Renderer Renderer for drawing the PIXI canvas. renders StructureRenderInfo[] Active rendered structures. seenUnits Set<UnitView> Units that have been seen and rendered. mousePos { x: number; y: number } Current mouse position in pixels. renderSprites boolean Flag indicating if structure sprites should be rendered. factory SpriteFactory Factory for creating PIXI sprites. structures Map<UnitType, { visible: boolean }> Visibility settings per unit type. lastGhostQueryAt number Timestamp of last ghost update. potentialUpgrade StructureRenderInfo \\| undefined Stores the render info of a potential upgradeable unit. public constructor StructureIconsLayer() Parameter Type Description game GameView Reference to the main game view. eventBus EventBus Event bus for handling game and input events. uiState UIState Current UI state for the game. transformHandler TransformHandler Handles coordinate transformations and scaling. Initializes internal structures, sprite factory, and theme. public function setupRenderer() Returns Promise<void> . Initializes the PIXI renderer and sets up stages for icons, levels, dots, and ghosts. Loads bitmap fonts required for sprite rendering. public function shouldTransform() Returns boolean . Indicates whether this layer should be affected by map transformations. Always returns false . public function init() Returns Promise<void> . Sets up event listeners for mouse and toggle events, window resize, initializes the renderer, and triggers an initial redraw. public function resizeCanvas() Returns void . Updates canvas dimensions and resizes the PIXI renderer to match the current window size. public function tick() Returns void . Updates rendered structures based on the latest game unit updates and user settings. public function redraw() Returns void . Resizes the canvas and prepares for rendering the next frame. public function renderLayer() Parameter Type Description mainContext CanvasRenderingContext2D The 2D rendering context of the main canvas. Returns void . Renders all visible structures, levels, and dots. Updates ghost structures and positions based on transformations and zoom level. public function renderGhost() Returns void . Updates and renders the ghost structure at the current mouse position. Handles build and upgrade availability, visual filters, and scaling. Applies a 50ms throttling for performance. private function createStructure() Parameter Type Description e MouseUpEvent Mouse event used to determine structure placement. Returns void . Finalizes placement or upgrade of a ghost structure and emits the corresponding build or upgrade event. Removes the ghost structure after action. private function moveGhost() Parameter Type Description e MouseMoveEvent Mouse event with updated coordinates. Returns void . Updates the position of the ghost structure based on mouse movement. private function createGhostStructure() Parameter Type Description type UnitType \\| null Type of unit to create a ghost for, or null . Returns void . Creates a ghost structure container, range overlay, and placeholder BuildableUnit for visual placement feedback. private function clearGhostStructure() Returns void . Destroys the current ghost structure and clears any potential upgrade highlighting. private function removeGhostStructure() Returns void . Calls clearGhostStructure() and resets the uiState.ghostStructure to null . private function toggleStructures() Parameter Type Description toggleStructureType UnitType[] \\| null Array of structure types to show; null shows all structures. Returns void . Updates visibility of structure types and triggers modifications for all rendered units. private function findRenderByUnit() Parameter Type Description unitView UnitView Unit to find the corresponding render info for. Returns StructureRenderInfo | undefined . Searches the active renders array for the render info corresponding to the given unit. private function handleActiveUnit() Parameter Type Description unitView UnitView Unit being processed. Returns void . Updates or creates rendering for active units, checking for construction, deletion, ownership, and level changes. private function handleInactiveUnit() Parameter Type Description unitView UnitView Unit being processed. Returns void . Deletes structure rendering for units no longer active. private function modifyVisibility() Parameter Type Description render StructureRenderInfo Render info of the structure to update visibility for. Returns void . Adjusts alpha and outline filters based on the visibility of the structure type. private function checkForDeletionState() Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked for deletion. Returns void . Recreates the icon and dot sprites if the unit is marked for deletion. private function checkForConstructionState() Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates sprite containers if a unit has finished construction. private function checkForOwnershipChange() Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates sprite containers if the unit ownership has changed. private function checkForLevelChange() Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates level sprite container if the unit's level has changed. private function computeNewLocation() Parameter Type Description render StructureRenderInfo Render info of the structure. Returns void . Calculates on-screen position for icon, level, and dot containers based on world coordinates, scaling, and zoom thresholds. private function addNewStructure() Parameter Type Description unitView UnitView Unit to add rendering for. Returns void . Creates new render info for a unit, adds it to active renders, computes its location, and applies visibility rules. private function createLevelSprite() Parameter Type Description unit UnitView Unit to create a level sprite for. Returns PIXI.Container . Uses SpriteFactory to create the level representation for a unit. private function createDotSprite() Parameter Type Description unit UnitView Unit to create a dot sprite for. Returns PIXI.Container . Uses SpriteFactory to create the dot representation for a unit. private function createIconSprite() Parameter Type Description unit UnitView Unit to create an icon sprite for. Returns PIXI.Container . Uses SpriteFactory to create the icon representation for a unit. private function deleteStructure() Parameter Type Description render StructureRenderInfo Render info of the structure to delete. Returns void . Destroys all sprite containers and removes the structure from the active renders and seen units. ./layers/StructureLayers.ts class StructureLayer Renders unit structures, borders, and territories on a dedicated canvas layer. Handles icon loading, scaling, and updates based on game events. Properties: Name Type Description canvas HTMLCanvasElement Main canvas used for rendering the structure layer. context CanvasRenderingContext2D Rendering context for the main canvas. unitIcons Map<string, HTMLImageElement> Maps unit types to loaded icon images. theme Theme Current theme configuration. tempCanvas HTMLCanvasElement Temporary canvas for high-quality icon rendering. tempContext CanvasRenderingContext2D Rendering context for tempCanvas . unitConfigs Partial<Record<UnitType, UnitRenderConfig>> Configuration for supported unit types, including icon paths, border radii, and territory radii. public constructor StructureLayer() Parameter Type Description game GameView Game view providing units, updates, and configuration. eventBus EventBus Event bus for game events. transformHandler TransformHandler Handler for coordinate transformations. Initializes the structure layer, loads unit icons, and sets up temporary rendering resources. public function shouldTransform() Returns boolean . Indicates that this layer requires coordinate transformations for rendering. public function tick() Returns void . Processes game updates since the last tick, updating unit rendering as necessary. public function init() Returns void . Initializes and redraws the structure layer. public function redraw() Returns void . Creates a new canvas, sets scaling options, decodes loaded unit icons, and renders all units. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Rendering context to draw this layer onto. Returns void . Draws the structure layer onto the provided context if the zoom level and user settings allow it. private function loadIcon() Parameter Type Description unitType string The type of unit to load the icon for. config UnitRenderConfig Configuration containing icon path and radii. Returns void . Loads a unit icon image and stores it in unitIcons . Logs success or failure. private function loadIconData() Returns void . Loads all configured unit icons using loadIcon() . private function isUnitTypeSupported() Parameter Type Description unitType UnitType Unit type to check support for. Returns boolean . Returns true if the unit type exists in unitConfigs . private function handleUnitRendering() Parameter Type Description unit UnitView Unit instance to render. Returns void . Handles clearing, border drawing, and icon rendering for a single unit. Skips unsupported types or inactive units. See also: private function drawBorder() , private function renderIcon() private function drawBorder() Parameter Type Description unit UnitView Unit to draw borders for. borderColor Colord Color to use for the border. config UnitRenderConfig Rendering configuration for the unit. Returns void . Draws the unit's border and territory cells on the canvas using the provided colors. private function renderIcon() Parameter Type Description image HTMLImageElement Icon image to render. startX number X-coordinate for the icon placement. startY number Y-coordinate for the icon placement. width number Width to render the icon. height number Height to render the icon. unit UnitView Unit associated with the icon. Returns void . Draws the icon onto the main canvas using the temporary high-resolution canvas. Handles scaling and alpha channel. public function paintCell() Parameter Type Description cell Cell Cell to paint. color Colord Color to paint the cell. alpha number Alpha value (0\u2013255) for the cell. Returns void . Clears the cell and fills it with the specified color and transparency. public function clearCell() Parameter Type Description cell Cell Cell to clear. Returns void . Clears the cell area on the main canvas. ./layers/TeamStats.ts class TeamStats Displays team statistics in a grid view, including scores, resources, and unit counts. Updates periodically based on game ticks and supports toggling between different unit views. Properties: Name Type Description game GameView The game view providing players, teams, and game state. eventBus EventBus Event bus for subscribing to game events. visible boolean Indicates if the team stats layer is visible. Defaults to false . teams TeamEntry[] Array of aggregated team statistics. _shownOnInit boolean Internal flag to track initial display state. showUnits boolean Determines whether to show unit breakdowns ( true ) or score/gold/troops ( false ). public constructor Uses default LitElement constructor. No custom parameters. public function createRenderRoot() Returns this . Uses the light DOM to allow Tailwind styling. public function init() Returns void . Placeholder for interface compliance; no initialization required. public function tick() Returns void . Updates team statistics based on game mode and ticks. Only updates when in Team game mode and visible. Refreshes every 10 ticks or once on initial display. See also: private function updateTeamStats() private function updateTeamStats() Returns void . Aggregates statistics for all teams, including total score, gold, troops, cities, launchers, SAMs, and warships. Updates teams property and triggers re-render. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Context to render the layer on. Returns void . Empty implementation for interface compliance. public function shouldTransform() Returns boolean . Indicates that this layer does not require coordinate transformations. public function render() Returns TemplateResult . Renders the team stats as an HTML grid. Supports toggling between resource view and unit view via a button. Uses translation utilities for headers and Tailwind CSS for styling. interface TeamEntry Aggregates team statistics for display. Properties: Name Type Description teamName string Name of the team. totalScoreStr string Formatted score percentage string. totalGold string Formatted total gold for the team. totalTroops string Formatted total troop count. totalSAMs string Formatted total SAM launchers. totalLaunchers string Formatted total missile silos. totalWarShips string Formatted total warships. totalCities string Formatted total cities. totalScoreSort number Numeric score used for sorting teams. players PlayerView[] Array of players belonging to the team. private function formatPercentage() Parameter Type Description value number Score fraction (0\u20131) to format as a percentage. Returns string . Converts a numeric fraction to a percentage string with precision, returning \"0%\" if NaN and \"100%\" for exact full score. ./layers/TerrainLayer.ts class TerrainLayer Implements the Layer interface to manage the terrain rendering layer for a game view. Handles canvas creation, image data initialization, and layer rendering. Properties: Name Type Description canvas HTMLCanvasElement Canvas element where terrain is drawn. context CanvasRenderingContext2D 2D rendering context for the canvas. imageData ImageData Pixel data for terrain rendering. theme Theme Current theme applied to terrain colors. game GameView Reference to the game view instance. transformHandler TransformHandler Handles layer transformations and scaling. public constructor constructor(game: GameView, transformHandler: TransformHandler) Parameter Type Description game GameView The game view instance. transformHandler TransformHandler Handles layer transformations and scaling. Initializes the TerrainLayer with references to the game and transformation handler. public function shouldTransform() Returns boolean . Determines whether this layer should apply transformations. Always returns true . public function tick() Returns void . Updates the layer state. If the game's theme has changed from the last rendered theme , redraws the terrain layer. public function init() Returns void . Initializes the terrain layer by drawing the canvas for the first time. Logs a message upon redraw. protected function redraw() Returns void . Creates a new canvas sized to the game view, obtains the 2D rendering context, initializes image data, and renders it onto the canvas. Throws an error if 2D context is unsupported. protected function initImageData() Returns void . Initializes pixel data for the terrain layer based on the current theme. Iterates over each tile in the game view and sets RGBA values according to the theme's terrain color. public function renderLayer(context: CanvasRenderingContext2D) Parameter Type Description context CanvasRenderingContext2D Rendering context where the terrain layer is drawn. Returns void . Draws the terrain canvas onto the given rendering context. Enables low-quality image smoothing if the scale is below 1; otherwise, disables smoothing. ./layers/TerritoryLayer.ts class TerritoryLayer Implements the Layer interface to manage territory visualization and highlights in the game view. Handles drawing, alternative views, spawn highlights, player borders, and queued tile rendering. Properties: Name Type Description userSettings UserSettings User settings influencing rendering behavior. canvas HTMLCanvasElement Main canvas for territory rendering. context CanvasRenderingContext2D 2D rendering context for the main canvas. imageData ImageData Pixel data for territory layer. alternativeImageData ImageData Pixel data for alternative view mode. borderAnimTime number Timer for breathing border animation. cachedTerritoryPatternsEnabled boolean \\| undefined Flag indicating if territory pattern caching is enabled. tileToRenderQueue PriorityQueue<{ tile: TileRef; lastUpdate: number }> Queue of tiles pending render updates. random PseudoRandom Random number generator instance for rendering order. theme Theme Current theme applied to territory colors. highlightCanvas HTMLCanvasElement Canvas for spawn and focus highlights. highlightContext CanvasRenderingContext2D 2D rendering context for highlights. highlightedTerritory PlayerView \\| null Currently highlighted territory, if any. alternativeView boolean Indicates if alternative view mode is active. lastDragTime number Timestamp of last drag event. nodrawDragDuration number Duration to skip rendering during drag (ms). lastMousePosition { x: number; y: number } \\| null Last mouse position for territory highlighting. refreshRate number Minimum refresh interval (ms) for rendering. lastRefresh number Timestamp of last render. lastFocusedPlayer PlayerView \\| null Last player that had focus. game GameView Reference to the game view instance. eventBus EventBus Event bus for input and updates. transformHandler TransformHandler Handles layer transformations and scaling. public constructor constructor(game: GameView, eventBus: EventBus, transformHandler: TransformHandler, userSettings: UserSettings) Parameter Type Description game GameView Game view instance. eventBus EventBus Event bus for input events. transformHandler TransformHandler Layer transformation handler. userSettings UserSettings User settings for rendering preferences. Initializes the territory layer with the game, event bus, transform handler, and user settings. Sets initial theme and cache flags. public function shouldTransform() Returns boolean . Determines whether this layer should apply transformations. Always returns true . public async function paintPlayerBorder(player: PlayerView) Parameter Type Description player PlayerView Player whose border is to be painted. Returns Promise<void> . Immediately paints all tiles along the player's border. public function tick() Returns void . Updates territory highlights and enqueues tiles for rendering. Handles spawn phase highlights, unit updates, alliance changes, embargoes, and focused player borders. private function spawnHighlight() Returns void . Updates spawn highlights for human players. Uses team colors or default highlight color and paints tiles within a defined radius from player centers. private function drawFocusedPlayerHighlight() Returns void . Draws a breathing highlight ring around the currently focused player using drawBreathingRing() . public function init() Returns void . Registers input event listeners for mouse-over, alternate view, and drag events. Initializes the layer by calling redraw() . public function onMouseOver(event: MouseOverEvent) Parameter Type Description event MouseOverEvent Mouse-over event containing cursor position. Returns void . Updates last mouse position and refreshes the highlighted territory. private function updateHighlightedTerritory() Returns void . Determines the territory under the cursor in alternative view mode. Redraws borders if the highlighted territory changes. private function getTerritoryAtCell(cell: { x: number; y: number }) Parameter Type Description cell { x: number; y: number } Cell coordinates to check. Returns PlayerView | null . Returns null if cell is invalid or unowned. public function redraw() Returns void . Recreates main and highlight canvases, initializes image data, and paints all tiles according to ownership and alternative view settings. public function redrawBorder(...players: PlayerView[]) Parameter Type Description players PlayerView[] Players whose borders are to be redrawn. Returns Promise<void[]> . Redraws the border tiles for the given players. public function initImageData() Returns void . Clears all image data by setting alpha channels to 0. public function renderLayer(context: CanvasRenderingContext2D) Parameter Type Description context CanvasRenderingContext2D Rendering context for the layer. Returns void . Renders the territory and highlight canvases. Throttles updates according to refreshRate and drag state. protected function renderTerritory() Returns void . Processes a batch of tiles from the render queue and paints them, including neighbor tiles for smooth border updates. public function paintTerritory(tile: TileRef, isBorder: boolean = false) Parameter Type Description tile TileRef Tile to paint. isBorder boolean Optional; whether the tile is a border tile. Defaults to false . Returns void . Paints a tile according to ownership, border status, alternative view, and highlight rules. public function alternateViewColor(other: PlayerView) Parameter Type Description other PlayerView Player whose color is to be determined. Returns Colord . Computes color for a tile in alternative view mode based on ownership, ally/enemy status, or neutrality. public function paintAlternateViewTile(tile: TileRef, other: PlayerView) Parameter Type Description tile TileRef Tile to paint. other PlayerView Player whose color to use. Returns void . Paints a tile in alternative view mode. public function paintTile(imageData: ImageData, tile: TileRef, color: Colord, alpha: number) Parameter Type Description imageData ImageData ImageData buffer to modify. tile TileRef Tile index to paint. color Colord Color to apply. alpha number Alpha transparency value. Returns void . Updates pixel data for a tile with the given color and alpha. public function clearTile(tile: TileRef) Parameter Type Description tile TileRef Tile index to clear. Returns void . Sets alpha to 0 in both imageData and alternativeImageData . public function clearAlternativeTile(tile: TileRef) Parameter Type Description tile TileRef Tile index to clear in alternative view. Returns void . Sets alpha to 0 in alternativeImageData only. public function enqueueTile(tile: TileRef) Parameter Type Description tile TileRef Tile to enqueue for rendering. Returns void . Adds a tile to the render queue with a small random offset to stagger updates. public async function enqueuePlayerBorder(player: PlayerView) Parameter Type Description player PlayerView Player whose border tiles to enqueue. Returns Promise<void> . Enqueues all border tiles of a player for rendering. public function paintHighlightTile(tile: TileRef, color: Colord, alpha: number) Parameter Type Description tile TileRef Tile to highlight. color Colord Highlight color. alpha number Alpha transparency value. Returns void . Paints a highlight tile on the highlight canvas. public function clearHighlightTile(tile: TileRef) Parameter Type Description tile TileRef Tile to clear from highlight canvas. Returns void . Clears a highlight tile. private function drawBreathingRing(cx: number, cy: number, minRad: number, maxRad: number, radius: number, transparentColor: Colord, breathingColor: Colord) Parameter Type Description cx number Center x-coordinate. cy number Center y-coordinate. minRad number Minimum radius of the ring. maxRad number Maximum radius of the ring. radius number Current radius for breathing animation. transparentColor Colord Base color for transparent ring portion. breathingColor Colord Color used for breathing ring portion. Returns void . Draws a radial breathing highlight ring for spawn or focus effects. ./layers/UILayer.ts class UILayer Layer responsible for drawing UI elements that overlay the game, including selection boxes, health bars, and loading bars. Properties: Name Type Description canvas HTMLCanvasElement The internal canvas used to draw UI elements. context CanvasRenderingContext2D \\| null Canvas rendering context for drawing operations. theme Theme \\| null Current theme used for UI colorization. userSettings UserSettings Stores user preferences for UI display. selectionAnimTime number Tracks animation time for selection box pulsation. allProgressBars Map<number, { unit: UnitView; progressBar: ProgressBar }> Tracks progress bars for units currently in progress. allHealthBars Map<number, ProgressBar> Tracks health bars for active units. selectedUnit UnitView \\| null Currently selected unit. lastSelectionBoxCenter { x: number; y: number; size: number } \\| null Stores previous selection box position for clearing. SELECTION_BOX_SIZE number Size of selection boxes (constant). game GameView Reference to the main game view. eventBus EventBus Event bus for subscribing to game events. transformHandler TransformHandler Handles coordinate transformations for drawing. public function shouldTransform() Returns boolean . Determines whether this layer should apply coordinate transformations. Always returns true . public function tick() Returns void . Updates animation states and UI elements: Increments selectionAnimTime . Redraws selection box for selected warships. Processes unit updates since the last tick. Updates progress bars. public function init() Returns void . Initializes the UI layer: Subscribes to unit selection events. Calls redraw() to initialize the canvas. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Context to render the layer onto. Returns void . Draws the internal canvas onto the provided context, centered on the game view. public function redraw() Returns void . Creates a new internal canvas and obtains its rendering context. Sets canvas size to match game dimensions. private function onUnitEvent() Parameter Type Description unit UnitView The unit whose UI state has changed. Returns void . Updates UI elements based on unit type and state: Creates loading bars for constructions or partially ready units. Draws health bars for warships. Skips inactive or undefined units. private function clearIcon() Parameter Type Description icon HTMLImageElement Icon to clear. startX number X-coordinate of icon position. startY number Y-coordinate of icon position. Returns void . Clears the area occupied by the icon on the internal canvas. private function drawIcon() Parameter Type Description icon HTMLImageElement Icon image to draw. unit UnitView Unit owning the icon. startX number X-coordinate for drawing. startY number Y-coordinate for drawing. Returns void . Draws a filled rectangle using the unit's border color, then overlays the icon image. private function onUnitSelection() Parameter Type Description event UnitSelectionEvent Event containing unit selection state. Returns void . Handles selection events: Sets or clears selectedUnit . Draws or clears the selection box as appropriate. private function clearSelectionBox() Parameter Type Description x number Center X-coordinate of the selection box. y number Center Y-coordinate of the selection box. size number Half-size of the selection box. Returns void . Clears the selection box border by clearing cells around the specified coordinates. public function drawSelectionBox() Parameter Type Description unit UnitView Unit around which the selection box is drawn. Returns void . Draws a pulsating selection box for active units: Calculates opacity based on selectionAnimTime . Uses owner color brightened by 20%. Clears previous box if the unit has moved. See also: private function clearSelectionBox() public function drawHealthBar() Parameter Type Description unit UnitView Warship unit to draw health bar for. Returns void . Draws a health bar for active warships: Clears existing bar if health is full or unit is inactive. Creates new ProgressBar if unit has partial health. private function updateProgressBars() Returns void . Updates all active progress bars: Increments progress. Clears bars that have reached completion. private function getProgress() Parameter Type Description unit UnitView Unit to calculate progress for. Returns number . Computes progress for constructions, missile silos, and deletable units: Returns 1 for inactive or undefined units. Calculates construction completion or deletion progress. private function deletionProgress() Parameter Type Description game GameView Current game view. unit UnitView Unit marked for deletion. Returns number . Calculates progress based on remaining ticks until deletion. Returns 1 if unit is not marked for deletion. public function createLoadingBar() Parameter Type Description unit UnitView Unit to create a loading bar for. Returns void . Creates a new ProgressBar for units in progress if one does not already exist. See also: private function updateProgressBars() public function paintCell() Parameter Type Description x number X-coordinate of the cell. y number Y-coordinate of the cell. color Colord Color to paint. alpha number Alpha transparency (0-255). Returns void . Paints a single pixel on the canvas with the specified color and alpha. public function clearCell() Parameter Type Description x number X-coordinate of the cell. y number Y-coordinate of the cell. Returns void . Clears a single pixel on the internal canvas. ./layers/UnitDisplay.ts class UnitDisplay Displays unit counts and build options in the UI. Provides interactive unit selection and hotkey overlays. Properties: Name Type Description game GameView Reference to the current game view. eventBus EventBus Event bus for subscribing and emitting events. uiState UIState Tracks current UI state, including ghost structures. playerActions PlayerActions \\| null Tracks available buildable units for the player. keybinds Record<string, { value: string; key: string }> Stores keybinds loaded from local storage. _cities number Count of City units. _warships number Count of Warship units. _factories number Count of Factory units. _missileSilo number Count of Missile Silo units. _port number Count of Port units. _defensePost number Count of Defense Post units. _samLauncher number Count of SAM Launcher units. allDisabled boolean Indicates if all units are disabled in configuration. _hoveredUnit UnitType \\| null Currently hovered unit type for tooltip display. public function createRenderRoot() Returns this . Overrides LitElement's createRenderRoot to render directly in the light DOM. public function init() Returns void . Initializes the unit display: Loads saved keybinds from local storage. Checks which units are disabled and sets allDisabled flag. Triggers an update of the component. private function cost() Parameter Type Description item UnitType The unit type to query. Returns Gold . Returns the cost of the given unit type based on playerActions . Returns 0n if the unit is not buildable. private function canBuild() Parameter Type Description item UnitType Unit type to check for build eligibility. Returns boolean . Determines if the player can build the specified unit: Considers unit disable status, available gold, and prerequisite structures. public function tick() Returns void . Updates unit counts from the player's current units and refreshes playerActions . Triggers component re-render. public function render() Returns TemplateResult | null . Renders the unit display UI: Returns null if the game or player is not available, in spawn phase, or if all units are disabled. Builds two UI sections: regular units and military units (warships and nuclear devices). Each unit is rendered via renderUnitItem() . private function renderUnitItem() Parameter Type Description icon string URL or import of the unit icon image. number number \\| null Count of units, null if not applicable. unitType UnitType Unit type being rendered. structureKey string Key used for translations and identifiers. hotkey string Assigned hotkey for building this unit. Returns TemplateResult . Renders a single unit UI element: Hides element if unit is disabled. Displays tooltip on hover with name, description, and cost. Shows hotkey in the top-left corner. Handles click to select/deselect ghost structure in uiState . Emits ToggleStructureEvent to show or hide related structures when hovered. See also: function cost() , function canBuild() ./layers/UnitLayer.ts class UnitLayer Manages rendering of all units and their movement trails. Handles unit selection, movement intents, and alternate view overlays. Properties: Name Type Description canvas HTMLCanvasElement Main canvas for unit sprites. context CanvasRenderingContext2D 2D rendering context of canvas . transportShipTrailCanvas HTMLCanvasElement Canvas for rendering transport ship trails. unitTrailContext CanvasRenderingContext2D 2D context for unit trails. unitToTrail Map<UnitView, TileRef[]> Tracks the tile trail for each moving unit. theme Theme Current theme for color configuration. alternateView boolean Indicates if alternate coloring view is active. oldShellTile Map<UnitView, TileRef> Tracks previous positions for shell units. transformHandler TransformHandler Converts between screen and world coordinates. selectedUnit UnitView \\| null Currently selected unit. WARSHIP_SELECTION_RADIUS number Radius for selecting warships near a click, in game cells. public function shouldTransform() Returns boolean . Indicates that this layer should be transformed based on game world coordinates. public function tick() Returns void . Updates unit sprites based on changes since the last tick. public function init() Returns void . Initializes event listeners and loads all sprites. Subscribes to: AlternateViewEvent MouseUpEvent UnitSelectionEvent private function findWarshipsNearCell() Parameter Type Description cell { x: number; y: number } World coordinates to check for nearby warships. Returns UnitView[] . Finds player-owned warships near the given cell within WARSHIP_SELECTION_RADIUS , sorted by proximity. private function onMouseUp() Parameter Type Description event MouseUpEvent Mouse release event containing screen coordinates. Returns void . Handles warship selection and movement intents on mouse release. private function onUnitSelectionChange() Parameter Type Description event UnitSelectionEvent Event indicating unit selection/deselection. Returns void . Updates selectedUnit based on selection events. private function handleUnitDeactivation() Parameter Type Description unit UnitView Unit to check for deactivation. Returns void . Deselects a unit if it has been deactivated. public function renderLayer() Parameter Type Description context CanvasRenderingContext2D Target rendering context. Returns void . Draws the unit and trail canvases onto the provided context. public function onAlternativeViewEvent() Parameter Type Description event AlternateViewEvent Event toggling alternate view mode. Returns void . Sets alternateView and redraws the layer. public function redraw() Returns void . Creates canvases and contexts for units and trails. Clears and repaints all units and trails. private function updateUnitsSprites() Parameter Type Description unitIds number[] List of unit IDs to update. Returns void . Clears and redraws the sprites of the specified units. private function clearUnitsCells() Parameter Type Description unitViews UnitView[] Units to clear from the canvas. Returns void . Clears the previous sprite positions of active units. private function drawUnitsCells() Parameter Type Description unitViews UnitView[] Units to draw. Returns void . Draws each unit using onUnitEvent() . private function relationship() Parameter Type Description unit UnitView Unit whose relationship to the player is determined. Returns Relationship . Determines if the unit belongs to self, ally, or enemy. public function onUnitEvent() Parameter Type Description unit UnitView Unit to process. Returns void . Dispatches unit handling to specialized methods based on unit type. Deselects deactivated units. private function handleWarShipEvent() Parameter Type Description unit UnitView Warship unit to draw. Returns void . Draws warship sprite with optional red target indicator. private function handleShellEvent() Parameter Type Description unit UnitView Shell unit to process. Returns void . Clears previous positions and paints current and last positions of shell units. private function handleMissileEvent() Parameter Type Description unit UnitView Missile unit to process. Returns void . Draws interception missiles. private function drawTrail() Parameter Type Description trail number[] Tile indices for the trail. color Colord Color of the trail. rel Relationship Unit relationship determining coloring. Returns void . Paints a trail of tiles for moving units. private function clearTrail() Parameter Type Description unit UnitView Unit whose trail is cleared. Returns void . Removes the unit's trail from the canvas and repaints overlapping trails. private function handleNuke() Parameter Type Description unit UnitView Nuclear unit to process. Returns void . Draws the trail and sprite of nukes. Clears trail if inactive. Supports line interpolation for fast-moving units. private function handleMIRVWarhead() Parameter Type Description unit UnitView MIRV warhead to process. Returns void . Paints MIRV warhead position and clears last tile. private function handleTradeShipEvent() Parameter Type Description unit UnitView Trade ship unit to draw. Returns void . Draws trade ship sprite. private function handleTrainEvent() Parameter Type Description unit UnitView Train unit to draw. Returns void . Draws train sprite. private function handleBoatEvent() Parameter Type Description unit UnitView Transport ship unit to draw. Returns void . Draws boat sprite with trail and clears trail if inactive. public function paintCell() Parameter Type Description x number X coordinate in canvas pixels. y number Y coordinate in canvas pixels. relationship Relationship Relationship of unit to player. color Colord Base color. alpha number Alpha transparency (0\u2013255). context CanvasRenderingContext2D Optional context; defaults to main context . Returns void . Paints a single canvas pixel according to relationship or color and alpha. public function clearCell() Parameter Type Description x number X coordinate in canvas pixels. y number Y coordinate in canvas pixels. context CanvasRenderingContext2D Optional context; defaults to main context . Returns void . Clears a single pixel in the given canvas context. public function drawSprite() Parameter Type Description unit UnitView Unit to draw. customTerritoryColor? Colord Optional custom color for the unit. Returns void . Draws the unit's sprite on the canvas, applying alternate view coloring or opacity adjustments if the unit is not targetable. See also: function paintCell() , function clearCell() ./layers/WinModal.ts class WinModal Manages the display and interaction of the win modal, including showing victory messages, pattern support buttons, and handling user actions. Implements: interface Layer Properties: Name Type Description game GameView The current game view instance. eventBus EventBus Event bus used to emit game events. hasShownDeathModal boolean Tracks whether the death modal has already been displayed. isVisible boolean Indicates if the modal is currently visible. Managed as a reactive @state() . showButtons boolean Determines whether the action buttons are displayed. Managed as a reactive @state() . isWin boolean Indicates if the current outcome is a win. Managed as a private reactive @state() . patternContent TemplateResult \\| null Stores dynamically loaded pattern button content. Managed as a private reactive @state() . _title string Stores the modal title for display. rand number Random number used to determine modal content fallback. public constructor constructor() Initializes a WinModal instance. Overrides shadow DOM creation to use the light DOM. public function createRenderRoot() Returns this . Overrides default LitElement behavior to prevent creation of a shadow DOM. public function render() Returns TemplateResult . Renders the modal container, title, content (pattern buttons or Steam wishlist), and action buttons. Applies animation classes when visible. public function innerHtml() Returns TemplateResult . Determines which inner content to render: either pattern buttons via function renderPatternButton() or a Steam wishlist link via function steamWishlist() . public function renderPatternButton() Returns TemplateResult . Renders the container for the support pattern button, including title, description, and dynamically loaded patternContent . public async function loadPatternContent() Returns Promise<void> . Loads and filters purchasable patterns for the current user. Dynamically creates pattern-button elements and sets patternContent . Falls back to empty content if no purchasable patterns exist. public function steamWishlist() Returns TemplateResult . Renders a Steam wishlist link as fallback content if inside an iframe or based on random chance. public async function show() Returns Promise<void> . Displays the modal by loading pattern content, setting visibility, and revealing buttons after a delay. public function hide() Returns void . Hides the modal and action buttons. private function _handleExit() Returns void . Hides the modal and redirects the user to the home page. public function init() Returns void . Implements interface Layer . Placeholder initialization function. public function tick() Returns void . Checks game state updates and displays the modal when appropriate, such as on death or victory. Emits class SendWinnerEvent via eventBus when a winner is detected. Updates _title and isWin accordingly. public function renderLayer() Returns void . Implements interface Layer . Placeholder for rendering to canvas. public function shouldTransform() Returns boolean . Indicates whether the layer requires canvas transformation. Always returns false . Style Data Sound SoundManager.ts class SoundManager Manages background music and sound effects using Howler.js. Handles track sequencing, volume, and playback. Properties: Name Type Description backgroundMusic Howl[] Array of background music tracks. currentTrack number Index of the currently playing background track. soundEffects Map<SoundEffect, Howl> Loaded sound effects mapped by SoundEffect . soundEffectsVolume number Volume level for sound effects (defaults to 1 ). backgroundMusicVolume number Volume level for background music (defaults to 0 ). public constructor constructor() No parameters. Initializes background music tracks and loads default sound effects. Throws an error if Howl fails to initialize. public function playBackgroundMusic() No parameters. Plays the current background music track if not already playing. Returns void . public function stopBackgroundMusic() No parameters. Stops the currently playing background music track. Returns void . public function setBackgroundMusicVolume() Parameter Type Description volume number Volume level between 0 and 1 . Sets the volume of all background music tracks. Returns void . private function playNext() No parameters. Advances to the next background track and plays it. Returns void . public function loadSoundEffect() Parameter Type Description name SoundEffect Name of the sound effect. src string Source file path for the sound effect. Loads a sound effect if not already loaded. Returns void . public function playSoundEffect() Parameter Type Description name SoundEffect Name of the sound effect to play. Plays a loaded sound effect. Returns void . public function setSoundEffectsVolume() Parameter Type Description volume number Volume level between 0 and 1 . Sets the volume for all loaded sound effects. Returns void . public function stopSoundEffect() Parameter Type Description name SoundEffect Name of the sound effect to stop. Stops a playing sound effect. Returns void . public function unloadSoundEffect() Parameter Type Description name SoundEffect Name of the sound effect to unload. Unloads a sound effect and removes it from the internal map. Returns void . enum SoundEffect Defines available sound effect identifiers. Properties: Name Type Description KaChing string Identifier for the \"ka-ching\" sound effect. Utilities ReplaySpeedMultiplier.ts enum ReplaySpeedMultiplier Enum containing speed multiplier names ( string ) and their values ( number ). const defaultReplaySpeedMultiplier The default replay speed multiplier. RenderUnitTypeOptions.ts interface UnitTypeRenderContext Property Type Description disabledUnits UnitType[] Array of disabled units. toggleUnit (unit: UnitType, checked: boolean) => void Function to toggle a unit's visibility. const unitOptions Array of objects containing unit types ( UnitType ) and their translation keys ( string ). function renderUnitTypeOptions() Parameter Type Description context UnitTypeRenderContext The rendering context for unit types. Returns TemplateResult[] \u2014 an array of lit-html template strings, each containing the HTML for a unit type and a checkbox.",
      "title": "Client reference"
    },
    {
      "location": "client/#client-reference",
      "text": "Table of contents: Client reference Components Difficulties.ts class DifficultyDisplay private function getDifficultyIcon(difficultyKey: string) public function render() Maps.ts const MapDescription class MapDisplay private function loadMapData() public function render() ModalOverlay.ts class ModalOverlay public function render() NewsButton.ts class NewsButton private function checkForNewVersion() private function handleClick() public function render() public function createRenderRoot() PatternButton.ts const BUTTON_WIDTH class PatternButton private function translateCosmetic() private function handleClick() private function handlePurchase() public function render() public function createRenderRoot() function renderPatternPreview() ActionButton.ts function actionButton() Divider.ts class Divider public function createRenderRoot() public function render() Graphics AnimatedSprite.ts class AnimatedSprite public constructor constructor() public function update() public function isActive() public function lifeTime() public function draw() public function reset() public function setOrigin() AnimatedSpriteLoader.ts class AnimatedSpriteLoader public function loadAllAnimatedSpriteImages() private function createRegularAnimatedSprite() private function getColoredAnimatedSprite() private function createColoredAnimatedSpriteForUnit() public function createAnimatedSprite() GameRenderer.ts function createRenderer() class GameRenderer public constructor constructor() public function initialize() public function resizeCanvas() public function redraw() public function renderGame() public function tick() public function resize() NameBoxCalculator.ts interface Point interface Rectangle public function placeName() public function createGrid() public function findLargestInscribedRectangle() public function largestRectangleInHistogram() public function calculateFontSize() ProgressBar.ts class ProgressBar public constructor constructor() public function setProgress() public function clear() public function getX() public function getY() public function getProgress() SpriteLoader.ts Constants type TrainTypeSprite SPRITE_CONFIG spriteMap coloredSpriteCache public function loadAllSprites() private function trainTypeToSpriteType() private function getSpriteForUnit() public function isSpriteReady() public function colorizeCanvas() private function computeSpriteKey() public function getColoredSprite() TransformHandler.ts Constants class TransformHandler public constructor constructor() public function updateCanvasBoundingRect() public function boundingRect() public function width() public function hasChanged() public function resetChanged() public function handleTransform() public function worldToScreenCoordinates() public function screenToWorldCoordinates() public function screenBoundingRect() public function isOnScreen() public function screenCenter() public function onGoToPlayer() public function onGoToPosition() public function onGoToUnit() public function centerCamera() private function goTo() public function onZoom() UIState.ts interface UIState ./fx/ConquestFx.ts public function conquestFxFactory() ./fx/Fx.ts interface Fx public function renderTick() enum FxType ./fx/NukeArea.ts class NukeAreaFx public constructor constructor() public function end() public function renderTick() ./fx/NukeFx.ts class ShockwaveFx public constructor constructor() public function renderTick() private function addSpriteInCircle() public function nukeFxFactory() ./fx/SpriteFx.ts class MoveSpriteFx public constructor constructor() public function renderTick() class FadeFx public constructor constructor() public function renderTick() class SpriteFx public constructor constructor() public function renderTick() public function getElapsedTime() public function getDuration() ./fx/TargetFx.ts class TargetFx public function end() public function renderTick() ./fx/TextFx.ts class TextFx public function renderTick() ./fx/Timeline.ts class Timeline public function add() public function update() public function isComplete() ./fx/UnitExplosionFx.ts class UnitExplosionFx public constructor UnitExplosionFx() public function renderTick() ./layers/AdTimer.ts class AdTimer public constructor AdTimer() public function init() public async function tick() ./layers/AlertFrame.ts class AlertFrame public constructor constructor() public function init() public function tick() public function shouldTransform() private function onBrokeAllianceUpdate() private function activateAlert() public function dismissAlert() public function render() ./layers/BuildMenu.ts interface BuildItemDisplay const buildTable const flattenedBuildTable class BuildMenu public function init() public function tick() public function canBuildOrUpgrade() public function cost() public function count() public function sendBuildOrUpgrade() public function render() public function hideMenu() public function showMenu() private function refresh() private function getBuildableUnits() getter isVisible ./layers/ChatDisplay.ts interface ChatEvent class ChatDisplay private function toggleHidden() private function addEvent() private function removeEvent() public function onDisplayMessageEvent() public function init() public function tick() private function getChatContent() public function render() public function createRenderRoot() ./layers/ChatIntegration.ts class ChatIntegration public constructor constructor() public function setupChatModal() public function createQuickChatMenu() public function shortenText() ./layers/ChatModal.ts type QuickChatPhrase type QuickChatPhrases class ChatModal public function initEventBus() public function open() public function close() public function setRecipient() public function setSender() public function openWithSelection() private function selectCategory() private function selectPhrase() private function selectPlayer() private function sendChatMessage() private function onPlayerSearchInput() private function getSortedFilteredPlayers() private function getFullQuickChatKey() private function renderPhrasePreview() private function getPhrasesForCategory() ./layers/ControlPanel.ts class ControlPanel public function init() public function tick() private function updateTroopIncrease() public function onAttackRatioChange() public function renderLayer() public function shouldTransform() public function setVisibile() public function render() public function createRenderRoot() ./layers/EmojiTable.ts class EmojiTable public function initEventBus() private property onEmojiClicked public function render() public function hideTable() public function showTable() public function createRenderRoot() ./layers/EventsDisplay.ts class EventsDisplay public function init() public function tick() public function disconnectedCallback() public function shouldTransform() public function renderLayer() private function renderButton() private function renderToggleButton() private function toggleHidden() private function toggleEventFilter() private function checkForAllianceExpirations() private function addEvent() private function removeEvent() Event Handlers (onXEvent) Private helper functions for rendering public function render() public function createRenderRoot() ./layers/FPSDisplay.ts class FPSDisplay public function init() public function setVisible() private function handleClose() private function handleMouseDown() private function handleMouseMove() private function handleMouseUp() public function updateFPS() public function shouldTransform() private function getFPSColor() public function render() ./layers/FxLayer.ts class FxLayer public constructor constructor() public function shouldTransform() public function tick() private function manageBoatTargetFx() private function createNukeTargetFxIfOwned() public function onBonusEvent() public function addTextFx() public function randomEvent() public function onUnitEvent() public function onShellEvent() public function onTrainEvent() public function onRailroadEvent() public function onConquestEvent() public function onWarshipEvent() public function onStructureEvent() public function onNukeEvent() private function handleNukeExplosion() private function handleSAMInterception() public async function init() public function redraw() public function renderLayer() private function renderAllFx() private function renderContextFx() ./layers/GameLeftSidebar.ts class GameLeftSidebar public function createRenderRoot() public function init() public function tick() private function toggleLeaderboard() private function toggleTeamLeaderboard() private getter isTeamGame() private function getTranslatedPlayerTeamLabel() public function render() ./layers/GameRightSidebar.ts class GameRightSidebar public function createRenderRoot() public function init() public function tick() private function secondsToHms() private function toggleReplayPanel() private function onPauseButtonClick() private function onExitButtonClick() private function onSettingsButtonClick() public function render() private function maybeRenderReplayButtons() ./layers/HeadsUpMessage.ts class HeadsUpMessage public function createRenderRoot() public function init() public function tick() public function render() ./layers/Layer.ts interface Layer ./layers/Leaderboard.ts interface Entry class GoToPlayerEvent class GoToPositionEvent class GoToUnitEvent class Leaderboard public function createRenderRoot() public function init() public function tick() private function setSort() private function updateLeaderboard() private function handleRowClickPlayer() public function renderLayer() public function shouldTransform() public function render() private function formatPercentage() ./layers/MainRadialMenu.ts class MainRadialMenu constructor public function init() private async function updatePlayerActions() public async function tick() public function renderLayer() public function shouldTransform() public function closeMenu() ./layers/MultiTabModal.ts class MultiTabModal public function createRenderRoot() public function tick() public function init() private function generateFakeIp() private function generateDeviceFingerprint() public function show() public function hide() public function disconnectedCallback() public function render() ./layers/NameLayer.ts class RenderInfo class NameLayer implements Layer public function init() public function tick() public function renderLayer() public function shouldTransform() public function redraw() private function onAlternateViewChange() private function updateElementVisibility() private function createPlayerElement() public function renderPlayerInfo() private function createIconElement() ./layers/PlayerActionHandler.ts class PlayerActionHandler public function getPlayerActions() public function handleAttack() public function handleBoatAttack() public function findBestTransportShipSpawn() public function handleSpawn() public function handleAllianceRequest() public function handleBreakAlliance() public function handleTargetPlayer() public function handleDonateGold() public function handleDonateTroops() public function handleEmbargo() public function handleEmoji() public function handleDeleteUnit() ./layers/PlayerInfoOverlay.ts class PlayerInfoOverlay public property game public property eventBus public property transform private state _isInfoVisible private state player private state playerProfile private state unit public function init() public function hide() public function maybeShow() public function tick() public function renderLayer() public function shouldTransform() public function setVisible() private function getRelationClass() private function getRelationName() private function displayUnitCount() private function allianceExpirationText() private function renderPlayerInfo() private function renderUnitInfo() protected function createRenderRoot() ./layers/PlayerPanel.ts class PlayerPanel protected function createRenderRoot() public function initEventBus() public function init() public async function tick() public function show() public function hide() private function handleClose() private function handleAllianceClick() private function handleBreakAllianceClick() private function openSendTroops() private function openSendGold() private function handleDonateTroopClick() private function handleDonateGoldClick() private function closeSend() private function confirmSend() private function handleEmbargoClick() private function handleStopEmbargoClick() private function onStopTradingAllClick() private function onStartTradingAllClic()k private function handleEmojiClick() private function handleChat() private function handleTargetClick() private function identityChipProps() private function getRelationClass() private function getRelationName() private function getExpiryColorClass() private function getTraitorRemainingSeconds() private function renderTraitorBadge() private function renderRelationPillIfNation() private function renderIdentityRow() private function renderResources() private function renderStats() private function renderAlliances() private function renderAllianceExpiry() private function renderActions() public function render() ./layers/RadialMenu.ts class CloseRadialMenuEvent constructor CloseRadialMenuEvent() interface TooltipItem interface RadialMenuConfig class RadialMenu implements Layer constructor RadialMenu() public function init() public function showRadialMenu() public function hideRadialMenu() public function disableAllButtons() public function updateCenterButtonState() public function isMenuVisible() public function getCurrentLevel() public function setParams() public function refreshMenu() public function refresh() public function renderLayer() public function shouldTransform() ./layers/RadialMenuElements.ts interface MenuElementParams interface MenuElement interface TooltipKey interface CenterButtonElement constant COLORS enum Slot public function getAllEnabledUnits() Behavior public function createMenuElements() Behavior All exported MenuElement constants Example: deleteUnitElement action behavior exported CenterButtonElement constant ./layers/RailroadLayer.ts class RailroadLayer public constructor constructor(game: GameView, transformHandler: TransformHandler) public function shouldTransform() public function tick() public function updateRailColors() public function init() public function redraw() public function renderLayer(context: CanvasRenderingContext2D) private function handleRailroadRendering(railUpdate: RailroadUpdate) private function paintRailroad(railRoad: RailTile) private function clearRailroad(railRoad: RailTile) public function paintRail(railRoad: RailTile) private function paintRailRects(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) private function paintBridge(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType) ./layers/RailroadSprites.ts function getRailroadRects(type: RailType) function horizontalRailroadRects() function verticalRailroadRects() function topRightRailroadCornerRects() function topLeftRailroadCornerRects() function bottomRightRailroadCornerRects() function bottomLeftRailroadCornerRects() function getBridgeRects(type: RailType) function horizontalBridge() function verticalBridge() function topRightBridgeCornerRects() function bottomLeftBridgeCornerRects() function topLeftBridgeCornerRects() function bottomRightBridgeCornerRects() ./layers/SAMRadiusLayer.ts class SAMRadiusLayer public constructor SAMRadiusLayer(game, eventBus, transformHandler, uiState) public function init() private function handleToggleStructure(e) private function updateStrokeVisibility() public function shouldTransform() public function tick() public function renderLayer(context) public function redraw() private function drawCirclesUnion(circles) ./layers/SendResourcesModal.ts class SendResourceModal public function createRenderRoot() protected function connectedCallback() protected function updated(changed) private function closeModal() private function confirm() private function handleKeydown(e) private function toNum(x) private function getTotalNumber() private function sanitizePercent(p) private function getCapacityLeft() private function getPercentBasis() private function limitAmount(proposed) private function clampSend(n) private function percentOfBasis(n) private function keepAfter(allowed) private function getFillColor() private function getMinKeepRatio() private function isTargetAlive() private function isSenderAlive() private function renderHeader() private function renderAvailable() private function renderPresets(percentNow) private function renderSlider(percentNow) private function renderCapacityNote(allowed) private function renderSummary(allowed) private function renderActions() private function renderDeadNote() private function renderSliderStyles() public function render() ./layers/SettingsModal.ts class ShowSettingsModalEvent public constructor ShowSettingsModalEvent(isVisible?, shouldPause?, isPaused?) class SettingsModal public function init() public function createRenderRoot() public function connectedCallback() public function disconnectedCallback() private function handleOutsideClick(event) private function handleKeyDown(event) public function openModal() public function closeModal() private function pauseGame(pause) private function onTerrainButtonClick() private function onToggleEmojisButtonClick() private function onToggleStructureSpritesButtonClick() private function onToggleSpecialEffectsButtonClick() private function onToggleDarkModeButtonClick() private function onToggleRandomNameModeButtonClick() private function onToggleLeftClickOpensMenu() private function onTogglePerformanceOverlayButtonClick() private function onExitButtonClick() private function onVolumeChange(event) private function onSoundEffectsVolumeChange(event) public function render() ./layers/SpawnTimer.ts class SpawnTimer public function createRenderRoot() public function init() public function tick() public function shouldTransform() public function render() private function sumIterator(values) ./layers/StructureDrawingUtils.ts Constants Type ShapeType class SpriteFactory constructor SpriteFactory() private function loadIcon() private function invalidateTextureCache() public function createGhostContainer() public function createUnitContainer() private function createTexture() private function createIcon() public function createRange() private function getImageColored() ./layers/StructureIconsLayer.ts class StructureRenderInfo class StructureIconsLayer public constructor StructureIconsLayer() public function setupRenderer() public function shouldTransform() public function init() public function resizeCanvas() public function tick() public function redraw() public function renderLayer() public function renderGhost() private function createStructure() private function moveGhost() private function createGhostStructure() private function clearGhostStructure() private function removeGhostStructure() private function toggleStructures() private function findRenderByUnit() private function handleActiveUnit() private function handleInactiveUnit() private function modifyVisibility() private function checkForDeletionState() private function checkForConstructionState() private function checkForOwnershipChange() private function checkForLevelChange() private function computeNewLocation() private function addNewStructure() private function createLevelSprite() private function createDotSprite() private function createIconSprite() private function deleteStructure() ./layers/StructureLayers.ts class StructureLayer public constructor StructureLayer() public function shouldTransform() public function tick() public function init() public function redraw() public function renderLayer() private function loadIcon() private function loadIconData() private function isUnitTypeSupported() private function handleUnitRendering() private function drawBorder() private function renderIcon() public function paintCell() public function clearCell() ./layers/TeamStats.ts class TeamStats public constructor public function createRenderRoot() public function init() public function tick() private function updateTeamStats() public function renderLayer() public function shouldTransform() public function render() interface TeamEntry private function formatPercentage() ./layers/TerrainLayer.ts class TerrainLayer public constructor constructor(game: GameView, transformHandler: TransformHandler) public function shouldTransform() public function tick() public function init() protected function redraw() protected function initImageData() public function renderLayer(context: CanvasRenderingContext2D) ./layers/TerritoryLayer.ts class TerritoryLayer public constructor constructor(game: GameView, eventBus: EventBus, transformHandler: TransformHandler, userSettings: UserSettings) public function shouldTransform() public async function paintPlayerBorder(player: PlayerView) public function tick() private function spawnHighlight() private function drawFocusedPlayerHighlight() public function init() public function onMouseOver(event: MouseOverEvent) private function updateHighlightedTerritory() private function getTerritoryAtCell(cell: { x: number; y: number }) public function redraw() public function redrawBorder(...players: PlayerView[]) public function initImageData() public function renderLayer(context: CanvasRenderingContext2D) protected function renderTerritory() public function paintTerritory(tile: TileRef, isBorder: boolean = false) public function alternateViewColor(other: PlayerView) public function paintAlternateViewTile(tile: TileRef, other: PlayerView) public function paintTile(imageData: ImageData, tile: TileRef, color: Colord, alpha: number) public function clearTile(tile: TileRef) public function clearAlternativeTile(tile: TileRef) public function enqueueTile(tile: TileRef) public async function enqueuePlayerBorder(player: PlayerView) public function paintHighlightTile(tile: TileRef, color: Colord, alpha: number) public function clearHighlightTile(tile: TileRef) private function drawBreathingRing(cx: number, cy: number, minRad: number, maxRad: number, radius: number, transparentColor: Colord, breathingColor: Colord) ./layers/UILayer.ts class UILayer public function shouldTransform() public function tick() public function init() public function renderLayer() public function redraw() private function onUnitEvent() private function clearIcon() private function drawIcon() private function onUnitSelection() private function clearSelectionBox() public function drawSelectionBox() public function drawHealthBar() private function updateProgressBars() private function getProgress() private function deletionProgress() public function createLoadingBar() public function paintCell() public function clearCell() ./layers/UnitDisplay.ts class UnitDisplay public function createRenderRoot() public function init() private function cost() private function canBuild() public function tick() public function render() private function renderUnitItem() ./layers/UnitLayer.ts class UnitLayer public function shouldTransform() public function tick() public function init() private function findWarshipsNearCell() private function onMouseUp() private function onUnitSelectionChange() private function handleUnitDeactivation() public function renderLayer() public function onAlternativeViewEvent() public function redraw() private function updateUnitsSprites() private function clearUnitsCells() private function drawUnitsCells() private function relationship() public function onUnitEvent() private function handleWarShipEvent() private function handleShellEvent() private function handleMissileEvent() private function drawTrail() private function clearTrail() private function handleNuke() private function handleMIRVWarhead() private function handleTradeShipEvent() private function handleTrainEvent() private function handleBoatEvent() public function paintCell() public function clearCell() public function drawSprite() ./layers/WinModal.ts class WinModal public constructor constructor() public function createRenderRoot() public function render() public function innerHtml() public function renderPatternButton() public async function loadPatternContent() public function steamWishlist() public async function show() public function hide() private function _handleExit() public function init() public function tick() public function renderLayer() public function shouldTransform() Style Data Sound SoundManager.ts class SoundManager public constructor constructor() public function playBackgroundMusic() public function stopBackgroundMusic() public function setBackgroundMusicVolume() private function playNext() public function loadSoundEffect() public function playSoundEffect() public function setSoundEffectsVolume() public function stopSoundEffect() public function unloadSoundEffect() enum SoundEffect Utilities ReplaySpeedMultiplier.ts enum ReplaySpeedMultiplier const defaultReplaySpeedMultiplier RenderUnitTypeOptions.ts interface UnitTypeRenderContext const unitOptions function renderUnitTypeOptions()",
      "title": "Client reference"
    },
    { "location": "client/#components", "text": "", "title": "Components" },
    {
      "location": "client/#difficultiests",
      "text": "",
      "title": "Difficulties.ts"
    },
    {
      "location": "client/#class-difficultydisplay",
      "text": "Displays a visual indicator of difficulty using skull icons with different states and sizes. Properties: Name Type Description difficultyKey string Current difficulty key determining which icons are active (defaults to \"\" ).",
      "title": "class DifficultyDisplay"
    },
    {
      "location": "client/#private-function-getdifficultyicondifficultykey-string",
      "text": "Returns the corresponding difficulty icon markup as an HTML template. Parameter Type Description difficultyKey string Key representing the current difficulty. Returns import(\"lit\").TemplateResult .",
      "title": "private function getDifficultyIcon(difficultyKey: string)"
    },
    {
      "location": "client/#public-function-render",
      "text": "No parameters. Renders the difficulty indicator container with the appropriate difficulty icon. Returns import(\"lit\").TemplateResult .",
      "title": "public function render()"
    },
    { "location": "client/#mapsts", "text": "", "title": "Maps.ts" },
    {
      "location": "client/#const-mapdescription",
      "text": "Properties: Name Type Description MapDescription Record<keyof typeof GameMapType, string> Map of GameMapType keys to human-readable map names.",
      "title": "const MapDescription"
    },
    {
      "location": "client/#class-mapdisplay",
      "text": "Displays a selectable map option with loading state and rendered preview. Properties: Name Type Description mapKey string Key of the map to display (defaults to \"\" ). selected boolean Whether the map is selected (defaults to false ). translation string Optional translated map name. mapWebpPath string \\| null Path to the WebP map image (private state). mapName string \\| null Loaded map name (private state). isLoading boolean Loading state of the map (private state, defaults to true ).",
      "title": "class MapDisplay"
    },
    {
      "location": "client/#private-function-loadmapdata",
      "text": "No parameters. Loads map data and updates mapWebpPath and mapName states. Returns Promise<void> .",
      "title": "private function loadMapData()"
    },
    {
      "location": "client/#public-function-render_1",
      "text": "No parameters. Renders the map card with loading, error, or preview image and map name. Returns import(\"lit\").TemplateResult .",
      "title": "public function render()"
    },
    {
      "location": "client/#modaloverlayts",
      "text": "",
      "title": "ModalOverlay.ts"
    },
    {
      "location": "client/#class-modaloverlay",
      "text": "Renders a full-screen overlay that can be shown or hidden and closes on click. Properties: Name Type Description visible boolean Whether the overlay is visible (defaults to false , reflected to attribute).",
      "title": "class ModalOverlay"
    },
    {
      "location": "client/#public-function-render_2",
      "text": "No parameters. Renders the overlay div and sets visibility based on visible . Returns import(\"lit\").TemplateResult .",
      "title": "public function render()"
    },
    {
      "location": "client/#newsbuttonts",
      "text": "",
      "title": "NewsButton.ts"
    },
    {
      "location": "client/#class-newsbutton",
      "text": "Displays a news button that activates when a new version is detected and opens the news modal. Properties: Name Type Description hidden boolean Whether the news button is hidden (defaults to false ). isActive boolean Whether the button is active due to a new version (private state).",
      "title": "class NewsButton"
    },
    {
      "location": "client/#private-function-checkfornewversion",
      "text": "No parameters. Checks localStorage for the last seen version and updates isActive if a new version is detected. Returns void .",
      "title": "private function checkForNewVersion()"
    },
    {
      "location": "client/#private-function-handleclick",
      "text": "No parameters. Marks the current version as seen, deactivates the button, and opens the NewsModal . Returns void .",
      "title": "private function handleClick()"
    },
    {
      "location": "client/#public-function-render_3",
      "text": "No parameters. Renders the news button with icon and conditional active or hidden classes. Returns import(\"lit\").TemplateResult .",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-createrenderroot",
      "text": "No parameters. Overrides LitElement's shadow root to render in light DOM. Returns this .",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#patternbuttonts",
      "text": "",
      "title": "PatternButton.ts"
    },
    {
      "location": "client/#const-button_width",
      "text": "No parameters. Specifies the default width for pattern buttons. Returns number .",
      "title": "const BUTTON_WIDTH"
    },
    {
      "location": "client/#class-patternbutton",
      "text": "Renders a pattern selection button with optional purchase handling and preview. Properties: Name Type Description pattern Pattern \\| null Pattern object to display (defaults to null ). colorPalette ColorPalette \\| null Associated color palette (defaults to null ). requiresPurchase boolean Whether purchase is required to select (defaults to false ). onSelect (pattern: PlayerPattern \\| null) => void Callback when the pattern is selected. onPurchase (pattern: Pattern, colorPalette: ColorPalette \\| null) => void Callback when the purchase button is clicked.",
      "title": "class PatternButton"
    },
    {
      "location": "client/#private-function-translatecosmetic",
      "text": "Translates cosmetic name or formats it if translation not available Parameter Type Description prefix string Translation key prefix. patternName string Pattern or color palette name. Returns string .",
      "title": "private function translateCosmetic()"
    },
    {
      "location": "client/#private-function-handleclick_1",
      "text": "No parameters. Triggers onSelect callback with current pattern or null . Returns void .",
      "title": "private function handleClick()"
    },
    {
      "location": "client/#private-function-handlepurchase",
      "text": "Parameter Type Description e Event Click event to stop propagation. Triggers onPurchase callback for the current pattern and color palette. Returns void .",
      "title": "private function handlePurchase()"
    },
    {
      "location": "client/#public-function-render_4",
      "text": "No parameters. Renders the pattern button, optional color palette, preview image, and purchase button if required. Returns import(\"lit\").TemplateResult .",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-createrenderroot_1",
      "text": "No parameters. Overrides shadow root to render in light DOM. Returns this .",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#function-renderpatternpreview",
      "text": "Renders pattern preview image or blank placeholder. Parameter Type Description pattern PlayerPattern | null Pattern to render. width number Width of the preview. height number Height of the preview. Returns import(\"lit\").TemplateResult .",
      "title": "function renderPatternPreview()"
    },
    {
      "location": "client/#actionbuttonts",
      "text": "",
      "title": "ActionButton.ts"
    },
    {
      "location": "client/#function-actionbutton",
      "text": "Renders a styled HTML button with icon, label, and click behavior using Lit. Properties: Name Type Description onClick (e: MouseEvent) => void Callback executed when the button is clicked. type ButtonVariant Button color variant (defaults to normal ). icon string URL or path to the button icon. iconAlt string Alternative text for the button icon. title string Tooltip and ARIA label for the button. label string Text label displayed below the icon. disabled boolean Whether the button is disabled (defaults to false ). Returns a Lit TemplateResult rendering the button with appropriate styles, icon, and label. Returns TemplateResult .",
      "title": "function actionButton()"
    },
    { "location": "client/#dividerts", "text": "", "title": "Divider.ts" },
    {
      "location": "client/#class-divider",
      "text": "Renders a horizontal divider with configurable spacing and color. Properties: Name Type Description spacing DividerSpacing Vertical spacing of the divider (defaults to md ). color string CSS class for divider color (defaults to bg-zinc-700/80 ).",
      "title": "class Divider"
    },
    {
      "location": "client/#public-function-createrenderroot_2",
      "text": "No parameters. Overrides LitElement's shadow root creation to render in light DOM. Returns this .",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-render_5",
      "text": "No parameters. Renders the divider element with spacing and color classes. Returns TemplateResult .",
      "title": "public function render()"
    },
    { "location": "client/#graphics", "text": "", "title": "Graphics" },
    {
      "location": "client/#animatedspritets",
      "text": "",
      "title": "AnimatedSprite.ts"
    },
    {
      "location": "client/#class-animatedsprite",
      "text": "Represents a frame-based animation drawn on a canvas. Handles frame timing, looping, rendering, and origin offsets based on elapsed time. Properties: Name Type Description image CanvasImageSource Source image for the sprite sheet. frameWidth number Width of a single frame in pixels. frameCount number Number of frames in the sprite sheet. frameDuration number Duration of each frame in milliseconds. looping boolean Whether the animation loops (defaults to false ). originX number Horizontal origin offset in pixels. originY number Vertical origin offset in pixels. frameHeight number Height of each frame. currentFrame number Index of the current frame. elapsedTime number Accumulated time since the last frame change. active boolean Whether the animation is currently playing.",
      "title": "class AnimatedSprite"
    },
    {
      "location": "client/#public-constructor-constructor",
      "text": "Parameter Type Description image CanvasImageSource Source image for the sprite sheet. frameWidth number Width of a single frame in pixels. frameCount number Number of frames in the sprite sheet. frameDuration number Duration of each frame in milliseconds. looping boolean Whether the animation loops (default false ). originX number Horizontal origin offset in pixels. originY number Vertical origin offset in pixels. Throws an error if the image does not have a height property.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-update",
      "text": "Parameter Type Description deltaTime number Time passed since the last update. Updates the currentFrame and active properties based on elapsed time. Returns void .",
      "title": "public function update()"
    },
    {
      "location": "client/#public-function-isactive",
      "text": "Returns boolean \u2014 whether the animation is currently active.",
      "title": "public function isActive()"
    },
    {
      "location": "client/#public-function-lifetime",
      "text": "Returns number | undefined \u2014 total length of the animation in milliseconds or undefined for looping animations.",
      "title": "public function lifeTime()"
    },
    {
      "location": "client/#public-function-draw",
      "text": "Parameter Type Description ctx CanvasRenderingContext2D Rendering context. x number X-coordinate for drawing. y number Y-coordinate for drawing. Draws the current active frame onto ctx at [x, y] adjusted by origin offsets. Returns void .",
      "title": "public function draw()"
    },
    {
      "location": "client/#public-function-reset",
      "text": "Resets the animation to the first frame and resets elapsed time. Returns void .",
      "title": "public function reset()"
    },
    {
      "location": "client/#public-function-setorigin",
      "text": "Parameter Type Description xRatio number New horizontal origin in pixels. yRatio number New vertical origin in pixels. Updates the origin offsets used for drawing. Returns void .",
      "title": "public function setOrigin()"
    },
    {
      "location": "client/#animatedspriteloaderts",
      "text": "",
      "title": "AnimatedSpriteLoader.ts"
    },
    {
      "location": "client/#class-animatedspriteloader",
      "text": "Manages loading, colorizing, caching, and creation of class AnimatedSprite instances. Properties: Name Type Description animatedSpriteImageMap Map<FxType, HTMLCanvasElement> Stores loaded sprite images as canvases keyed by FxType . coloredAnimatedSpriteCache Map<string, HTMLCanvasElement> Caches colorized canvases per owner.",
      "title": "class AnimatedSpriteLoader"
    },
    {
      "location": "client/#public-function-loadallanimatedspriteimages",
      "text": "Returns Promise<void> . Loads all images referenced in ANIMATED_SPRITE_CONFIG into canvases. Logs an error for any failed loads.",
      "title": "public function loadAllAnimatedSpriteImages()"
    },
    {
      "location": "client/#private-function-createregularanimatedsprite",
      "text": "Parameter Type Description fxType FxType The FX type to create an animation for. Returns class AnimatedSprite | null. Returns null if the configuration or base image is missing.",
      "title": "private function createRegularAnimatedSprite()"
    },
    {
      "location": "client/#private-function-getcoloredanimatedsprite",
      "text": "Parameter Type Description owner PlayerView The player owning the animation. fxType FxType The FX type. theme Theme The theme to colorize with. Returns HTMLCanvasElement | null . Returns null if the configuration or base image is missing.",
      "title": "private function getColoredAnimatedSprite()"
    },
    {
      "location": "client/#private-function-createcoloredanimatedspriteforunit",
      "text": "Parameter Type Description fxType FxType The FX type. owner PlayerView The player owning the animation. theme Theme The theme to colorize with. Returns class AnimatedSprite | null. Returns null if the configuration or colorized image is missing.",
      "title": "private function createColoredAnimatedSpriteForUnit()"
    },
    {
      "location": "client/#public-function-createanimatedsprite",
      "text": "Parameter Type Description fxType FxType The FX type. owner? PlayerView Optional owner to colorize the sprite for. theme? Theme Optional theme for colorization. Returns class AnimatedSprite | null. Returns null if the resources or configuration are unavailable. See also: function createRegularAnimatedSprite() , function getColoredAnimatedSprite()",
      "title": "public function createAnimatedSprite()"
    },
    {
      "location": "client/#gamerendererts",
      "text": "",
      "title": "GameRenderer.ts"
    },
    {
      "location": "client/#function-createrenderer",
      "text": "Parameter Type Description canvas HTMLCanvasElement The canvas element for rendering. game GameView The game instance. eventBus EventBus The event bus for handling events. Returns GameRenderer . Initializes various UI layers, sets up event listeners, and prepares the canvas for rendering. Also handles references to modals, sidebars, panels, and other game layers.",
      "title": "function createRenderer()"
    },
    {
      "location": "client/#class-gamerenderer",
      "text": "Manages rendering of the entire game onto a canvas, including layered drawing, transformations, and FPS tracking. Properties: Name Type Description transformHandler TransformHandler Handles coordinate transformations for rendering. uiState UIState Stores state for UI layers. context CanvasRenderingContext2D 2D rendering context of the canvas.",
      "title": "class GameRenderer"
    },
    {
      "location": "client/#public-constructor-constructor_1",
      "text": "Parameter Type Description game GameView The game instance. eventBus EventBus Event bus for handling events. canvas HTMLCanvasElement Canvas element for rendering. transformHandler TransformHandler Manages rendering transformations. uiState UIState State for UI components. layers Layer[] Array of layers to render. fpsDisplay FPSDisplay Layer for FPS tracking. Throws an error if the 2D canvas context is unavailable.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-initialize",
      "text": "Sets up event listeners, appends canvas to the DOM, initializes layers, and starts the render loop. Returns void .",
      "title": "public function initialize()"
    },
    {
      "location": "client/#public-function-resizecanvas",
      "text": "Resizes the canvas to match the window size and updates the transform handler. Returns void .",
      "title": "public function resizeCanvas()"
    },
    {
      "location": "client/#public-function-redraw",
      "text": "Calls redraw() on all layers that implement it. Returns void .",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-rendergame",
      "text": "Handles the main render loop: clears the canvas, applies transformations, renders all layers in order, updates FPS, and logs slow frames. Returns void .",
      "title": "public function renderGame()"
    },
    {
      "location": "client/#public-function-tick",
      "text": "Calls tick() on all layers that implement it. Returns void .",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-resize",
      "text": "Parameter Type Description width number New width of the canvas. height number New height of the canvas. Resizes the canvas accounting for devicePixelRatio . Returns void .",
      "title": "public function resize()"
    },
    {
      "location": "client/#nameboxcalculatorts",
      "text": "",
      "title": "NameBoxCalculator.ts"
    },
    {
      "location": "client/#interface-point",
      "text": "Represents a 2D point. Name Type Description x number X-coordinate y number Y-coordinate",
      "title": "interface Point"
    },
    {
      "location": "client/#interface-rectangle",
      "text": "Represents a rectangle. Name Type Description x number X-coordinate of the top-left corner y number Y-coordinate of the top-left corner width number Width of the rectangle height number Height of the rectangle",
      "title": "interface Rectangle"
    },
    {
      "location": "client/#public-function-placename",
      "text": "Parameter Type Description game Game The game instance player Player The player whose name is being placed Returns NameViewData . Computes the optimal position and font size for a player's name based on the largest cluster of tiles they control. Falls back to the bounding box of border tiles if the largest cluster is not available. See also: function createGrid() , function findLargestInscribedRectangle() , function calculateFontSize()",
      "title": "public function placeName()"
    },
    {
      "location": "client/#public-function-creategrid",
      "text": "Parameter Type Description game Game The game instance player Player The player for whom the grid is created boundingBox { min: Point; max: Point } Bounding box to generate the grid within scalingFactor number Factor to scale the grid by Returns boolean[][] . Generates a boolean occupancy grid representing tiles controlled or owned by the player. Each cell is true if it is a lake, owned by the player, or contains fallout; otherwise false . See also: interface Point",
      "title": "public function createGrid()"
    },
    {
      "location": "client/#public-function-findlargestinscribedrectangle",
      "text": "Parameter Type Description grid boolean[][] Occupancy grid Returns Rectangle . Finds the largest rectangle of true values within a boolean grid. See also: interface Rectangle , function largestRectangleInHistogram()",
      "title": "public function findLargestInscribedRectangle()"
    },
    {
      "location": "client/#public-function-largestrectangleinhistogram",
      "text": "Parameter Type Description widths number[] Array representing column heights in a histogram Returns Rectangle . Computes the largest rectangle that can be formed in a histogram represented by the input array. See also: interface Rectangle",
      "title": "public function largestRectangleInHistogram()"
    },
    {
      "location": "client/#public-function-calculatefontsize",
      "text": "Parameter Type Description rectangle Rectangle The rectangle to fit the name into name string The name string to fit Returns number . Calculates the font size that will fit the provided name within the given rectangle, constrained by width and height. See also: interface Rectangle",
      "title": "public function calculateFontSize()"
    },
    {
      "location": "client/#progressbarts",
      "text": "",
      "title": "ProgressBar.ts"
    },
    {
      "location": "client/#class-progressbar",
      "text": "Renders a progress/loading bar on a canvas context and allows updating its progress dynamically. Properties: Name Type Description colors string[] Optional array of colors used to display progress segments. Defaults to gray if empty. ctx CanvasRenderingContext2D Canvas rendering context for drawing the progress bar. x number X-coordinate of the progress bar's top-left corner. y number Y-coordinate of the progress bar's top-left corner. w number Width of the progress bar. h number Height of the progress bar. progress number Current progress value between 0 and 1. Defaults to 0.",
      "title": "class ProgressBar"
    },
    {
      "location": "client/#public-constructor-constructor_2",
      "text": "Parameter Type Description colors? string[] Optional array of colors for the progress segments. ctx CanvasRenderingContext2D Canvas context to render on. x number X-coordinate of the top-left corner. y number Y-coordinate of the top-left corner. w number Width of the progress bar. h number Height of the progress bar. progress? number Optional initial progress from 0 to 1. Defaults to 0. Returns ProgressBar . Initializes the progress bar and draws its initial state.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-setprogress",
      "text": "Parameter Type Description progress number Progress value between 0 and 1. Values outside this range are clamped. Returns void . Updates the progress value and redraws the bar. Fills background, draws the progress portion with the appropriate color, and stores the updated progress.",
      "title": "public function setProgress()"
    },
    {
      "location": "client/#public-function-clear",
      "text": "Returns void . Clears the area occupied by the progress bar, including a padding of CLEAR_PADDING pixels.",
      "title": "public function clear()"
    },
    {
      "location": "client/#public-function-getx",
      "text": "Returns number . Returns the X-coordinate of the progress bar.",
      "title": "public function getX()"
    },
    {
      "location": "client/#public-function-gety",
      "text": "Returns number . Returns the Y-coordinate of the progress bar.",
      "title": "public function getY()"
    },
    {
      "location": "client/#public-function-getprogress",
      "text": "Returns number . Returns the current progress value between 0 and 1.",
      "title": "public function getProgress()"
    },
    {
      "location": "client/#spriteloaderts",
      "text": "",
      "title": "SpriteLoader.ts"
    },
    { "location": "client/#constants", "text": "", "title": "Constants" },
    {
      "location": "client/#type-traintypesprite",
      "text": "Defines train sprite categories. Name Type Description Engine \"Engine\" Engine sprite Carriage \"Carriage\" Carriage sprite LoadedCarriage \"LoadedCarriage\" Loaded carriage sprite",
      "title": "type TrainTypeSprite"
    },
    {
      "location": "client/#sprite_config",
      "text": "Partial mapping of unit types and train sprites to image URLs.",
      "title": "SPRITE_CONFIG"
    },
    {
      "location": "client/#spritemap",
      "text": "Map storing loaded ImageBitmap objects for each unit type or train sprite.",
      "title": "spriteMap"
    },
    {
      "location": "client/#coloredspritecache",
      "text": "Map caching colorized HTMLCanvasElement instances keyed by unit, owner, and color combination.",
      "title": "coloredSpriteCache"
    },
    {
      "location": "client/#public-function-loadallsprites",
      "text": "Returns Promise<void> . Preloads all sprites defined in SPRITE_CONFIG as ImageBitmap and populates spriteMap . Logs warnings if URLs are missing and errors if loading fails.",
      "title": "public function loadAllSprites()"
    },
    {
      "location": "client/#private-function-traintypetospritetype",
      "text": "Parameter Type Description unit UnitView Unit instance representing a train Returns TrainTypeSprite . Maps train attributes (engine, carriage, loaded) to the appropriate sprite type.",
      "title": "private function trainTypeToSpriteType()"
    },
    {
      "location": "client/#private-function-getspriteforunit",
      "text": "Parameter Type Description unit UnitView Unit instance Returns ImageBitmap | null . Retrieves the ImageBitmap for a given unit, handling train types via trainTypeToSpriteType() . Returns null if no sprite is loaded.",
      "title": "private function getSpriteForUnit()"
    },
    {
      "location": "client/#public-function-isspriteready",
      "text": "Parameter Type Description unit UnitView Unit instance Returns boolean . Indicates whether the sprite for the unit is loaded and ready for rendering.",
      "title": "public function isSpriteReady()"
    },
    {
      "location": "client/#public-function-colorizecanvas",
      "text": "Parameter Type Description source CanvasImageSource & { width: number; height: number } Source image to colorize colorA Colord Territory color replacement for light gray pixels colorB Colord Border color replacement for dark gray pixels colorC Colord Spawn highlight color replacement for medium gray pixels Returns HTMLCanvasElement . Creates a new canvas, draws the source image, and replaces grayscale pixels with the provided colors.",
      "title": "public function colorizeCanvas()"
    },
    {
      "location": "client/#private-function-computespritekey",
      "text": "Parameter Type Description unit UnitView Unit instance territoryColor Colord Territory color used for coloring borderColor Colord Border color used for coloring Returns string . Computes a unique key for caching colorized sprites based on unit, owner, train type, and colors.",
      "title": "private function computeSpriteKey()"
    },
    {
      "location": "client/#public-function-getcoloredsprite",
      "text": "Parameter Type Description unit UnitView Unit instance to render theme Theme Theme providing spawn highlight color customTerritoryColor? Colord Optional custom territory color customBorderColor? Colord Optional custom border color Returns HTMLCanvasElement . Retrieves or generates a colorized sprite canvas for the unit using colorizeCanvas() . Uses coloredSpriteCache for performance. Throws an error if the sprite is unavailable. See also: function colorizeCanvas() , function getSpriteForUnit()",
      "title": "public function getColoredSprite()"
    },
    {
      "location": "client/#transformhandlerts",
      "text": "",
      "title": "TransformHandler.ts"
    },
    {
      "location": "client/#constants_1",
      "text": "Name Type Description GOTO_INTERVAL_MS number Interval in milliseconds for camera movement updates (default 16ms). CAMERA_MAX_SPEED number Maximum speed for camera movement. CAMERA_SMOOTHING number Smoothing factor for camera movement interpolation.",
      "title": "Constants"
    },
    {
      "location": "client/#class-transformhandler",
      "text": "Handles camera transformations including zooming, panning, centering, and smooth movements within a game viewport. Properties: | Name | Type | Description | | ------------------ | --------------- | ------------------------------------------------------------- | ---------------------------------------- | | scale | number | Current zoom level. Defaults to 1.8. | | _boundingRect | DOMRect | Current canvas bounding rectangle. | | offsetX | number | Horizontal camera offset. | | offsetY | number | Vertical camera offset. | | lastGoToCallTime | number | null | Timestamp of the last camera goTo call. | | target | Cell | null | Current target cell for camera movement. | | intervalID | NodeJS.Timeout | null | Interval ID for smooth camera movement. | | changed | boolean | Tracks if the camera transform has changed since last update. |",
      "title": "class TransformHandler"
    },
    {
      "location": "client/#public-constructor-constructor_3",
      "text": "Parameter Type Description game GameView The game view instance. eventBus EventBus Event bus to listen for input and camera events. canvas HTMLCanvasElement Canvas element for the game viewport. Initializes the camera transform handler and registers event listeners.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-updatecanvasboundingrect",
      "text": "Returns void . Updates the internal _boundingRect based on the current canvas size.",
      "title": "public function updateCanvasBoundingRect()"
    },
    {
      "location": "client/#public-function-boundingrect",
      "text": "Returns DOMRect . Retrieves the current canvas bounding rectangle.",
      "title": "public function boundingRect()"
    },
    {
      "location": "client/#public-function-width",
      "text": "Returns number . Width of the canvas.",
      "title": "public function width()"
    },
    {
      "location": "client/#public-function-haschanged",
      "text": "Returns boolean . Indicates whether the camera transform has changed.",
      "title": "public function hasChanged()"
    },
    {
      "location": "client/#public-function-resetchanged",
      "text": "Returns void . Resets the changed flag.",
      "title": "public function resetChanged()"
    },
    {
      "location": "client/#public-function-handletransform",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context to apply the transformation to. Returns void . Applies zoom and pan transformations to the canvas context, disabling image smoothing for pixelated effect.",
      "title": "public function handleTransform()"
    },
    {
      "location": "client/#public-function-worldtoscreencoordinates",
      "text": "Parameter Type Description cell Cell Game world cell to convert. Returns { x: number; y: number } . Converts world coordinates to screen coordinates.",
      "title": "public function worldToScreenCoordinates()"
    },
    {
      "location": "client/#public-function-screentoworldcoordinates",
      "text": "Parameter Type Description screenX number X-coordinate on screen. screenY number Y-coordinate on screen. Returns Cell . Converts screen coordinates to world coordinates.",
      "title": "public function screenToWorldCoordinates()"
    },
    {
      "location": "client/#public-function-screenboundingrect",
      "text": "Returns [Cell, Cell] . Returns top-left and bottom-right cells currently visible on the screen.",
      "title": "public function screenBoundingRect()"
    },
    {
      "location": "client/#public-function-isonscreen",
      "text": "Parameter Type Description cell Cell Cell to check. Returns boolean . Determines if a cell is within the current camera view.",
      "title": "public function isOnScreen()"
    },
    {
      "location": "client/#public-function-screencenter",
      "text": "Returns { screenX: number; screenY: number } . Computes the screen coordinates of the viewport center.",
      "title": "public function screenCenter()"
    },
    {
      "location": "client/#public-function-ongotoplayer",
      "text": "Parameter Type Description event GoToPlayerEvent Event containing player to center on. Returns void . Initiates smooth camera movement to the player's position.",
      "title": "public function onGoToPlayer()"
    },
    {
      "location": "client/#public-function-ongotoposition",
      "text": "Parameter Type Description event GoToPositionEvent Event containing world coordinates to center on. Returns void . Initiates smooth camera movement to the specified position.",
      "title": "public function onGoToPosition()"
    },
    {
      "location": "client/#public-function-ongotounit",
      "text": "Parameter Type Description event GoToUnitEvent Event containing unit to center on. Returns void . Initiates smooth camera movement to the unit's last tile.",
      "title": "public function onGoToUnit()"
    },
    {
      "location": "client/#public-function-centercamera",
      "text": "Returns void . Centers the camera on the local player's position.",
      "title": "public function centerCamera()"
    },
    {
      "location": "client/#private-function-goto",
      "text": "Returns void . Moves the camera smoothly towards the target cell, respecting maximum speed and smoothing constraints. Clears target once reached.",
      "title": "private function goTo()"
    },
    {
      "location": "client/#public-function-onzoom",
      "text": "Parameter Type Description event ZoomEvent Event containing zoom delta and mouse coordinates. Returns void . Adjusts camera scale and offsets to zoom around a point. Clamps scale and",
      "title": "public function onZoom()"
    },
    { "location": "client/#uistatets", "text": "", "title": "UIState.ts" },
    {
      "location": "client/#interface-uistate",
      "text": "Represents the current state of the user interface related to game actions. | Name | Type | Description | | ---------------- | --------- | ---------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- | | attackRatio | number | Ratio used for attacks, e.g., proportion of available units to deploy. | | ghostStructure | UnitType | null | Optional unit type representing a ghosted structure in the UI, or null if none is selected. |",
      "title": "interface UIState"
    },
    {
      "location": "client/#fxconquestfxts",
      "text": "",
      "title": "./fx/ConquestFx.ts"
    },
    {
      "location": "client/#public-function-conquestfxfactory",
      "text": "Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated conquest sprites. conquest ConquestUpdate Update containing conquest information such as gold and conquered player ID. game GameView Game view instance providing player positions. Returns Fx[] . Generates a list of visual effects representing a conquest event, including: Animated conquest sprite with fade effect. Text displaying gold gained, positioned near the conquered player's location. See also: class SpriteFx , class FadeFx , class TextFx , class AnimatedSpriteLoader",
      "title": "public function conquestFxFactory()"
    },
    { "location": "client/#fxfxts", "text": "", "title": "./fx/Fx.ts" },
    {
      "location": "client/#interface-fx",
      "text": "Represents a visual effect in the game.",
      "title": "interface Fx"
    },
    {
      "location": "client/#public-function-rendertick",
      "text": "Parameter Type Description duration number Time elapsed since the last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context used for rendering the effect. Returns boolean . Indicates whether the effect is still active ( true ) or has finished ( false ).",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#enum-fxtype",
      "text": "Enumerates types of effects available in the game. Name Description MiniFire Small fire effect MiniSmoke Small smoke effect MiniBigSmoke Large smoke effect MiniSmokeAndFire Combined smoke and fire effect MiniExplosion Small explosion effect UnitExplosion Explosion effect for units BuildingExplosion Explosion effect for buildings SinkingShip Sinking ship effect Nuke Nuclear explosion effect SAMExplosion Surface-to-air missile explosion effect UnderConstruction Effect for under-construction structures Dust Dust effect Conquest Conquest effect Tentacle Tentacle effect Shark Shark effect Bubble Bubble effect Tornado Tornado effect",
      "title": "enum FxType"
    },
    {
      "location": "client/#fxnukeareats",
      "text": "",
      "title": "./fx/NukeArea.ts"
    },
    {
      "location": "client/#class-nukeareafx",
      "text": "Represents a visual effect showing a nuclear explosion area with inner and outer circles. Implements: interface Fx Properties: Name Type Description lifeTime number Time elapsed since effect started. ended boolean Indicates whether the effect has been marked for fade-out. endAnimationDuration number Duration of fade-out in milliseconds. startAnimationDuration number Duration of start animation in milliseconds. innerDiameter number Diameter of the inner circle. outerDiameter number Diameter of the outer circle. offset number Current dash offset for rotating outer circle. dashSize number Length of dashes for outer circle stroke. rotationSpeed number Rotation speed of outer dashed circle in pixels per second. baseAlpha number Base transparency for the effect.",
      "title": "class NukeAreaFx"
    },
    {
      "location": "client/#public-constructor-constructor_4",
      "text": "Parameter Type Description x number X-coordinate of effect center. y number Y-coordinate of effect center. magnitude NukeMagnitude Nuke magnitude defining inner and outer diameters. Initializes a nuke area effect with scaling and dashed rotation for the outer circle.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-end",
      "text": "Returns void . Marks the effect for fade-out, resetting lifeTime for end animation.",
      "title": "public function end()"
    },
    {
      "location": "client/#public-function-rendertick_1",
      "text": "Parameter Type Description frameTime number Time elapsed since last render tick in milliseconds. ctx CanvasRenderingContext2D Canvas context to render the effect. Returns boolean . Renders the nuke area effect for this tick. Returns true if the effect is still active, false if finished. Draws inner and outer circles with alpha blending and animated outer dash rotation. See also: interface Fx , type NukeMagnitude",
      "title": "public function renderTick()"
    },
    { "location": "client/#fxnukefxts", "text": "", "title": "./fx/NukeFx.ts" },
    {
      "location": "client/#class-shockwavefx",
      "text": "Represents a shockwave effect as a growing white circle for nuclear explosions. Implements: interface Fx Properties: Name Type Description lifeTime number Time elapsed since effect started. x number X-coordinate of the shockwave center. y number Y-coordinate of the shockwave center. duration number Duration of the shockwave in milliseconds. maxRadius number Maximum radius the shockwave can reach.",
      "title": "class ShockwaveFx"
    },
    {
      "location": "client/#public-constructor-constructor_5",
      "text": "Parameter Type Description x number X-coordinate of effect center. y number Y-coordinate of effect center. duration number Duration of the shockwave in milliseconds. maxRadius number Maximum radius of the shockwave.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-rendertick_2",
      "text": "Parameter Type Description frameTime number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context to render the effect. Returns boolean . Renders the shockwave for the current tick. Returns true if the effect is still active, false if finished.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#private-function-addspriteincircle",
      "text": "Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated sprites. x number Center X-coordinate for spawning sprites. y number Center Y-coordinate for spawning sprites. radius number Radius of the spawn circle. num number Number of sprites to spawn. type FxType Type of effect to spawn. result Fx[] Array to push spawned Fx instances into. game GameView Game view instance for validating spawn positions. Returns void . Spawns num effects of type randomly within a circular area, validating coordinates and terrain.",
      "title": "private function addSpriteInCircle()"
    },
    {
      "location": "client/#public-function-nukefxfactory",
      "text": "Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated nuke sprites. x number X-coordinate of nuke center. y number Y-coordinate of nuke center. radius number Radius for shockwave and debris placement. game GameView Game view instance for terrain checks. Returns Fx[] . Generates all visual effects for a nuclear explosion, including: Central explosion sprite. Shockwave ( ShockwaveFx ). Randomized debris and desolation sprites using addSpriteInCircle . See also: class SpriteFx , class FadeFx , interface Fx , enum FxType , class ShockwaveFx , class AnimatedSpriteLoader",
      "title": "public function nukeFxFactory()"
    },
    {
      "location": "client/#fxspritefxts",
      "text": "",
      "title": "./fx/SpriteFx.ts"
    },
    {
      "location": "client/#class-movespritefx",
      "text": "Moves an existing SpriteFx instance from its current position to a target position over time, optionally fading in and out. Implements: interface Fx Properties: Name Type Description originX number Initial X-coordinate of the sprite. originY number Initial Y-coordinate of the sprite. fxToMove SpriteFx The sprite to move. toX number Target X-coordinate. toY number Target Y-coordinate. fadeIn number Optional fade-in fraction (default 0.1). fadeOut number Optional fade-out fraction (default 0.9).",
      "title": "class MoveSpriteFx"
    },
    {
      "location": "client/#public-constructor-constructor_6",
      "text": "Parameter Type Description fxToMove SpriteFx The sprite to move. toX number Target X-coordinate. toY number Target Y-coordinate. fadeIn? number Optional fade-in fraction. fadeOut? number Optional fade-out fraction.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-rendertick_3",
      "text": "Parameter Type Description duration number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Updates the sprite position and renders it with fade-in/out transparency. Returns false when animation ends.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#class-fadefx",
      "text": "Fades an existing SpriteFx instance in and out over time. Implements: interface Fx Properties: Name Type Description fxToFade SpriteFx Sprite to fade. fadeIn number Fraction of duration for fade-in. fadeOut number Fraction of duration for fade-out.",
      "title": "class FadeFx"
    },
    {
      "location": "client/#public-constructor-constructor_7",
      "text": "Parameter Type Description fxToFade SpriteFx Sprite to fade. fadeIn number Fraction of duration to fade in. fadeOut number Fraction of duration to fade out.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-rendertick_4",
      "text": "Parameter Type Description duration number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Renders the sprite with computed transparency based on fade-in/out. Returns false when animation ends.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#class-spritefx",
      "text": "Animated sprite effect that can be optionally colored based on owner and theme. Implements: interface Fx Properties: | Name | Type | Description | | ---------------- | --------------- | ------------------------------------------------------------------ | ------------------------------- | | animatedSprite | AnimatedSprite | null | The underlying animated sprite. | | elapsedTime | number | Time elapsed since animation started. | | duration | number | Duration of animation in milliseconds. | | waitToTheEnd | boolean | Whether to wait for sprite lifetime instead of specified duration. | | x | number | X-coordinate of sprite position. | | y | number | Y-coordinate of sprite position. |",
      "title": "class SpriteFx"
    },
    {
      "location": "client/#public-constructor-constructor_8",
      "text": "Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader to create animated sprite. x number Initial X-coordinate. y number Initial Y-coordinate. fxType FxType Type of effect. duration? number Optional duration for the effect. owner? PlayerView Optional owner to colorize sprite. theme? Theme Optional theme for coloring.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-rendertick_5",
      "text": "Parameter Type Description frameTime number Time elapsed since last tick in milliseconds. ctx CanvasRenderingContext2D Canvas context for rendering. Returns boolean . Updates the animated sprite and draws it. Returns false if the animation has finished.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#public-function-getelapsedtime",
      "text": "Returns number . The elapsed time since the animation started.",
      "title": "public function getElapsedTime()"
    },
    {
      "location": "client/#public-function-getduration",
      "text": "Returns number . The total duration of the animation. See also: interface Fx , class AnimatedSprite , class AnimatedSpriteLoader , enum FxType , class FadeFx",
      "title": "public function getDuration()"
    },
    {
      "location": "client/#fxtargetfxts",
      "text": "",
      "title": "./fx/TargetFx.ts"
    },
    {
      "location": "client/#class-targetfx",
      "text": "Implements a pulsing/red targeting effect on the canvas, optionally persistent. Properties: Name Type Description lifeTime number Tracks elapsed time of the effect. ended boolean Marks whether the effect is in fade-out phase. endFade number Duration of fade-out in milliseconds. offset number Offset for dash rotation animation. rotationSpeed number Rotation speed in pixels per second. radius number Inner circle radius. x number X-coordinate of the target effect. y number Y-coordinate of the target effect. duration number Total duration in ms if not persistent. Optional; defaults to 0 . persistent boolean If true , effect loops indefinitely until end() is called. Optional; defaults to false .",
      "title": "class TargetFx"
    },
    {
      "location": "client/#public-function-end_1",
      "text": "Returns void . Triggers the fade-out for persistent effects. Resets lifeTime to 0 for fade timing.",
      "title": "public function end()"
    },
    {
      "location": "client/#public-function-rendertick_6",
      "text": "Parameter Type Description frameTime number Elapsed time since last frame in milliseconds. ctx CanvasRenderingContext2D Canvas rendering context. Returns boolean . true if the effect is still active and should continue rendering; false if the effect has ended. Behavior: Updates internal lifeTime and computes alpha for fade-in, fade-out, or pulsing. Draws two concentric circles with dashed stroke animation. Outer circle dashes rotate in opposite directions relative to the inner circle.",
      "title": "public function renderTick()"
    },
    { "location": "client/#fxtextfxts", "text": "", "title": "./fx/TextFx.ts" },
    {
      "location": "client/#class-textfx",
      "text": "Displays floating text with fade-out and vertical rise over a duration. Properties: Name Type Description lifeTime number Tracks elapsed time since creation. text string Text content to display. x number X-coordinate of text origin. y number Y-coordinate of text origin. duration number Total display duration in milliseconds. riseDistance number Vertical rise in pixels during the effect. Optional; defaults to 30 . font string CSS font string for text rendering. Optional; defaults to \"11px sans-serif\" . color { r: number; g: number; b: number } RGB color of the text. Optional; defaults to white {r:255,g:255,b:255} .",
      "title": "class TextFx"
    },
    {
      "location": "client/#public-function-rendertick_7",
      "text": "Parameter Type Description frameTime number Elapsed time since last frame in milliseconds. ctx CanvasRenderingContext2D Canvas rendering context. Returns boolean . true if the text is still visible; false once the duration has elapsed. Behavior: Increments lifeTime . Computes vertical position based on elapsed time and riseDistance . Computes fade-out alpha based on elapsed time. Draws the text centered at (x, currentY) with computed alpha.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#fxtimelinets",
      "text": "",
      "title": "./fx/Timeline.ts"
    },
    {
      "location": "client/#class-timeline",
      "text": "Schedules and executes delayed tasks in sequence. Properties: Name Type Description tasks TimedTask[] Array of scheduled tasks with delay and execution state. timeElapsed number Total elapsed time since timeline start.",
      "title": "class Timeline"
    },
    {
      "location": "client/#public-function-add",
      "text": "Parameter Type Description delay number Delay in milliseconds before the action is triggered. action () => void Callback to execute after delay. Returns Timeline . Adds a task to the timeline and allows chaining.",
      "title": "public function add()"
    },
    {
      "location": "client/#public-function-update_1",
      "text": "Parameter Type Description dt number Time delta in milliseconds since last update. Returns void . Updates the timeline, triggers any tasks whose delay has elapsed.",
      "title": "public function update()"
    },
    {
      "location": "client/#public-function-iscomplete",
      "text": "Returns boolean . true if all tasks have been triggered; otherwise false . Internal type TimedTask Name Type Description delay number Milliseconds after timeline start to trigger the action. action () => void Function to execute when delay elapses. triggered boolean Tracks whether the task has already executed.",
      "title": "public function isComplete()"
    },
    {
      "location": "client/#fxunitexplosionfxts",
      "text": "",
      "title": "./fx/UnitExplosionFx.ts"
    },
    {
      "location": "client/#class-unitexplosionfx",
      "text": "Implements a timed explosion effect composed of multiple SpriteFx instances. Properties: Name Type Description timeline Timeline Manages the scheduling of multiple explosions over time. explosions Fx[] List of active explosion effects.",
      "title": "class UnitExplosionFx"
    },
    {
      "location": "client/#public-constructor-unitexplosionfx",
      "text": "Parameter Type Description animatedSpriteLoader AnimatedSpriteLoader Loader for animated sprite resources. x number X-coordinate of the central explosion point. y number Y-coordinate of the central explosion point. game GameView Reference to the game view for coordinate validation. Initializes a Timeline with three explosion events at offsets relative to (x, y) .",
      "title": "public constructor UnitExplosionFx()"
    },
    {
      "location": "client/#public-function-rendertick_8",
      "text": "Parameter Type Description frameTime number Time elapsed since last render tick in milliseconds. ctx CanvasRenderingContext2D Rendering context for drawing explosions. Returns boolean . Returns true if the explosion effect is still active; false if all explosions have completed. Behavior: Updates the timeline and triggers scheduled explosions. Renders all active SpriteFx explosions. Returns true until all explosions are done and the timeline is complete.",
      "title": "public function renderTick()"
    },
    {
      "location": "client/#layersadtimerts",
      "text": "",
      "title": "./layers/AdTimer.ts"
    },
    {
      "location": "client/#class-adtimer",
      "text": "Manages timed removal of sticky advertisements based on game ticks. Implements: Layer Properties: Name Type Description isHidden boolean Tracks whether ads have been hidden. g GameView Reference to the game view instance.",
      "title": "class AdTimer"
    },
    {
      "location": "client/#public-constructor-adtimer",
      "text": "Parameter Type Description g GameView Game view instance used to track ticks and configuration.",
      "title": "public constructor AdTimer()"
    },
    {
      "location": "client/#public-function-init",
      "text": "Returns void . Initializes the layer. Currently a placeholder with no behavior.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-async-function-tick",
      "text": "Returns Promise<void> . Checks whether the sticky ads should be removed based on game ticks. If the ads are due to be removed, it calls window.fusetag.destroySticky() and sets isHidden to true . Logs action to the console.",
      "title": "public async function tick()"
    },
    {
      "location": "client/#layersalertframets",
      "text": "",
      "title": "./layers/AlertFrame.ts"
    },
    {
      "location": "client/#class-alertframe",
      "text": "Displays a visual alert border when the current player is betrayed in-game. Implements interface Layer . Properties: Name Type Description game GameView The game instance associated with this alert layer. userSettings UserSettings Stores user preferences for alert visibility. isActive boolean Internal state indicating if the alert is currently active. animationTimeout number | null Timeout ID for controlling alert animation lifecycle.",
      "title": "class AlertFrame"
    },
    {
      "location": "client/#public-constructor-constructor_9",
      "text": "Initializes the alert frame and injects the alert CSS into the document if not already present. Returns AlertFrame .",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-init_1",
      "text": "Returns void . Initializes event listeners for BrokeAllianceUpdate events from the game.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_1",
      "text": "Returns void . Called each frame to check for BrokeAllianceUpdate events. Triggers alerts when the current player is betrayed.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-shouldtransform",
      "text": "Returns boolean . Indicates that the alert frame is not affected by camera transformations. Always returns false .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#private-function-onbrokeallianceupdate",
      "text": "Parameter Type Description update BrokeAllianceUpdate Update information about the broken alliance event. Returns void . Activates the alert if the current player is the betrayed player. See also: function activateAlert()",
      "title": "private function onBrokeAllianceUpdate()"
    },
    {
      "location": "client/#private-function-activatealert",
      "text": "Returns void . Sets isActive to true and requests a render update if user settings allow alert frames.",
      "title": "private function activateAlert()"
    },
    {
      "location": "client/#public-function-dismissalert",
      "text": "Returns void . Deactivates the alert, clears any running animation timeout, and requests a render update.",
      "title": "public function dismissAlert()"
    },
    {
      "location": "client/#public-function-render_6",
      "text": "Returns TemplateResult . Renders the alert border using HTML and CSS if isActive is true. Automatically dismisses the alert after animation ends.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersbuildmenuts",
      "text": "",
      "title": "./layers/BuildMenu.ts"
    },
    {
      "location": "client/#interface-builditemdisplay",
      "text": "Represents an item displayed in the build menu. Name Type Description unitType UnitType The type of unit or structure icon string URL or path to the icon image description? string Optional translation key for the item's description key? string Optional translation key for the item's name countable? boolean Optional flag indicating whether to show unit count",
      "title": "interface BuildItemDisplay"
    },
    {
      "location": "client/#const-buildtable",
      "text": "A 2D array of BuildItemDisplay representing the layout of the build menu.",
      "title": "const buildTable"
    },
    {
      "location": "client/#const-flattenedbuildtable",
      "text": "Flattened version of buildTable for easy iteration.",
      "title": "const flattenedBuildTable"
    },
    {
      "location": "client/#class-buildmenu",
      "text": "Displays and manages the in-game build menu, allowing players to build or upgrade units and structures. Implements interface Layer . Properties: Name Type Description game GameView The game instance associated with this menu eventBus EventBus Event bus for listening to and emitting input/game events clickedTile TileRef Tile that was clicked to open the build menu playerActions PlayerActions | null Actions available to the player for the clicked tile filteredBuildTable BuildItemDisplay[][] Current filtered build table after removing disabled units transformHandler TransformHandler Handles screen-to-world coordinate conversions _hidden boolean Internal state controlling menu visibility",
      "title": "class BuildMenu"
    },
    {
      "location": "client/#public-function-init_2",
      "text": "Returns void . Sets up event listeners to open, close, or hide the build menu based on game events.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_2",
      "text": "Returns void . Called each frame to refresh the menu if it is visible.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-canbuildorupgrade",
      "text": "Parameter Type Description item BuildItemDisplay The item to check for build or upgrade capability Returns boolean . Returns true if the current player can build or upgrade the specified item.",
      "title": "public function canBuildOrUpgrade()"
    },
    {
      "location": "client/#public-function-cost",
      "text": "Parameter Type Description item BuildItemDisplay The item to get the cost for Returns Gold . Returns the gold cost to build or upgrade the item, or 0 if unavailable.",
      "title": "public function cost()"
    },
    {
      "location": "client/#public-function-count",
      "text": "Parameter Type Description item BuildItemDisplay The item to count units for Returns string . Returns the number of units of the specified type the player controls. Returns \"?\" if unknown.",
      "title": "public function count()"
    },
    {
      "location": "client/#public-function-sendbuildorupgrade",
      "text": "Parameter Type Description buildableUnit BuildableUnit The unit or structure to build or upgrade tile TileRef The tile on which to perform the action Returns void . Emits the appropriate event to build or upgrade the unit and hides the menu.",
      "title": "public function sendBuildOrUpgrade()"
    },
    {
      "location": "client/#public-function-render_7",
      "text": "Returns TemplateResult . Renders the build menu UI with rows of build buttons, icons, names, descriptions, costs, and unit counts. Disabled buttons are styled appropriately.",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-hidemenu",
      "text": "Returns void . Hides the build menu and triggers a render update.",
      "title": "public function hideMenu()"
    },
    {
      "location": "client/#public-function-showmenu",
      "text": "Parameter Type Description clickedTile TileRef Tile that was clicked to open the menu Returns void . Shows the build menu at the clicked tile and refreshes available actions.",
      "title": "public function showMenu()"
    },
    {
      "location": "client/#private-function-refresh",
      "text": "Returns void . Updates playerActions for the clicked tile and filters the build table for enabled units.",
      "title": "private function refresh()"
    },
    {
      "location": "client/#private-function-getbuildableunits",
      "text": "Returns BuildItemDisplay[][] . Returns a filtered build table removing disabled units.",
      "title": "private function getBuildableUnits()"
    },
    {
      "location": "client/#getter-isvisible",
      "text": "Returns boolean . Returns true if the build menu is currently visible.",
      "title": "getter isVisible"
    },
    {
      "location": "client/#layerschatdisplayts",
      "text": "",
      "title": "./layers/ChatDisplay.ts"
    },
    {
      "location": "client/#interface-chatevent",
      "text": "Represents a single chat message event in the display. Name Type Description description string The message content unsafeDescription? boolean Optional flag indicating whether HTML should be rendered unsafely createdAt number Timestamp or tick count when the message was created highlight? boolean Optional flag to highlight the message",
      "title": "interface ChatEvent"
    },
    {
      "location": "client/#class-chatdisplay",
      "text": "Displays in-game chat messages and updates dynamically. Implements interface Layer . Properties: Name Type Description eventBus EventBus Event bus for receiving game and input events game GameView The game instance for accessing player and update data active boolean Indicates whether the chat display is active _hidden boolean Internal state controlling visibility of the chat UI newEvents number Count of new chat events while hidden chatEvents ChatEvent[] Array of chat events displayed in the chat UI",
      "title": "class ChatDisplay"
    },
    {
      "location": "client/#private-function-togglehidden",
      "text": "Returns void . Toggles _hidden state and resets newEvents if chat is being shown.",
      "title": "private function toggleHidden()"
    },
    {
      "location": "client/#private-function-addevent",
      "text": "Parameter Type Description event ChatEvent The chat event to add Returns void . Adds a chat event to chatEvents and increments newEvents if hidden.",
      "title": "private function addEvent()"
    },
    {
      "location": "client/#private-function-removeevent",
      "text": "Parameter Type Description index number Index of the chat event to remove Returns void . Removes the chat event at the given index.",
      "title": "private function removeEvent()"
    },
    {
      "location": "client/#public-function-ondisplaymessageevent",
      "text": "Parameter Type Description event DisplayMessageUpdate Game update event containing chat message information Returns void . Adds a new chat event if it is of type MessageType.CHAT and relevant to the current player.",
      "title": "public function onDisplayMessageEvent()"
    },
    {
      "location": "client/#public-function-init_3",
      "text": "Returns void . Placeholder for initialization logic.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_3",
      "text": "Returns void . Processes game updates for display events, filters chat messages, trims to the last 100 messages, and triggers a render update.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-getchatcontent",
      "text": "Parameter Type Description chat ChatEvent Chat event to render Returns string | DirectiveResult<typeof UnsafeHTMLDirective> . Returns sanitized HTML using unsafeHTML for messages marked as unsafeDescription , otherwise returns plain text.",
      "title": "private function getChatContent()"
    },
    {
      "location": "client/#public-function-render_8",
      "text": "Returns TemplateResult . Renders the chat UI, including hide/show buttons, new event counter, and a table of chat messages. Handles CSS classes based on _hidden and newEvents .",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-createrenderroot_3",
      "text": "Returns this . Disables shadow DOM and renders directly into the host element.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#layerschatintegrationts",
      "text": "",
      "title": "./layers/ChatIntegration.ts"
    },
    {
      "location": "client/#class-chatintegration",
      "text": "Integrates quick chat and modal chat functionality for in-game communication. Properties: Name Type Description ctModal ChatModal Reference to the chat modal DOM element game GameView The game instance used to determine player state eventBus EventBus Event bus for sending quick chat events",
      "title": "class ChatIntegration"
    },
    {
      "location": "client/#public-constructor-constructor_10",
      "text": "Parameter Type Description game GameView Game instance eventBus EventBus Event bus instance Returns ChatIntegration . Initializes the chat modal and ensures the element exists in the DOM. Throws an error if the modal is missing.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-setupchatmodal",
      "text": "Parameter Type Description sender PlayerView The player sending chat messages recipient PlayerView The player receiving chat messages Returns void . Sets the sender and recipient on the chat modal.",
      "title": "public function setupChatModal()"
    },
    {
      "location": "client/#public-function-createquickchatmenu",
      "text": "Parameter Type Description recipient PlayerView The player who will receive the quick chat messages Returns MenuElement[] . Generates a hierarchical menu of quick chat phrases grouped by category. Each menu item contains display text, color, tooltip, and an action that either opens the chat modal or sends a quick chat event.",
      "title": "public function createQuickChatMenu()"
    },
    {
      "location": "client/#public-function-shortentext",
      "text": "Parameter Type Description text string The text string to shorten maxLength? number Optional maximum length for the text. Defaults to 15. Returns string . Truncates the text and appends ... if it exceeds maxLength .",
      "title": "public function shortenText()"
    },
    {
      "location": "client/#layerschatmodalts",
      "text": "",
      "title": "./layers/ChatModal.ts"
    },
    {
      "location": "client/#type-quickchatphrase",
      "text": "Represents a single quick chat phrase. Property Type Description key string Unique key identifier for the phrase requiresPlayer boolean Indicates if the phrase requires a player selection",
      "title": "type QuickChatPhrase"
    },
    {
      "location": "client/#type-quickchatphrases",
      "text": "Mapping of category IDs to arrays of QuickChatPhrase .",
      "title": "type QuickChatPhrases"
    },
    {
      "location": "client/#class-chatmodal",
      "text": "Manages the chat modal UI, including phrase selection, player selection, and sending quick chat messages. Properties: Name Type Description modalEl HTMLElement & { open: () => void; close: () => void; } Reference to the underlying modal element players PlayerView[] List of players available for quick chat selection playerSearchQuery string Current search query for filtering players previewText string | null Text preview of the selected phrase with substitutions requiresPlayerSelection boolean Indicates if the current phrase requires player selection selectedCategory string | null ID of the currently selected category selectedPhraseText string | null Display text of the currently selected phrase selectedPhraseTemplate string | null Template string of the selected phrase before substitutions selectedQuickChatKey string | null Full key of the selected phrase selectedPlayer PlayerView | null Player selected for substitution in the phrase recipient PlayerView Player receiving the chat message sender PlayerView Player sending the chat message eventBus EventBus Event bus used to emit SendQuickChatEvent s g GameView Game instance for player information quickChatPhrases Record<string, Array<{ text: string; requiresPlayer: boolean }>> Predefined phrases per category categories Array<{ id: string }> List of available chat categories",
      "title": "class ChatModal"
    },
    {
      "location": "client/#public-function-initeventbus",
      "text": "Parameter Type Description eventBus EventBus Event bus instance to listen for CloseViewEvent Returns void . Sets up event listeners for modal closing.",
      "title": "public function initEventBus()"
    },
    {
      "location": "client/#public-function-open",
      "text": "Parameter Type Description sender? PlayerView Optional sender of the message recipient? PlayerView Optional recipient of the message Returns void . Opens the modal and initializes player list if sender and recipient are provided.",
      "title": "public function open()"
    },
    {
      "location": "client/#public-function-close",
      "text": "Returns void . Resets modal state and closes the modal.",
      "title": "public function close()"
    },
    {
      "location": "client/#public-function-setrecipient",
      "text": "Parameter Type Description value PlayerView Player to set as recipient Returns void . Updates the recipient property.",
      "title": "public function setRecipient()"
    },
    {
      "location": "client/#public-function-setsender",
      "text": "Parameter Type Description value PlayerView Player to set as sender Returns void . Updates the sender property.",
      "title": "public function setSender()"
    },
    {
      "location": "client/#public-function-openwithselection",
      "text": "Parameter Type Description categoryId string Category ID to preselect phraseKey string Key of the phrase to preselect sender? PlayerView Optional sender recipient? PlayerView Optional recipient Returns void . Opens the modal with the given category and phrase selected.",
      "title": "public function openWithSelection()"
    },
    {
      "location": "client/#private-function-selectcategory",
      "text": "Parameter Type Description categoryId string ID of the category to select Returns void . Updates modal state to reflect selected category.",
      "title": "private function selectCategory()"
    },
    {
      "location": "client/#private-function-selectphrase",
      "text": "Parameter Type Description phrase QuickChatPhrase Phrase to select Returns void . Updates modal state with selected phrase and determines if player selection is required.",
      "title": "private function selectPhrase()"
    },
    {
      "location": "client/#private-function-selectplayer",
      "text": "Parameter Type Description player PlayerView Player selected for phrase substitution Returns void . Updates modal state to include the selected player.",
      "title": "private function selectPlayer()"
    },
    {
      "location": "client/#private-function-sendchatmessage",
      "text": "Returns void . Emits a SendQuickChatEvent using the sender, recipient, selected phrase key, and optional selected player ID. Resets modal state.",
      "title": "private function sendChatMessage()"
    },
    {
      "location": "client/#private-function-onplayersearchinput",
      "text": "Parameter Type Description e Event Input event from the player search box Returns void . Updates the player search query and triggers re-render.",
      "title": "private function onPlayerSearchInput()"
    },
    {
      "location": "client/#private-function-getsortedfilteredplayers",
      "text": "Returns PlayerView[] . Returns the list of players sorted alphabetically and filtered based on the current search query.",
      "title": "private function getSortedFilteredPlayers()"
    },
    {
      "location": "client/#private-function-getfullquickchatkey",
      "text": "Parameter Type Description category string Category ID phraseKey string Phrase key Returns string . Concatenates category and phrase key into a full quick chat key.",
      "title": "private function getFullQuickChatKey()"
    },
    {
      "location": "client/#private-function-renderphrasepreview",
      "text": "Parameter Type Description phrase { key: string } Phrase object Returns string . Returns the translated text of the phrase for preview purposes.",
      "title": "private function renderPhrasePreview()"
    },
    {
      "location": "client/#private-function-getphrasesforcategory",
      "text": "Parameter Type Description categoryId string Category ID Returns QuickChatPhrase[] . Returns the list of phrases for the given category. render(): import(\"lit\").TemplateResult",
      "title": "private function getPhrasesForCategory()"
    },
    {
      "location": "client/#layerscontrolpanelts",
      "text": "",
      "title": "./layers/ControlPanel.ts"
    },
    {
      "location": "client/#class-controlpanel",
      "text": "Represents the in-game control panel overlay, displaying troop counts, gold, and attack ratio. Implements interface Layer . Properties: Name Type Description game GameView Reference to the current game view. clientID ClientID Identifier for the client/player. eventBus EventBus Event bus for listening and dispatching game events. uiState UIState Tracks the UI state, including attack ratio. attackRatio number Current attack ratio (0\u20131). Managed with state decorator. _maxTroops number Maximum troops for the player. Managed with state decorator. troopRate number Rate of troop increase per tick. Managed with state decorator. _troops number Current number of troops. Managed with state decorator. _isVisible boolean Whether the control panel is visible. Managed with state decorator. _gold Gold Player's current gold. Managed with state decorator. _troopRateIsIncreasing boolean Indicates if troop rate is increasing. _lastTroopIncreaseRate number Stores last tick's troop increase rate.",
      "title": "class ControlPanel"
    },
    {
      "location": "client/#public-function-init_4",
      "text": "Returns void . Initializes the control panel settings from local storage and sets up event listeners for attack ratio changes via AttackRatioEvent . Updates the UI state when the attack ratio changes.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_4",
      "text": "Returns void . Updates the control panel each game tick. Shows or hides the panel based on player status, updates troop count, troop rate, maximum troops, and gold, and triggers a UI re-render. Calls updateTroopIncrease() every 5 ticks.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-updatetroopincrease",
      "text": "Returns void . Compares the current troop increase rate with the previous tick and updates _troopRateIsIncreasing to reflect whether it is increasing. Updates _lastTroopIncreaseRate .",
      "title": "private function updateTroopIncrease()"
    },
    {
      "location": "client/#public-function-onattackratiochange",
      "text": "Parameter Type Description newRatio number The new attack ratio (0\u20131). Returns void . Updates uiState.attackRatio to match newRatio .",
      "title": "public function onAttackRatioChange()"
    },
    {
      "location": "client/#public-function-renderlayer",
      "text": "Parameter Type Description context CanvasRenderingContext2D Canvas context to render on. Returns void . Renders any necessary canvas elements for the control panel. Currently empty.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_1",
      "text": "Returns boolean . Indicates whether the layer should apply canvas transformations. Returns false .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-setvisibile",
      "text": "Parameter Type Description visible boolean Whether the control panel should be visible. Returns void . Sets _isVisible and requests a UI update.",
      "title": "public function setVisibile()"
    },
    {
      "location": "client/#public-function-render_9",
      "text": "Returns import(\"lit\").TemplateResult . Renders the control panel HTML using LitElement templating. Includes troop and gold display, attack ratio slider, and dynamic styling based on state variables.",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-createrenderroot_4",
      "text": "Returns HTMLElement . Overrides LitElement method to disable shadow DOM, allowing global Tailwind CSS styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#layersemojitablets",
      "text": "",
      "title": "./layers/EmojiTable.ts"
    },
    {
      "location": "client/#class-emojitable",
      "text": "Displays a floating emoji selection table that can send emoji intents to players. Properties: Name Type Description isVisible boolean Reactive state indicating whether the emoji table is visible. transformHandler TransformHandler Handles screen-to-world coordinate transformations. game GameView The current game view instance.",
      "title": "class EmojiTable"
    },
    {
      "location": "client/#public-function-initeventbus_1",
      "text": "Parameter Type Description eventBus EventBus Event bus to listen for ShowEmojiMenuEvent and CloseViewEvent. Returns void . Registers event listeners to show or hide the emoji table and handle emoji selection. Handles validation of target player and tile ownership. See also: class SendEmojiIntentEvent , class TerraNulliusImpl",
      "title": "public function initEventBus()"
    },
    {
      "location": "client/#private-property-onemojiclicked",
      "text": "Name Type Description onEmojiClicked (emoji: string) => void Callback function invoked when an emoji is clicked. Initially a no-op.",
      "title": "private property onEmojiClicked"
    },
    {
      "location": "client/#public-function-render_10",
      "text": "Returns TemplateResult | null . Generates the HTML content for the emoji table using Lit html . Returns null if isVisible is false. Includes styling and event handlers for interaction.",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-hidetable",
      "text": "Returns void . Hides the emoji table and requests a DOM update.",
      "title": "public function hideTable()"
    },
    {
      "location": "client/#public-function-showtable",
      "text": "Parameter Type Description oneEmojiClicked (emoji: string) => void Callback executed when an emoji is clicked. Returns void . Shows the emoji table and assigns the click callback.",
      "title": "public function showTable()"
    },
    {
      "location": "client/#public-function-createrenderroot_5",
      "text": "Returns HTMLElement . Overrides LitElement behavior to disable shadow DOM and allow Tailwind CSS styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#layerseventsdisplayts",
      "text": "",
      "title": "./layers/EventsDisplay.ts"
    },
    {
      "location": "client/#class-eventsdisplay",
      "text": "Manages the display of in-game events, chat messages, alliance updates, and attacks. Implements the Layer interface. Properties: Name Type Description eventBus EventBus Event bus for emitting and listening to game-related events. game GameView Current game view instance. active boolean Indicates if the display is active. events GameEvent[] List of events currently shown in the display. alliancesCheckedAt Map<number, Tick> Tracks last checked tick for each alliance by ID. incomingAttacks AttackUpdate[] Tracks incoming attacks. outgoingAttacks AttackUpdate[] Tracks outgoing attacks. outgoingLandAttacks AttackUpdate[] Tracks outgoing land-based attacks. outgoingBoats UnitView[] Tracks transport ship units. _hidden boolean Whether the display is currently hidden. _isVisible boolean Visibility of the events display panel. newEvents number Counter for new events when hidden. latestGoldAmount bigint | null Tracks last gold change for animation. goldAmountAnimating boolean Controls animation state for gold change. goldAmountTimeoutId ReturnType<typeof setTimeout> | null Timeout reference for gold animation. eventsFilters Map<MessageCategory, boolean> Tracks which categories are filtered out.",
      "title": "class EventsDisplay"
    },
    {
      "location": "client/#public-function-init_5",
      "text": "Returns void . Initializes the layer (currently empty placeholder).",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_5",
      "text": "Returns void . Updates event display state, filters expired events, updates incoming/outgoing attacks, and requests UI update.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-disconnectedcallback",
      "text": "Returns void . Cleans up resources like gold animation timeout when the element is removed from DOM.",
      "title": "public function disconnectedCallback()"
    },
    {
      "location": "client/#public-function-shouldtransform_2",
      "text": "Returns boolean . Returns false to indicate this layer does not require coordinate transformation.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-renderlayer_1",
      "text": "Returns void . Placeholder for Layer interface; actual rendering is handled in render() .",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#private-function-renderbutton",
      "text": "Parameter Type Description options object Options for rendering a button including content, click handler, CSS classes, disabled state, translation, and visibility. Returns TemplateResult . Generates a button with specified content and options.",
      "title": "private function renderButton()"
    },
    {
      "location": "client/#private-function-rendertogglebutton",
      "text": "Parameter Type Description src string Image source for the toggle button. category MessageCategory Event category to toggle. Returns TemplateResult . Renders an event filter toggle button.",
      "title": "private function renderToggleButton()"
    },
    {
      "location": "client/#private-function-togglehidden_1",
      "text": "Returns void . Toggles the _hidden state and resets new events counter.",
      "title": "private function toggleHidden()"
    },
    {
      "location": "client/#private-function-toggleeventfilter",
      "text": "Parameter Type Description filterName MessageCategory The category of events to toggle filter state. Returns void . Updates the event filter and refreshes display.",
      "title": "private function toggleEventFilter()"
    },
    {
      "location": "client/#private-function-checkforallianceexpirations",
      "text": "Returns void . Checks player's alliances for imminent expiration and adds events to notify the player.",
      "title": "private function checkForAllianceExpirations()"
    },
    {
      "location": "client/#private-function-addevent_1",
      "text": "Parameter Type Description event GameEvent Event object to add to the display. Returns void . Adds the event to the display and increments new event counter if hidden.",
      "title": "private function addEvent()"
    },
    {
      "location": "client/#private-function-removeevent_1",
      "text": "Parameter Type Description index number Index of the event to remove. Returns void . Removes the event at the given index.",
      "title": "private function removeEvent()"
    },
    {
      "location": "client/#event-handlers-onxevent",
      "text": "Each onXEvent function handles a specific game update type and adds corresponding GameEvent s: Function Parameter Description onDisplayMessageEvent DisplayMessageUpdate Handles standard messages including gold changes. onDisplayChatEvent DisplayChatMessageUpdate Handles chat messages and formatting. onAllianceRequestEvent AllianceRequestUpdate Handles incoming alliance requests. onAllianceRequestReplyEvent AllianceRequestReplyUpdate Handles replies to alliance requests. onBrokeAllianceEvent BrokeAllianceUpdate Handles events where alliances are broken. onAllianceExpiredEvent AllianceExpiredUpdate Handles notifications of alliance expiration. onTargetPlayerEvent TargetPlayerUpdate Handles attack requests between players. onEmojiMessageEvent EmojiUpdate Handles emoji messages sent between players. onUnitIncomingEvent UnitIncomingUpdate Handles incoming unit attacks.",
      "title": "Event Handlers (onXEvent)"
    },
    {
      "location": "client/#private-helper-functions-for-rendering",
      "text": "Function Description getEventDescription Returns event description; uses unsafeHTML if unsafeDescription is true. attackWarningOnClick Handles click on an incoming attack, navigating to attacker or position. renderIncomingAttacks Renders incoming attacks as buttons. renderOutgoingAttacks Renders outgoing attacks with cancel buttons. renderOutgoingLandAttacks Renders outgoing land attacks with cancel buttons. renderBoats Renders transport units with cancel buttons.",
      "title": "Private helper functions for rendering"
    },
    {
      "location": "client/#public-function-render_11",
      "text": "Returns TemplateResult . Renders the events panel including toggle buttons, events table, incoming/outgoing attacks, and animation effects.",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-createrenderroot_6",
      "text": "Returns HTMLElement . Disables shadow DOM to allow global styling (Tailwind CSS).",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#layersfpsdisplayts",
      "text": "",
      "title": "./layers/FPSDisplay.ts"
    },
    {
      "location": "client/#class-fpsdisplay",
      "text": "Displays a draggable FPS overlay, showing current FPS, 60-second average, and frame time. Implements the Layer interface. Properties: Name Type Description eventBus EventBus Event bus for listening to performance overlay toggle events. userSettings UserSettings Stores user preferences including performance overlay visibility. currentFPS number Current FPS calculated from recent frame times. averageFPS number Average FPS over the last 60 seconds. frameTime number Duration of the last frame in milliseconds. isVisible boolean Indicates whether the FPS overlay is visible. isDragging boolean Indicates whether the overlay is being dragged. position { x: number; y: number } Overlay position in pixels.",
      "title": "class FPSDisplay"
    },
    {
      "location": "client/#public-function-init_6",
      "text": "Returns void . Registers an event listener for TogglePerformanceOverlayEvent to toggle performance overlay visibility in user settings.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-setvisible",
      "text": "Parameter Type Description visible boolean Whether the FPS overlay should be shown Returns void . Updates the visibility state.",
      "title": "public function setVisible()"
    },
    {
      "location": "client/#private-function-handleclose",
      "text": "Returns void . Handles click on the close button and toggles performance overlay in user settings.",
      "title": "private function handleClose()"
    },
    {
      "location": "client/#private-function-handlemousedown",
      "text": "Parameter Type Description e MouseEvent Mouse event triggered by user interaction Returns void . Initiates dragging unless the close button is clicked.",
      "title": "private function handleMouseDown()"
    },
    {
      "location": "client/#private-function-handlemousemove",
      "text": "Parameter Type Description e MouseEvent Mouse movement event during dragging Returns void . Updates the overlay position based on mouse movement, keeping it within viewport bounds.",
      "title": "private function handleMouseMove()"
    },
    {
      "location": "client/#private-function-handlemouseup",
      "text": "Returns void . Stops dragging and removes event listeners.",
      "title": "private function handleMouseUp()"
    },
    {
      "location": "client/#public-function-updatefps",
      "text": "Parameter Type Description frameDuration number Duration of the current frame (ms) Returns void . Updates current FPS, average FPS over 60 seconds, and frame time. Requests DOM update.",
      "title": "public function updateFPS()"
    },
    {
      "location": "client/#public-function-shouldtransform_3",
      "text": "Returns boolean . Indicates whether the layer should be transformed; always returns false .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#private-function-getfpscolor",
      "text": "Parameter Type Description fps number FPS value to determine color Returns string . Returns a CSS class string based on FPS thresholds ( fps-good , fps-warning , fps-bad ).",
      "title": "private function getFPSColor()"
    },
    {
      "location": "client/#public-function-render_12",
      "text": "Returns TemplateResult . Generates HTML for the overlay with current FPS, average FPS, and frame time. Positions the overlay according to position and applies dragging style if isDragging is true.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersfxlayerts",
      "text": "",
      "title": "./layers/FxLayer.ts"
    },
    {
      "location": "client/#class-fxlayer",
      "text": "Manages all visual effects (FX) on the game layer, including unit events, bonus events, nuke events, and environmental animations. Properties: Name Type Description canvas HTMLCanvasElement The canvas used for rendering FX. context CanvasRenderingContext2D 2D rendering context for the FX canvas. lastRandomEvent number Counter for random environmental FX. randomEventRate number Interval threshold for random FX events. lastRefresh number Timestamp of the last FX layer refresh. refreshRate number Interval threshold (ms) for redrawing FX. theme Theme Current theme configuration. animatedSpriteLoader AnimatedSpriteLoader Loads and caches animated sprites. allFx Fx[] List of active FX instances. boatTargetFxByUnitId Map<number, TargetFx> Persistent FX markers for transport ships by unit ID. nukeTargetFxByUnitId Map<number, NukeAreaFx> Persistent FX markers for nukes by unit ID.",
      "title": "class FxLayer"
    },
    {
      "location": "client/#public-constructor-constructor_11",
      "text": "Parameter Type Description game GameView The game instance this FX layer belongs to. Initializes the FX layer, sets the theme from the game configuration, and prepares internal state.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-shouldtransform_4",
      "text": "Returns boolean . Determines whether the FX layer requires transformation; always returns true .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_6",
      "text": "Returns void . Updates the FX layer state. Processes random events, boat targets, and all pending game updates (units, bonus events, railroad events, conquest events). Skips processing if FX layer is disabled in user settings.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-manageboattargetfx",
      "text": "Returns void . Removes FX markers for transport ships that have reached their target, retreated, or become inactive.",
      "title": "private function manageBoatTargetFx()"
    },
    {
      "location": "client/#private-function-createnuketargetfxifowned",
      "text": "Parameter Type Description unit UnitView Unit to potentially assign a nuke target FX. Returns void . Creates a persistent nuke target FX for the current player or teammates if the unit is active and owned by the player or same team.",
      "title": "private function createNukeTargetFxIfOwned()"
    },
    {
      "location": "client/#public-function-onbonusevent",
      "text": "Parameter Type Description bonus BonusEventUpdate Bonus event update from the game. Returns void . Displays textual FX for gold or troop bonuses for the current player only.",
      "title": "public function onBonusEvent()"
    },
    {
      "location": "client/#public-function-addtextfx",
      "text": "Parameter Type Description text string Text to display. x number X-coordinate. y number Y-coordinate. Returns void . Adds a floating text FX at the specified location.",
      "title": "public function addTextFx()"
    },
    {
      "location": "client/#public-function-randomevent",
      "text": "Returns void . Generates random environmental FX (Shark, Bubble, Tornado, Tentacle, MiniSmoke) at random ocean locations.",
      "title": "public function randomEvent()"
    },
    {
      "location": "client/#public-function-onunitevent",
      "text": "Parameter Type Description unit UnitView Unit triggering FX. Returns void . Dispatches FX handling based on the unit type (TransportShip, AtomBomb, MIRVWarhead, HydrogenBomb, Warship, Shell, Train, DefensePost, City, Port, MissileSilo, SAMLauncher, Factory).",
      "title": "public function onUnitEvent()"
    },
    {
      "location": "client/#public-function-onshellevent",
      "text": "Parameter Type Description unit UnitView Shell unit. Returns void . Generates mini explosion FX for inactive shell units that reached their target.",
      "title": "public function onShellEvent()"
    },
    {
      "location": "client/#public-function-ontrainevent",
      "text": "Parameter Type Description unit UnitView Train unit. Returns void . Generates mini explosion FX for inactive trains that did not reach their target.",
      "title": "public function onTrainEvent()"
    },
    {
      "location": "client/#public-function-onrailroadevent",
      "text": "Parameter Type Description railroad RailroadUpdate Railroad event update. Returns void . Generates FX along railroad tiles based on a 1/3 chance per tile.",
      "title": "public function onRailroadEvent()"
    },
    {
      "location": "client/#public-function-onconquestevent",
      "text": "Parameter Type Description conquest ConquestUpdate Conquest event update. Returns void . Displays FX and plays sound effect for conquests belonging to the current player.",
      "title": "public function onConquestEvent()"
    },
    {
      "location": "client/#public-function-onwarshipevent",
      "text": "Parameter Type Description unit UnitView Warship unit. Returns void . Generates explosion FX for inactive warships and adds a sinking ship sprite.",
      "title": "public function onWarshipEvent()"
    },
    {
      "location": "client/#public-function-onstructureevent",
      "text": "Parameter Type Description unit UnitView Structure unit. Returns void . Adds building explosion FX for inactive structures.",
      "title": "public function onStructureEvent()"
    },
    {
      "location": "client/#public-function-onnukeevent",
      "text": "Parameter Type Description unit UnitView Nuclear unit. radius number Explosion radius. Returns void . Handles nuke impact, removing FX markers, and delegating to SAM interception or nuke explosion handlers.",
      "title": "public function onNukeEvent()"
    },
    {
      "location": "client/#private-function-handlenukeexplosion",
      "text": "Parameter Type Description unit UnitView Nuclear unit. radius number Explosion radius. Returns void . Generates nuke explosion FX using nukeFxFactory .",
      "title": "private function handleNukeExplosion()"
    },
    {
      "location": "client/#private-function-handlesaminterception",
      "text": "Parameter Type Description unit UnitView Nuclear unit intercepted by SAM. Returns void . Generates SAM explosion and shockwave FX.",
      "title": "private function handleSAMInterception()"
    },
    {
      "location": "client/#public-async-function-init",
      "text": "Returns Promise<void> . Initializes FX layer canvas and loads all animated sprites.",
      "title": "public async function init()"
    },
    {
      "location": "client/#public-function-redraw_1",
      "text": "Returns void . Prepares the canvas and context for rendering FX, disables image smoothing, and sets canvas dimensions to match the game.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-renderlayer_2",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context of the main game canvas. Returns void . Draws the FX layer onto the main game canvas if FX are enabled, refreshing periodically based on refreshRate .",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#private-function-renderallfx",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context. delta number Time since last render (ms). Returns void . Clears the FX canvas and renders all active FX.",
      "title": "private function renderAllFx()"
    },
    {
      "location": "client/#private-function-rendercontextfx",
      "text": "Parameter Type Description duration number Duration since last render (ms). Returns void . Iterates through all FX, updating and removing inactive ones.",
      "title": "private function renderContextFx()"
    },
    {
      "location": "client/#layersgameleftsidebarts",
      "text": "",
      "title": "./layers/GameLeftSidebar.ts"
    },
    {
      "location": "client/#class-gameleftsidebar",
      "text": "Manages the left sidebar in the game UI, displaying player team labels, leaderboard, and team statistics. Implements the Layer interface. Properties: Name Type Description isLeaderboardShow boolean Indicates whether the leaderboard is visible. isTeamLeaderboardShow boolean Indicates whether the team leaderboard is visible. isVisible boolean Indicates whether the sidebar is visible. isPlayerTeamLabelVisible boolean Indicates whether the player's team label is visible. playerTeam string \\| null Stores the player's team identifier. playerColor Colord Color associated with the player's team. game GameView Game view instance for accessing player and game state. _shownOnInit boolean Tracks whether the sidebar was initially shown on large screens.",
      "title": "class GameLeftSidebar"
    },
    {
      "location": "client/#public-function-createrenderroot_7",
      "text": "Returns this . Disables shadow DOM to allow global styles.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_7",
      "text": "Returns void . Initializes sidebar visibility, shows player team label if in a team game, and sets default visibility for large screens.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_7",
      "text": "Returns void . Updates the sidebar state each game tick, including player team label, leaderboard visibility, and initial sidebar setup after spawn phase.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-toggleleaderboard",
      "text": "Returns void . Toggles visibility of the main leaderboard.",
      "title": "private function toggleLeaderboard()"
    },
    {
      "location": "client/#private-function-toggleteamleaderboard",
      "text": "Returns void . Toggles visibility of the team leaderboard.",
      "title": "private function toggleTeamLeaderboard()"
    },
    {
      "location": "client/#private-getter-isteamgame",
      "text": "Returns boolean . Determines whether the current game mode is a team game.",
      "title": "private getter isTeamGame()"
    },
    {
      "location": "client/#private-function-gettranslatedplayerteamlabel",
      "text": "Returns string . Retrieves the localized team label; falls back to the team identifier if no translation is found.",
      "title": "private function getTranslatedPlayerTeamLabel()"
    },
    {
      "location": "client/#public-function-render_13",
      "text": "Returns TemplateResult . Generates the sidebar HTML structure including team label, leaderboard buttons, and embedded leaderboard and team stats components. Applies dynamic visibility and styling based on state.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersgamerightsidebarts",
      "text": "",
      "title": "./layers/GameRightSidebar.ts"
    },
    {
      "location": "client/#class-gamerightsidebar",
      "text": "Manages the right sidebar in the game UI, including replay controls, pause/play functionality, timer display, settings, and exit actions. Implements the Layer interface. Properties: Name Type Description game GameView Game view instance for accessing player and game state. eventBus EventBus Event bus for emitting UI events. _isSinglePlayer boolean Indicates whether the game is single-player or a replay. _isReplayVisible boolean Indicates whether the replay panel is visible. _isVisible boolean Indicates whether the sidebar is visible. isPaused boolean Indicates whether the game is paused. timer number Tracks the game timer in seconds. hasWinner boolean Tracks whether a winner has been determined.",
      "title": "class GameRightSidebar"
    },
    {
      "location": "client/#public-function-createrenderroot_8",
      "text": "Returns this . Disables shadow DOM to allow global styles.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_8",
      "text": "Returns void . Initializes the sidebar, sets _isSinglePlayer , visibility, and spawn phase state.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_8",
      "text": "Returns void . Updates timer logic, checks for game winner, and handles spawn phase adjustments.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-secondstohms",
      "text": "Parameter Type Description d number Number of seconds to convert. Returns string . Converts seconds to a human-readable format (h, m, s). Uses \"-\" as fallback for zero.",
      "title": "private function secondsToHms()"
    },
    {
      "location": "client/#private-function-togglereplaypanel",
      "text": "Returns void . Toggles visibility of the replay panel and emits ShowReplayPanelEvent with the updated state and _isSinglePlayer flag.",
      "title": "private function toggleReplayPanel()"
    },
    {
      "location": "client/#private-function-onpausebuttonclick",
      "text": "Returns void . Toggles the paused state and emits a PauseGameEvent .",
      "title": "private function onPauseButtonClick()"
    },
    {
      "location": "client/#private-function-onexitbuttonclick",
      "text": "Returns void . Handles exit logic, including player confirmation if alive, then redirects to the home page.",
      "title": "private function onExitButtonClick()"
    },
    {
      "location": "client/#private-function-onsettingsbuttonclick",
      "text": "Returns void . Emits ShowSettingsModalEvent to display settings panel.",
      "title": "private function onSettingsButtonClick()"
    },
    {
      "location": "client/#public-function-render_14",
      "text": "Returns TemplateResult . Renders the sidebar HTML, including replay, pause/play, settings, exit buttons, and game timer. Applies dynamic visibility and styling based on state.",
      "title": "public function render()"
    },
    {
      "location": "client/#private-function-mayberenderreplaybuttons",
      "text": "Returns TemplateResult . Conditionally renders replay and pause/play buttons if _isSinglePlayer or the game is a replay.",
      "title": "private function maybeRenderReplayButtons()"
    },
    {
      "location": "client/#layersheadsupmessagets",
      "text": "",
      "title": "./layers/HeadsUpMessage.ts"
    },
    {
      "location": "client/#class-headsupmessage",
      "text": "Displays a temporary spawn selection message during the game's spawn phase. Properties: Name Type Description game GameView The current game view instance. isVisible boolean Indicates whether the message is currently visible. Managed internally.",
      "title": "class HeadsUpMessage"
    },
    {
      "location": "client/#public-function-createrenderroot_9",
      "text": "Returns LitElement . Overrides LitElement's shadow DOM root creation to render into the light DOM, enabling external CSS styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_9",
      "text": "Returns void . Initializes the message by making it visible and requesting an update to render.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_9",
      "text": "Returns void . Updates visibility based on the game state. Hides the message once the spawn phase ends.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-render_15",
      "text": "Returns TemplateResult . Renders the message element if isVisible is true . Uses translateText to display a localized prompt: \"choose_spawn\". See also: Layer interface",
      "title": "public function render()"
    },
    {
      "location": "client/#layerslayerts",
      "text": "",
      "title": "./layers/Layer.ts"
    },
    {
      "location": "client/#interface-layer",
      "text": "Defines the lifecycle and rendering contract for all game layers. Layers can optionally implement these methods to manage state, rendering, and transformations. Optional Methods: Name Type Description init () => void Optional initialization logic for the layer. Called once when the layer is first set up. tick () => void Optional per-frame update logic. Called every game tick. renderLayer (context: CanvasRenderingContext2D) => void Optional rendering logic for the layer. Receives a canvas rendering context to draw to. shouldTransform () => boolean Optional indicator whether the layer should apply transformations like translation/scaling. Returns true or false . redraw () => void Optional method to refresh or re-initialize the layer's internal canvas or state. Called when the layer needs a complete redraw. Usage: Layers implementing this interface are managed by the game's rendering system. Methods are all optional, allowing flexible layer implementations that only override necessary behaviors.",
      "title": "interface Layer"
    },
    {
      "location": "client/#layersleaderboardts",
      "text": "",
      "title": "./layers/Leaderboard.ts"
    },
    {
      "location": "client/#interface-entry",
      "text": "Represents a single player entry in the leaderboard. Name Type Description name string Player's display name position number Player's position on the leaderboard score string Player's score as a formatted percentage gold string Player's gold formatted as string troops string Player's troops formatted as string isMyPlayer boolean Whether the entry corresponds to the current player isOnSameTeam boolean Whether the player is on the same team as the current player player PlayerView Reference to the PlayerView instance",
      "title": "interface Entry"
    },
    {
      "location": "client/#class-gotoplayerevent",
      "text": "Implements GameEvent . Event to navigate to a specific player. Parameter Type Description player PlayerView Player to navigate to Returns void .",
      "title": "class GoToPlayerEvent"
    },
    {
      "location": "client/#class-gotopositionevent",
      "text": "Implements GameEvent . Event to navigate to specific coordinates. Parameter Type Description x number X-coordinate y number Y-coordinate Returns void .",
      "title": "class GoToPositionEvent"
    },
    {
      "location": "client/#class-gotounitevent",
      "text": "Implements GameEvent . Event to navigate to a specific unit. Parameter Type Description unit UnitView Unit to navigate to Returns void .",
      "title": "class GoToUnitEvent"
    },
    {
      "location": "client/#class-leaderboard",
      "text": "Displays the game leaderboard and handles sorting, updating, and player navigation. Properties: Name Type Description game GameView | null Current game view instance eventBus EventBus | null Event bus for emitting player navigation events players Entry[] Array of leaderboard entries visible boolean Whether the leaderboard is visible showTopFive boolean Flag to show only the top five players _sortKey 'tiles' | 'gold' | 'troops' Current sort key _sortOrder 'asc' | 'desc' Current sort order",
      "title": "class Leaderboard"
    },
    {
      "location": "client/#public-function-createrenderroot_10",
      "text": "Returns HTMLElement . Overrides LitElement to use light DOM for Tailwind styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_10",
      "text": "Returns void . Placeholder initialization method.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_10",
      "text": "Returns void . Updates the leaderboard every 10 ticks if visible.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-setsort",
      "text": "Parameter Type Description key 'tiles' | 'gold' | 'troops' Sorting key to apply Returns void . Updates the sort key and order, then refreshes the leaderboard.",
      "title": "private function setSort()"
    },
    {
      "location": "client/#private-function-updateleaderboard",
      "text": "Returns void . Computes the current leaderboard entries based on game state, sort order, and whether to show only top five. Ensures current player is included if not in top five. See also: interface Entry",
      "title": "private function updateLeaderboard()"
    },
    {
      "location": "client/#private-function-handlerowclickplayer",
      "text": "Parameter Type Description player PlayerView Player clicked on the leaderboard row Returns void . Emits GoToPlayerEvent via the event bus.",
      "title": "private function handleRowClickPlayer()"
    },
    {
      "location": "client/#public-function-renderlayer_3",
      "text": "Parameter Type Description context CanvasRenderingContext2D Canvas rendering context Returns void . Placeholder for rendering the leaderboard layer.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_5",
      "text": "Returns boolean . Indicates whether the leaderboard layer requires canvas transformations. Always returns false.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-render_16",
      "text": "Returns TemplateResult . Renders the leaderboard HTML including header row, sortable columns, and entries. Handles clicks to sort and toggle top-five visibility.",
      "title": "public function render()"
    },
    {
      "location": "client/#private-function-formatpercentage",
      "text": "Parameter Type Description value number Value between 0 and 1 to format as percentage Returns string . Formats a number as a percentage string with one decimal place. Returns 0% if the input is NaN.",
      "title": "private function formatPercentage()"
    },
    {
      "location": "client/#layersmainradialmenuts",
      "text": "",
      "title": "./layers/MainRadialMenu.ts"
    },
    {
      "location": "client/#class-mainradialmenu",
      "text": "Manages the main radial menu for player actions, including build menus, emoji table, chat integration, and UI updates. Properties: Name Type Description radialMenu RadialMenu Core radial menu instance handling menu display and interactions playerActionHandler PlayerActionHandler Handles player actions triggered from the radial menu chatIntegration ChatIntegration Integrates chat functionality for interacting with other players clickedTile TileRef | null The last clicked tile for which the menu was opened",
      "title": "class MainRadialMenu"
    },
    {
      "location": "client/#constructor",
      "text": "Parameter Type Description eventBus EventBus Event bus for subscribing and emitting events game GameView Current game view instance transformHandler TransformHandler Converts screen coordinates to world coordinates emojiTable EmojiTable Reference to the emoji table component buildMenu BuildMenu Reference to the build menu component uiState UIState UI state management instance playerPanel PlayerPanel Reference to the player panel component Initializes the radial menu, player action handler, and chat integration.",
      "title": "constructor"
    },
    {
      "location": "client/#public-function-init_11",
      "text": "Returns void . Sets up the radial menu and subscribes to ContextMenuEvent to open the menu when the player right-clicks a valid tile.",
      "title": "public function init()"
    },
    {
      "location": "client/#private-async-function-updateplayeractions",
      "text": "Parameter Type Description myPlayer PlayerView The current player actions PlayerActions Available actions for the player on the clicked tile tile TileRef The tile for which actions are computed screenX? number Optional X coordinate for menu display screenY? number Optional Y coordinate for menu display Returns Promise<void> . Updates the radial menu parameters, chat modal, build menu, and emoji table based on the provided player actions and tile. Shows or refreshes the radial menu at the specified screen coordinates.",
      "title": "private async function updatePlayerActions()"
    },
    {
      "location": "client/#public-async-function-tick_1",
      "text": "Returns Promise<void> . Periodically refreshes the radial menu actions every 5 game ticks if the menu is visible.",
      "title": "public async function tick()"
    },
    {
      "location": "client/#public-function-renderlayer_4",
      "text": "Parameter Type Description context CanvasRenderingContext2D Canvas rendering context Returns void . Renders the radial menu layer onto the canvas.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_6",
      "text": "Returns boolean . Indicates whether the radial menu layer requires canvas transformations.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-closemenu",
      "text": "Returns void . Hides the radial menu, build menu, emoji table, and player panel if any are visible.",
      "title": "public function closeMenu()"
    },
    {
      "location": "client/#layersmultitabmodalts",
      "text": "",
      "title": "./layers/MultiTabModal.ts"
    },
    {
      "location": "client/#class-multitabmodal",
      "text": "Displays a modal warning when multiple tabs are detected for the same player. Handles countdown, penalty display, and event dispatching. Properties: Name Type Description game GameView Current game view instance detector MultiTabDetector Monitors multi-tab activity duration number Duration of penalty in milliseconds (default: 5000) countdown number Countdown in seconds for the modal display isVisible boolean Whether the modal is currently visible fakeIp string Fake IP displayed in the modal deviceFingerprint string Fake device fingerprint displayed in the modal reported boolean Whether the multi-tab violation is reported intervalId number | undefined ID of the interval timer for countdown",
      "title": "class MultiTabModal"
    },
    {
      "location": "client/#public-function-createrenderroot_11",
      "text": "Returns HTMLElement . Disables shadow DOM to allow Tailwind styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-tick_11",
      "text": "Returns void . Monitors multi-tab activity and shows the modal when detected, unless the game is in spawn phase, singleplayer, or dev environment.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-init_12",
      "text": "Returns void . Initializes fake IP, device fingerprint, and reported status.",
      "title": "public function init()"
    },
    {
      "location": "client/#private-function-generatefakeip",
      "text": "Returns string . Generates a random IP address in xxx.xxx.xxx.xxx format.",
      "title": "private function generateFakeIp()"
    },
    {
      "location": "client/#private-function-generatedevicefingerprint",
      "text": "Returns string . Generates a random 32-character hexadecimal device fingerprint.",
      "title": "private function generateDeviceFingerprint()"
    },
    {
      "location": "client/#public-function-show",
      "text": "Parameter Type Description duration number Duration in milliseconds to display the modal Returns void . Shows the modal, starts the countdown timer, and requests a DOM update.",
      "title": "public function show()"
    },
    {
      "location": "client/#public-function-hide",
      "text": "Returns void . Hides the modal, clears the countdown timer, dispatches penalty-complete event, and requests a DOM update.",
      "title": "public function hide()"
    },
    {
      "location": "client/#public-function-disconnectedcallback_1",
      "text": "Returns void . Ensures interval timer is cleared when the element is removed from the DOM.",
      "title": "public function disconnectedCallback()"
    },
    {
      "location": "client/#public-function-render_17",
      "text": "Returns TemplateResult . Renders the modal HTML including warning messages, fake IP and fingerprint, countdown timer, progress bar, and penalty information.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersnamelayerts",
      "text": "",
      "title": "./layers/NameLayer.ts"
    },
    {
      "location": "client/#class-renderinfo",
      "text": "Tracks rendering information for a player. Properties: Name Type Description icons Map<string, HTMLImageElement> Maps icon identifiers to HTML image elements player PlayerView Player associated with this render info lastRenderCalc number Timestamp of last render calculation location Cell | null Last known screen location of the player's name fontSize number Current font size for rendering the name fontColor string Current font color for rendering the name element HTMLElement HTML element representing the player's name and icons",
      "title": "class RenderInfo"
    },
    {
      "location": "client/#class-namelayer-implements-layer",
      "text": "Manages the rendering of player names, flags, troops, and associated icons on a separate layer. Properties: Name Type Description canvas HTMLCanvasElement The canvas used for the layer lastChecked number Last time the layer was checked for updates renderCheckRate number Frequency (ms) for checking renders renderRefreshRate number Minimum time (ms) between individual render updates rand PseudoRandom Random number generator for slight render variations renders RenderInfo[] List of all active render info objects seenPlayers Set<PlayerView> Tracks players already initialized for rendering firstPlace PlayerView | null Player currently in first place theme Theme Current theme used for colors and fonts userSettings UserSettings User settings such as dark mode isVisible boolean Determines if the layer should be visible Constructor Parameters: Parameter Type Description game GameView The game view instance transformHandler TransformHandler Handles coordinate transforms eventBus EventBus Event bus for subscribing to game events",
      "title": "class NameLayer implements Layer"
    },
    {
      "location": "client/#public-function-init_13",
      "text": "Returns void . Initializes the canvas, container, event listeners, and prepares the layer for rendering.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_12",
      "text": "Returns void . Updates the render list with alive players, initializing new RenderInfo objects for unseen players.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-renderlayer_5",
      "text": "Parameter Type Description mainContex CanvasRenderingContext2D The main canvas context to draw the layer on Returns void . Positions the layer container, triggers rendering updates based on renderCheckRate , and draws the canvas onto the main context.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_7",
      "text": "Returns boolean . Always returns false , indicating the layer does not require transform scaling.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-redraw_2",
      "text": "Returns void . Updates the theme colors.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#private-function-onalternateviewchange",
      "text": "Parameter Type Description event AlternateViewEvent Event indicating a change in alternate view mode Returns void . Updates isVisible and refreshes visibility for all rendered elements.",
      "title": "private function onAlternateViewChange()"
    },
    {
      "location": "client/#private-function-updateelementvisibility",
      "text": "Parameter Type Description render RenderInfo Render info object to update visibility for Returns void . Hides or shows the HTML element based on player state, zoom scale, screen position, and visibility flags.",
      "title": "private function updateElementVisibility()"
    },
    {
      "location": "client/#private-function-createplayerelement",
      "text": "Parameter Type Description player PlayerView Player for whom the element is being created Returns HTMLDivElement . Creates a new HTML element for displaying the player's name, flag, troops, and icons. Initializes it off-screen and hidden.",
      "title": "private function createPlayerElement()"
    },
    {
      "location": "client/#public-function-renderplayerinfo",
      "text": "Parameter Type Description render RenderInfo The render info object to update and display Returns void . Updates font size, color, positions, and icons for a player. Removes the element if the player is no longer alive or visible. See also: class RenderInfo",
      "title": "public function renderPlayerInfo()"
    },
    {
      "location": "client/#private-function-createiconelement",
      "text": "Parameter Type Description src string Source URL of the icon image size number Pixel size of the icon id string Identifier for the icon center? boolean Optional. If true, centers the icon vertically Returns HTMLImageElement . Creates an icon element with appropriate size, data attributes, and optional centering.",
      "title": "private function createIconElement()"
    },
    {
      "location": "client/#layersplayeractionhandlerts",
      "text": "",
      "title": "./layers/PlayerActionHandler.ts"
    },
    {
      "location": "client/#class-playeractionhandler",
      "text": "Handles player action intents by emitting corresponding events through the EventBus . Constructor Parameters: Parameter Type Description eventBus EventBus Event bus used to emit player action events uiState UIState User interface state for retrieving parameters such as attack ratios",
      "title": "class PlayerActionHandler"
    },
    {
      "location": "client/#public-function-getplayeractions",
      "text": "Parameter Type Description player PlayerView Player whose available actions are being retrieved tile TileRef Tile to query actions on Returns Promise<PlayerActions> . Retrieves available actions for the player on the specified tile.",
      "title": "public function getPlayerActions()"
    },
    {
      "location": "client/#public-function-handleattack",
      "text": "Parameter Type Description player PlayerView Player performing the attack targetId string | null Optional ID of the target player Returns void . Emits a SendAttackIntentEvent with the troop count calculated from the attack ratio.",
      "title": "public function handleAttack()"
    },
    {
      "location": "client/#public-function-handleboatattack",
      "text": "Parameter Type Description player PlayerView Player performing the boat attack targetId PlayerID | null Optional target player ID targetTile TileRef Tile being attacked spawnTile TileRef | null Optional spawn tile for the boat attack Returns void . Emits a SendBoatAttackIntentEvent with calculated troop count.",
      "title": "public function handleBoatAttack()"
    },
    {
      "location": "client/#public-function-findbesttransportshipspawn",
      "text": "Parameter Type Description player PlayerView Player requesting a transport ship spawn tile TileRef Tile to consider for spawning Returns Promise<TileRef | false> . Finds the optimal transport ship spawn for the player at a given tile. Returns false if no valid spawn exists.",
      "title": "public function findBestTransportShipSpawn()"
    },
    {
      "location": "client/#public-function-handlespawn",
      "text": "Parameter Type Description tile TileRef Tile to spawn a unit Returns void . Emits a SendSpawnIntentEvent for the specified tile.",
      "title": "public function handleSpawn()"
    },
    {
      "location": "client/#public-function-handlealliancerequest",
      "text": "Parameter Type Description player PlayerView Player sending the alliance request recipient PlayerView Player receiving the alliance request Returns void . Emits a SendAllianceRequestIntentEvent .",
      "title": "public function handleAllianceRequest()"
    },
    {
      "location": "client/#public-function-handlebreakalliance",
      "text": "Parameter Type Description player PlayerView Player breaking the alliance recipient PlayerView Player with whom the alliance is broken Returns void . Emits a SendBreakAllianceIntentEvent .",
      "title": "public function handleBreakAlliance()"
    },
    {
      "location": "client/#public-function-handletargetplayer",
      "text": "Parameter Type Description targetId string | null Optional ID of the target player Returns void . Emits a SendTargetPlayerIntentEvent if targetId is not null.",
      "title": "public function handleTargetPlayer()"
    },
    {
      "location": "client/#public-function-handledonategold",
      "text": "Parameter Type Description recipient PlayerView Player receiving the gold donation Returns void . Emits a SendDonateGoldIntentEvent .",
      "title": "public function handleDonateGold()"
    },
    {
      "location": "client/#public-function-handledonatetroops",
      "text": "Parameter Type Description recipient PlayerView Player receiving the troop donation Returns void . Emits a SendDonateTroopsIntentEvent .",
      "title": "public function handleDonateTroops()"
    },
    {
      "location": "client/#public-function-handleembargo",
      "text": "Parameter Type Description recipient PlayerView Player being embargoed action \"start\" | \"stop\" Action to start or stop the embargo Returns void . Emits a SendEmbargoIntentEvent with the specified action.",
      "title": "public function handleEmbargo()"
    },
    {
      "location": "client/#public-function-handleemoji",
      "text": "Parameter Type Description targetPlayer PlayerView | \"AllPlayers\" Player or all players receiving the emoji emojiIndex number Index of the emoji being sent Returns void . Emits a SendEmojiIntentEvent .",
      "title": "public function handleEmoji()"
    },
    {
      "location": "client/#public-function-handledeleteunit",
      "text": "Parameter Type Description unitId number ID of the unit to delete Returns void . Emits a SendDeleteUnitIntentEvent .",
      "title": "public function handleDeleteUnit()"
    },
    {
      "location": "client/#layersplayerinfooverlayts",
      "text": "",
      "title": "./layers/PlayerInfoOverlay.ts"
    },
    {
      "location": "client/#class-playerinfooverlay",
      "text": "Displays detailed information about players or units in an overlay. Integrates with class TransformHandler and listens for mouse and context events to determine which information to display.",
      "title": "class PlayerInfoOverlay"
    },
    {
      "location": "client/#public-property-game",
      "text": "Type: GameView The current game view instance.",
      "title": "public property game"
    },
    {
      "location": "client/#public-property-eventbus",
      "text": "Type: EventBus Event bus for subscribing to relevant events such as mouse movement and context menu actions.",
      "title": "public property eventBus"
    },
    {
      "location": "client/#public-property-transform",
      "text": "Type: TransformHandler Handles coordinate transformations between screen and world space.",
      "title": "public property transform"
    },
    {
      "location": "client/#private-state-_isinfovisible",
      "text": "Type: boolean Tracks whether the overlay is currently visible.",
      "title": "private state _isInfoVisible"
    },
    {
      "location": "client/#private-state-player",
      "text": "Type: PlayerView | null The currently hovered player. null if no player is hovered.",
      "title": "private state player"
    },
    {
      "location": "client/#private-state-playerprofile",
      "text": "Type: PlayerProfile | null Profile information of the hovered player, loaded asynchronously.",
      "title": "private state playerProfile"
    },
    {
      "location": "client/#private-state-unit",
      "text": "Type: UnitView | null The currently hovered unit. null if no unit is hovered.",
      "title": "private state unit"
    },
    {
      "location": "client/#public-function-init_14",
      "text": "Initializes event listeners for mouse movements, context menus, and closing radial menus. Marks the overlay as active.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-hide_1",
      "text": "Hides the overlay and clears the currently displayed player and unit.",
      "title": "public function hide()"
    },
    {
      "location": "client/#public-function-maybeshow",
      "text": "Parameter Type Description x number X-coordinate of the mouse in screen space. y number Y-coordinate of the mouse in screen space. Displays player or unit info if the coordinates correspond to a valid tile or nearby unit.",
      "title": "public function maybeShow()"
    },
    {
      "location": "client/#public-function-tick_13",
      "text": "Requests a UI update every tick.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-renderlayer_6",
      "text": "Parameter Type Description context CanvasRenderingContext2D The rendering context to draw the layer. Implements the Layer interface. Empty placeholder for compatibility.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_8",
      "text": "Returns boolean . Always returns false .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-setvisible_1",
      "text": "Parameter Type Description visible boolean Determines whether the overlay is visible. Updates _isInfoVisible and requests a UI update.",
      "title": "public function setVisible()"
    },
    {
      "location": "client/#private-function-getrelationclass",
      "text": "Parameter Type Description relation Relation Relation type of another player. Returns a Tailwind CSS class string for coloring relation indicators.",
      "title": "private function getRelationClass()"
    },
    {
      "location": "client/#private-function-getrelationname",
      "text": "Parameter Type Description relation Relation Relation type of another player. Returns a translated text string describing the relation.",
      "title": "private function getRelationName()"
    },
    {
      "location": "client/#private-function-displayunitcount",
      "text": "Parameter Type Description player PlayerView Player whose units are counted. type UnitType The type of unit to display. icon string Icon URL representing the unit type. description string Translation key for the unit description. Returns a TemplateResult displaying the unit count, or an empty string if the unit type is disabled.",
      "title": "private function displayUnitCount()"
    },
    {
      "location": "client/#private-function-allianceexpirationtext",
      "text": "Parameter Type Description alliance AllianceView Alliance object with expiration info. Returns a formatted string representing the remaining alliance duration.",
      "title": "private function allianceExpirationText()"
    },
    {
      "location": "client/#private-function-renderplayerinfo",
      "text": "Parameter Type Description player PlayerView Player to render info for. Returns a TemplateResult rendering the player's info, including flag, name, troops, gold, units, and alliance relations.",
      "title": "private function renderPlayerInfo()"
    },
    {
      "location": "client/#private-function-renderunitinfo",
      "text": "Parameter Type Description unit UnitView Unit to render info for. Returns a TemplateResult rendering the unit's owner, type, and health.",
      "title": "private function renderUnitInfo()"
    },
    {
      "location": "client/#protected-function-createrenderroot",
      "text": "Overrides the default LitElement render root to return this , disabling shadow DOM to allow global Tailwind styling.",
      "title": "protected function createRenderRoot()"
    },
    {
      "location": "client/#layersplayerpanelts",
      "text": "",
      "title": "./layers/PlayerPanel.ts"
    },
    {
      "location": "client/#class-playerpanel",
      "text": "Defines the player interaction panel component for the game UI. Displays player details, alliance information, resources, and actionable buttons (chat, trade, alliance, emoji). Implements interface Layer . Properties: Name Type Description g GameView Reference to the active class GameView . eventBus EventBus Event bus used for communication between UI elements and game logic. emojiTable EmojiTable Reference to the global emoji selector. uiState UIState The current class UIState for UI rendering context. actions PlayerActions \\ \\| null Holds the current player action permissions and statuses. tile TileRef \\ \\| null The tile currently being examined. _profileForPlayerId number \\ \\| null Caches the last loaded player profile ID for optimization. sendTarget PlayerView \\| null Target player for sending resources (stateful). sendMode \"troops\" \\| \"gold\" \\| \"none\" Current send mode type (stateful). isVisible boolean Visibility state of the panel. allianceExpiryText string \\| null Human-readable alliance expiry text. allianceExpirySeconds number \\| null Remaining seconds before alliance expires. otherProfile PlayerProfile \\| null Loaded profile of the other player. ctModal ChatModal Cached chat modal reference.",
      "title": "class PlayerPanel"
    },
    {
      "location": "client/#protected-function-createrenderroot_1",
      "text": "Returns this . Overrides LitElement\u2019s shadow DOM root creation to render directly into the main DOM tree.",
      "title": "protected function createRenderRoot()"
    },
    {
      "location": "client/#public-function-initeventbus_2",
      "text": "Parameter Type Description eventBus EventBus The central event bus instance to subscribe to. Returns void . Registers handlers for view close events and hides the panel when appropriate.",
      "title": "public function initEventBus()"
    },
    {
      "location": "client/#public-function-init_15",
      "text": "Returns void . Initializes event listeners and binds the ChatModal component. Logs a warning if the modal is not found.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-async-function-tick_2",
      "text": "Returns Promise<void> . Refreshes the displayed player data and interaction state when the panel is visible. Fetches profiles, updates alliance timers, and requests UI updates. Returns early if no visible tile is active.",
      "title": "public async function tick()"
    },
    {
      "location": "client/#public-function-show_1",
      "text": "Parameter Type Description actions PlayerActions Current player interaction permissions. tile TileRef Tile reference used to determine ownership and context. Returns void . Displays the panel for the given tile and initializes action context.",
      "title": "public function show()"
    },
    {
      "location": "client/#public-function-hide_2",
      "text": "Returns void . Hides the panel and resets transient state such as send mode and target.",
      "title": "public function hide()"
    },
    {
      "location": "client/#private-function-handleclose_1",
      "text": "Parameter Type Description e Event DOM event triggering panel closure. Returns void . Stops propagation and hides the panel.",
      "title": "private function handleClose()"
    },
    {
      "location": "client/#private-function-handleallianceclick",
      "text": "Parameter Type Description e Event The originating UI event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Sends a class SendAllianceRequestIntentEvent via the class EventBus . Hides the panel afterward.",
      "title": "private function handleAllianceClick()"
    },
    {
      "location": "client/#private-function-handlebreakallianceclick",
      "text": "Parameter Type Description e Event The UI event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Emits a class SendBreakAllianceIntentEvent to request breaking the alliance. Hides the panel afterward.",
      "title": "private function handleBreakAllianceClick()"
    },
    {
      "location": "client/#private-function-opensendtroops",
      "text": "Parameter Type Description target PlayerView The player to send troops to. Returns void . Sets internal state to enable troop send mode.",
      "title": "private function openSendTroops()"
    },
    {
      "location": "client/#private-function-opensendgold",
      "text": "Parameter Type Description target PlayerView The player to send gold to. Returns void . Sets internal state to enable gold send mode.",
      "title": "private function openSendGold()"
    },
    {
      "location": "client/#private-function-handledonatetroopclick",
      "text": "Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Opens the send troop panel for the specified player.",
      "title": "private function handleDonateTroopClick()"
    },
    {
      "location": "client/#private-function-handledonategoldclick",
      "text": "Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Opens the send gold panel for the specified player.",
      "title": "private function handleDonateGoldClick()"
    },
    {
      "location": "client/#private-function-closesend",
      "text": "Returns void . Resets sending state to default (\u201cnone\u201d).",
      "title": "private function closeSend()"
    },
    {
      "location": "client/#private-function-confirmsend",
      "text": "Parameter Type Description e CustomEvent<{ amount: number; closePanel?: boolean }> The confirmation event with amount and close flag. Returns void . Confirms resource send, resets send mode, and optionally hides the panel.",
      "title": "private function confirmSend()"
    },
    {
      "location": "client/#private-function-handleembargoclick",
      "text": "Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView Target player. Returns void . Emits a class SendEmbargoIntentEvent with \"start\" action and hides the panel.",
      "title": "private function handleEmbargoClick()"
    },
    {
      "location": "client/#private-function-handlestopembargoclick",
      "text": "Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView Target player. Returns void . Emits a class SendEmbargoIntentEvent with \"stop\" action and hides the panel.",
      "title": "private function handleStopEmbargoClick()"
    },
    {
      "location": "client/#private-function-onstoptradingallclick",
      "text": "Parameter Type Description e Event Click event. Returns void . Emits a class SendEmbargoAllIntentEvent to stop all trading.",
      "title": "private function onStopTradingAllClick()"
    },
    {
      "location": "client/#private-function-onstarttradingallclick",
      "text": "Parameter Type Description e Event Click event. Returns void . Emits a class SendEmbargoAllIntentEvent to resume all trading.",
      "title": "private function onStartTradingAllClic()k"
    },
    {
      "location": "client/#private-function-handleemojiclick",
      "text": "Parameter Type Description e Event Click event. myPlayer PlayerView The local player. other PlayerView The target player. Returns void . Displays the class EmojiTable for emoji selection and emits a class SendEmojiIntentEvent when an emoji is chosen. Hides both the emoji table and the panel after completion.",
      "title": "private function handleEmojiClick()"
    },
    {
      "location": "client/#private-function-handlechat",
      "text": "Parameter Type Description e Event Click event. sender PlayerView The message sender. other PlayerView The recipient player. Returns void . Opens the chat modal between the two players. Logs a warning if the chat modal is missing.",
      "title": "private function handleChat()"
    },
    {
      "location": "client/#private-function-handletargetclick",
      "text": "Parameter Type Description e Event Click event. other PlayerView Target player. Returns void . Emits a class SendTargetPlayerIntentEvent and hides the panel.",
      "title": "private function handleTargetClick()"
    },
    {
      "location": "client/#private-function-identitychipprops",
      "text": "Parameter Type Description type PlayerType Type of the player. Returns { labelKey: string; aria: string; classes: string; icon: string } . Provides styling and metadata for identity chips depending on player type.",
      "title": "private function identityChipProps()"
    },
    {
      "location": "client/#private-function-getrelationclass_1",
      "text": "Parameter Type Description relation Relation The relation state between players. Returns string . Computes the CSS class string for visual relation representation.",
      "title": "private function getRelationClass()"
    },
    {
      "location": "client/#private-function-getrelationname_1",
      "text": "Parameter Type Description relation Relation The relation enum value. Returns string . Translates the relation into localized text.",
      "title": "private function getRelationName()"
    },
    {
      "location": "client/#private-function-getexpirycolorclass",
      "text": "Parameter Type Description seconds number \\| null Remaining seconds or null . Returns string . Determines color class based on remaining time thresholds.",
      "title": "private function getExpiryColorClass()"
    },
    {
      "location": "client/#private-function-gettraitorremainingseconds",
      "text": "Parameter Type Description player PlayerView Player to check for traitor time. Returns number | null . Calculates the remaining seconds for traitor status or returns null if not applicable.",
      "title": "private function getTraitorRemainingSeconds()"
    },
    {
      "location": "client/#private-function-rendertraitorbadge",
      "text": "Parameter Type Description other PlayerView The player being rendered. Returns TemplateResult . Renders the traitor badge UI with remaining time if applicable.",
      "title": "private function renderTraitorBadge()"
    },
    {
      "location": "client/#private-function-renderrelationpillifnation",
      "text": "Parameter Type Description other PlayerView The target player. my PlayerView The local player. Returns TemplateResult . Renders relation pill only for nation-type players when conditions are met.",
      "title": "private function renderRelationPillIfNation()"
    },
    {
      "location": "client/#private-function-renderidentityrow",
      "text": "Parameter Type Description other PlayerView The displayed player. my PlayerView The local player. Returns TemplateResult . Renders the player identity row including flag, name, player type, and relation details.",
      "title": "private function renderIdentityRow()"
    },
    {
      "location": "client/#private-function-renderresources",
      "text": "Parameter Type Description other PlayerView Target player. Returns TemplateResult . Displays current gold and troop resources for the given player.",
      "title": "private function renderResources()"
    },
    {
      "location": "client/#private-function-renderstats",
      "text": "Parameter Type Description other PlayerView Target player. my PlayerView Local player. Returns TemplateResult . Displays betrayal count and trading status between players.",
      "title": "private function renderStats()"
    },
    {
      "location": "client/#private-function-renderalliances",
      "text": "Parameter Type Description other PlayerView The player whose alliances to list. Returns TemplateResult . Displays a scrollable list of the player\u2019s allies.",
      "title": "private function renderAlliances()"
    },
    {
      "location": "client/#private-function-renderallianceexpiry",
      "text": "Returns TemplateResult . Shows remaining alliance time with dynamic color styling. Returns an empty template if expiry data is missing.",
      "title": "private function renderAllianceExpiry()"
    },
    {
      "location": "client/#private-function-renderactions",
      "text": "Parameter Type Description my PlayerView Local player. other PlayerView Target player. Returns TemplateResult . Renders all available player action buttons depending on permissions and relation state.",
      "title": "private function renderActions()"
    },
    {
      "location": "client/#public-function-render_18",
      "text": "Returns TemplateResult . Renders the entire PlayerPanel UI including identity, stats, resources, and action buttons. If visibility or ownership conditions fail, returns an empty template and logs a warning when appropriate.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersradialmenuts",
      "text": "",
      "title": "./layers/RadialMenu.ts"
    },
    {
      "location": "client/#class-closeradialmenuevent",
      "text": "Event emitted to signal that a RadialMenu has been closed.",
      "title": "class CloseRadialMenuEvent"
    },
    {
      "location": "client/#constructor-closeradialmenuevent",
      "text": "Initializes a new instance of CloseRadialMenuEvent .",
      "title": "constructor CloseRadialMenuEvent()"
    },
    {
      "location": "client/#interface-tooltipitem",
      "text": "Defines a tooltip text entry. Properties: Name Type Description text string The text to display in the tooltip. className string CSS class applied to the tooltip element.",
      "title": "interface TooltipItem"
    },
    {
      "location": "client/#interface-radialmenuconfig",
      "text": "Configuration options for a RadialMenu instance. Properties: Name Type Description menuSize? number Optional. Base size of the menu in pixels. submenuScale? number Optional. Scale factor applied to nested submenus. centerButtonSize? number Optional. Radius of the central button. iconSize? number Optional. Default size of menu icons. centerIconSize? number Optional. Size of the icon on the center button. disabledColor? string Optional. Color applied to disabled menu items. menuTransitionDuration? number Optional. Duration of animations in milliseconds. mainMenuInnerRadius? number Optional. Inner radius of the main menu. centerButtonIcon? string Optional. URL or path to the center button icon. maxNestedLevels? number Optional. Maximum allowed submenu depth. innerRadiusIncrement? number Optional. Increase of inner radius per submenu level. tooltipStyle? string Optional. Custom CSS styles for tooltips.",
      "title": "interface RadialMenuConfig"
    },
    {
      "location": "client/#class-radialmenu-implements-layer",
      "text": "Manages interactive radial menus with multiple nested levels, central button actions, and tooltips. Properties: Name Type Description menuElement d3.Selection<HTMLDivElement, unknown, null, undefined> The container div holding the menu SVG. tooltipElement HTMLDivElement \\| null The DOM element used for displaying tooltips. isVisible boolean Indicates whether the menu is currently displayed. currentLevel number Current menu level (0 = main menu). menuStack MenuElement[][] Stack of previous menu levels for navigation. currentMenuItems MenuElement[] Currently active menu items. config Required<RadialMenuConfig> Effective configuration object with defaults applied. backIconSize number Computed size of the back button icon. centerButtonState \"default\" \\| \"back\" Current state of the center button. isTransitioning boolean True when a menu animation is in progress. lastHideTime number Timestamp of last menu hide event. reopenCooldownMs number Minimum interval before reopening the menu. anchorX number X-coordinate for menu center positioning. anchorY number Y-coordinate for menu center positioning. menuGroups Map<number, d3.Selection<SVGGElement, unknown, null, undefined>> Group elements for each menu level. menuPaths Map<string, d3.Selection<SVGPathElement, unknown, null, undefined>> Mapping of menu item IDs to their SVG paths. menuIcons Map<string, d3.Selection<SVGImageElement, unknown, null, undefined>> Mapping of menu item IDs to their icons/text elements. selectedItemId string \\| null ID of the currently selected menu item. submenuHoverTimeout number \\| null Timeout ID for submenu hover delay. backButtonHoverTimeout number \\| null Timeout ID for back button hover delay. navigationInProgress boolean True if a submenu navigation animation is active. originalCenterButtonIcon string Stored reference to the original center button icon. params MenuElementParams \\| null Current runtime parameters applied to menu actions.",
      "title": "class RadialMenu implements Layer"
    },
    {
      "location": "client/#constructor-radialmenu",
      "text": "Parameter Type Description eventBus EventBus Event bus used for emitting menu events. rootMenu MenuElement The top-level menu item structure. centerButtonElement CenterButtonElement The central button for menu actions. config? RadialMenuConfig Optional configuration overrides. Initializes a new RadialMenu instance and applies default configuration values.",
      "title": "constructor RadialMenu()"
    },
    {
      "location": "client/#public-function-init_16",
      "text": "Returns void . Initializes the menu by creating DOM elements and subscribing to close events.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-showradialmenu",
      "text": "Parameter Type Description x number X-coordinate of menu center. y number Y-coordinate of menu center. Returns void . Displays the menu at the specified position if reopening is allowed.",
      "title": "public function showRadialMenu()"
    },
    {
      "location": "client/#public-function-hideradialmenu",
      "text": "Returns void . Hides the menu, clears hover states, tooltips, and cached elements. Updates lastHideTime .",
      "title": "public function hideRadialMenu()"
    },
    {
      "location": "client/#public-function-disableallbuttons",
      "text": "Returns void . Disables all current menu items and resets the center button state.",
      "title": "public function disableAllButtons()"
    },
    {
      "location": "client/#public-function-updatecenterbuttonstate",
      "text": "Parameter Type Description state CenterButtonState New center button state ( \"default\" or \"back\" ). Returns void . Updates visual state and interactivity of the center button.",
      "title": "public function updateCenterButtonState()"
    },
    {
      "location": "client/#public-function-ismenuvisible",
      "text": "Returns boolean . Indicates whether the radial menu is currently visible.",
      "title": "public function isMenuVisible()"
    },
    {
      "location": "client/#public-function-getcurrentlevel",
      "text": "Returns number . Returns the current active menu level.",
      "title": "public function getCurrentLevel()"
    },
    {
      "location": "client/#public-function-setparams",
      "text": "Parameter Type Description params MenuElementParams Parameters to be used for menu actions and state. Returns void . Sets runtime parameters for menu behavior.",
      "title": "public function setParams()"
    },
    {
      "location": "client/#public-function-refreshmenu",
      "text": "Returns void . Redraws the current menu level if the menu is visible.",
      "title": "public function refreshMenu()"
    },
    {
      "location": "client/#public-function-refresh",
      "text": "Returns void . Refreshes all menu items, updating disabled states, icons, and cooldowns based on current parameters.",
      "title": "public function refresh()"
    },
    {
      "location": "client/#public-function-renderlayer_7",
      "text": "Parameter Type Description context CanvasRenderingContext2D Canvas rendering context (not used). Returns void . Implements Layer interface. Canvas rendering not required.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_9",
      "text": "Returns boolean . Always returns false . Implements Layer interface.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#layersradialmenuelementsts",
      "text": "",
      "title": "./layers/RadialMenuElements.ts"
    },
    {
      "location": "client/#interface-menuelementparams",
      "text": "Parameters passed to MenuElement handlers and submenus. Properties: Name Type Description myPlayer PlayerView The current player. selected PlayerView \\| null The selected player, if any. tile TileRef The tile reference associated with the menu action. playerActions PlayerActions Current player actions. game GameView Current game state. buildMenu BuildMenu Build menu instance. emojiTable EmojiTable Emoji table instance. playerActionHandler PlayerActionHandler Handles player actions. playerPanel PlayerPanel Player panel UI handler. chatIntegration ChatIntegration Handles chat menu generation. eventBus EventBus Event bus for emitting and listening to events. closeMenu () => void Callback to close the menu.",
      "title": "interface MenuElementParams"
    },
    {
      "location": "client/#interface-menuelement",
      "text": "Represents a single element in a radial or sub-menu. Properties: | Name | Type | Description | | --------------- | ---------------------------------------------- | --------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | | id | string | Unique identifier of the menu element. | | name | string | Display name or internal key. | | displayed? | boolean | ((params: MenuElementParams) => boolean) | Optional. Determines whether the element is displayed. Can be a boolean or a function returning a boolean. | | color? | string | Optional. Color of the element. | | icon? | string | Optional. Icon image path. | | text? | string | Optional. Text to display on the element. | | fontSize? | string | Optional. Font size for text . | | tooltipItems? | TooltipItem[] | Optional. Tooltip items for the element. | | tooltipKeys? | TooltipKey[] | Optional. Tooltip keys for localization. | | cooldown? | (params: MenuElementParams) => number | Optional. Returns cooldown value for the element. | | disabled | (params: MenuElementParams) => boolean | Determines if the element is disabled. | | action? | (params: MenuElementParams) => void | Optional. Action executed when the element is activated. | | subMenu? | (params: MenuElementParams) => MenuElement[] | Optional. Returns submenu elements if the element has children. |",
      "title": "interface MenuElement"
    },
    {
      "location": "client/#interface-tooltipkey",
      "text": "Represents a key used to generate tooltips. Properties: | Name | Type | Description | | ----------- | ---------------------- | ---------------------------------- | ------------------------------------------------------- | | key | string | Localization key for tooltip. | | className | string | CSS class for styling the tooltip. | | params? | Record<string, string | number> | Optional. Parameters for localized string substitution. |",
      "title": "interface TooltipKey"
    },
    {
      "location": "client/#interface-centerbuttonelement",
      "text": "Special element representing the center button of a radial menu. Properties: Name Type Description disabled (params: MenuElementParams) => boolean Determines if the center button is disabled. action (params: MenuElementParams) => void Action executed when the center button is pressed.",
      "title": "interface CenterButtonElement"
    },
    {
      "location": "client/#constant-colors",
      "text": "Color configuration for menu elements and tooltips. Properties: Name Type Description build string Build color #ebe250 . building string Building color #2c2c2c . boat string Boat color #3f6ab1 . ally string Ally action color #53ac75 . breakAlly string Break alliance color #c74848 . delete string Delete action color #ff0000 . info string Info color #64748B . target string Target action color #ff0000 . attack string Attack color #ff0000 . infoDetails string Detailed info color #7f8c8d . infoEmoji string Emoji info color #f1c40f . trade string Trade action color #008080 . embargo string Embargo action color #6600cc . tooltip object Nested tooltip colors. chat object Nested chat message colors.",
      "title": "constant COLORS"
    },
    {
      "location": "client/#enum-slot",
      "text": "Predefined radial menu slots. Name Value Info \"info\" Boat \"boat\" Build \"build\" Attack \"attack\" Ally \"ally\" Back \"back\" Delete \"delete\"",
      "title": "enum Slot"
    },
    {
      "location": "client/#public-function-getallenabledunits",
      "text": "Returns Set<UnitType> . Returns all enabled units depending on whether it is for the current player or other players, filtered by config.isUnitDisabled() .",
      "title": "public function getAllEnabledUnits()"
    },
    {
      "location": "client/#behavior",
      "text": "Adds specific structure and unit types depending on myPlayer . | Checks config for disabled units.",
      "title": "Behavior"
    },
    {
      "location": "client/#public-function-createmenuelements",
      "text": "Returns MenuElement[] . Generates menu elements for attack or build submenus. Parameters: Parameter Type Description params MenuElementParams Context parameters. filterType \"attack\" | \"build\" Type of menu to create. elementIdPrefix string Prefix used for element id s.",
      "title": "public function createMenuElements()"
    },
    {
      "location": "client/#behavior_1",
      "text": "Filters flattenedBuildTable based on unitTypes and filterType . Sets disabled , color , icon , and tooltipItems for each element. Assigns an action that builds or upgrades units and closes the menu. |",
      "title": "Behavior"
    },
    {
      "location": "client/#all-exported-menuelement-constants",
      "text": "Each follows the pattern: Properties: id , name , disabled , color , icon , optional text , tooltipItems , tooltipKeys . Optional methods: action , subMenu . Exported Elements: infoMenuElement \u2014 Info button. Disabled if no selected player or in spawn phase. attackMenuElement \u2014 Attack submenu. Disabled in spawn phase. Calls createMenuElements with filterType=\"attack\" . buildMenuElement \u2014 Build submenu. Disabled in spawn phase. Calls createMenuElements with filterType=\"build\" . boatMenuElement \u2014 Boat action. Disabled if transport ship unavailable. Action is async. deleteUnitElement \u2014 Delete unit. Disabled based on ownership, land status, cooldown, and selection radius. rootMenuElement \u2014 Root menu aggregating info, build/attack, ally, delete, and boat elements based on conditions.",
      "title": "All exported MenuElement constants"
    },
    {
      "location": "client/#example-deleteunitelement-action-behavior",
      "text": "Filters units within DELETE_SELECTION_RADIUS . Sorts by Manhattan distance. Calls playerActionHandler.handleDeleteUnit() for the closest unit. Calls closeMenu() .",
      "title": "Example: deleteUnitElement action behavior"
    },
    {
      "location": "client/#exported-centerbuttonelement-constant",
      "text": "Represents the center button in the radial menu. Properties: Name Type Description disabled (params: MenuElementParams) => boolean Returns true if the tile is water, in spawn phase with other player, or if canAttack is false. action (params: MenuElementParams) => void Executes handleSpawn if in spawn phase, otherwise handleAttack . Closes the menu afterwards.",
      "title": "exported CenterButtonElement constant"
    },
    {
      "location": "client/#layersrailroadlayerts",
      "text": "",
      "title": "./layers/RailroadLayer.ts"
    },
    {
      "location": "client/#class-railroadlayer",
      "text": "Handles rendering, color management, and updating of railroad tiles within the game view. Implements interface Layer . Properties: Name Type Description canvas HTMLCanvasElement Offscreen canvas used to draw the railroad layer. context CanvasRenderingContext2D 2D drawing context of the canvas . theme Theme Theme configuration used for colorizing elements. existingRailroads Map<TileRef, RailRef> Tracks active rail tiles and their metadata. nextRailIndexToCheck number Index for iterating tiles to update colors incrementally. railTileList TileRef[] List of tiles currently containing railroads. game GameView Reference to the current game view instance. transformHandler TransformHandler Manages scaling and transformations for rendering.",
      "title": "class RailroadLayer"
    },
    {
      "location": "client/#public-constructor-constructorgame-gameview-transformhandler-transformhandler",
      "text": "Parameter Type Description game GameView The active game view to render railroads for. transformHandler TransformHandler Handles scaling and transformation during rendering. Initializes the theme from the game configuration.",
      "title": "public constructor constructor(game: GameView, transformHandler: TransformHandler)"
    },
    {
      "location": "client/#public-function-shouldtransform_10",
      "text": "Returns boolean . Indicates that this layer should be affected by transformations (scaling, translation) during rendering.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_14",
      "text": "Returns void . Processes railroad updates received since the last tick, delegating each to private function handleRailroadRendering() .",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-updaterailcolors",
      "text": "Returns void . Incrementally updates rail colors based on ownership changes. Processes a maximum of railTileList.length / 60 tiles per call to prevent performance spikes. Updates ownership in existingRailroads and repaints affected tiles using function paintRail() .",
      "title": "public function updateRailColors()"
    },
    {
      "location": "client/#public-function-init_17",
      "text": "Returns void . Initializes the layer by calling function redraw() .",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-redraw_3",
      "text": "Returns void . Recreates the offscreen canvas and repaints all rail tiles in existingRailroads . Enables smooth scaling for better visual quality. Throws an error if 2D context is not supported.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-renderlayercontext-canvasrenderingcontext2d",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context to render the railroad layer onto. Returns void . Draws the offscreen canvas onto the given context , applying transparency proportional to the current transformHandler.scale . Ensures proper alpha blending for smooth zoom transitions.",
      "title": "public function renderLayer(context: CanvasRenderingContext2D)"
    },
    {
      "location": "client/#private-function-handlerailroadrenderingrailupdate-railroadupdate",
      "text": "Parameter Type Description railUpdate RailroadUpdate Update data containing the railroad tiles and their active status. Returns void . For each tile in railUpdate.railTiles , either paints or clears the railroad depending on railUpdate.isActive . See also: private function paintRailroad() , private function clearRailroad()",
      "title": "private function handleRailroadRendering(railUpdate: RailroadUpdate)"
    },
    {
      "location": "client/#private-function-paintrailroadrailroad-railtile",
      "text": "Parameter Type Description railRoad RailTile The railroad tile to paint. Returns void . Increments occurrence if the tile exists, otherwise adds it to existingRailroads and railTileList , then paints it using public function paintRail() .",
      "title": "private function paintRailroad(railRoad: RailTile)"
    },
    {
      "location": "client/#private-function-clearrailroadrailroad-railtile",
      "text": "Parameter Type Description railRoad RailTile The railroad tile to clear. Returns void . Decrements occurrence of the tile and removes it from existingRailroads and railTileList if it reaches zero. Clears the tile from context , with a larger rectangle for water tiles. Throws an error if the layer is uninitialized.",
      "title": "private function clearRailroad(railRoad: RailTile)"
    },
    {
      "location": "client/#public-function-paintrailrailroad-railtile",
      "text": "Parameter Type Description railRoad RailTile The railroad tile to render. Returns void . Paints the railroad tile on context . If the tile is over water, paints a bridge first using private function paintBridge() . Determines color based on owner; defaults to white if no owner. Uses private function paintRailRects() to render rail segments. Throws an error if context is uninitialized.",
      "title": "public function paintRail(railRoad: RailTile)"
    },
    {
      "location": "client/#private-function-paintrailrectscontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context to draw onto. x number X-coordinate of the tile. y number Y-coordinate of the tile. direction RailType Type/direction of the rail. Returns void . Paints each rectangle segment of a railroad tile as determined by getRailroadRects(direction) .",
      "title": "private function paintRailRects(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType)"
    },
    {
      "location": "client/#private-function-paintbridgecontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context to draw onto. x number X-coordinate of the tile. y number Y-coordinate of the tile. direction RailType Type/direction of the rail. Returns void . Paints bridge underlay rectangles for water tiles using getBridgeRects(direction) . Preserves previous context state via save() / restore() .",
      "title": "private function paintBridge(context: CanvasRenderingContext2D, x: number, y: number, direction: RailType)"
    },
    {
      "location": "client/#layersrailroadspritests",
      "text": "",
      "title": "./layers/RailroadSprites.ts"
    },
    {
      "location": "client/#function-getrailroadrectstype-railtype",
      "text": "Parameter Type Description type RailType The type/direction of railroad for which rectangle coordinates are requested. Returns number[][] . Returns an array of rectangles [x, y, w, h] for the given RailType . Throws an error if an unsupported RailType is provided.",
      "title": "function getRailroadRects(type: RailType)"
    },
    {
      "location": "client/#function-horizontalrailroadrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a horizontal railroad segment.",
      "title": "function horizontalRailroadRects()"
    },
    {
      "location": "client/#function-verticalrailroadrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a vertical railroad segment.",
      "title": "function verticalRailroadRects()"
    },
    {
      "location": "client/#function-toprightrailroadcornerrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a top-right railroad corner segment.",
      "title": "function topRightRailroadCornerRects()"
    },
    {
      "location": "client/#function-topleftrailroadcornerrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a top-left railroad corner segment.",
      "title": "function topLeftRailroadCornerRects()"
    },
    {
      "location": "client/#function-bottomrightrailroadcornerrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a bottom-right railroad corner segment.",
      "title": "function bottomRightRailroadCornerRects()"
    },
    {
      "location": "client/#function-bottomleftrailroadcornerrects",
      "text": "Returns number[][] . Provides rectangle coordinates for a bottom-left railroad corner segment.",
      "title": "function bottomLeftRailroadCornerRects()"
    },
    {
      "location": "client/#function-getbridgerectstype-railtype",
      "text": "Parameter Type Description type RailType The type/direction of railroad for which bridge rectangles are requested. Returns number[][] . Returns an array of rectangles [x, y, w, h] representing bridge underlays for the given RailType . Throws an error if an unsupported RailType is provided.",
      "title": "function getBridgeRects(type: RailType)"
    },
    {
      "location": "client/#function-horizontalbridge",
      "text": "Returns number[][] . Coordinates for horizontal bridge rectangles.",
      "title": "function horizontalBridge()"
    },
    {
      "location": "client/#function-verticalbridge",
      "text": "Returns number[][] . Coordinates for vertical bridge rectangles.",
      "title": "function verticalBridge()"
    },
    {
      "location": "client/#function-toprightbridgecornerrects",
      "text": "Returns number[][] . Coordinates for the top-right corner bridge segment.",
      "title": "function topRightBridgeCornerRects()"
    },
    {
      "location": "client/#function-bottomleftbridgecornerrects",
      "text": "Returns number[][] . Coordinates for the bottom-left corner bridge segment.",
      "title": "function bottomLeftBridgeCornerRects()"
    },
    {
      "location": "client/#function-topleftbridgecornerrects",
      "text": "Returns number[][] . Coordinates for the top-left corner bridge segment.",
      "title": "function topLeftBridgeCornerRects()"
    },
    {
      "location": "client/#function-bottomrightbridgecornerrects",
      "text": "Returns number[][] . Coordinates for the bottom-right corner bridge segment.",
      "title": "function bottomRightBridgeCornerRects()"
    },
    {
      "location": "client/#layerssamradiuslayerts",
      "text": "",
      "title": "./layers/SAMRadiusLayer.ts"
    },
    {
      "location": "client/#class-samradiuslayer",
      "text": "Renders and manages the defense radii of SAM launchers. Implements interface Layer . Properties: Name Type Description canvas HTMLCanvasElement Internal off-screen canvas for drawing SAM radii. context CanvasRenderingContext2D 2D drawing context for canvas . samLaunchers Map<number, number> Tracks active SAM launcher IDs mapped to their owner's smallID() . needsRedraw boolean Indicates whether the layer needs to be redrawn. hoveredShow boolean True if the stroke should show due to hover over SAM/Atom/Hydrogen option. ghostShow boolean True if the stroke should show due to an active ghost build. showStroke boolean Computed stroke visibility based on hover/ghost states. dashOffset number Current offset for dashed stroke animation. rotationSpeed number Speed of stroke dash animation in pixels per second. lastTickTime number Timestamp of the last tick() for animation calculations. game GameView Reference to the game view. eventBus EventBus Event bus for listening and emitting events. transformHandler TransformHandler Tracks canvas transformations to trigger redraws. uiState UIState Current UI state, including ghost structure.",
      "title": "class SAMRadiusLayer"
    },
    {
      "location": "client/#public-constructor-samradiuslayergame-eventbus-transformhandler-uistate",
      "text": "Parameter Type Description game GameView The game view to track SAM launchers. eventBus EventBus Event bus for subscribing to toggle events. transformHandler TransformHandler Handles canvas transformations. uiState UIState Tracks ghost structures for display. Returns SAMRadiusLayer . Initializes internal canvas and 2D context. Throws an error if 2D context is unsupported.",
      "title": "public constructor SAMRadiusLayer(game, eventBus, transformHandler, uiState)"
    },
    {
      "location": "client/#public-function-init_18",
      "text": "Returns void . Registers a listener on eventBus for class ToggleStructureEvent and performs an initial redraw() .",
      "title": "public function init()"
    },
    {
      "location": "client/#private-function-handletogglestructuree",
      "text": "Parameter Type Description e ToggleStructureEvent Event indicating which structures are being hovered or toggled. Returns void . Updates hoveredShow if SAMLauncher is included in the event and updates showStroke accordingly.",
      "title": "private function handleToggleStructure(e)"
    },
    {
      "location": "client/#private-function-updatestrokevisibility",
      "text": "Returns void . Computes showStroke from hoveredShow and ghostShow . Marks needsRedraw if visibility changes.",
      "title": "private function updateStrokeVisibility()"
    },
    {
      "location": "client/#public-function-shouldtransform_11",
      "text": "Returns boolean . Always returns true . Used by interface Layer to indicate that canvas transformations should be applied.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_15",
      "text": "Returns void . Updates tracked SAM launchers based on game.updatesSinceLastTick() . Handles ghost structure visibility, updates animation dash offset, and triggers redraw() if necessary.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-renderlayercontext",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context of the main canvas to render onto. Returns void . Draws the internal off-screen canvas onto the provided context.",
      "title": "public function renderLayer(context)"
    },
    {
      "location": "client/#public-function-redraw_4",
      "text": "Returns void . Clears the internal canvas, updates active SAM launchers, computes circle positions and radii, and draws the union of all SAM ranges using private function drawCirclesUnion .",
      "title": "public function redraw()"
    },
    {
      "location": "client/#private-function-drawcirclesunioncircles",
      "text": "Parameter Type Description circles Array<{ x: number; y: number; r: number; owner: number }> Array of circles representing SAM range positions, radii, and owners. Returns void . Fills the union of circles and strokes only the outer arcs to visually combine overlapping SAM ranges. Skips drawing if showStroke is false. Uses dashed animated strokes and separates boundaries by owner for clarity.",
      "title": "private function drawCirclesUnion(circles)"
    },
    {
      "location": "client/#layerssendresourcesmodalts",
      "text": "",
      "title": "./layers/SendResourcesModal.ts"
    },
    {
      "location": "client/#class-sendresourcemodal",
      "text": "Modal for sending resources (troops or gold) to another player. Properties: Name Type Description eventBus EventBus \\| null Event bus for emitting send intent events. open boolean Whether the modal is open. Defaults to false . mode 'troops' \\| 'gold' Type of resource to send. Defaults to 'troops' . total number \\| bigint Total amount of resource available to send. uiState UIState \\| null Optional UI state to seed initial percent selection. format (n: number) => string Function to format numbers. Defaults to renderTroops() . myPlayer PlayerView \\| null The sending player. target PlayerView \\| null The receiving player. gameView GameView \\| null Reference to the current game view. heading string \\| null Optional heading text for the modal. sendAmount number Internal state representing the amount to send. selectedPercent number \\| null Internal state of currently selected percentage for sending. Constants: Name Type Description PRESETS readonly number[] Preset percentages for sending (10, 25, 50, 75, 100).",
      "title": "class SendResourceModal"
    },
    {
      "location": "client/#public-function-createrenderroot_12",
      "text": "Returns this . Overrides shadow DOM root to allow Tailwind CSS styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#protected-function-connectedcallback",
      "text": "Returns void . Initializes selectedPercent and computes sendAmount based on uiState and total resource.",
      "title": "protected function connectedCallback()"
    },
    {
      "location": "client/#protected-function-updatedchanged",
      "text": "Parameter Type Description changed Map<string, unknown> Map of changed properties. Returns void . Updates sendAmount when relevant properties ( total , mode , target , gameView ) change. Handles auto-closing if sender or target is dead.",
      "title": "protected function updated(changed)"
    },
    {
      "location": "client/#private-function-closemodal",
      "text": "Returns void . Dispatches a close custom event to close the modal.",
      "title": "private function closeModal()"
    },
    {
      "location": "client/#private-function-confirm",
      "text": "Returns void . Validates sender and target are alive and eventBus is available. Emits class SendDonateTroopsIntentEvent or class SendDonateGoldIntentEvent depending on mode. Closes the modal on success.",
      "title": "private function confirm()"
    },
    {
      "location": "client/#private-function-handlekeydowne",
      "text": "Parameter Type Description e KeyboardEvent Keyboard event. Returns void . Handles Escape to close modal and Enter to confirm send.",
      "title": "private function handleKeydown(e)"
    },
    {
      "location": "client/#private-function-tonumx",
      "text": "Parameter Type Description x unknown Value to convert to number. Returns number . Converts bigint or other numeric-like values to number .",
      "title": "private function toNum(x)"
    },
    {
      "location": "client/#private-function-gettotalnumber",
      "text": "Returns number . Returns total available resource if sender is alive, otherwise 0.",
      "title": "private function getTotalNumber()"
    },
    {
      "location": "client/#private-function-sanitizepercentp",
      "text": "Parameter Type Description p number Percent value to sanitize. Returns number . Clamps percent between 0 and 100.",
      "title": "private function sanitizePercent(p)"
    },
    {
      "location": "client/#private-function-getcapacityleft",
      "text": "Returns number | null . Computes remaining capacity for troops. Returns null for gold or if target/gameView is missing.",
      "title": "private function getCapacityLeft()"
    },
    {
      "location": "client/#private-function-getpercentbasis",
      "text": "Returns number . Returns the total number available to send.",
      "title": "private function getPercentBasis()"
    },
    {
      "location": "client/#private-function-limitamountproposed",
      "text": "Parameter Type Description proposed number Proposed send amount. Returns number . Limits the proposed amount to total available and capacity constraints.",
      "title": "private function limitAmount(proposed)"
    },
    {
      "location": "client/#private-function-clampsendn",
      "text": "Parameter Type Description n number Amount to clamp. Returns number . Clamps send amount based on total and capacity.",
      "title": "private function clampSend(n)"
    },
    {
      "location": "client/#private-function-percentofbasisn",
      "text": "Parameter Type Description n number Amount to compute percent of basis. Returns number . Computes percentage of basis.",
      "title": "private function percentOfBasis(n)"
    },
    {
      "location": "client/#private-function-keepafterallowed",
      "text": "Parameter Type Description allowed number Amount allowed to send. Returns number . Computes the remaining resource after sending allowed .",
      "title": "private function keepAfter(allowed)"
    },
    {
      "location": "client/#private-function-getfillcolor",
      "text": "Returns string . Returns purple for troops, amber for gold.",
      "title": "private function getFillColor()"
    },
    {
      "location": "client/#private-function-getminkeepratio",
      "text": "Returns number . Minimum ratio to keep for troops (0.3) or gold (0).",
      "title": "private function getMinKeepRatio()"
    },
    {
      "location": "client/#private-function-istargetalive",
      "text": "Returns boolean . Checks if the target player is alive.",
      "title": "private function isTargetAlive()"
    },
    {
      "location": "client/#private-function-issenderalive",
      "text": "Returns boolean . Checks if the sending player is alive.",
      "title": "private function isSenderAlive()"
    },
    {
      "location": "client/#private-function-renderheader",
      "text": "Returns import('lit').TemplateResult . Renders modal header with optional heading and close button.",
      "title": "private function renderHeader()"
    },
    {
      "location": "client/#private-function-renderavailable",
      "text": "Returns import('lit').TemplateResult . Displays total available resource.",
      "title": "private function renderAvailable()"
    },
    {
      "location": "client/#private-function-renderpresetspercentnow",
      "text": "Parameter Type Description percentNow number Current percent selection. Returns import('lit').TemplateResult . Renders preset percentage buttons.",
      "title": "private function renderPresets(percentNow)"
    },
    {
      "location": "client/#private-function-rendersliderpercentnow",
      "text": "Parameter Type Description percentNow number Current percent selection. Returns import('lit').TemplateResult . Renders slider input for selecting send amount, including optional capacity marker.",
      "title": "private function renderSlider(percentNow)"
    },
    {
      "location": "client/#private-function-rendercapacitynoteallowed",
      "text": "Parameter Type Description allowed number Allowed send amount. Returns import('lit').TemplateResult . Displays note when send amount is capped by target capacity.",
      "title": "private function renderCapacityNote(allowed)"
    },
    {
      "location": "client/#private-function-rendersummaryallowed",
      "text": "Parameter Type Description allowed number Allowed send amount. Returns import('lit').TemplateResult . Displays summary of send and remaining resources.",
      "title": "private function renderSummary(allowed)"
    },
    {
      "location": "client/#private-function-renderactions_1",
      "text": "Returns import('lit').TemplateResult . Renders Cancel and Send buttons, disables if sending is not allowed.",
      "title": "private function renderActions()"
    },
    {
      "location": "client/#private-function-renderdeadnote",
      "text": "Returns import('lit').TemplateResult . Displays message when target player is dead.",
      "title": "private function renderDeadNote()"
    },
    {
      "location": "client/#private-function-rendersliderstyles",
      "text": "Returns import('lit').TemplateResult . Provides inline CSS styles for slider input.",
      "title": "private function renderSliderStyles()"
    },
    {
      "location": "client/#public-function-render_19",
      "text": "Returns import('lit').TemplateResult | undefined . Renders the entire modal if open is true, including header, available resource, presets, slider, capacity note, summary, actions, and slider styles.",
      "title": "public function render()"
    },
    {
      "location": "client/#layerssettingsmodalts",
      "text": "",
      "title": "./layers/SettingsModal.ts"
    },
    {
      "location": "client/#class-showsettingsmodalevent",
      "text": "Represents an event to toggle the visibility of the settings modal.",
      "title": "class ShowSettingsModalEvent"
    },
    {
      "location": "client/#public-constructor-showsettingsmodaleventisvisible-shouldpause-ispaused",
      "text": "Parameter Type Description isVisible? boolean Optional. Indicates whether the modal should be visible. Defaults to true . shouldPause? boolean Optional. Indicates if the game should pause when the modal opens. Defaults to false . isPaused? boolean Optional. Indicates if the game is already paused when the modal opens. Defaults to false .",
      "title": "public constructor ShowSettingsModalEvent(isVisible?, shouldPause?, isPaused?)"
    },
    {
      "location": "client/#class-settingsmodal",
      "text": "Displays and manages the settings modal. Implements interface Layer . Properties: Name Type Description eventBus EventBus Event bus for subscribing and emitting events. userSettings UserSettings Reference to the current user settings. isVisible boolean Internal state tracking whether the modal is visible. Defaults to false . alternateView boolean Tracks whether the alternate terrain view is enabled. Defaults to false . modalOverlay HTMLElement Reference to the modal overlay element. shouldPause boolean Indicates if the game should pause when the modal opens. Defaults to false . wasPausedWhenOpened boolean Tracks if the game was paused when the modal opened. Defaults to false .",
      "title": "class SettingsModal"
    },
    {
      "location": "client/#public-function-init_19",
      "text": "Returns void . Initializes volume settings via SoundManager and subscribes to class ShowSettingsModalEvent to open the modal and optionally pause the game.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-createrenderroot_13",
      "text": "Returns this . Overrides the default shadow DOM root to allow styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-connectedcallback",
      "text": "Returns void . Adds global event listeners for click and keydown events to detect outside clicks and escape key presses.",
      "title": "public function connectedCallback()"
    },
    {
      "location": "client/#public-function-disconnectedcallback_2",
      "text": "Returns void . Removes previously added global event listeners.",
      "title": "public function disconnectedCallback()"
    },
    {
      "location": "client/#private-function-handleoutsideclickevent",
      "text": "Parameter Type Description event MouseEvent Click event to detect if it occurred outside the modal. Returns void . Closes the modal if an outside click is detected.",
      "title": "private function handleOutsideClick(event)"
    },
    {
      "location": "client/#private-function-handlekeydownevent",
      "text": "Parameter Type Description event KeyboardEvent Keydown event to detect Escape key. Returns void . Closes the modal if Escape is pressed.",
      "title": "private function handleKeyDown(event)"
    },
    {
      "location": "client/#public-function-openmodal",
      "text": "Returns void . Sets isVisible to true, prevents body scrolling, and requests an update.",
      "title": "public function openModal()"
    },
    {
      "location": "client/#public-function-closemodal",
      "text": "Returns void . Sets isVisible to false, restores body scrolling, requests an update, and calls pauseGame(false) .",
      "title": "public function closeModal()"
    },
    {
      "location": "client/#private-function-pausegamepause",
      "text": "Parameter Type Description pause boolean Indicates whether to pause or unpause the game. Returns void . Pauses the game if shouldPause is true and the game was not already paused when opened.",
      "title": "private function pauseGame(pause)"
    },
    {
      "location": "client/#private-function-onterrainbuttonclick",
      "text": "Returns void . Toggles the alternate terrain view and emits class AlternateViewEvent .",
      "title": "private function onTerrainButtonClick()"
    },
    {
      "location": "client/#private-function-ontoggleemojisbuttonclick",
      "text": "Returns void . Toggles emoji display in userSettings .",
      "title": "private function onToggleEmojisButtonClick()"
    },
    {
      "location": "client/#private-function-ontogglestructurespritesbuttonclick",
      "text": "Returns void . Toggles structure sprite display in userSettings .",
      "title": "private function onToggleStructureSpritesButtonClick()"
    },
    {
      "location": "client/#private-function-ontogglespecialeffectsbuttonclick",
      "text": "Returns void . Toggles special effects display in userSettings .",
      "title": "private function onToggleSpecialEffectsButtonClick()"
    },
    {
      "location": "client/#private-function-ontoggledarkmodebuttonclick",
      "text": "Returns void . Toggles dark mode in userSettings and emits class RefreshGraphicsEvent .",
      "title": "private function onToggleDarkModeButtonClick()"
    },
    {
      "location": "client/#private-function-ontogglerandomnamemodebuttonclick",
      "text": "Returns void . Toggles anonymous/random name display in userSettings .",
      "title": "private function onToggleRandomNameModeButtonClick()"
    },
    {
      "location": "client/#private-function-ontoggleleftclickopensmenu",
      "text": "Returns void . Toggles left-click opens menu behavior in userSettings .",
      "title": "private function onToggleLeftClickOpensMenu()"
    },
    {
      "location": "client/#private-function-ontoggleperformanceoverlaybuttonclick",
      "text": "Returns void . Toggles performance overlay display in userSettings .",
      "title": "private function onTogglePerformanceOverlayButtonClick()"
    },
    {
      "location": "client/#private-function-onexitbuttonclick_1",
      "text": "Returns void . Redirects the page to the home URL ( / ).",
      "title": "private function onExitButtonClick()"
    },
    {
      "location": "client/#private-function-onvolumechangeevent",
      "text": "Parameter Type Description event Event Input event from background music volume slider. Returns void . Updates background music volume in userSettings and via SoundManager .",
      "title": "private function onVolumeChange(event)"
    },
    {
      "location": "client/#private-function-onsoundeffectsvolumechangeevent",
      "text": "Parameter Type Description event Event Input event from sound effects volume slider. Returns void . Updates sound effects volume in userSettings and via SoundManager .",
      "title": "private function onSoundEffectsVolumeChange(event)"
    },
    {
      "location": "client/#public-function-render_20",
      "text": "Returns import('lit').TemplateResult | null . Renders the modal when isVisible is true, including controls for volume, dark mode, terrain, emoji toggles, structure sprites, special effects, random names, left-click menu behavior, performance overlay, and exit button.",
      "title": "public function render()"
    },
    {
      "location": "client/#layersspawntimerts",
      "text": "",
      "title": "./layers/SpawnTimer.ts"
    },
    {
      "location": "client/#class-spawntimer",
      "text": "Displays a progress bar representing the spawn phase and team tile ratios. Implements interface Layer . Properties: Name Type Description game GameView Reference to the current game view. transformHandler TransformHandler Tracks canvas transformations, unused for this layer. ratios number[] Array of width ratios for each segment of the progress bar. colors string[] Array of colors corresponding to each ratio segment. isVisible boolean Determines whether the spawn timer is visible. Defaults to false .",
      "title": "class SpawnTimer"
    },
    {
      "location": "client/#public-function-createrenderroot_14",
      "text": "Returns this . Sets fixed position styling for the progress bar and disables pointer events.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_20",
      "text": "Returns void . Initializes isVisible to true.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_16",
      "text": "Returns void . Updates ratios and colors based on the game state: If the game is in the spawn phase, shows a single segment filling proportionally to elapsed turns. If the game mode is Team , calculates segment ratios based on team-owned tiles and applies team colors from the theme. Requests update via requestUpdate() .",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-shouldtransform_12",
      "text": "Returns boolean . Always returns false since the layer does not require canvas transformations.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-render_21",
      "text": "Returns import('lit').TemplateResult . Renders a horizontal bar composed of colored divs corresponding to ratios and colors . Returns empty content if the layer is invisible or there is no data to render.",
      "title": "public function render()"
    },
    {
      "location": "client/#private-function-sumiteratorvalues",
      "text": "Parameter Type Description values MapIterator<number> Iterator over numeric values to sum. Returns number . Computes the sum of all values in the provided iterator.",
      "title": "private function sumIterator(values)"
    },
    {
      "location": "client/#layersstructuredrawingutilsts",
      "text": "",
      "title": "./layers/StructureDrawingUtils.ts"
    },
    {
      "location": "client/#constants_2",
      "text": "STRUCTURE_SHAPES Partial<Record<UnitType, ShapeType>> Maps UnitType values to corresponding shape strings used for rendering. LEVEL_SCALE_FACTOR number \u2014 Factor used to scale level indicators. ICON_SCALE_FACTOR_ZOOMED_IN number \u2014 Scaling factor for icons when zoomed in. ICON_SCALE_FACTOR_ZOOMED_OUT number \u2014 Scaling factor for icons when zoomed out. DOTS_ZOOM_THRESHOLD number \u2014 Zoom threshold for rendering dots. ZOOM_THRESHOLD number \u2014 Zoom threshold for rendering icons or levels. ICON_SIZE { [shape in ShapeType]: number } \u2014 Default icon size per shape. OFFSET_ZOOM_Y number \u2014 Vertical offset applied when zooming.",
      "title": "Constants"
    },
    {
      "location": "client/#type-shapetype",
      "text": "Represents valid shape identifiers for structures. triangle | square | pentagon | octagon | circle | cross",
      "title": "Type ShapeType"
    },
    {
      "location": "client/#class-spritefactory",
      "text": "Responsible for generating PIXI sprites for structures, including icons, level indicators, ghost containers, and range graphics. Properties: Name Type Description theme Theme The theme used for coloring sprites. game GameView Reference to the game view for coordinate and configuration data. transformHandler TransformHandler Handles conversion between world and screen coordinates. renderSprites boolean Flag indicating whether full sprite rendering is enabled. textureCache Map<string, PIXI.Texture> Caches generated textures keyed by type and state. structuresInfos Map<UnitType, { iconPath: string; image: HTMLImageElement | null }> Stores image paths and loaded images for each structure type.",
      "title": "class SpriteFactory"
    },
    {
      "location": "client/#constructor-spritefactory",
      "text": "Parameter Type Description theme Theme Theme for coloring sprites. game GameView Game view reference. transformHandler TransformHandler Handles coordinate transformations. renderSprites boolean Whether to render sprites fully. Initializes structure icons by loading their images.",
      "title": "constructor SpriteFactory()"
    },
    {
      "location": "client/#private-function-loadicon",
      "text": "Parameter Type Description unitInfo { iconPath: string; image: HTMLImageElement | null } Structure icon information. unitType UnitType Type of structure. Returns void . Loads the icon image and sets it on unitInfo.image . Logs errors on load failure.",
      "title": "private function loadIcon()"
    },
    {
      "location": "client/#private-function-invalidatetexturecache",
      "text": "Parameter Type Description unitType UnitType Structure type whose cached textures should be invalidated. Returns void . Removes cached textures for the specified structure type.",
      "title": "private function invalidateTextureCache()"
    },
    {
      "location": "client/#public-function-createghostcontainer",
      "text": "Parameter Type Description player PlayerView Player owning the structure. ghostStage PIXI.Container Stage to which the ghost container is added. pos { x: number; y: number } Position to place the container. structureType UnitType Type of structure. Returns PIXI.Container . Creates a semi-transparent container representing a ghost structure at the specified position.",
      "title": "public function createGhostContainer()"
    },
    {
      "location": "client/#public-function-createunitcontainer",
      "text": "Parameter Type Description unit UnitView The unit to render. options { type?: \"icon\" | \"dot\" | \"level\"; stage: PIXI.Container } Rendering options; type is optional and defaults to icon rendering. Returns PIXI.Container . Creates a container for the unit with the appropriate sprite, level indicator, or dot representation. Adds container to the specified stage.",
      "title": "public function createUnitContainer()"
    },
    {
      "location": "client/#private-function-createtexture",
      "text": "Parameter Type Description type UnitType Structure type. owner PlayerView Player owning the structure. isConstruction boolean Whether the structure is under construction. isMarkedForDeletion boolean Whether the structure is marked for deletion. renderIcon boolean Whether to render the full icon. Returns PIXI.Texture . Generates or retrieves a cached texture for a structure. Uses createIcon() when shape is defined.",
      "title": "private function createTexture()"
    },
    {
      "location": "client/#private-function-createicon",
      "text": "Parameter Type Description owner PlayerView Player owning the structure. structureType UnitType Type of structure. isConstruction boolean Whether the structure is under construction. isMarkedForDeletion boolean Whether the structure is marked for deletion. shape string Shape to render. renderIcon boolean Whether to render the full icon. Returns PIXI.Texture . Draws the structure icon onto a canvas, including optional construction colors, borders, deletion marks, and the base image if present. Throws on unknown shapes.",
      "title": "private function createIcon()"
    },
    {
      "location": "client/#public-function-createrange",
      "text": "Parameter Type Description type UnitType Structure type whose range is drawn. stage PIXI.Container Stage to which the range container is added. pos { x: number; y: number } Position to place the range circle. Returns PIXI.Container | null . Returns null if type does not have a defined range. Creates a semi-transparent range indicator for structures with applicable ranges.",
      "title": "public function createRange()"
    },
    {
      "location": "client/#private-function-getimagecolored",
      "text": "Parameter Type Description image HTMLImageElement Base image to colorize. color string Color to apply. Returns HTMLCanvasElement . Applies the specified color to the given image using a temporary canvas and returns the result.",
      "title": "private function getImageColored()"
    },
    {
      "location": "client/#layersstructureiconslayerts",
      "text": "",
      "title": "./layers/StructureIconsLayer.ts"
    },
    {
      "location": "client/#class-structurerenderinfo",
      "text": "Holds rendering information for a single unit's structure icon, level, and dot representations. Properties: Name Type Description unit UnitView The unit this render info represents. owner PlayerID ID of the player owning the unit. iconContainer PIXI.Container Container for the unit's icon sprite. levelContainer PIXI.Container Container for the unit's level sprite. dotContainer PIXI.Container Container for the unit's dot representation. level number Current level of the unit. Defaults to 0. underConstruction boolean Whether the unit is under construction. Defaults to true . isOnScreen boolean Indicates if the unit is currently visible on screen. Defaults to false .",
      "title": "class StructureRenderInfo"
    },
    {
      "location": "client/#class-structureiconslayer",
      "text": "Manages rendering, updating, and interaction for structure icons, levels, and dots on the game map. Properties: Name Type Description ghostUnit { container: PIXI.Container; range: PIXI.Container \\| null; buildableUnit: BuildableUnit; } \\| null Currently active ghost structure being placed, or null if none. pixicanvas HTMLCanvasElement Canvas used for rendering PIXI stages. iconsStage PIXI.Container Stage containing icon sprites. ghostStage PIXI.Container Stage containing ghost sprites. levelsStage PIXI.Container Stage containing level sprites. dotsStage PIXI.Container Stage containing dot sprites. rootStage PIXI.Container Root container holding all stages. playerActions PlayerActions \\| null Actions available to the current player. theme Theme Current game theme. renderer PIXI.Renderer Renderer for drawing the PIXI canvas. renders StructureRenderInfo[] Active rendered structures. seenUnits Set<UnitView> Units that have been seen and rendered. mousePos { x: number; y: number } Current mouse position in pixels. renderSprites boolean Flag indicating if structure sprites should be rendered. factory SpriteFactory Factory for creating PIXI sprites. structures Map<UnitType, { visible: boolean }> Visibility settings per unit type. lastGhostQueryAt number Timestamp of last ghost update. potentialUpgrade StructureRenderInfo \\| undefined Stores the render info of a potential upgradeable unit.",
      "title": "class StructureIconsLayer"
    },
    {
      "location": "client/#public-constructor-structureiconslayer",
      "text": "Parameter Type Description game GameView Reference to the main game view. eventBus EventBus Event bus for handling game and input events. uiState UIState Current UI state for the game. transformHandler TransformHandler Handles coordinate transformations and scaling. Initializes internal structures, sprite factory, and theme.",
      "title": "public constructor StructureIconsLayer()"
    },
    {
      "location": "client/#public-function-setuprenderer",
      "text": "Returns Promise<void> . Initializes the PIXI renderer and sets up stages for icons, levels, dots, and ghosts. Loads bitmap fonts required for sprite rendering.",
      "title": "public function setupRenderer()"
    },
    {
      "location": "client/#public-function-shouldtransform_13",
      "text": "Returns boolean . Indicates whether this layer should be affected by map transformations. Always returns false .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-init_21",
      "text": "Returns Promise<void> . Sets up event listeners for mouse and toggle events, window resize, initializes the renderer, and triggers an initial redraw.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-resizecanvas_1",
      "text": "Returns void . Updates canvas dimensions and resizes the PIXI renderer to match the current window size.",
      "title": "public function resizeCanvas()"
    },
    {
      "location": "client/#public-function-tick_17",
      "text": "Returns void . Updates rendered structures based on the latest game unit updates and user settings.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-redraw_5",
      "text": "Returns void . Resizes the canvas and prepares for rendering the next frame.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-renderlayer_8",
      "text": "Parameter Type Description mainContext CanvasRenderingContext2D The 2D rendering context of the main canvas. Returns void . Renders all visible structures, levels, and dots. Updates ghost structures and positions based on transformations and zoom level.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-renderghost",
      "text": "Returns void . Updates and renders the ghost structure at the current mouse position. Handles build and upgrade availability, visual filters, and scaling. Applies a 50ms throttling for performance.",
      "title": "public function renderGhost()"
    },
    {
      "location": "client/#private-function-createstructure",
      "text": "Parameter Type Description e MouseUpEvent Mouse event used to determine structure placement. Returns void . Finalizes placement or upgrade of a ghost structure and emits the corresponding build or upgrade event. Removes the ghost structure after action.",
      "title": "private function createStructure()"
    },
    {
      "location": "client/#private-function-moveghost",
      "text": "Parameter Type Description e MouseMoveEvent Mouse event with updated coordinates. Returns void . Updates the position of the ghost structure based on mouse movement.",
      "title": "private function moveGhost()"
    },
    {
      "location": "client/#private-function-createghoststructure",
      "text": "Parameter Type Description type UnitType \\| null Type of unit to create a ghost for, or null . Returns void . Creates a ghost structure container, range overlay, and placeholder BuildableUnit for visual placement feedback.",
      "title": "private function createGhostStructure()"
    },
    {
      "location": "client/#private-function-clearghoststructure",
      "text": "Returns void . Destroys the current ghost structure and clears any potential upgrade highlighting.",
      "title": "private function clearGhostStructure()"
    },
    {
      "location": "client/#private-function-removeghoststructure",
      "text": "Returns void . Calls clearGhostStructure() and resets the uiState.ghostStructure to null .",
      "title": "private function removeGhostStructure()"
    },
    {
      "location": "client/#private-function-togglestructures",
      "text": "Parameter Type Description toggleStructureType UnitType[] \\| null Array of structure types to show; null shows all structures. Returns void . Updates visibility of structure types and triggers modifications for all rendered units.",
      "title": "private function toggleStructures()"
    },
    {
      "location": "client/#private-function-findrenderbyunit",
      "text": "Parameter Type Description unitView UnitView Unit to find the corresponding render info for. Returns StructureRenderInfo | undefined . Searches the active renders array for the render info corresponding to the given unit.",
      "title": "private function findRenderByUnit()"
    },
    {
      "location": "client/#private-function-handleactiveunit",
      "text": "Parameter Type Description unitView UnitView Unit being processed. Returns void . Updates or creates rendering for active units, checking for construction, deletion, ownership, and level changes.",
      "title": "private function handleActiveUnit()"
    },
    {
      "location": "client/#private-function-handleinactiveunit",
      "text": "Parameter Type Description unitView UnitView Unit being processed. Returns void . Deletes structure rendering for units no longer active.",
      "title": "private function handleInactiveUnit()"
    },
    {
      "location": "client/#private-function-modifyvisibility",
      "text": "Parameter Type Description render StructureRenderInfo Render info of the structure to update visibility for. Returns void . Adjusts alpha and outline filters based on the visibility of the structure type.",
      "title": "private function modifyVisibility()"
    },
    {
      "location": "client/#private-function-checkfordeletionstate",
      "text": "Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked for deletion. Returns void . Recreates the icon and dot sprites if the unit is marked for deletion.",
      "title": "private function checkForDeletionState()"
    },
    {
      "location": "client/#private-function-checkforconstructionstate",
      "text": "Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates sprite containers if a unit has finished construction.",
      "title": "private function checkForConstructionState()"
    },
    {
      "location": "client/#private-function-checkforownershipchange",
      "text": "Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates sprite containers if the unit ownership has changed.",
      "title": "private function checkForOwnershipChange()"
    },
    {
      "location": "client/#private-function-checkforlevelchange",
      "text": "Parameters Type Description render StructureRenderInfo Render info of the structure. unit UnitView Unit being checked. Returns void . Updates level sprite container if the unit's level has changed.",
      "title": "private function checkForLevelChange()"
    },
    {
      "location": "client/#private-function-computenewlocation",
      "text": "Parameter Type Description render StructureRenderInfo Render info of the structure. Returns void . Calculates on-screen position for icon, level, and dot containers based on world coordinates, scaling, and zoom thresholds.",
      "title": "private function computeNewLocation()"
    },
    {
      "location": "client/#private-function-addnewstructure",
      "text": "Parameter Type Description unitView UnitView Unit to add rendering for. Returns void . Creates new render info for a unit, adds it to active renders, computes its location, and applies visibility rules.",
      "title": "private function addNewStructure()"
    },
    {
      "location": "client/#private-function-createlevelsprite",
      "text": "Parameter Type Description unit UnitView Unit to create a level sprite for. Returns PIXI.Container . Uses SpriteFactory to create the level representation for a unit.",
      "title": "private function createLevelSprite()"
    },
    {
      "location": "client/#private-function-createdotsprite",
      "text": "Parameter Type Description unit UnitView Unit to create a dot sprite for. Returns PIXI.Container . Uses SpriteFactory to create the dot representation for a unit.",
      "title": "private function createDotSprite()"
    },
    {
      "location": "client/#private-function-createiconsprite",
      "text": "Parameter Type Description unit UnitView Unit to create an icon sprite for. Returns PIXI.Container . Uses SpriteFactory to create the icon representation for a unit.",
      "title": "private function createIconSprite()"
    },
    {
      "location": "client/#private-function-deletestructure",
      "text": "Parameter Type Description render StructureRenderInfo Render info of the structure to delete. Returns void . Destroys all sprite containers and removes the structure from the active renders and seen units.",
      "title": "private function deleteStructure()"
    },
    {
      "location": "client/#layersstructurelayersts",
      "text": "",
      "title": "./layers/StructureLayers.ts"
    },
    {
      "location": "client/#class-structurelayer",
      "text": "Renders unit structures, borders, and territories on a dedicated canvas layer. Handles icon loading, scaling, and updates based on game events. Properties: Name Type Description canvas HTMLCanvasElement Main canvas used for rendering the structure layer. context CanvasRenderingContext2D Rendering context for the main canvas. unitIcons Map<string, HTMLImageElement> Maps unit types to loaded icon images. theme Theme Current theme configuration. tempCanvas HTMLCanvasElement Temporary canvas for high-quality icon rendering. tempContext CanvasRenderingContext2D Rendering context for tempCanvas . unitConfigs Partial<Record<UnitType, UnitRenderConfig>> Configuration for supported unit types, including icon paths, border radii, and territory radii.",
      "title": "class StructureLayer"
    },
    {
      "location": "client/#public-constructor-structurelayer",
      "text": "Parameter Type Description game GameView Game view providing units, updates, and configuration. eventBus EventBus Event bus for game events. transformHandler TransformHandler Handler for coordinate transformations. Initializes the structure layer, loads unit icons, and sets up temporary rendering resources.",
      "title": "public constructor StructureLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_14",
      "text": "Returns boolean . Indicates that this layer requires coordinate transformations for rendering.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_18",
      "text": "Returns void . Processes game updates since the last tick, updating unit rendering as necessary.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-init_22",
      "text": "Returns void . Initializes and redraws the structure layer.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-redraw_6",
      "text": "Returns void . Creates a new canvas, sets scaling options, decodes loaded unit icons, and renders all units.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-renderlayer_9",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context to draw this layer onto. Returns void . Draws the structure layer onto the provided context if the zoom level and user settings allow it.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#private-function-loadicon_1",
      "text": "Parameter Type Description unitType string The type of unit to load the icon for. config UnitRenderConfig Configuration containing icon path and radii. Returns void . Loads a unit icon image and stores it in unitIcons . Logs success or failure.",
      "title": "private function loadIcon()"
    },
    {
      "location": "client/#private-function-loadicondata",
      "text": "Returns void . Loads all configured unit icons using loadIcon() .",
      "title": "private function loadIconData()"
    },
    {
      "location": "client/#private-function-isunittypesupported",
      "text": "Parameter Type Description unitType UnitType Unit type to check support for. Returns boolean . Returns true if the unit type exists in unitConfigs .",
      "title": "private function isUnitTypeSupported()"
    },
    {
      "location": "client/#private-function-handleunitrendering",
      "text": "Parameter Type Description unit UnitView Unit instance to render. Returns void . Handles clearing, border drawing, and icon rendering for a single unit. Skips unsupported types or inactive units. See also: private function drawBorder() , private function renderIcon()",
      "title": "private function handleUnitRendering()"
    },
    {
      "location": "client/#private-function-drawborder",
      "text": "Parameter Type Description unit UnitView Unit to draw borders for. borderColor Colord Color to use for the border. config UnitRenderConfig Rendering configuration for the unit. Returns void . Draws the unit's border and territory cells on the canvas using the provided colors.",
      "title": "private function drawBorder()"
    },
    {
      "location": "client/#private-function-rendericon",
      "text": "Parameter Type Description image HTMLImageElement Icon image to render. startX number X-coordinate for the icon placement. startY number Y-coordinate for the icon placement. width number Width to render the icon. height number Height to render the icon. unit UnitView Unit associated with the icon. Returns void . Draws the icon onto the main canvas using the temporary high-resolution canvas. Handles scaling and alpha channel.",
      "title": "private function renderIcon()"
    },
    {
      "location": "client/#public-function-paintcell",
      "text": "Parameter Type Description cell Cell Cell to paint. color Colord Color to paint the cell. alpha number Alpha value (0\u2013255) for the cell. Returns void . Clears the cell and fills it with the specified color and transparency.",
      "title": "public function paintCell()"
    },
    {
      "location": "client/#public-function-clearcell",
      "text": "Parameter Type Description cell Cell Cell to clear. Returns void . Clears the cell area on the main canvas.",
      "title": "public function clearCell()"
    },
    {
      "location": "client/#layersteamstatsts",
      "text": "",
      "title": "./layers/TeamStats.ts"
    },
    {
      "location": "client/#class-teamstats",
      "text": "Displays team statistics in a grid view, including scores, resources, and unit counts. Updates periodically based on game ticks and supports toggling between different unit views. Properties: Name Type Description game GameView The game view providing players, teams, and game state. eventBus EventBus Event bus for subscribing to game events. visible boolean Indicates if the team stats layer is visible. Defaults to false . teams TeamEntry[] Array of aggregated team statistics. _shownOnInit boolean Internal flag to track initial display state. showUnits boolean Determines whether to show unit breakdowns ( true ) or score/gold/troops ( false ).",
      "title": "class TeamStats"
    },
    {
      "location": "client/#public-constructor",
      "text": "Uses default LitElement constructor. No custom parameters.",
      "title": "public constructor"
    },
    {
      "location": "client/#public-function-createrenderroot_15",
      "text": "Returns this . Uses the light DOM to allow Tailwind styling.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_23",
      "text": "Returns void . Placeholder for interface compliance; no initialization required.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_19",
      "text": "Returns void . Updates team statistics based on game mode and ticks. Only updates when in Team game mode and visible. Refreshes every 10 ticks or once on initial display. See also: private function updateTeamStats()",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-updateteamstats",
      "text": "Returns void . Aggregates statistics for all teams, including total score, gold, troops, cities, launchers, SAMs, and warships. Updates teams property and triggers re-render.",
      "title": "private function updateTeamStats()"
    },
    {
      "location": "client/#public-function-renderlayer_10",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context to render the layer on. Returns void . Empty implementation for interface compliance.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_15",
      "text": "Returns boolean . Indicates that this layer does not require coordinate transformations.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-render_22",
      "text": "Returns TemplateResult . Renders the team stats as an HTML grid. Supports toggling between resource view and unit view via a button. Uses translation utilities for headers and Tailwind CSS for styling.",
      "title": "public function render()"
    },
    {
      "location": "client/#interface-teamentry",
      "text": "Aggregates team statistics for display. Properties: Name Type Description teamName string Name of the team. totalScoreStr string Formatted score percentage string. totalGold string Formatted total gold for the team. totalTroops string Formatted total troop count. totalSAMs string Formatted total SAM launchers. totalLaunchers string Formatted total missile silos. totalWarShips string Formatted total warships. totalCities string Formatted total cities. totalScoreSort number Numeric score used for sorting teams. players PlayerView[] Array of players belonging to the team.",
      "title": "interface TeamEntry"
    },
    {
      "location": "client/#private-function-formatpercentage_1",
      "text": "Parameter Type Description value number Score fraction (0\u20131) to format as a percentage. Returns string . Converts a numeric fraction to a percentage string with precision, returning \"0%\" if NaN and \"100%\" for exact full score.",
      "title": "private function formatPercentage()"
    },
    {
      "location": "client/#layersterrainlayerts",
      "text": "",
      "title": "./layers/TerrainLayer.ts"
    },
    {
      "location": "client/#class-terrainlayer",
      "text": "Implements the Layer interface to manage the terrain rendering layer for a game view. Handles canvas creation, image data initialization, and layer rendering. Properties: Name Type Description canvas HTMLCanvasElement Canvas element where terrain is drawn. context CanvasRenderingContext2D 2D rendering context for the canvas. imageData ImageData Pixel data for terrain rendering. theme Theme Current theme applied to terrain colors. game GameView Reference to the game view instance. transformHandler TransformHandler Handles layer transformations and scaling.",
      "title": "class TerrainLayer"
    },
    {
      "location": "client/#public-constructor-constructorgame-gameview-transformhandler-transformhandler_1",
      "text": "Parameter Type Description game GameView The game view instance. transformHandler TransformHandler Handles layer transformations and scaling. Initializes the TerrainLayer with references to the game and transformation handler.",
      "title": "public constructor constructor(game: GameView, transformHandler: TransformHandler)"
    },
    {
      "location": "client/#public-function-shouldtransform_16",
      "text": "Returns boolean . Determines whether this layer should apply transformations. Always returns true .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_20",
      "text": "Returns void . Updates the layer state. If the game's theme has changed from the last rendered theme , redraws the terrain layer.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-init_24",
      "text": "Returns void . Initializes the terrain layer by drawing the canvas for the first time. Logs a message upon redraw.",
      "title": "public function init()"
    },
    {
      "location": "client/#protected-function-redraw",
      "text": "Returns void . Creates a new canvas sized to the game view, obtains the 2D rendering context, initializes image data, and renders it onto the canvas. Throws an error if 2D context is unsupported.",
      "title": "protected function redraw()"
    },
    {
      "location": "client/#protected-function-initimagedata",
      "text": "Returns void . Initializes pixel data for the terrain layer based on the current theme. Iterates over each tile in the game view and sets RGBA values according to the theme's terrain color.",
      "title": "protected function initImageData()"
    },
    {
      "location": "client/#public-function-renderlayercontext-canvasrenderingcontext2d_1",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context where the terrain layer is drawn. Returns void . Draws the terrain canvas onto the given rendering context. Enables low-quality image smoothing if the scale is below 1; otherwise, disables smoothing.",
      "title": "public function renderLayer(context: CanvasRenderingContext2D)"
    },
    {
      "location": "client/#layersterritorylayerts",
      "text": "",
      "title": "./layers/TerritoryLayer.ts"
    },
    {
      "location": "client/#class-territorylayer",
      "text": "Implements the Layer interface to manage territory visualization and highlights in the game view. Handles drawing, alternative views, spawn highlights, player borders, and queued tile rendering. Properties: Name Type Description userSettings UserSettings User settings influencing rendering behavior. canvas HTMLCanvasElement Main canvas for territory rendering. context CanvasRenderingContext2D 2D rendering context for the main canvas. imageData ImageData Pixel data for territory layer. alternativeImageData ImageData Pixel data for alternative view mode. borderAnimTime number Timer for breathing border animation. cachedTerritoryPatternsEnabled boolean \\| undefined Flag indicating if territory pattern caching is enabled. tileToRenderQueue PriorityQueue<{ tile: TileRef; lastUpdate: number }> Queue of tiles pending render updates. random PseudoRandom Random number generator instance for rendering order. theme Theme Current theme applied to territory colors. highlightCanvas HTMLCanvasElement Canvas for spawn and focus highlights. highlightContext CanvasRenderingContext2D 2D rendering context for highlights. highlightedTerritory PlayerView \\| null Currently highlighted territory, if any. alternativeView boolean Indicates if alternative view mode is active. lastDragTime number Timestamp of last drag event. nodrawDragDuration number Duration to skip rendering during drag (ms). lastMousePosition { x: number; y: number } \\| null Last mouse position for territory highlighting. refreshRate number Minimum refresh interval (ms) for rendering. lastRefresh number Timestamp of last render. lastFocusedPlayer PlayerView \\| null Last player that had focus. game GameView Reference to the game view instance. eventBus EventBus Event bus for input and updates. transformHandler TransformHandler Handles layer transformations and scaling.",
      "title": "class TerritoryLayer"
    },
    {
      "location": "client/#public-constructor-constructorgame-gameview-eventbus-eventbus-transformhandler-transformhandler-usersettings-usersettings",
      "text": "Parameter Type Description game GameView Game view instance. eventBus EventBus Event bus for input events. transformHandler TransformHandler Layer transformation handler. userSettings UserSettings User settings for rendering preferences. Initializes the territory layer with the game, event bus, transform handler, and user settings. Sets initial theme and cache flags.",
      "title": "public constructor constructor(game: GameView, eventBus: EventBus, transformHandler: TransformHandler, userSettings: UserSettings)"
    },
    {
      "location": "client/#public-function-shouldtransform_17",
      "text": "Returns boolean . Determines whether this layer should apply transformations. Always returns true .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-async-function-paintplayerborderplayer-playerview",
      "text": "Parameter Type Description player PlayerView Player whose border is to be painted. Returns Promise<void> . Immediately paints all tiles along the player's border.",
      "title": "public async function paintPlayerBorder(player: PlayerView)"
    },
    {
      "location": "client/#public-function-tick_21",
      "text": "Returns void . Updates territory highlights and enqueues tiles for rendering. Handles spawn phase highlights, unit updates, alliance changes, embargoes, and focused player borders.",
      "title": "public function tick()"
    },
    {
      "location": "client/#private-function-spawnhighlight",
      "text": "Returns void . Updates spawn highlights for human players. Uses team colors or default highlight color and paints tiles within a defined radius from player centers.",
      "title": "private function spawnHighlight()"
    },
    {
      "location": "client/#private-function-drawfocusedplayerhighlight",
      "text": "Returns void . Draws a breathing highlight ring around the currently focused player using drawBreathingRing() .",
      "title": "private function drawFocusedPlayerHighlight()"
    },
    {
      "location": "client/#public-function-init_25",
      "text": "Returns void . Registers input event listeners for mouse-over, alternate view, and drag events. Initializes the layer by calling redraw() .",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-onmouseoverevent-mouseoverevent",
      "text": "Parameter Type Description event MouseOverEvent Mouse-over event containing cursor position. Returns void . Updates last mouse position and refreshes the highlighted territory.",
      "title": "public function onMouseOver(event: MouseOverEvent)"
    },
    {
      "location": "client/#private-function-updatehighlightedterritory",
      "text": "Returns void . Determines the territory under the cursor in alternative view mode. Redraws borders if the highlighted territory changes.",
      "title": "private function updateHighlightedTerritory()"
    },
    {
      "location": "client/#private-function-getterritoryatcellcell-x-number-y-number",
      "text": "Parameter Type Description cell { x: number; y: number } Cell coordinates to check. Returns PlayerView | null . Returns null if cell is invalid or unowned.",
      "title": "private function getTerritoryAtCell(cell: { x: number; y: number })"
    },
    {
      "location": "client/#public-function-redraw_7",
      "text": "Returns void . Recreates main and highlight canvases, initializes image data, and paints all tiles according to ownership and alternative view settings.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#public-function-redrawborderplayers-playerview",
      "text": "Parameter Type Description players PlayerView[] Players whose borders are to be redrawn. Returns Promise<void[]> . Redraws the border tiles for the given players.",
      "title": "public function redrawBorder(...players: PlayerView[])"
    },
    {
      "location": "client/#public-function-initimagedata",
      "text": "Returns void . Clears all image data by setting alpha channels to 0.",
      "title": "public function initImageData()"
    },
    {
      "location": "client/#public-function-renderlayercontext-canvasrenderingcontext2d_2",
      "text": "Parameter Type Description context CanvasRenderingContext2D Rendering context for the layer. Returns void . Renders the territory and highlight canvases. Throttles updates according to refreshRate and drag state.",
      "title": "public function renderLayer(context: CanvasRenderingContext2D)"
    },
    {
      "location": "client/#protected-function-renderterritory",
      "text": "Returns void . Processes a batch of tiles from the render queue and paints them, including neighbor tiles for smooth border updates.",
      "title": "protected function renderTerritory()"
    },
    {
      "location": "client/#public-function-paintterritorytile-tileref-isborder-boolean-false",
      "text": "Parameter Type Description tile TileRef Tile to paint. isBorder boolean Optional; whether the tile is a border tile. Defaults to false . Returns void . Paints a tile according to ownership, border status, alternative view, and highlight rules.",
      "title": "public function paintTerritory(tile: TileRef, isBorder: boolean = false)"
    },
    {
      "location": "client/#public-function-alternateviewcolorother-playerview",
      "text": "Parameter Type Description other PlayerView Player whose color is to be determined. Returns Colord . Computes color for a tile in alternative view mode based on ownership, ally/enemy status, or neutrality.",
      "title": "public function alternateViewColor(other: PlayerView)"
    },
    {
      "location": "client/#public-function-paintalternateviewtiletile-tileref-other-playerview",
      "text": "Parameter Type Description tile TileRef Tile to paint. other PlayerView Player whose color to use. Returns void . Paints a tile in alternative view mode.",
      "title": "public function paintAlternateViewTile(tile: TileRef, other: PlayerView)"
    },
    {
      "location": "client/#public-function-painttileimagedata-imagedata-tile-tileref-color-colord-alpha-number",
      "text": "Parameter Type Description imageData ImageData ImageData buffer to modify. tile TileRef Tile index to paint. color Colord Color to apply. alpha number Alpha transparency value. Returns void . Updates pixel data for a tile with the given color and alpha.",
      "title": "public function paintTile(imageData: ImageData, tile: TileRef, color: Colord, alpha: number)"
    },
    {
      "location": "client/#public-function-cleartiletile-tileref",
      "text": "Parameter Type Description tile TileRef Tile index to clear. Returns void . Sets alpha to 0 in both imageData and alternativeImageData .",
      "title": "public function clearTile(tile: TileRef)"
    },
    {
      "location": "client/#public-function-clearalternativetiletile-tileref",
      "text": "Parameter Type Description tile TileRef Tile index to clear in alternative view. Returns void . Sets alpha to 0 in alternativeImageData only.",
      "title": "public function clearAlternativeTile(tile: TileRef)"
    },
    {
      "location": "client/#public-function-enqueuetiletile-tileref",
      "text": "Parameter Type Description tile TileRef Tile to enqueue for rendering. Returns void . Adds a tile to the render queue with a small random offset to stagger updates.",
      "title": "public function enqueueTile(tile: TileRef)"
    },
    {
      "location": "client/#public-async-function-enqueueplayerborderplayer-playerview",
      "text": "Parameter Type Description player PlayerView Player whose border tiles to enqueue. Returns Promise<void> . Enqueues all border tiles of a player for rendering.",
      "title": "public async function enqueuePlayerBorder(player: PlayerView)"
    },
    {
      "location": "client/#public-function-painthighlighttiletile-tileref-color-colord-alpha-number",
      "text": "Parameter Type Description tile TileRef Tile to highlight. color Colord Highlight color. alpha number Alpha transparency value. Returns void . Paints a highlight tile on the highlight canvas.",
      "title": "public function paintHighlightTile(tile: TileRef, color: Colord, alpha: number)"
    },
    {
      "location": "client/#public-function-clearhighlighttiletile-tileref",
      "text": "Parameter Type Description tile TileRef Tile to clear from highlight canvas. Returns void . Clears a highlight tile.",
      "title": "public function clearHighlightTile(tile: TileRef)"
    },
    {
      "location": "client/#private-function-drawbreathingringcx-number-cy-number-minrad-number-maxrad-number-radius-number-transparentcolor-colord-breathingcolor-colord",
      "text": "Parameter Type Description cx number Center x-coordinate. cy number Center y-coordinate. minRad number Minimum radius of the ring. maxRad number Maximum radius of the ring. radius number Current radius for breathing animation. transparentColor Colord Base color for transparent ring portion. breathingColor Colord Color used for breathing ring portion. Returns void . Draws a radial breathing highlight ring for spawn or focus effects.",
      "title": "private function drawBreathingRing(cx: number, cy: number, minRad: number, maxRad: number, radius: number, transparentColor: Colord, breathingColor: Colord)"
    },
    {
      "location": "client/#layersuilayerts",
      "text": "",
      "title": "./layers/UILayer.ts"
    },
    {
      "location": "client/#class-uilayer",
      "text": "Layer responsible for drawing UI elements that overlay the game, including selection boxes, health bars, and loading bars. Properties: Name Type Description canvas HTMLCanvasElement The internal canvas used to draw UI elements. context CanvasRenderingContext2D \\| null Canvas rendering context for drawing operations. theme Theme \\| null Current theme used for UI colorization. userSettings UserSettings Stores user preferences for UI display. selectionAnimTime number Tracks animation time for selection box pulsation. allProgressBars Map<number, { unit: UnitView; progressBar: ProgressBar }> Tracks progress bars for units currently in progress. allHealthBars Map<number, ProgressBar> Tracks health bars for active units. selectedUnit UnitView \\| null Currently selected unit. lastSelectionBoxCenter { x: number; y: number; size: number } \\| null Stores previous selection box position for clearing. SELECTION_BOX_SIZE number Size of selection boxes (constant). game GameView Reference to the main game view. eventBus EventBus Event bus for subscribing to game events. transformHandler TransformHandler Handles coordinate transformations for drawing.",
      "title": "class UILayer"
    },
    {
      "location": "client/#public-function-shouldtransform_18",
      "text": "Returns boolean . Determines whether this layer should apply coordinate transformations. Always returns true .",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_22",
      "text": "Returns void . Updates animation states and UI elements: Increments selectionAnimTime . Redraws selection box for selected warships. Processes unit updates since the last tick. Updates progress bars.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-init_26",
      "text": "Returns void . Initializes the UI layer: Subscribes to unit selection events. Calls redraw() to initialize the canvas.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-renderlayer_11",
      "text": "Parameter Type Description context CanvasRenderingContext2D Context to render the layer onto. Returns void . Draws the internal canvas onto the provided context, centered on the game view.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-redraw_8",
      "text": "Returns void . Creates a new internal canvas and obtains its rendering context. Sets canvas size to match game dimensions.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#private-function-onunitevent",
      "text": "Parameter Type Description unit UnitView The unit whose UI state has changed. Returns void . Updates UI elements based on unit type and state: Creates loading bars for constructions or partially ready units. Draws health bars for warships. Skips inactive or undefined units.",
      "title": "private function onUnitEvent()"
    },
    {
      "location": "client/#private-function-clearicon",
      "text": "Parameter Type Description icon HTMLImageElement Icon to clear. startX number X-coordinate of icon position. startY number Y-coordinate of icon position. Returns void . Clears the area occupied by the icon on the internal canvas.",
      "title": "private function clearIcon()"
    },
    {
      "location": "client/#private-function-drawicon",
      "text": "Parameter Type Description icon HTMLImageElement Icon image to draw. unit UnitView Unit owning the icon. startX number X-coordinate for drawing. startY number Y-coordinate for drawing. Returns void . Draws a filled rectangle using the unit's border color, then overlays the icon image.",
      "title": "private function drawIcon()"
    },
    {
      "location": "client/#private-function-onunitselection",
      "text": "Parameter Type Description event UnitSelectionEvent Event containing unit selection state. Returns void . Handles selection events: Sets or clears selectedUnit . Draws or clears the selection box as appropriate.",
      "title": "private function onUnitSelection()"
    },
    {
      "location": "client/#private-function-clearselectionbox",
      "text": "Parameter Type Description x number Center X-coordinate of the selection box. y number Center Y-coordinate of the selection box. size number Half-size of the selection box. Returns void . Clears the selection box border by clearing cells around the specified coordinates.",
      "title": "private function clearSelectionBox()"
    },
    {
      "location": "client/#public-function-drawselectionbox",
      "text": "Parameter Type Description unit UnitView Unit around which the selection box is drawn. Returns void . Draws a pulsating selection box for active units: Calculates opacity based on selectionAnimTime . Uses owner color brightened by 20%. Clears previous box if the unit has moved. See also: private function clearSelectionBox()",
      "title": "public function drawSelectionBox()"
    },
    {
      "location": "client/#public-function-drawhealthbar",
      "text": "Parameter Type Description unit UnitView Warship unit to draw health bar for. Returns void . Draws a health bar for active warships: Clears existing bar if health is full or unit is inactive. Creates new ProgressBar if unit has partial health.",
      "title": "public function drawHealthBar()"
    },
    {
      "location": "client/#private-function-updateprogressbars",
      "text": "Returns void . Updates all active progress bars: Increments progress. Clears bars that have reached completion.",
      "title": "private function updateProgressBars()"
    },
    {
      "location": "client/#private-function-getprogress",
      "text": "Parameter Type Description unit UnitView Unit to calculate progress for. Returns number . Computes progress for constructions, missile silos, and deletable units: Returns 1 for inactive or undefined units. Calculates construction completion or deletion progress.",
      "title": "private function getProgress()"
    },
    {
      "location": "client/#private-function-deletionprogress",
      "text": "Parameter Type Description game GameView Current game view. unit UnitView Unit marked for deletion. Returns number . Calculates progress based on remaining ticks until deletion. Returns 1 if unit is not marked for deletion.",
      "title": "private function deletionProgress()"
    },
    {
      "location": "client/#public-function-createloadingbar",
      "text": "Parameter Type Description unit UnitView Unit to create a loading bar for. Returns void . Creates a new ProgressBar for units in progress if one does not already exist. See also: private function updateProgressBars()",
      "title": "public function createLoadingBar()"
    },
    {
      "location": "client/#public-function-paintcell_1",
      "text": "Parameter Type Description x number X-coordinate of the cell. y number Y-coordinate of the cell. color Colord Color to paint. alpha number Alpha transparency (0-255). Returns void . Paints a single pixel on the canvas with the specified color and alpha.",
      "title": "public function paintCell()"
    },
    {
      "location": "client/#public-function-clearcell_1",
      "text": "Parameter Type Description x number X-coordinate of the cell. y number Y-coordinate of the cell. Returns void . Clears a single pixel on the internal canvas.",
      "title": "public function clearCell()"
    },
    {
      "location": "client/#layersunitdisplayts",
      "text": "",
      "title": "./layers/UnitDisplay.ts"
    },
    {
      "location": "client/#class-unitdisplay",
      "text": "Displays unit counts and build options in the UI. Provides interactive unit selection and hotkey overlays. Properties: Name Type Description game GameView Reference to the current game view. eventBus EventBus Event bus for subscribing and emitting events. uiState UIState Tracks current UI state, including ghost structures. playerActions PlayerActions \\| null Tracks available buildable units for the player. keybinds Record<string, { value: string; key: string }> Stores keybinds loaded from local storage. _cities number Count of City units. _warships number Count of Warship units. _factories number Count of Factory units. _missileSilo number Count of Missile Silo units. _port number Count of Port units. _defensePost number Count of Defense Post units. _samLauncher number Count of SAM Launcher units. allDisabled boolean Indicates if all units are disabled in configuration. _hoveredUnit UnitType \\| null Currently hovered unit type for tooltip display.",
      "title": "class UnitDisplay"
    },
    {
      "location": "client/#public-function-createrenderroot_16",
      "text": "Returns this . Overrides LitElement's createRenderRoot to render directly in the light DOM.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-init_27",
      "text": "Returns void . Initializes the unit display: Loads saved keybinds from local storage. Checks which units are disabled and sets allDisabled flag. Triggers an update of the component.",
      "title": "public function init()"
    },
    {
      "location": "client/#private-function-cost",
      "text": "Parameter Type Description item UnitType The unit type to query. Returns Gold . Returns the cost of the given unit type based on playerActions . Returns 0n if the unit is not buildable.",
      "title": "private function cost()"
    },
    {
      "location": "client/#private-function-canbuild",
      "text": "Parameter Type Description item UnitType Unit type to check for build eligibility. Returns boolean . Determines if the player can build the specified unit: Considers unit disable status, available gold, and prerequisite structures.",
      "title": "private function canBuild()"
    },
    {
      "location": "client/#public-function-tick_23",
      "text": "Returns void . Updates unit counts from the player's current units and refreshes playerActions . Triggers component re-render.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-render_23",
      "text": "Returns TemplateResult | null . Renders the unit display UI: Returns null if the game or player is not available, in spawn phase, or if all units are disabled. Builds two UI sections: regular units and military units (warships and nuclear devices). Each unit is rendered via renderUnitItem() .",
      "title": "public function render()"
    },
    {
      "location": "client/#private-function-renderunititem",
      "text": "Parameter Type Description icon string URL or import of the unit icon image. number number \\| null Count of units, null if not applicable. unitType UnitType Unit type being rendered. structureKey string Key used for translations and identifiers. hotkey string Assigned hotkey for building this unit. Returns TemplateResult . Renders a single unit UI element: Hides element if unit is disabled. Displays tooltip on hover with name, description, and cost. Shows hotkey in the top-left corner. Handles click to select/deselect ghost structure in uiState . Emits ToggleStructureEvent to show or hide related structures when hovered. See also: function cost() , function canBuild()",
      "title": "private function renderUnitItem()"
    },
    {
      "location": "client/#layersunitlayerts",
      "text": "",
      "title": "./layers/UnitLayer.ts"
    },
    {
      "location": "client/#class-unitlayer",
      "text": "Manages rendering of all units and their movement trails. Handles unit selection, movement intents, and alternate view overlays. Properties: Name Type Description canvas HTMLCanvasElement Main canvas for unit sprites. context CanvasRenderingContext2D 2D rendering context of canvas . transportShipTrailCanvas HTMLCanvasElement Canvas for rendering transport ship trails. unitTrailContext CanvasRenderingContext2D 2D context for unit trails. unitToTrail Map<UnitView, TileRef[]> Tracks the tile trail for each moving unit. theme Theme Current theme for color configuration. alternateView boolean Indicates if alternate coloring view is active. oldShellTile Map<UnitView, TileRef> Tracks previous positions for shell units. transformHandler TransformHandler Converts between screen and world coordinates. selectedUnit UnitView \\| null Currently selected unit. WARSHIP_SELECTION_RADIUS number Radius for selecting warships near a click, in game cells.",
      "title": "class UnitLayer"
    },
    {
      "location": "client/#public-function-shouldtransform_19",
      "text": "Returns boolean . Indicates that this layer should be transformed based on game world coordinates.",
      "title": "public function shouldTransform()"
    },
    {
      "location": "client/#public-function-tick_24",
      "text": "Returns void . Updates unit sprites based on changes since the last tick.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-init_28",
      "text": "Returns void . Initializes event listeners and loads all sprites. Subscribes to: AlternateViewEvent MouseUpEvent UnitSelectionEvent",
      "title": "public function init()"
    },
    {
      "location": "client/#private-function-findwarshipsnearcell",
      "text": "Parameter Type Description cell { x: number; y: number } World coordinates to check for nearby warships. Returns UnitView[] . Finds player-owned warships near the given cell within WARSHIP_SELECTION_RADIUS , sorted by proximity.",
      "title": "private function findWarshipsNearCell()"
    },
    {
      "location": "client/#private-function-onmouseup",
      "text": "Parameter Type Description event MouseUpEvent Mouse release event containing screen coordinates. Returns void . Handles warship selection and movement intents on mouse release.",
      "title": "private function onMouseUp()"
    },
    {
      "location": "client/#private-function-onunitselectionchange",
      "text": "Parameter Type Description event UnitSelectionEvent Event indicating unit selection/deselection. Returns void . Updates selectedUnit based on selection events.",
      "title": "private function onUnitSelectionChange()"
    },
    {
      "location": "client/#private-function-handleunitdeactivation",
      "text": "Parameter Type Description unit UnitView Unit to check for deactivation. Returns void . Deselects a unit if it has been deactivated.",
      "title": "private function handleUnitDeactivation()"
    },
    {
      "location": "client/#public-function-renderlayer_12",
      "text": "Parameter Type Description context CanvasRenderingContext2D Target rendering context. Returns void . Draws the unit and trail canvases onto the provided context.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-onalternativeviewevent",
      "text": "Parameter Type Description event AlternateViewEvent Event toggling alternate view mode. Returns void . Sets alternateView and redraws the layer.",
      "title": "public function onAlternativeViewEvent()"
    },
    {
      "location": "client/#public-function-redraw_9",
      "text": "Returns void . Creates canvases and contexts for units and trails. Clears and repaints all units and trails.",
      "title": "public function redraw()"
    },
    {
      "location": "client/#private-function-updateunitssprites",
      "text": "Parameter Type Description unitIds number[] List of unit IDs to update. Returns void . Clears and redraws the sprites of the specified units.",
      "title": "private function updateUnitsSprites()"
    },
    {
      "location": "client/#private-function-clearunitscells",
      "text": "Parameter Type Description unitViews UnitView[] Units to clear from the canvas. Returns void . Clears the previous sprite positions of active units.",
      "title": "private function clearUnitsCells()"
    },
    {
      "location": "client/#private-function-drawunitscells",
      "text": "Parameter Type Description unitViews UnitView[] Units to draw. Returns void . Draws each unit using onUnitEvent() .",
      "title": "private function drawUnitsCells()"
    },
    {
      "location": "client/#private-function-relationship",
      "text": "Parameter Type Description unit UnitView Unit whose relationship to the player is determined. Returns Relationship . Determines if the unit belongs to self, ally, or enemy.",
      "title": "private function relationship()"
    },
    {
      "location": "client/#public-function-onunitevent_1",
      "text": "Parameter Type Description unit UnitView Unit to process. Returns void . Dispatches unit handling to specialized methods based on unit type. Deselects deactivated units.",
      "title": "public function onUnitEvent()"
    },
    {
      "location": "client/#private-function-handlewarshipevent",
      "text": "Parameter Type Description unit UnitView Warship unit to draw. Returns void . Draws warship sprite with optional red target indicator.",
      "title": "private function handleWarShipEvent()"
    },
    {
      "location": "client/#private-function-handleshellevent",
      "text": "Parameter Type Description unit UnitView Shell unit to process. Returns void . Clears previous positions and paints current and last positions of shell units.",
      "title": "private function handleShellEvent()"
    },
    {
      "location": "client/#private-function-handlemissileevent",
      "text": "Parameter Type Description unit UnitView Missile unit to process. Returns void . Draws interception missiles.",
      "title": "private function handleMissileEvent()"
    },
    {
      "location": "client/#private-function-drawtrail",
      "text": "Parameter Type Description trail number[] Tile indices for the trail. color Colord Color of the trail. rel Relationship Unit relationship determining coloring. Returns void . Paints a trail of tiles for moving units.",
      "title": "private function drawTrail()"
    },
    {
      "location": "client/#private-function-cleartrail",
      "text": "Parameter Type Description unit UnitView Unit whose trail is cleared. Returns void . Removes the unit's trail from the canvas and repaints overlapping trails.",
      "title": "private function clearTrail()"
    },
    {
      "location": "client/#private-function-handlenuke",
      "text": "Parameter Type Description unit UnitView Nuclear unit to process. Returns void . Draws the trail and sprite of nukes. Clears trail if inactive. Supports line interpolation for fast-moving units.",
      "title": "private function handleNuke()"
    },
    {
      "location": "client/#private-function-handlemirvwarhead",
      "text": "Parameter Type Description unit UnitView MIRV warhead to process. Returns void . Paints MIRV warhead position and clears last tile.",
      "title": "private function handleMIRVWarhead()"
    },
    {
      "location": "client/#private-function-handletradeshipevent",
      "text": "Parameter Type Description unit UnitView Trade ship unit to draw. Returns void . Draws trade ship sprite.",
      "title": "private function handleTradeShipEvent()"
    },
    {
      "location": "client/#private-function-handletrainevent",
      "text": "Parameter Type Description unit UnitView Train unit to draw. Returns void . Draws train sprite.",
      "title": "private function handleTrainEvent()"
    },
    {
      "location": "client/#private-function-handleboatevent",
      "text": "Parameter Type Description unit UnitView Transport ship unit to draw. Returns void . Draws boat sprite with trail and clears trail if inactive.",
      "title": "private function handleBoatEvent()"
    },
    {
      "location": "client/#public-function-paintcell_2",
      "text": "Parameter Type Description x number X coordinate in canvas pixels. y number Y coordinate in canvas pixels. relationship Relationship Relationship of unit to player. color Colord Base color. alpha number Alpha transparency (0\u2013255). context CanvasRenderingContext2D Optional context; defaults to main context . Returns void . Paints a single canvas pixel according to relationship or color and alpha.",
      "title": "public function paintCell()"
    },
    {
      "location": "client/#public-function-clearcell_2",
      "text": "Parameter Type Description x number X coordinate in canvas pixels. y number Y coordinate in canvas pixels. context CanvasRenderingContext2D Optional context; defaults to main context . Returns void . Clears a single pixel in the given canvas context.",
      "title": "public function clearCell()"
    },
    {
      "location": "client/#public-function-drawsprite",
      "text": "Parameter Type Description unit UnitView Unit to draw. customTerritoryColor? Colord Optional custom color for the unit. Returns void . Draws the unit's sprite on the canvas, applying alternate view coloring or opacity adjustments if the unit is not targetable. See also: function paintCell() , function clearCell()",
      "title": "public function drawSprite()"
    },
    {
      "location": "client/#layerswinmodalts",
      "text": "",
      "title": "./layers/WinModal.ts"
    },
    {
      "location": "client/#class-winmodal",
      "text": "Manages the display and interaction of the win modal, including showing victory messages, pattern support buttons, and handling user actions. Implements: interface Layer Properties: Name Type Description game GameView The current game view instance. eventBus EventBus Event bus used to emit game events. hasShownDeathModal boolean Tracks whether the death modal has already been displayed. isVisible boolean Indicates if the modal is currently visible. Managed as a reactive @state() . showButtons boolean Determines whether the action buttons are displayed. Managed as a reactive @state() . isWin boolean Indicates if the current outcome is a win. Managed as a private reactive @state() . patternContent TemplateResult \\| null Stores dynamically loaded pattern button content. Managed as a private reactive @state() . _title string Stores the modal title for display. rand number Random number used to determine modal content fallback.",
      "title": "class WinModal"
    },
    {
      "location": "client/#public-constructor-constructor_12",
      "text": "Initializes a WinModal instance. Overrides shadow DOM creation to use the light DOM.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-createrenderroot_17",
      "text": "Returns this . Overrides default LitElement behavior to prevent creation of a shadow DOM.",
      "title": "public function createRenderRoot()"
    },
    {
      "location": "client/#public-function-render_24",
      "text": "Returns TemplateResult . Renders the modal container, title, content (pattern buttons or Steam wishlist), and action buttons. Applies animation classes when visible.",
      "title": "public function render()"
    },
    {
      "location": "client/#public-function-innerhtml",
      "text": "Returns TemplateResult . Determines which inner content to render: either pattern buttons via function renderPatternButton() or a Steam wishlist link via function steamWishlist() .",
      "title": "public function innerHtml()"
    },
    {
      "location": "client/#public-function-renderpatternbutton",
      "text": "Returns TemplateResult . Renders the container for the support pattern button, including title, description, and dynamically loaded patternContent .",
      "title": "public function renderPatternButton()"
    },
    {
      "location": "client/#public-async-function-loadpatterncontent",
      "text": "Returns Promise<void> . Loads and filters purchasable patterns for the current user. Dynamically creates pattern-button elements and sets patternContent . Falls back to empty content if no purchasable patterns exist.",
      "title": "public async function loadPatternContent()"
    },
    {
      "location": "client/#public-function-steamwishlist",
      "text": "Returns TemplateResult . Renders a Steam wishlist link as fallback content if inside an iframe or based on random chance.",
      "title": "public function steamWishlist()"
    },
    {
      "location": "client/#public-async-function-show",
      "text": "Returns Promise<void> . Displays the modal by loading pattern content, setting visibility, and revealing buttons after a delay.",
      "title": "public async function show()"
    },
    {
      "location": "client/#public-function-hide_3",
      "text": "Returns void . Hides the modal and action buttons.",
      "title": "public function hide()"
    },
    {
      "location": "client/#private-function-_handleexit",
      "text": "Returns void . Hides the modal and redirects the user to the home page.",
      "title": "private function _handleExit()"
    },
    {
      "location": "client/#public-function-init_29",
      "text": "Returns void . Implements interface Layer . Placeholder initialization function.",
      "title": "public function init()"
    },
    {
      "location": "client/#public-function-tick_25",
      "text": "Returns void . Checks game state updates and displays the modal when appropriate, such as on death or victory. Emits class SendWinnerEvent via eventBus when a winner is detected. Updates _title and isWin accordingly.",
      "title": "public function tick()"
    },
    {
      "location": "client/#public-function-renderlayer_13",
      "text": "Returns void . Implements interface Layer . Placeholder for rendering to canvas.",
      "title": "public function renderLayer()"
    },
    {
      "location": "client/#public-function-shouldtransform_20",
      "text": "Returns boolean . Indicates whether the layer requires canvas transformation. Always returns false .",
      "title": "public function shouldTransform()"
    },
    { "location": "client/#style", "text": "", "title": "Style" },
    { "location": "client/#data", "text": "", "title": "Data" },
    { "location": "client/#sound", "text": "", "title": "Sound" },
    {
      "location": "client/#soundmanagerts",
      "text": "",
      "title": "SoundManager.ts"
    },
    {
      "location": "client/#class-soundmanager",
      "text": "Manages background music and sound effects using Howler.js. Handles track sequencing, volume, and playback. Properties: Name Type Description backgroundMusic Howl[] Array of background music tracks. currentTrack number Index of the currently playing background track. soundEffects Map<SoundEffect, Howl> Loaded sound effects mapped by SoundEffect . soundEffectsVolume number Volume level for sound effects (defaults to 1 ). backgroundMusicVolume number Volume level for background music (defaults to 0 ).",
      "title": "class SoundManager"
    },
    {
      "location": "client/#public-constructor-constructor_13",
      "text": "No parameters. Initializes background music tracks and loads default sound effects. Throws an error if Howl fails to initialize.",
      "title": "public constructor constructor()"
    },
    {
      "location": "client/#public-function-playbackgroundmusic",
      "text": "No parameters. Plays the current background music track if not already playing. Returns void .",
      "title": "public function playBackgroundMusic()"
    },
    {
      "location": "client/#public-function-stopbackgroundmusic",
      "text": "No parameters. Stops the currently playing background music track. Returns void .",
      "title": "public function stopBackgroundMusic()"
    },
    {
      "location": "client/#public-function-setbackgroundmusicvolume",
      "text": "Parameter Type Description volume number Volume level between 0 and 1 . Sets the volume of all background music tracks. Returns void .",
      "title": "public function setBackgroundMusicVolume()"
    },
    {
      "location": "client/#private-function-playnext",
      "text": "No parameters. Advances to the next background track and plays it. Returns void .",
      "title": "private function playNext()"
    },
    {
      "location": "client/#public-function-loadsoundeffect",
      "text": "Parameter Type Description name SoundEffect Name of the sound effect. src string Source file path for the sound effect. Loads a sound effect if not already loaded. Returns void .",
      "title": "public function loadSoundEffect()"
    },
    {
      "location": "client/#public-function-playsoundeffect",
      "text": "Parameter Type Description name SoundEffect Name of the sound effect to play. Plays a loaded sound effect. Returns void .",
      "title": "public function playSoundEffect()"
    },
    {
      "location": "client/#public-function-setsoundeffectsvolume",
      "text": "Parameter Type Description volume number Volume level between 0 and 1 . Sets the volume for all loaded sound effects. Returns void .",
      "title": "public function setSoundEffectsVolume()"
    },
    {
      "location": "client/#public-function-stopsoundeffect",
      "text": "Parameter Type Description name SoundEffect Name of the sound effect to stop. Stops a playing sound effect. Returns void .",
      "title": "public function stopSoundEffect()"
    },
    {
      "location": "client/#public-function-unloadsoundeffect",
      "text": "Parameter Type Description name SoundEffect Name of the sound effect to unload. Unloads a sound effect and removes it from the internal map. Returns void .",
      "title": "public function unloadSoundEffect()"
    },
    {
      "location": "client/#enum-soundeffect",
      "text": "Defines available sound effect identifiers. Properties: Name Type Description KaChing string Identifier for the \"ka-ching\" sound effect.",
      "title": "enum SoundEffect"
    },
    { "location": "client/#utilities", "text": "", "title": "Utilities" },
    {
      "location": "client/#replayspeedmultiplierts",
      "text": "",
      "title": "ReplaySpeedMultiplier.ts"
    },
    {
      "location": "client/#enum-replayspeedmultiplier",
      "text": "Enum containing speed multiplier names ( string ) and their values ( number ).",
      "title": "enum ReplaySpeedMultiplier"
    },
    {
      "location": "client/#const-defaultreplayspeedmultiplier",
      "text": "The default replay speed multiplier.",
      "title": "const defaultReplaySpeedMultiplier"
    },
    {
      "location": "client/#renderunittypeoptionsts",
      "text": "",
      "title": "RenderUnitTypeOptions.ts"
    },
    {
      "location": "client/#interface-unittyperendercontext",
      "text": "Property Type Description disabledUnits UnitType[] Array of disabled units. toggleUnit (unit: UnitType, checked: boolean) => void Function to toggle a unit's visibility.",
      "title": "interface UnitTypeRenderContext"
    },
    {
      "location": "client/#const-unitoptions",
      "text": "Array of objects containing unit types ( UnitType ) and their translation keys ( string ).",
      "title": "const unitOptions"
    },
    {
      "location": "client/#function-renderunittypeoptions",
      "text": "Parameter Type Description context UnitTypeRenderContext The rendering context for unit types. Returns TemplateResult[] \u2014 an array of lit-html template strings, each containing the HTML for a unit type and a checkbox.",
      "title": "function renderUnitTypeOptions()"
    },
    { "location": "contribute/", "text": "", "title": "Contributing" },
    { "location": "core/", "text": "", "title": "Core reference" },
    {
      "location": "develop/",
      "text": "Development reference If you would like to contribute, first, check out the contribution page , and then check out the Getting Started guide to learn how to set up a local copy of the repository. Introduction This project started as a fork of WarFront (not to be confused with FrontWars), by evanpelle. It is written in TypeScript, which is like JavaScript, but with static typing. As of writing, the project is deployed as a website at openfront.io, with a planned release on Steam. Project Structure /docs - The documentation you're reading right now! /resources - Static assets (images, maps, etc.) /proprietary - Non free static assets (music) /map-generator - A tool used to create maps for the game /tests - Jest tests for regression prevention /src - The source code ./core - Shared game logic ./game - Files managing in-memory game state, map loading, and utilities for game management ./configuration - Different presets to be used by other parts of the code ./execution - Logic controllers for different parts of the game ./worker - Isolation of long-running or async tasks to a worker context ./pathfinding - Different algorithms for navigation ./validations - Utilities for sanitizing user content (like usernames) ./utilities - Generic core helper functions ./client - Frontend game client ./graphics - 2D rendering ./components - Custom HTML components ./styles - CSS used by the client ./data - json data accessed by the client (like countries) ./sound - Sound management ./utilities - Generic client helper functions ./server - Backend game server Technologies used Lit for creating usable html objects (usually TemplateResult ) from strings.",
      "title": "Development reference"
    },
    {
      "location": "develop/#development-reference",
      "text": "If you would like to contribute, first, check out the contribution page , and then check out the Getting Started guide to learn how to set up a local copy of the repository.",
      "title": "Development reference"
    },
    {
      "location": "develop/#introduction",
      "text": "This project started as a fork of WarFront (not to be confused with FrontWars), by evanpelle. It is written in TypeScript, which is like JavaScript, but with static typing. As of writing, the project is deployed as a website at openfront.io, with a planned release on Steam.",
      "title": "Introduction"
    },
    {
      "location": "develop/#project-structure",
      "text": "/docs - The documentation you're reading right now! /resources - Static assets (images, maps, etc.) /proprietary - Non free static assets (music) /map-generator - A tool used to create maps for the game /tests - Jest tests for regression prevention /src - The source code ./core - Shared game logic ./game - Files managing in-memory game state, map loading, and utilities for game management ./configuration - Different presets to be used by other parts of the code ./execution - Logic controllers for different parts of the game ./worker - Isolation of long-running or async tasks to a worker context ./pathfinding - Different algorithms for navigation ./validations - Utilities for sanitizing user content (like usernames) ./utilities - Generic core helper functions ./client - Frontend game client ./graphics - 2D rendering ./components - Custom HTML components ./styles - CSS used by the client ./data - json data accessed by the client (like countries) ./sound - Sound management ./utilities - Generic client helper functions ./server - Backend game server",
      "title": "Project Structure"
    },
    {
      "location": "develop/#technologies-used",
      "text": "Lit for creating usable html objects (usually TemplateResult ) from strings.",
      "title": "Technologies used"
    },
    {
      "location": "getting_started/",
      "text": "Getting Started Prerequisites git npm (v10.9.2 or higher) A modern browser with developer tools github account discord account Before you start, make sure you have all of these tools installed and ready to be used Test by running in your terminal (or command prompt) git --help npm --help You should see some help output. If you do, move on. If you don't try restarting your terminal, restarting your device, or reinstalling the tools. Discussing with the community If you would like to make a change, especially a larger one (like a new feature, a large rewrite, or similar), you will need to discuss with the contributors and the maintainers on IF the change should be implemented, and potentially HOW it should be implemented. You may make a change without this discussion, but there is a much larger chance that it will require a lot of changes, or be straight up rejected. The first step to becoming active in the community as a contributor is to request to join the development discord over at [https://discord.gg/K9zernJB5z]. It usually takes up to a few days to get accepted. In the meantime while waiting, you can open an issue on the issues page. Make sure to fill it out thoroughly. You can then ask to be assigned in the comments of the issue. Once you know what kind of changes you would like to make, you can move on to the next section. Making the change If you are new to git, the first author of this file recommends you check out this website for a visual way of learning how to use it. Setup In github, fork the repo onto your account. Clone the repo, go into it, and set the upstream to the original repo. git clone https://github.com/YourUsername/OpenFrontIO.git cd OpenFrontIO git remote add upstream https://github.com/openfrontio/OpenFrontIO.git Install dependencies npm i Before making a change, make sure your local repo is up to date on the upstream and update your origin. git checkout main git fetch upstream --rebase git push If you would like to make a new change, create a new branch, and checkout into it git checkout -b awesomefeature Editing files You can now make a change and make a commit git commit -m \"add XYZ feature\" path/to/file.ts To test your change in-game, you can run any of the following npm run dev npm run start:client npm run start:server-dev Cleaning up Before publishing make sure to test your change manually, and then with npm, as you want to avoid creating regressions. npm run test Make sure your format also matches the one employed by the rest of the codebase npm run format or alternatively npx prettier --write path/to/file Lastly, make sure to lint your code npm run lint npm run lint:fix Don't forget to commit your changes git commit . -m \"format\" Publishing your change Once you are happy with your commits, format your changes, and push them to origin. You cannot push directly to upstream (the official repo). git push Now, go to your repo on github, and create a pull request from your branch YourUserName/OpenFrontIO/awesomefeature to the main repo OpenFrontIO/OpenFrontIO/main . Make sure to fill out the description properly before making a PR. If you are not ready to be reviewed yet, you can submit a \"draft PR\". As you push changes on your branch, the PR will be updated to match. coderabbitai will then comment on your PR and suggest changes. If the changes are sensible, implement them. Afterwards, if your PR is set as ready to be reviewed (not a draft) one of the maintainers will come and comment any needed changes. Discuss them further or implement the changes, and wait for another review. Hopefully, afterwards, your change will be accepted, merged into main, and then later on, pushed out in an update to the live game! Next steps To learn more about our contribution guidelines, check out the contribution page To learn more about the structure of the codebase, go to the development reference",
      "title": "Getting Started"
    },
    {
      "location": "getting_started/#getting-started",
      "text": "",
      "title": "Getting Started"
    },
    {
      "location": "getting_started/#prerequisites",
      "text": "git npm (v10.9.2 or higher) A modern browser with developer tools github account discord account Before you start, make sure you have all of these tools installed and ready to be used Test by running in your terminal (or command prompt) git --help npm --help You should see some help output. If you do, move on. If you don't try restarting your terminal, restarting your device, or reinstalling the tools.",
      "title": "Prerequisites"
    },
    {
      "location": "getting_started/#discussing-with-the-community",
      "text": "If you would like to make a change, especially a larger one (like a new feature, a large rewrite, or similar), you will need to discuss with the contributors and the maintainers on IF the change should be implemented, and potentially HOW it should be implemented. You may make a change without this discussion, but there is a much larger chance that it will require a lot of changes, or be straight up rejected. The first step to becoming active in the community as a contributor is to request to join the development discord over at [https://discord.gg/K9zernJB5z]. It usually takes up to a few days to get accepted. In the meantime while waiting, you can open an issue on the issues page. Make sure to fill it out thoroughly. You can then ask to be assigned in the comments of the issue. Once you know what kind of changes you would like to make, you can move on to the next section.",
      "title": "Discussing with the community"
    },
    {
      "location": "getting_started/#making-the-change",
      "text": "If you are new to git, the first author of this file recommends you check out this website for a visual way of learning how to use it.",
      "title": "Making the change"
    },
    {
      "location": "getting_started/#setup",
      "text": "In github, fork the repo onto your account. Clone the repo, go into it, and set the upstream to the original repo. git clone https://github.com/YourUsername/OpenFrontIO.git cd OpenFrontIO git remote add upstream https://github.com/openfrontio/OpenFrontIO.git Install dependencies npm i Before making a change, make sure your local repo is up to date on the upstream and update your origin. git checkout main git fetch upstream --rebase git push If you would like to make a new change, create a new branch, and checkout into it git checkout -b awesomefeature",
      "title": "Setup"
    },
    {
      "location": "getting_started/#editing-files",
      "text": "You can now make a change and make a commit git commit -m \"add XYZ feature\" path/to/file.ts To test your change in-game, you can run any of the following npm run dev npm run start:client npm run start:server-dev",
      "title": "Editing files"
    },
    {
      "location": "getting_started/#cleaning-up",
      "text": "Before publishing make sure to test your change manually, and then with npm, as you want to avoid creating regressions. npm run test Make sure your format also matches the one employed by the rest of the codebase npm run format or alternatively npx prettier --write path/to/file Lastly, make sure to lint your code npm run lint npm run lint:fix Don't forget to commit your changes git commit . -m \"format\"",
      "title": "Cleaning up"
    },
    {
      "location": "getting_started/#publishing-your-change",
      "text": "Once you are happy with your commits, format your changes, and push them to origin. You cannot push directly to upstream (the official repo). git push Now, go to your repo on github, and create a pull request from your branch YourUserName/OpenFrontIO/awesomefeature to the main repo OpenFrontIO/OpenFrontIO/main . Make sure to fill out the description properly before making a PR. If you are not ready to be reviewed yet, you can submit a \"draft PR\". As you push changes on your branch, the PR will be updated to match. coderabbitai will then comment on your PR and suggest changes. If the changes are sensible, implement them. Afterwards, if your PR is set as ready to be reviewed (not a draft) one of the maintainers will come and comment any needed changes. Discuss them further or implement the changes, and wait for another review. Hopefully, afterwards, your change will be accepted, merged into main, and then later on, pushed out in an update to the live game!",
      "title": "Publishing your change"
    },
    {
      "location": "getting_started/#next-steps",
      "text": "To learn more about our contribution guidelines, check out the contribution page To learn more about the structure of the codebase, go to the development reference",
      "title": "Next steps"
    },
    { "location": "server/", "text": "", "title": "Server reference" }
  ]
}
