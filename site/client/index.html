<!doctype html>
<html class="writer-html5" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Client reference - OpenFront docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css"
    />

    <script>
      // Current page data
      var mkdocs_page_name = "Client reference";
      var mkdocs_page_input_path = "client.md";
      var mkdocs_page_url = null;
    </script>

    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </head>

  <body class="wy-body-for-nav" role="document">
    <div class="wy-grid-for-nav">
      <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
        <div class="wy-side-scroll">
          <div class="wy-side-nav-search">
            <a href=".." class="icon icon-home"> OpenFront docs </a>
            <div role="search">
              <form
                id="rtd-search-form"
                class="wy-form"
                action="../search.html"
                method="get"
              >
                <input
                  type="text"
                  name="q"
                  placeholder="Search docs"
                  aria-label="Search docs"
                  title="Type search term here"
                />
              </form>
            </div>
          </div>

          <div
            class="wy-menu wy-menu-vertical"
            data-spy="affix"
            role="navigation"
            aria-label="Navigation menu"
          >
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="..">Home</a>
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../API/">API reference</a>
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../getting_started/"
                  >Getting Started</a
                >
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../contribute/"
                  >Contributing</a
                >
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../develop/"
                  >Development reference</a
                >
              </li>
            </ul>
            <ul class="current">
              <li class="toctree-l1 current">
                <a class="reference internal current" href="#"
                  >Client reference</a
                >
                <ul class="current">
                  <li class="toctree-l2">
                    <a class="reference internal" href="#components"
                      >Components</a
                    >
                    <ul>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#difficultiests"
                          >Difficulties.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-difficultydisplay"
                              >class DifficultyDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#mapsts">Maps.ts</a>
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-mapdescription"
                              >const MapDescription</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-mapdisplay"
                              >class MapDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#modaloverlayts"
                          >ModalOverlay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-modaloverlay"
                              >class ModalOverlay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#newsbuttonts"
                          >NewsButton.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-newsbutton"
                              >class NewsButton</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#patternbuttonts"
                          >PatternButton.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-button_width"
                              >const BUTTON_WIDTH</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-patternbutton"
                              >class PatternButton</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-renderpatternpreview"
                              >function renderPatternPreview()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#actionbuttonts"
                          >ActionButton.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-actionbutton"
                              >function actionButton()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#dividerts"
                          >Divider.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-divider"
                              >class Divider</a
                            >
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li class="toctree-l2">
                    <a class="reference internal" href="#graphics">Graphics</a>
                    <ul>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#animatedspritets"
                          >AnimatedSprite.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-animatedsprite"
                              >class AnimatedSprite</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#animatedspriteloaderts"
                          >AnimatedSpriteLoader.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-animatedspriteloader"
                              >class AnimatedSpriteLoader</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#gamerendererts"
                          >GameRenderer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-createrenderer"
                              >function createRenderer()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gamerenderer"
                              >class GameRenderer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#nameboxcalculatorts"
                          >NameBoxCalculator.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-point"
                              >interface Point</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-rectangle"
                              >interface Rectangle</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-placename"
                              >public function placeName()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-creategrid"
                              >public function createGrid()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-findlargestinscribedrectangle"
                              >public function
                              findLargestInscribedRectangle()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-largestrectangleinhistogram"
                              >public function largestRectangleInHistogram()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-calculatefontsize"
                              >public function calculateFontSize()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#progressbarts"
                          >ProgressBar.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-progressbar"
                              >class ProgressBar</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#spriteloaderts"
                          >SpriteLoader.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#constants"
                              >Constants</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-loadallsprites"
                              >public function loadAllSprites()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-traintypetospritetype"
                              >private function trainTypeToSpriteType()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-getspriteforunit"
                              >private function getSpriteForUnit()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-isspriteready"
                              >public function isSpriteReady()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-colorizecanvas"
                              >public function colorizeCanvas()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-computespritekey"
                              >private function computeSpriteKey()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-getcoloredsprite"
                              >public function getColoredSprite()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#transformhandlerts"
                          >TransformHandler.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#constants_1"
                              >Constants</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-transformhandler"
                              >class TransformHandler</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#uistatets"
                          >UIState.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-uistate"
                              >interface UIState</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxconquestfxts"
                          >./fx/ConquestFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-conquestfxfactory"
                              >public function conquestFxFactory()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxfxts"
                          >./fx/Fx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#interface-fx"
                              >interface Fx</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#enum-fxtype"
                              >enum FxType</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxnukeareats"
                          >./fx/NukeArea.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-nukeareafx"
                              >class NukeAreaFx</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxnukefxts"
                          >./fx/NukeFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-shockwavefx"
                              >class ShockwaveFx</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-addspriteincircle"
                              >private function addSpriteInCircle()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-nukefxfactory"
                              >public function nukeFxFactory()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxspritefxts"
                          >./fx/SpriteFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-movespritefx"
                              >class MoveSpriteFx</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-fadefx"
                              >class FadeFx</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-spritefx"
                              >class SpriteFx</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxtargetfxts"
                          >./fx/TargetFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-targetfx"
                              >class TargetFx</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxtextfxts"
                          >./fx/TextFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-textfx"
                              >class TextFx</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#fxtimelinets"
                          >./fx/Timeline.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-timeline"
                              >class Timeline</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#fxunitexplosionfxts"
                          >./fx/UnitExplosionFx.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-unitexplosionfx"
                              >class UnitExplosionFx</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersadtimerts"
                          >./layers/AdTimer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-adtimer"
                              >class AdTimer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersalertframets"
                          >./layers/AlertFrame.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-alertframe"
                              >class AlertFrame</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersbuildmenuts"
                          >./layers/BuildMenu.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-builditemdisplay"
                              >interface BuildItemDisplay</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-buildtable"
                              >const buildTable</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-flattenedbuildtable"
                              >const flattenedBuildTable</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-buildmenu"
                              >class BuildMenu</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerschatdisplayts"
                          >./layers/ChatDisplay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-chatevent"
                              >interface ChatEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-chatdisplay"
                              >class ChatDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerschatintegrationts"
                          >./layers/ChatIntegration.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-chatintegration"
                              >class ChatIntegration</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layerschatmodalts"
                          >./layers/ChatModal.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#type-quickchatphrase"
                              >type QuickChatPhrase</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#type-quickchatphrases"
                              >type QuickChatPhrases</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-chatmodal"
                              >class ChatModal</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerscontrolpanelts"
                          >./layers/ControlPanel.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-controlpanel"
                              >class ControlPanel</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersemojitablets"
                          >./layers/EmojiTable.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-emojitable"
                              >class EmojiTable</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerseventsdisplayts"
                          >./layers/EventsDisplay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-eventsdisplay"
                              >class EventsDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersfpsdisplayts"
                          >./layers/FPSDisplay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-fpsdisplay"
                              >class FPSDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersfxlayerts"
                          >./layers/FxLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-fxlayer"
                              >class FxLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersgameleftsidebarts"
                          >./layers/GameLeftSidebar.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gameleftsidebar"
                              >class GameLeftSidebar</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-createrenderroot_7"
                              >public function createRenderRoot()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-init_7"
                              >public function init()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-tick_7"
                              >public function tick()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-toggleleaderboard"
                              >private function toggleLeaderboard()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-toggleteamleaderboard"
                              >private function toggleTeamLeaderboard()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-getter-isteamgame"
                              >private getter isTeamGame()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-gettranslatedplayerteamlabel"
                              >private function
                              getTranslatedPlayerTeamLabel()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-render_13"
                              >public function render()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersgamerightsidebarts"
                          >./layers/GameRightSidebar.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gamerightsidebar"
                              >class GameRightSidebar</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-createrenderroot_8"
                              >public function createRenderRoot()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-init_8"
                              >public function init()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-tick_8"
                              >public function tick()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-secondstohms"
                              >private function secondsToHms()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-togglereplaypanel"
                              >private function toggleReplayPanel()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-onpausebuttonclick"
                              >private function onPauseButtonClick()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-onexitbuttonclick"
                              >private function onExitButtonClick()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-onsettingsbuttonclick"
                              >private function onSettingsButtonClick()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-render_14"
                              >public function render()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-mayberenderreplaybuttons"
                              >private function maybeRenderReplayButtons()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersheadsupmessagets"
                          >./layers/HeadsUpMessage.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-headsupmessage"
                              >class HeadsUpMessage</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layerslayerts"
                          >./layers/Layer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-layer"
                              >interface Layer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersleaderboardts"
                          >./layers/Leaderboard.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-entry"
                              >interface Entry</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gotoplayerevent"
                              >class GoToPlayerEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gotopositionevent"
                              >class GoToPositionEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-gotounitevent"
                              >class GoToUnitEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-leaderboard"
                              >class Leaderboard</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-formatpercentage"
                              >private function formatPercentage()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersmainradialmenuts"
                          >./layers/MainRadialMenu.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-mainradialmenu"
                              >class MainRadialMenu</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersmultitabmodalts"
                          >./layers/MultiTabModal.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-multitabmodal"
                              >class MultiTabModal</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersnamelayerts"
                          >./layers/NameLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-renderinfo"
                              >class RenderInfo</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-namelayer-implements-layer"
                              >class NameLayer implements Layer</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-onalternateviewchange"
                              >private function onAlternateViewChange()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-updateelementvisibility"
                              >private function updateElementVisibility()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-createplayerelement"
                              >private function createPlayerElement()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-renderplayerinfo"
                              >public function renderPlayerInfo()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-createiconelement"
                              >private function createIconElement()</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersplayeractionhandlerts"
                          >./layers/PlayerActionHandler.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-playeractionhandler"
                              >class PlayerActionHandler</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersplayerinfooverlayts"
                          >./layers/PlayerInfoOverlay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-playerinfooverlay"
                              >class PlayerInfoOverlay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersplayerpanelts"
                          >./layers/PlayerPanel.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-playerpanel"
                              >class PlayerPanel</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersradialmenuts"
                          >./layers/RadialMenu.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-closeradialmenuevent"
                              >class CloseRadialMenuEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-tooltipitem"
                              >interface TooltipItem</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-radialmenuconfig"
                              >interface RadialMenuConfig</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-radialmenu-implements-layer"
                              >class RadialMenu implements Layer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersradialmenuelementsts"
                          >./layers/RadialMenuElements.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-menuelementparams"
                              >interface MenuElementParams</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-menuelement"
                              >interface MenuElement</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-tooltipkey"
                              >interface TooltipKey</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-centerbuttonelement"
                              >interface CenterButtonElement</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#constant-colors"
                              >constant COLORS</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#enum-slot"
                              >enum Slot</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-getallenabledunits"
                              >public function getAllEnabledUnits()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#public-function-createmenuelements"
                              >public function createMenuElements()</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#all-exported-menuelement-constants"
                              >All exported MenuElement constants</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#exported-centerbuttonelement-constant"
                              >exported CenterButtonElement constant</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersrailroadlayerts"
                          >./layers/RailroadLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-railroadlayer"
                              >class RailroadLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersrailroadspritests"
                          >./layers/RailroadSprites.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-getrailroadrectstype-railtype"
                              >function getRailroadRects(type: RailType)</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-getbridgerectstype-railtype"
                              >function getBridgeRects(type: RailType)</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerssamradiuslayerts"
                          >./layers/SAMRadiusLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-samradiuslayer"
                              >class SAMRadiusLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerssendresourcesmodalts"
                          >./layers/SendResourcesModal.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-sendresourcemodal"
                              >class SendResourceModal</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layerssettingsmodalts"
                          >./layers/SettingsModal.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-showsettingsmodalevent"
                              >class ShowSettingsModalEvent</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-settingsmodal"
                              >class SettingsModal</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersspawntimerts"
                          >./layers/SpawnTimer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-spawntimer"
                              >class SpawnTimer</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#private-function-sumiteratorvalues"
                              >private function sumIterator(values)</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersstructuredrawingutilsts"
                          >./layers/StructureDrawingUtils.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#constants_2"
                              >Constants</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#type-shapetype"
                              >Type ShapeType</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-spritefactory"
                              >class SpriteFactory</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersstructureiconslayerts"
                          >./layers/StructureIconsLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-structurerenderinfo"
                              >class StructureRenderInfo</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-structureiconslayer"
                              >class StructureIconsLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersstructurelayersts"
                          >./layers/StructureLayers.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-structurelayer"
                              >class StructureLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersteamstatsts"
                          >./layers/TeamStats.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-teamstats"
                              >class TeamStats</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-teamentry"
                              >interface TeamEntry</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersterrainlayerts"
                          >./layers/TerrainLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-terrainlayer"
                              >class TerrainLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersterritorylayerts"
                          >./layers/TerritoryLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-territorylayer"
                              >class TerritoryLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersuilayerts"
                          >./layers/UILayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-uilayer"
                              >class UILayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#layersunitdisplayts"
                          >./layers/UnitDisplay.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-unitdisplay"
                              >class UnitDisplay</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layersunitlayerts"
                          >./layers/UnitLayer.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-unitlayer"
                              >class UnitLayer</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#layerswinmodalts"
                          >./layers/WinModal.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a class="reference internal" href="#class-winmodal"
                              >class WinModal</a
                            >
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li class="toctree-l2">
                    <a class="reference internal" href="#style">Style</a>
                  </li>
                  <li class="toctree-l2">
                    <a class="reference internal" href="#data">Data</a>
                  </li>
                  <li class="toctree-l2">
                    <a class="reference internal" href="#sound">Sound</a>
                    <ul>
                      <li class="toctree-l3">
                        <a class="reference internal" href="#soundmanagerts"
                          >SoundManager.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#class-soundmanager"
                              >class SoundManager</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#enum-soundeffect"
                              >enum SoundEffect</a
                            >
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li class="toctree-l2">
                    <a class="reference internal" href="#utilities"
                      >Utilities</a
                    >
                    <ul>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#replayspeedmultiplierts"
                          >ReplaySpeedMultiplier.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#enum-replayspeedmultiplier"
                              >enum ReplaySpeedMultiplier</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-defaultreplayspeedmultiplier"
                              >const defaultReplaySpeedMultiplier</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li class="toctree-l3">
                        <a
                          class="reference internal"
                          href="#renderunittypeoptionsts"
                          >RenderUnitTypeOptions.ts</a
                        >
                        <ul>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#interface-unittyperendercontext"
                              >interface UnitTypeRenderContext</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#const-unitoptions"
                              >const unitOptions</a
                            >
                          </li>
                          <li class="toctree-l4">
                            <a
                              class="reference internal"
                              href="#function-renderunittypeoptions"
                              >function renderUnitTypeOptions()</a
                            >
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../server/"
                  >Server reference</a
                >
              </li>
            </ul>
            <ul>
              <li class="toctree-l1">
                <a class="reference internal" href="../core/">Core reference</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <nav
          class="wy-nav-top"
          role="navigation"
          aria-label="Mobile navigation menu"
        >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OpenFront docs</a>
        </nav>
        <div class="wy-nav-content">
          <div class="rst-content">
            <div role="navigation" aria-label="breadcrumbs navigation">
              <ul class="wy-breadcrumbs">
                <li>
                  <a href=".." class="icon icon-home" aria-label="Docs"></a>
                </li>
                <li class="breadcrumb-item active">Client reference</li>
                <li class="wy-breadcrumbs-aside"></li>
              </ul>
              <hr />
            </div>
            <div
              role="main"
              class="document"
              itemscope="itemscope"
              itemtype="http://schema.org/Article"
            >
              <div class="section" itemprop="articleBody">
                <h1 id="client-reference">Client reference</h1>
                <p>Table of contents:</p>
                <div class="toc">
                  <ul>
                    <li>
                      <a href="#client-reference">Client reference</a>
                      <ul>
                        <li>
                          <a href="#components">Components</a>
                          <ul>
                            <li>
                              <a href="#difficultiests">Difficulties.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-difficultydisplay"
                                    >class DifficultyDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#private-function-getdifficultyicondifficultykey-string"
                                        >private function
                                        getDifficultyIcon(difficultyKey:
                                        string)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#mapsts">Maps.ts</a>
                              <ul>
                                <li>
                                  <a href="#const-mapdescription"
                                    >const MapDescription</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-mapdisplay"
                                    >class MapDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#private-function-loadmapdata"
                                        >private function loadMapData()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_1"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#modaloverlayts">ModalOverlay.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-modaloverlay"
                                    >class ModalOverlay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-render_2"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#newsbuttonts">NewsButton.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-newsbutton"
                                    >class NewsButton</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#private-function-checkfornewversion"
                                        >private function
                                        checkForNewVersion()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handleclick"
                                        >private function handleClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_3"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#patternbuttonts">PatternButton.ts</a>
                              <ul>
                                <li>
                                  <a href="#const-button_width"
                                    >const BUTTON_WIDTH</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-patternbutton"
                                    >class PatternButton</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#private-function-translatecosmetic"
                                        >private function translateCosmetic()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handleclick_1"
                                        >private function handleClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handlepurchase"
                                        >private function handlePurchase()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_4"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_1"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#function-renderpatternpreview"
                                    >function renderPatternPreview()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#actionbuttonts">ActionButton.ts</a>
                              <ul>
                                <li>
                                  <a href="#function-actionbutton"
                                    >function actionButton()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#dividerts">Divider.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-divider">class Divider</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_2"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_5"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="#graphics">Graphics</a>
                          <ul>
                            <li>
                              <a href="#animatedspritets">AnimatedSprite.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-animatedsprite"
                                    >class AnimatedSprite</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-constructor-constructor"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-update"
                                        >public function update()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-isactive"
                                        >public function isActive()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-lifetime"
                                        >public function lifeTime()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-draw"
                                        >public function draw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-reset"
                                        >public function reset()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setorigin"
                                        >public function setOrigin()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#animatedspriteloaderts"
                                >AnimatedSpriteLoader.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-animatedspriteloader"
                                    >class AnimatedSpriteLoader</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-loadallanimatedspriteimages"
                                        >public function
                                        loadAllAnimatedSpriteImages()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createregularanimatedsprite"
                                        >private function
                                        createRegularAnimatedSprite()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getcoloredanimatedsprite"
                                        >private function
                                        getColoredAnimatedSprite()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createcoloredanimatedspriteforunit"
                                        >private function
                                        createColoredAnimatedSpriteForUnit()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createanimatedsprite"
                                        >public function
                                        createAnimatedSprite()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#gamerendererts">GameRenderer.ts</a>
                              <ul>
                                <li>
                                  <a href="#function-createrenderer"
                                    >function createRenderer()</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-gamerenderer"
                                    >class GameRenderer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_1"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-initialize"
                                        >public function initialize()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-resizecanvas"
                                        >public function resizeCanvas()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendergame"
                                        >public function renderGame()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-resize"
                                        >public function resize()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#nameboxcalculatorts"
                                >NameBoxCalculator.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-point">interface Point</a>
                                </li>
                                <li>
                                  <a href="#interface-rectangle"
                                    >interface Rectangle</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-placename"
                                    >public function placeName()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-creategrid"
                                    >public function createGrid()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#public-function-findlargestinscribedrectangle"
                                    >public function
                                    findLargestInscribedRectangle()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#public-function-largestrectangleinhistogram"
                                    >public function
                                    largestRectangleInHistogram()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-calculatefontsize"
                                    >public function calculateFontSize()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#progressbarts">ProgressBar.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-progressbar"
                                    >class ProgressBar</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_2"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setprogress"
                                        >public function setProgress()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-clear"
                                        >public function clear()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-getx"
                                        >public function getX()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-gety"
                                        >public function getY()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-getprogress"
                                        >public function getProgress()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#spriteloaderts">SpriteLoader.ts</a>
                              <ul>
                                <li>
                                  <a href="#constants">Constants</a>
                                  <ul>
                                    <li>
                                      <a href="#type-traintypesprite"
                                        >type TrainTypeSprite</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#sprite_config">SPRITE_CONFIG</a>
                                    </li>
                                    <li><a href="#spritemap">spriteMap</a></li>
                                    <li>
                                      <a href="#coloredspritecache"
                                        >coloredSpriteCache</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#public-function-loadallsprites"
                                    >public function loadAllSprites()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-traintypetospritetype"
                                    >private function trainTypeToSpriteType()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-getspriteforunit"
                                    >private function getSpriteForUnit()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-isspriteready"
                                    >public function isSpriteReady()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-colorizecanvas"
                                    >public function colorizeCanvas()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-computespritekey"
                                    >private function computeSpriteKey()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-getcoloredsprite"
                                    >public function getColoredSprite()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#transformhandlerts"
                                >TransformHandler.ts</a
                              >
                              <ul>
                                <li><a href="#constants_1">Constants</a></li>
                                <li>
                                  <a href="#class-transformhandler"
                                    >class TransformHandler</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_3"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-updatecanvasboundingrect"
                                        >public function
                                        updateCanvasBoundingRect()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-boundingrect"
                                        >public function boundingRect()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-width"
                                        >public function width()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-haschanged"
                                        >public function hasChanged()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-resetchanged"
                                        >public function resetChanged()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-handletransform"
                                        >public function handleTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-worldtoscreencoordinates"
                                        >public function
                                        worldToScreenCoordinates()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-screentoworldcoordinates"
                                        >public function
                                        screenToWorldCoordinates()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-screenboundingrect"
                                        >public function screenBoundingRect()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-isonscreen"
                                        >public function isOnScreen()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-screencenter"
                                        >public function screenCenter()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-ongotoplayer"
                                        >public function onGoToPlayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-ongotoposition"
                                        >public function onGoToPosition()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-ongotounit"
                                        >public function onGoToUnit()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-centercamera"
                                        >public function centerCamera()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-goto"
                                        >private function goTo()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onzoom"
                                        >public function onZoom()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#uistatets">UIState.ts</a>
                              <ul>
                                <li>
                                  <a href="#interface-uistate"
                                    >interface UIState</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxconquestfxts">./fx/ConquestFx.ts</a>
                              <ul>
                                <li>
                                  <a href="#public-function-conquestfxfactory"
                                    >public function conquestFxFactory()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxfxts">./fx/Fx.ts</a>
                              <ul>
                                <li>
                                  <a href="#interface-fx">interface Fx</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-rendertick"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li><a href="#enum-fxtype">enum FxType</a></li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxnukeareats">./fx/NukeArea.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-nukeareafx"
                                    >class NukeAreaFx</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_4"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-end"
                                        >public function end()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_1"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxnukefxts">./fx/NukeFx.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-shockwavefx"
                                    >class ShockwaveFx</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_5"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_2"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#private-function-addspriteincircle"
                                    >private function addSpriteInCircle()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-nukefxfactory"
                                    >public function nukeFxFactory()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxspritefxts">./fx/SpriteFx.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-movespritefx"
                                    >class MoveSpriteFx</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_6"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_3"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#class-fadefx">class FadeFx</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_7"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_4"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#class-spritefx">class SpriteFx</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_8"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_5"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-getelapsedtime"
                                        >public function getElapsedTime()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-getduration"
                                        >public function getDuration()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxtargetfxts">./fx/TargetFx.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-targetfx">class TargetFx</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-end_1"
                                        >public function end()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_6"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxtextfxts">./fx/TextFx.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-textfx">class TextFx</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-rendertick_7"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxtimelinets">./fx/Timeline.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-timeline">class Timeline</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-add"
                                        >public function add()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-update_1"
                                        >public function update()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-iscomplete"
                                        >public function isComplete()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#fxunitexplosionfxts"
                                >./fx/UnitExplosionFx.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-unitexplosionfx"
                                    >class UnitExplosionFx</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-unitexplosionfx"
                                        >public constructor UnitExplosionFx()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-rendertick_8"
                                        >public function renderTick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersadtimerts">./layers/AdTimer.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-adtimer">class AdTimer</a>
                                  <ul>
                                    <li>
                                      <a href="#public-constructor-adtimer"
                                        >public constructor AdTimer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-async-function-tick"
                                        >public async function tick()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersalertframets"
                                >./layers/AlertFrame.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-alertframe"
                                    >class AlertFrame</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_9"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_1"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_1"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-shouldtransform"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onbrokeallianceupdate"
                                        >private function
                                        onBrokeAllianceUpdate()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-activatealert"
                                        >private function activateAlert()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-dismissalert"
                                        >public function dismissAlert()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_6"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersbuildmenuts"
                                >./layers/BuildMenu.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-builditemdisplay"
                                    >interface BuildItemDisplay</a
                                  >
                                </li>
                                <li>
                                  <a href="#const-buildtable"
                                    >const buildTable</a
                                  >
                                </li>
                                <li>
                                  <a href="#const-flattenedbuildtable"
                                    >const flattenedBuildTable</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-buildmenu">class BuildMenu</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_2"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_2"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-canbuildorupgrade"
                                        >public function canBuildOrUpgrade()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-cost"
                                        >public function cost()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-count"
                                        >public function count()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-sendbuildorupgrade"
                                        >public function sendBuildOrUpgrade()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_7"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hidemenu"
                                        >public function hideMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-showmenu"
                                        >public function showMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-refresh"
                                        >private function refresh()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getbuildableunits"
                                        >private function getBuildableUnits()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#getter-isvisible"
                                        >getter isVisible</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerschatdisplayts"
                                >./layers/ChatDisplay.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-chatevent"
                                    >interface ChatEvent</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-chatdisplay"
                                    >class ChatDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#private-function-togglehidden"
                                        >private function toggleHidden()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-addevent"
                                        >private function addEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-removeevent"
                                        >private function removeEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-ondisplaymessageevent"
                                        >public function
                                        onDisplayMessageEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_3"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_3"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-getchatcontent"
                                        >private function getChatContent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_8"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_3"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerschatintegrationts"
                                >./layers/ChatIntegration.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-chatintegration"
                                    >class ChatIntegration</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_10"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setupchatmodal"
                                        >public function setupChatModal()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createquickchatmenu"
                                        >public function
                                        createQuickChatMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-shortentext"
                                        >public function shortenText()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerschatmodalts"
                                >./layers/ChatModal.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#type-quickchatphrase"
                                    >type QuickChatPhrase</a
                                  >
                                </li>
                                <li>
                                  <a href="#type-quickchatphrases"
                                    >type QuickChatPhrases</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-chatmodal">class ChatModal</a>
                                  <ul>
                                    <li>
                                      <a href="#public-function-initeventbus"
                                        >public function initEventBus()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-open"
                                        >public function open()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-close"
                                        >public function close()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setrecipient"
                                        >public function setRecipient()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setsender"
                                        >public function setSender()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-openwithselection"
                                        >public function openWithSelection()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-selectcategory"
                                        >private function selectCategory()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-selectphrase"
                                        >private function selectPhrase()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-selectplayer"
                                        >private function selectPlayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-sendchatmessage"
                                        >private function sendChatMessage()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onplayersearchinput"
                                        >private function
                                        onPlayerSearchInput()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getsortedfilteredplayers"
                                        >private function
                                        getSortedFilteredPlayers()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getfullquickchatkey"
                                        >private function
                                        getFullQuickChatKey()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderphrasepreview"
                                        >private function
                                        renderPhrasePreview()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getphrasesforcategory"
                                        >private function
                                        getPhrasesForCategory()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerscontrolpanelts"
                                >./layers/ControlPanel.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-controlpanel"
                                    >class ControlPanel</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_4"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_4"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updatetroopincrease"
                                        >private function
                                        updateTroopIncrease()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-onattackratiochange"
                                        >public function
                                        onAttackRatioChange()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_1"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setvisibile"
                                        >public function setVisibile()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_9"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_4"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersemojitablets"
                                >./layers/EmojiTable.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-emojitable"
                                    >class EmojiTable</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-initeventbus_1"
                                        >public function initEventBus()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-property-onemojiclicked"
                                        >private property onEmojiClicked</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_10"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hidetable"
                                        >public function hideTable()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-showtable"
                                        >public function showTable()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_5"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerseventsdisplayts"
                                >./layers/EventsDisplay.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-eventsdisplay"
                                    >class EventsDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_5"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_5"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-disconnectedcallback"
                                        >public function
                                        disconnectedCallback()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_2"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_1"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderbutton"
                                        >private function renderButton()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendertogglebutton"
                                        >private function
                                        renderToggleButton()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-togglehidden_1"
                                        >private function toggleHidden()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-toggleeventfilter"
                                        >private function toggleEventFilter()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-checkforallianceexpirations"
                                        >private function
                                        checkForAllianceExpirations()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-addevent_1"
                                        >private function addEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-removeevent_1"
                                        >private function removeEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#event-handlers-onxevent"
                                        >Event Handlers (onXEvent)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-helper-functions-for-rendering"
                                        >Private helper functions for
                                        rendering</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_11"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_6"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersfpsdisplayts"
                                >./layers/FPSDisplay.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-fpsdisplay"
                                    >class FPSDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_6"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setvisible"
                                        >public function setVisible()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handleclose"
                                        >private function handleClose()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlemousedown"
                                        >private function handleMouseDown()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlemousemove"
                                        >private function handleMouseMove()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handlemouseup"
                                        >private function handleMouseUp()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-updatefps"
                                        >public function updateFPS()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_3"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-getfpscolor"
                                        >private function getFPSColor()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_12"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersfxlayerts">./layers/FxLayer.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-fxlayer">class FxLayer</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_11"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_4"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_6"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-manageboattargetfx"
                                        >private function
                                        manageBoatTargetFx()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createnuketargetfxifowned"
                                        >private function
                                        createNukeTargetFxIfOwned()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onbonusevent"
                                        >public function onBonusEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-addtextfx"
                                        >public function addTextFx()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-randomevent"
                                        >public function randomEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onunitevent"
                                        >public function onUnitEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onshellevent"
                                        >public function onShellEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-ontrainevent"
                                        >public function onTrainEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onrailroadevent"
                                        >public function onRailroadEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onconquestevent"
                                        >public function onConquestEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onwarshipevent"
                                        >public function onWarshipEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-onstructureevent"
                                        >public function onStructureEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onnukeevent"
                                        >public function onNukeEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlenukeexplosion"
                                        >private function
                                        handleNukeExplosion()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlesaminterception"
                                        >private function
                                        handleSAMInterception()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-async-function-init"
                                        >public async function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_1"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_2"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderallfx"
                                        >private function renderAllFx()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendercontextfx"
                                        >private function renderContextFx()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersgameleftsidebarts"
                                >./layers/GameLeftSidebar.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-gameleftsidebar"
                                    >class GameLeftSidebar</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-createrenderroot_7"
                                    >public function createRenderRoot()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-init_7"
                                    >public function init()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-tick_7"
                                    >public function tick()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-toggleleaderboard"
                                    >private function toggleLeaderboard()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-toggleteamleaderboard"
                                    >private function toggleTeamLeaderboard()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-getter-isteamgame"
                                    >private getter isTeamGame()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-gettranslatedplayerteamlabel"
                                    >private function
                                    getTranslatedPlayerTeamLabel()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-render_13"
                                    >public function render()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersgamerightsidebarts"
                                >./layers/GameRightSidebar.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-gamerightsidebar"
                                    >class GameRightSidebar</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-createrenderroot_8"
                                    >public function createRenderRoot()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-init_8"
                                    >public function init()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-tick_8"
                                    >public function tick()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-secondstohms"
                                    >private function secondsToHms()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-togglereplaypanel"
                                    >private function toggleReplayPanel()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-onpausebuttonclick"
                                    >private function onPauseButtonClick()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-onexitbuttonclick"
                                    >private function onExitButtonClick()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-onsettingsbuttonclick"
                                    >private function onSettingsButtonClick()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-render_14"
                                    >public function render()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-mayberenderreplaybuttons"
                                    >private function
                                    maybeRenderReplayButtons()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersheadsupmessagets"
                                >./layers/HeadsUpMessage.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-headsupmessage"
                                    >class HeadsUpMessage</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_9"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_9"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_9"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_15"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerslayerts">./layers/Layer.ts</a>
                              <ul>
                                <li>
                                  <a href="#interface-layer">interface Layer</a>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersleaderboardts"
                                >./layers/Leaderboard.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-entry">interface Entry</a>
                                </li>
                                <li>
                                  <a href="#class-gotoplayerevent"
                                    >class GoToPlayerEvent</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-gotopositionevent"
                                    >class GoToPositionEvent</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-gotounitevent"
                                    >class GoToUnitEvent</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-leaderboard"
                                    >class Leaderboard</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_10"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_10"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_10"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-setsort"
                                        >private function setSort()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updateleaderboard"
                                        >private function updateLeaderboard()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlerowclickplayer"
                                        >private function
                                        handleRowClickPlayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_3"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_5"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_16"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#private-function-formatpercentage"
                                    >private function formatPercentage()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersmainradialmenuts"
                                >./layers/MainRadialMenu.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-mainradialmenu"
                                    >class MainRadialMenu</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#constructor">constructor</a>
                                    </li>
                                    <li>
                                      <a href="#public-function-init_11"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-async-function-updateplayeractions"
                                        >private async function
                                        updatePlayerActions()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-async-function-tick_1"
                                        >public async function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_4"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_6"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-closemenu"
                                        >public function closeMenu()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersmultitabmodalts"
                                >./layers/MultiTabModal.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-multitabmodal"
                                    >class MultiTabModal</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_11"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_11"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_12"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-generatefakeip"
                                        >private function generateFakeIp()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-generatedevicefingerprint"
                                        >private function
                                        generateDeviceFingerprint()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-show"
                                        >public function show()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hide"
                                        >public function hide()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-disconnectedcallback_1"
                                        >public function
                                        disconnectedCallback()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_17"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersnamelayerts"
                                >./layers/NameLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-renderinfo"
                                    >class RenderInfo</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-namelayer-implements-layer"
                                    >class NameLayer implements Layer</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_13"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_12"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_5"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_7"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_2"
                                        >public function redraw()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a
                                    href="#private-function-onalternateviewchange"
                                    >private function onAlternateViewChange()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-updateelementvisibility"
                                    >private function
                                    updateElementVisibility()</a
                                  >
                                </li>
                                <li>
                                  <a
                                    href="#private-function-createplayerelement"
                                    >private function createPlayerElement()</a
                                  >
                                </li>
                                <li>
                                  <a href="#public-function-renderplayerinfo"
                                    >public function renderPlayerInfo()</a
                                  >
                                </li>
                                <li>
                                  <a href="#private-function-createiconelement"
                                    >private function createIconElement()</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersplayeractionhandlerts"
                                >./layers/PlayerActionHandler.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-playeractionhandler"
                                    >class PlayerActionHandler</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-getplayeractions"
                                        >public function getPlayerActions()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-handleattack"
                                        >public function handleAttack()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handleboatattack"
                                        >public function handleBoatAttack()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-findbesttransportshipspawn"
                                        >public function
                                        findBestTransportShipSpawn()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-handlespawn"
                                        >public function handleSpawn()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handlealliancerequest"
                                        >public function
                                        handleAllianceRequest()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handlebreakalliance"
                                        >public function
                                        handleBreakAlliance()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handletargetplayer"
                                        >public function handleTargetPlayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handledonategold"
                                        >public function handleDonateGold()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handledonatetroops"
                                        >public function handleDonateTroops()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-handleembargo"
                                        >public function handleEmbargo()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-handleemoji"
                                        >public function handleEmoji()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-handledeleteunit"
                                        >public function handleDeleteUnit()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersplayerinfooverlayts"
                                >./layers/PlayerInfoOverlay.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-playerinfooverlay"
                                    >class PlayerInfoOverlay</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-property-game"
                                        >public property game</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-property-eventbus"
                                        >public property eventBus</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-property-transform"
                                        >public property transform</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-state-_isinfovisible"
                                        >private state _isInfoVisible</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-state-player"
                                        >private state player</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-state-playerprofile"
                                        >private state playerProfile</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-state-unit"
                                        >private state unit</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_14"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hide_1"
                                        >public function hide()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-maybeshow"
                                        >public function maybeShow()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_13"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_6"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_8"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setvisible_1"
                                        >public function setVisible()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getrelationclass"
                                        >private function getRelationClass()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getrelationname"
                                        >private function getRelationName()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-displayunitcount"
                                        >private function displayUnitCount()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-allianceexpirationtext"
                                        >private function
                                        allianceExpirationText()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderplayerinfo"
                                        >private function renderPlayerInfo()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderunitinfo"
                                        >private function renderUnitInfo()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#protected-function-createrenderroot"
                                        >protected function
                                        createRenderRoot()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersplayerpanelts"
                                >./layers/PlayerPanel.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-playerpanel"
                                    >class PlayerPanel</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#protected-function-createrenderroot_1"
                                        >protected function
                                        createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-initeventbus_2"
                                        >public function initEventBus()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_15"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-async-function-tick_2"
                                        >public async function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-show_1"
                                        >public function show()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hide_2"
                                        >public function hide()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handleclose_1"
                                        >private function handleClose()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleallianceclick"
                                        >private function
                                        handleAllianceClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlebreakallianceclick"
                                        >private function
                                        handleBreakAllianceClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-opensendtroops"
                                        >private function openSendTroops()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-opensendgold"
                                        >private function openSendGold()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handledonatetroopclick"
                                        >private function
                                        handleDonateTroopClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handledonategoldclick"
                                        >private function
                                        handleDonateGoldClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-closesend"
                                        >private function closeSend()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-confirmsend"
                                        >private function confirmSend()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleembargoclick"
                                        >private function
                                        handleEmbargoClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlestopembargoclick"
                                        >private function
                                        handleStopEmbargoClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onstoptradingallclick"
                                        >private function
                                        onStopTradingAllClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onstarttradingallclick"
                                        >private function
                                        onStartTradingAllClic()k</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleemojiclick"
                                        >private function handleEmojiClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handlechat"
                                        >private function handleChat()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handletargetclick"
                                        >private function handleTargetClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-identitychipprops"
                                        >private function identityChipProps()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getrelationclass_1"
                                        >private function getRelationClass()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getrelationname_1"
                                        >private function getRelationName()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getexpirycolorclass"
                                        >private function
                                        getExpiryColorClass()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-gettraitorremainingseconds"
                                        >private function
                                        getTraitorRemainingSeconds()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendertraitorbadge"
                                        >private function
                                        renderTraitorBadge()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderrelationpillifnation"
                                        >private function
                                        renderRelationPillIfNation()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderidentityrow"
                                        >private function renderIdentityRow()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderresources"
                                        >private function renderResources()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderstats"
                                        >private function renderStats()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderalliances"
                                        >private function renderAlliances()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderallianceexpiry"
                                        >private function
                                        renderAllianceExpiry()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderactions"
                                        >private function renderActions()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_18"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersradialmenuts"
                                >./layers/RadialMenu.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-closeradialmenuevent"
                                    >class CloseRadialMenuEvent</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#constructor-closeradialmenuevent"
                                        >constructor CloseRadialMenuEvent()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#interface-tooltipitem"
                                    >interface TooltipItem</a
                                  >
                                </li>
                                <li>
                                  <a href="#interface-radialmenuconfig"
                                    >interface RadialMenuConfig</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-radialmenu-implements-layer"
                                    >class RadialMenu implements Layer</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#constructor-radialmenu"
                                        >constructor RadialMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_16"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-showradialmenu"
                                        >public function showRadialMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hideradialmenu"
                                        >public function hideRadialMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-disableallbuttons"
                                        >public function disableAllButtons()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-updatecenterbuttonstate"
                                        >public function
                                        updateCenterButtonState()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-ismenuvisible"
                                        >public function isMenuVisible()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-getcurrentlevel"
                                        >public function getCurrentLevel()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setparams"
                                        >public function setParams()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-refreshmenu"
                                        >public function refreshMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-refresh"
                                        >public function refresh()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_7"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_9"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersradialmenuelementsts"
                                >./layers/RadialMenuElements.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-menuelementparams"
                                    >interface MenuElementParams</a
                                  >
                                </li>
                                <li>
                                  <a href="#interface-menuelement"
                                    >interface MenuElement</a
                                  >
                                </li>
                                <li>
                                  <a href="#interface-tooltipkey"
                                    >interface TooltipKey</a
                                  >
                                </li>
                                <li>
                                  <a href="#interface-centerbuttonelement"
                                    >interface CenterButtonElement</a
                                  >
                                </li>
                                <li>
                                  <a href="#constant-colors">constant COLORS</a>
                                </li>
                                <li><a href="#enum-slot">enum Slot</a></li>
                                <li>
                                  <a href="#public-function-getallenabledunits"
                                    >public function getAllEnabledUnits()</a
                                  >
                                  <ul>
                                    <li><a href="#behavior">Behavior</a></li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#public-function-createmenuelements"
                                    >public function createMenuElements()</a
                                  >
                                  <ul>
                                    <li><a href="#behavior_1">Behavior</a></li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#all-exported-menuelement-constants"
                                    >All exported MenuElement constants</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#example-deleteunitelement-action-behavior"
                                        >Example: deleteUnitElement action
                                        behavior</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a
                                    href="#exported-centerbuttonelement-constant"
                                    >exported CenterButtonElement constant</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersrailroadlayerts"
                                >./layers/RailroadLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-railroadlayer"
                                    >class RailroadLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructorgame-gameview-transformhandler-transformhandler"
                                        >public constructor constructor(game:
                                        GameView, transformHandler:
                                        TransformHandler)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_10"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_14"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-updaterailcolors"
                                        >public function updateRailColors()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_17"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_3"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-renderlayercontext-canvasrenderingcontext2d"
                                        >public function renderLayer(context:
                                        CanvasRenderingContext2D)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlerailroadrenderingrailupdate-railroadupdate"
                                        >private function
                                        handleRailroadRendering(railUpdate:
                                        RailroadUpdate)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-paintrailroadrailroad-railtile"
                                        >private function
                                        paintRailroad(railRoad: RailTile)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-clearrailroadrailroad-railtile"
                                        >private function
                                        clearRailroad(railRoad: RailTile)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-paintrailrailroad-railtile"
                                        >public function paintRail(railRoad:
                                        RailTile)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-paintrailrectscontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype"
                                        >private function
                                        paintRailRects(context:
                                        CanvasRenderingContext2D, x: number, y:
                                        number, direction: RailType)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-paintbridgecontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype"
                                        >private function paintBridge(context:
                                        CanvasRenderingContext2D, x: number, y:
                                        number, direction: RailType)</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersrailroadspritests"
                                >./layers/RailroadSprites.ts</a
                              >
                              <ul>
                                <li>
                                  <a
                                    href="#function-getrailroadrectstype-railtype"
                                    >function getRailroadRects(type:
                                    RailType)</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#function-horizontalrailroadrects"
                                        >function horizontalRailroadRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#function-verticalrailroadrects"
                                        >function verticalRailroadRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-toprightrailroadcornerrects"
                                        >function
                                        topRightRailroadCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-topleftrailroadcornerrects"
                                        >function
                                        topLeftRailroadCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-bottomrightrailroadcornerrects"
                                        >function
                                        bottomRightRailroadCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-bottomleftrailroadcornerrects"
                                        >function
                                        bottomLeftRailroadCornerRects()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a
                                    href="#function-getbridgerectstype-railtype"
                                    >function getBridgeRects(type: RailType)</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#function-horizontalbridge"
                                        >function horizontalBridge()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#function-verticalbridge"
                                        >function verticalBridge()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-toprightbridgecornerrects"
                                        >function topRightBridgeCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-bottomleftbridgecornerrects"
                                        >function
                                        bottomLeftBridgeCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-topleftbridgecornerrects"
                                        >function topLeftBridgeCornerRects()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#function-bottomrightbridgecornerrects"
                                        >function
                                        bottomRightBridgeCornerRects()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerssamradiuslayerts"
                                >./layers/SAMRadiusLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-samradiuslayer"
                                    >class SAMRadiusLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-samradiuslayergame-eventbus-transformhandler-uistate"
                                        >public constructor SAMRadiusLayer(game,
                                        eventBus, transformHandler, uiState)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_18"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handletogglestructuree"
                                        >private function
                                        handleToggleStructure(e)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updatestrokevisibility"
                                        >private function
                                        updateStrokeVisibility()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_11"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_15"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-renderlayercontext"
                                        >public function renderLayer(context)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_4"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-drawcirclesunioncircles"
                                        >private function
                                        drawCirclesUnion(circles)</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerssendresourcesmodalts"
                                >./layers/SendResourcesModal.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-sendresourcemodal"
                                    >class SendResourceModal</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_12"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#protected-function-connectedcallback"
                                        >protected function
                                        connectedCallback()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#protected-function-updatedchanged"
                                        >protected function updated(changed)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-closemodal"
                                        >private function closeModal()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-confirm"
                                        >private function confirm()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handlekeydowne"
                                        >private function handleKeydown(e)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-tonumx"
                                        >private function toNum(x)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-gettotalnumber"
                                        >private function getTotalNumber()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-sanitizepercentp"
                                        >private function sanitizePercent(p)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getcapacityleft"
                                        >private function getCapacityLeft()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getpercentbasis"
                                        >private function getPercentBasis()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-limitamountproposed"
                                        >private function
                                        limitAmount(proposed)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-clampsendn"
                                        >private function clampSend(n)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-percentofbasisn"
                                        >private function percentOfBasis(n)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-keepafterallowed"
                                        >private function keepAfter(allowed)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-getfillcolor"
                                        >private function getFillColor()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getminkeepratio"
                                        >private function getMinKeepRatio()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-istargetalive"
                                        >private function isTargetAlive()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-issenderalive"
                                        >private function isSenderAlive()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderheader"
                                        >private function renderHeader()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderavailable"
                                        >private function renderAvailable()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderpresetspercentnow"
                                        >private function
                                        renderPresets(percentNow)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendersliderpercentnow"
                                        >private function
                                        renderSlider(percentNow)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendercapacitynoteallowed"
                                        >private function
                                        renderCapacityNote(allowed)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendersummaryallowed"
                                        >private function
                                        renderSummary(allowed)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-renderactions_1"
                                        >private function renderActions()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderdeadnote"
                                        >private function renderDeadNote()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-rendersliderstyles"
                                        >private function
                                        renderSliderStyles()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_19"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerssettingsmodalts"
                                >./layers/SettingsModal.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-showsettingsmodalevent"
                                    >class ShowSettingsModalEvent</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-showsettingsmodaleventisvisible-shouldpause-ispaused"
                                        >public constructor
                                        ShowSettingsModalEvent(isVisible?,
                                        shouldPause?, isPaused?)</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#class-settingsmodal"
                                    >class SettingsModal</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#public-function-init_19"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_13"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-connectedcallback"
                                        >public function connectedCallback()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-disconnectedcallback_2"
                                        >public function
                                        disconnectedCallback()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleoutsideclickevent"
                                        >private function
                                        handleOutsideClick(event)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlekeydownevent"
                                        >private function
                                        handleKeyDown(event)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-openmodal"
                                        >public function openModal()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-closemodal"
                                        >public function closeModal()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-pausegamepause"
                                        >private function pauseGame(pause)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onterrainbuttonclick"
                                        >private function
                                        onTerrainButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontoggleemojisbuttonclick"
                                        >private function
                                        onToggleEmojisButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontogglestructurespritesbuttonclick"
                                        >private function
                                        onToggleStructureSpritesButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontogglespecialeffectsbuttonclick"
                                        >private function
                                        onToggleSpecialEffectsButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontoggledarkmodebuttonclick"
                                        >private function
                                        onToggleDarkModeButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontogglerandomnamemodebuttonclick"
                                        >private function
                                        onToggleRandomNameModeButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontoggleleftclickopensmenu"
                                        >private function
                                        onToggleLeftClickOpensMenu()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-ontoggleperformanceoverlaybuttonclick"
                                        >private function
                                        onTogglePerformanceOverlayButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onexitbuttonclick_1"
                                        >private function onExitButtonClick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onvolumechangeevent"
                                        >private function
                                        onVolumeChange(event)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onsoundeffectsvolumechangeevent"
                                        >private function
                                        onSoundEffectsVolumeChange(event)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_20"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersspawntimerts"
                                >./layers/SpawnTimer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-spawntimer"
                                    >class SpawnTimer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_14"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_20"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_16"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_12"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_21"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#private-function-sumiteratorvalues"
                                    >private function sumIterator(values)</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersstructuredrawingutilsts"
                                >./layers/StructureDrawingUtils.ts</a
                              >
                              <ul>
                                <li><a href="#constants_2">Constants</a></li>
                                <li>
                                  <a href="#type-shapetype">Type ShapeType</a>
                                </li>
                                <li>
                                  <a href="#class-spritefactory"
                                    >class SpriteFactory</a
                                  >
                                  <ul>
                                    <li>
                                      <a href="#constructor-spritefactory"
                                        >constructor SpriteFactory()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-loadicon"
                                        >private function loadIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-invalidatetexturecache"
                                        >private function
                                        invalidateTextureCache()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createghostcontainer"
                                        >public function
                                        createGhostContainer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createunitcontainer"
                                        >public function
                                        createUnitContainer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-createtexture"
                                        >private function createTexture()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-createicon"
                                        >private function createIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-createrange"
                                        >public function createRange()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getimagecolored"
                                        >private function getImageColored()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersstructureiconslayerts"
                                >./layers/StructureIconsLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-structurerenderinfo"
                                    >class StructureRenderInfo</a
                                  >
                                </li>
                                <li>
                                  <a href="#class-structureiconslayer"
                                    >class StructureIconsLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-structureiconslayer"
                                        >public constructor
                                        StructureIconsLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-setuprenderer"
                                        >public function setupRenderer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_13"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_21"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-resizecanvas_1"
                                        >public function resizeCanvas()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_17"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_5"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_8"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderghost"
                                        >public function renderGhost()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createstructure"
                                        >private function createStructure()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-moveghost"
                                        >private function moveGhost()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createghoststructure"
                                        >private function
                                        createGhostStructure()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-clearghoststructure"
                                        >private function
                                        clearGhostStructure()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-removeghoststructure"
                                        >private function
                                        removeGhostStructure()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-togglestructures"
                                        >private function toggleStructures()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-findrenderbyunit"
                                        >private function findRenderByUnit()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleactiveunit"
                                        >private function handleActiveUnit()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleinactiveunit"
                                        >private function
                                        handleInactiveUnit()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-modifyvisibility"
                                        >private function modifyVisibility()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-checkfordeletionstate"
                                        >private function
                                        checkForDeletionState()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-checkforconstructionstate"
                                        >private function
                                        checkForConstructionState()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-checkforownershipchange"
                                        >private function
                                        checkForOwnershipChange()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-checkforlevelchange"
                                        >private function
                                        checkForLevelChange()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-computenewlocation"
                                        >private function
                                        computeNewLocation()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-addnewstructure"
                                        >private function addNewStructure()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createlevelsprite"
                                        >private function createLevelSprite()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createdotsprite"
                                        >private function createDotSprite()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-createiconsprite"
                                        >private function createIconSprite()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-deletestructure"
                                        >private function deleteStructure()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersstructurelayersts"
                                >./layers/StructureLayers.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-structurelayer"
                                    >class StructureLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-structurelayer"
                                        >public constructor StructureLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_14"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_18"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_22"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_6"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_9"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-loadicon_1"
                                        >private function loadIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-loadicondata"
                                        >private function loadIconData()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-isunittypesupported"
                                        >private function
                                        isUnitTypeSupported()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleunitrendering"
                                        >private function
                                        handleUnitRendering()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-drawborder"
                                        >private function drawBorder()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-rendericon"
                                        >private function renderIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-paintcell"
                                        >public function paintCell()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-clearcell"
                                        >public function clearCell()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersteamstatsts"
                                >./layers/TeamStats.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-teamstats">class TeamStats</a>
                                  <ul>
                                    <li>
                                      <a href="#public-constructor"
                                        >public constructor</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_15"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_23"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_19"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updateteamstats"
                                        >private function updateTeamStats()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_10"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_15"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_22"
                                        >public function render()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#interface-teamentry"
                                    >interface TeamEntry</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#private-function-formatpercentage_1"
                                        >private function formatPercentage()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersterrainlayerts"
                                >./layers/TerrainLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-terrainlayer"
                                    >class TerrainLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructorgame-gameview-transformhandler-transformhandler_1"
                                        >public constructor constructor(game:
                                        GameView, transformHandler:
                                        TransformHandler)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_16"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_20"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_24"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#protected-function-redraw"
                                        >protected function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#protected-function-initimagedata"
                                        >protected function initImageData()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-renderlayercontext-canvasrenderingcontext2d_1"
                                        >public function renderLayer(context:
                                        CanvasRenderingContext2D)</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersterritorylayerts"
                                >./layers/TerritoryLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-territorylayer"
                                    >class TerritoryLayer</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructorgame-gameview-eventbus-eventbus-transformhandler-transformhandler-usersettings-usersettings"
                                        >public constructor constructor(game:
                                        GameView, eventBus: EventBus,
                                        transformHandler: TransformHandler,
                                        userSettings: UserSettings)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_17"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-async-function-paintplayerborderplayer-playerview"
                                        >public async function
                                        paintPlayerBorder(player: PlayerView)</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_21"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-spawnhighlight"
                                        >private function spawnHighlight()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-drawfocusedplayerhighlight"
                                        >private function
                                        drawFocusedPlayerHighlight()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_25"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-onmouseoverevent-mouseoverevent"
                                        >public function onMouseOver(event:
                                        MouseOverEvent)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updatehighlightedterritory"
                                        >private function
                                        updateHighlightedTerritory()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-getterritoryatcellcell-x-number-y-number"
                                        >private function
                                        getTerritoryAtCell(cell: { x: number; y:
                                        number })</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_7"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-redrawborderplayers-playerview"
                                        >public function
                                        redrawBorder(...players:
                                        PlayerView[])</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-initimagedata"
                                        >public function initImageData()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-renderlayercontext-canvasrenderingcontext2d_2"
                                        >public function renderLayer(context:
                                        CanvasRenderingContext2D)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#protected-function-renderterritory"
                                        >protected function renderTerritory()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-paintterritorytile-tileref-isborder-boolean-false"
                                        >public function paintTerritory(tile:
                                        TileRef, isBorder: boolean = false)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-alternateviewcolorother-playerview"
                                        >public function
                                        alternateViewColor(other: PlayerView)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-paintalternateviewtiletile-tileref-other-playerview"
                                        >public function
                                        paintAlternateViewTile(tile: TileRef,
                                        other: PlayerView)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-painttileimagedata-imagedata-tile-tileref-color-colord-alpha-number"
                                        >public function paintTile(imageData:
                                        ImageData, tile: TileRef, color: Colord,
                                        alpha: number)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-cleartiletile-tileref"
                                        >public function clearTile(tile:
                                        TileRef)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-clearalternativetiletile-tileref"
                                        >public function
                                        clearAlternativeTile(tile: TileRef)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-enqueuetiletile-tileref"
                                        >public function enqueueTile(tile:
                                        TileRef)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-async-function-enqueueplayerborderplayer-playerview"
                                        >public async function
                                        enqueuePlayerBorder(player:
                                        PlayerView)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-painthighlighttiletile-tileref-color-colord-alpha-number"
                                        >public function
                                        paintHighlightTile(tile: TileRef, color:
                                        Colord, alpha: number)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-clearhighlighttiletile-tileref"
                                        >public function
                                        clearHighlightTile(tile: TileRef)</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-drawbreathingringcx-number-cy-number-minrad-number-maxrad-number-radius-number-transparentcolor-colord-breathingcolor-colord"
                                        >private function drawBreathingRing(cx:
                                        number, cy: number, minRad: number,
                                        maxRad: number, radius: number,
                                        transparentColor: Colord,
                                        breathingColor: Colord)</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersuilayerts">./layers/UILayer.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-uilayer">class UILayer</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_18"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_22"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_26"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_11"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_8"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-onunitevent"
                                        >private function onUnitEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-clearicon"
                                        >private function clearIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-drawicon"
                                        >private function drawIcon()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onunitselection"
                                        >private function onUnitSelection()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-clearselectionbox"
                                        >private function clearSelectionBox()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-drawselectionbox"
                                        >public function drawSelectionBox()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-drawhealthbar"
                                        >public function drawHealthBar()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updateprogressbars"
                                        >private function
                                        updateProgressBars()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-getprogress"
                                        >private function getProgress()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-deletionprogress"
                                        >private function deletionProgress()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createloadingbar"
                                        >public function createLoadingBar()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-paintcell_1"
                                        >public function paintCell()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-clearcell_1"
                                        >public function clearCell()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersunitdisplayts"
                                >./layers/UnitDisplay.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-unitdisplay"
                                    >class UnitDisplay</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_16"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_27"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-cost"
                                        >private function cost()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-canbuild"
                                        >private function canBuild()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_23"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_23"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-renderunititem"
                                        >private function renderUnitItem()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layersunitlayerts"
                                >./layers/UnitLayer.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-unitlayer">class UnitLayer</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_19"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_24"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_28"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-findwarshipsnearcell"
                                        >private function
                                        findWarshipsNearCell()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-onmouseup"
                                        >private function onMouseUp()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-onunitselectionchange"
                                        >private function
                                        onUnitSelectionChange()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleunitdeactivation"
                                        >private function
                                        handleUnitDeactivation()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_12"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-onalternativeviewevent"
                                        >public function
                                        onAlternativeViewEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-redraw_9"
                                        >public function redraw()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-updateunitssprites"
                                        >private function
                                        updateUnitsSprites()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-clearunitscells"
                                        >private function clearUnitsCells()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-drawunitscells"
                                        >private function drawUnitsCells()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-relationship"
                                        >private function relationship()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-onunitevent_1"
                                        >public function onUnitEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlewarshipevent"
                                        >private function
                                        handleWarShipEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleshellevent"
                                        >private function handleShellEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlemissileevent"
                                        >private function
                                        handleMissileEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-drawtrail"
                                        >private function drawTrail()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-cleartrail"
                                        >private function clearTrail()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-handlenuke"
                                        >private function handleNuke()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handlemirvwarhead"
                                        >private function handleMIRVWarhead()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handletradeshipevent"
                                        >private function
                                        handleTradeShipEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handletrainevent"
                                        >private function handleTrainEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#private-function-handleboatevent"
                                        >private function handleBoatEvent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-paintcell_2"
                                        >public function paintCell()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-clearcell_2"
                                        >public function clearCell()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-drawsprite"
                                        >public function drawSprite()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#layerswinmodalts"
                                >./layers/WinModal.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#class-winmodal">class WinModal</a>
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_12"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-createrenderroot_17"
                                        >public function createRenderRoot()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-render_24"
                                        >public function render()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-innerhtml"
                                        >public function innerHtml()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-renderpatternbutton"
                                        >public function
                                        renderPatternButton()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-async-function-loadpatterncontent"
                                        >public async function
                                        loadPatternContent()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-steamwishlist"
                                        >public function steamWishlist()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-async-function-show"
                                        >public async function show()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-hide_3"
                                        >public function hide()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-_handleexit"
                                        >private function _handleExit()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-init_29"
                                        >public function init()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-tick_25"
                                        >public function tick()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-renderlayer_13"
                                        >public function renderLayer()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-shouldtransform_20"
                                        >public function shouldTransform()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#style">Style</a></li>
                        <li><a href="#data">Data</a></li>
                        <li>
                          <a href="#sound">Sound</a>
                          <ul>
                            <li>
                              <a href="#soundmanagerts">SoundManager.ts</a>
                              <ul>
                                <li>
                                  <a href="#class-soundmanager"
                                    >class SoundManager</a
                                  >
                                  <ul>
                                    <li>
                                      <a
                                        href="#public-constructor-constructor_13"
                                        >public constructor constructor()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-playbackgroundmusic"
                                        >public function
                                        playBackgroundMusic()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-stopbackgroundmusic"
                                        >public function
                                        stopBackgroundMusic()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-setbackgroundmusicvolume"
                                        >public function
                                        setBackgroundMusicVolume()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#private-function-playnext"
                                        >private function playNext()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-loadsoundeffect"
                                        >public function loadSoundEffect()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-playsoundeffect"
                                        >public function playSoundEffect()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-setsoundeffectsvolume"
                                        >public function
                                        setSoundEffectsVolume()</a
                                      >
                                    </li>
                                    <li>
                                      <a href="#public-function-stopsoundeffect"
                                        >public function stopSoundEffect()</a
                                      >
                                    </li>
                                    <li>
                                      <a
                                        href="#public-function-unloadsoundeffect"
                                        >public function unloadSoundEffect()</a
                                      >
                                    </li>
                                  </ul>
                                </li>
                                <li>
                                  <a href="#enum-soundeffect"
                                    >enum SoundEffect</a
                                  >
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="#utilities">Utilities</a>
                          <ul>
                            <li>
                              <a href="#replayspeedmultiplierts"
                                >ReplaySpeedMultiplier.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#enum-replayspeedmultiplier"
                                    >enum ReplaySpeedMultiplier</a
                                  >
                                </li>
                                <li>
                                  <a href="#const-defaultreplayspeedmultiplier"
                                    >const defaultReplaySpeedMultiplier</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li>
                              <a href="#renderunittypeoptionsts"
                                >RenderUnitTypeOptions.ts</a
                              >
                              <ul>
                                <li>
                                  <a href="#interface-unittyperendercontext"
                                    >interface UnitTypeRenderContext</a
                                  >
                                </li>
                                <li>
                                  <a href="#const-unitoptions"
                                    >const unitOptions</a
                                  >
                                </li>
                                <li>
                                  <a href="#function-renderunittypeoptions"
                                    >function renderUnitTypeOptions()</a
                                  >
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <h2 id="components">Components</h2>
                <h3 id="difficultiests">Difficulties.ts</h3>
                <h4 id="class-difficultydisplay">
                  class <code>DifficultyDisplay</code>
                </h4>
                <p>
                  Displays a visual indicator of difficulty using skull icons
                  with different states and sizes.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>difficultyKey</code></td>
                      <td><code>string</code></td>
                      <td>
                        Current difficulty key determining which icons are
                        active (defaults to <code>""</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-getdifficultyicondifficultykey-string">
                  private function
                  <code>getDifficultyIcon(difficultyKey: string)</code>
                </h5>
                <p>
                  Returns the corresponding difficulty icon markup as an HTML
                  template.
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>difficultyKey</code></td>
                      <td><code>string</code></td>
                      <td>Key representing the current difficulty.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import("lit").TemplateResult</code>.</p>
                <h5 id="public-function-render">
                  public function <code>render()</code>
                </h5>
                <p>
                  No parameters. Renders the difficulty indicator container with
                  the appropriate difficulty icon. Returns
                  <code>import("lit").TemplateResult</code>.
                </p>
                <h3 id="mapsts">Maps.ts</h3>
                <h4 id="const-mapdescription">
                  const <code>MapDescription</code>
                </h4>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>MapDescription</code></td>
                      <td>
                        <code
                          >Record&lt;keyof typeof GameMapType, string&gt;</code
                        >
                      </td>
                      <td>
                        Map of <code>GameMapType</code> keys to human-readable
                        map names.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-mapdisplay">class <code>MapDisplay</code></h4>
                <p>
                  Displays a selectable map option with loading state and
                  rendered preview.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>mapKey</code></td>
                      <td><code>string</code></td>
                      <td>
                        Key of the map to display (defaults to <code>""</code>).
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selected</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the map is selected (defaults to
                        <code>false</code>).
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>translation</code></td>
                      <td><code>string</code></td>
                      <td>Optional translated map name.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>mapWebpPath</code></td>
                      <td><code>string \| null</code></td>
                      <td>Path to the WebP map image (private state).</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>mapName</code></td>
                      <td><code>string \| null</code></td>
                      <td>Loaded map name (private state).</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isLoading</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Loading state of the map (private state, defaults to
                        <code>true</code>).
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-loadmapdata">
                  private function <code>loadMapData()</code>
                </h5>
                <p>
                  No parameters. Loads map data and updates
                  <code>mapWebpPath</code> and <code>mapName</code> states.
                  Returns <code>Promise&lt;void&gt;</code>.
                </p>
                <h5 id="public-function-render_1">
                  public function <code>render()</code>
                </h5>
                <p>
                  No parameters. Renders the map card with loading, error, or
                  preview image and map name. Returns
                  <code>import("lit").TemplateResult</code>.
                </p>
                <h3 id="modaloverlayts">ModalOverlay.ts</h3>
                <h4 id="class-modaloverlay">class <code>ModalOverlay</code></h4>
                <p>
                  Renders a full-screen overlay that can be shown or hidden and
                  closes on click.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the overlay is visible (defaults to
                        <code>false</code>, reflected to attribute).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-render_2">
                  public function <code>render()</code>
                </h5>
                <p>
                  No parameters. Renders the overlay div and sets visibility
                  based on <code>visible</code>. Returns
                  <code>import("lit").TemplateResult</code>.
                </p>
                <h3 id="newsbuttonts">NewsButton.ts</h3>
                <h4 id="class-newsbutton">class <code>NewsButton</code></h4>
                <p>
                  Displays a news button that activates when a new version is
                  detected and opens the news modal.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>hidden</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the news button is hidden (defaults to
                        <code>false</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>isActive</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the button is active due to a new version
                        (private state).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-checkfornewversion">
                  private function <code>checkForNewVersion()</code>
                </h5>
                <p>
                  No parameters. Checks localStorage for the last seen version
                  and updates <code>isActive</code> if a new version is
                  detected. Returns <code>void</code>.
                </p>
                <h5 id="private-function-handleclick">
                  private function <code>handleClick()</code>
                </h5>
                <p>
                  No parameters. Marks the current version as seen, deactivates
                  the button, and opens the <code>NewsModal</code>. Returns
                  <code>void</code>.
                </p>
                <h5 id="public-function-render_3">
                  public function <code>render()</code>
                </h5>
                <p>
                  No parameters. Renders the news button with icon and
                  conditional active or hidden classes. Returns
                  <code>import("lit").TemplateResult</code>.
                </p>
                <h5 id="public-function-createrenderroot">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  No parameters. Overrides LitElement's shadow root to render in
                  light DOM. Returns <code>this</code>.
                </p>
                <h3 id="patternbuttonts">PatternButton.ts</h3>
                <h4 id="const-button_width">const <code>BUTTON_WIDTH</code></h4>
                <p>
                  No parameters. Specifies the default width for pattern
                  buttons. Returns <code>number</code>.
                </p>
                <h4 id="class-patternbutton">
                  class <code>PatternButton</code>
                </h4>
                <p>
                  Renders a pattern selection button with optional purchase
                  handling and preview.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>pattern</code></td>
                      <td><code>Pattern \| null</code></td>
                      <td>
                        Pattern object to display (defaults to
                        <code>null</code>).
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>colorPalette</code></td>
                      <td><code>ColorPalette \| null</code></td>
                      <td>
                        Associated color palette (defaults to
                        <code>null</code>).
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>requiresPurchase</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether purchase is required to select (defaults to
                        <code>false</code>).
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>onSelect</code></td>
                      <td>
                        <code>(pattern: PlayerPattern \| null) =&gt; void</code>
                      </td>
                      <td>Callback when the pattern is selected.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>onPurchase</code></td>
                      <td>
                        <code
                          >(pattern: Pattern, colorPalette: ColorPalette \|
                          null) =&gt; void</code
                        >
                      </td>
                      <td>Callback when the purchase button is clicked.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-translatecosmetic">
                  private function <code>translateCosmetic()</code>
                </h5>
                <p>
                  Translates cosmetic name or formats it if translation not
                  available
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>prefix</code></td>
                      <td><code>string</code></td>
                      <td>Translation key prefix.</td>
                    </tr>
                    <tr>
                      <td><code>patternName</code></td>
                      <td><code>string</code></td>
                      <td>Pattern or color palette name.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>string</code>.</p>
                <h5 id="private-function-handleclick_1">
                  private function <code>handleClick()</code>
                </h5>
                <p>
                  No parameters. Triggers <code>onSelect</code> callback with
                  current pattern or <code>null</code>. Returns
                  <code>void</code>.
                </p>
                <h5 id="private-function-handlepurchase">
                  private function <code>handlePurchase()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event to stop propagation.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Triggers <code>onPurchase</code> callback for the current
                  pattern and color palette.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-render_4">
                  public function <code>render()</code>
                </h5>
                <p>No parameters.</p>
                <p>
                  Renders the pattern button, optional color palette, preview
                  image, and purchase button if required.
                </p>
                <p>Returns <code>import("lit").TemplateResult</code>.</p>
                <h5 id="public-function-createrenderroot_1">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  No parameters. Overrides shadow root to render in light DOM.
                  Returns <code>this</code>.
                </p>
                <h4 id="function-renderpatternpreview">
                  function <code>renderPatternPreview()</code>
                </h4>
                <p>Renders pattern preview image or blank placeholder.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>pattern</code></td>
                      <td><code>PlayerPattern | null</code></td>
                      <td>Pattern to render.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>width</code></td>
                      <td><code>number</code></td>
                      <td>Width of the preview.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>height</code></td>
                      <td><code>number</code></td>
                      <td>Height of the preview.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import("lit").TemplateResult</code>.</p>
                <h3 id="actionbuttonts">ActionButton.ts</h3>
                <h4 id="function-actionbutton">
                  function <code>actionButton()</code>
                </h4>
                <p>
                  Renders a styled HTML button with icon, label, and click
                  behavior using Lit.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>onClick</code></td>
                      <td><code>(e: MouseEvent) =&gt; void</code></td>
                      <td>Callback executed when the button is clicked.</td>
                    </tr>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>ButtonVariant</code></td>
                      <td>
                        Button color variant (defaults to <code>normal</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>string</code></td>
                      <td>URL or path to the button icon.</td>
                    </tr>
                    <tr>
                      <td><code>iconAlt</code></td>
                      <td><code>string</code></td>
                      <td>Alternative text for the button icon.</td>
                    </tr>
                    <tr>
                      <td><code>title</code></td>
                      <td><code>string</code></td>
                      <td>Tooltip and ARIA label for the button.</td>
                    </tr>
                    <tr>
                      <td><code>label</code></td>
                      <td><code>string</code></td>
                      <td>Text label displayed below the icon.</td>
                    </tr>
                    <tr>
                      <td><code>disabled</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the button is disabled (defaults to
                        <code>false</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a Lit <code>TemplateResult</code> rendering the button
                  with appropriate styles, icon, and label. Returns
                  <code>TemplateResult</code>.
                </p>
                <h3 id="dividerts">Divider.ts</h3>
                <h4 id="class-divider">class <code>Divider</code></h4>
                <p>
                  Renders a horizontal divider with configurable spacing and
                  color.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>spacing</code></td>
                      <td><code>DividerSpacing</code></td>
                      <td>
                        Vertical spacing of the divider (defaults to
                        <code>md</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>string</code></td>
                      <td>
                        CSS class for divider color (defaults to
                        <code>bg-zinc-700/80</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_2">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  No parameters. Overrides LitElement's shadow root creation to
                  render in light DOM. Returns <code>this</code>.
                </p>
                <h5 id="public-function-render_5">
                  public function <code>render()</code>
                </h5>
                <p>
                  No parameters. Renders the divider element with spacing and
                  color classes. Returns <code>TemplateResult</code>.
                </p>
                <h2 id="graphics">Graphics</h2>
                <h3 id="animatedspritets">AnimatedSprite.ts</h3>
                <h4 id="class-animatedsprite">
                  class <code>AnimatedSprite</code>
                </h4>
                <p>
                  Represents a frame-based animation drawn on a canvas. Handles
                  frame timing, looping, rendering, and origin offsets based on
                  elapsed time.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>image</code></td>
                      <td><code>CanvasImageSource</code></td>
                      <td>Source image for the sprite sheet.</td>
                    </tr>
                    <tr>
                      <td><code>frameWidth</code></td>
                      <td><code>number</code></td>
                      <td>Width of a single frame in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>frameCount</code></td>
                      <td><code>number</code></td>
                      <td>Number of frames in the sprite sheet.</td>
                    </tr>
                    <tr>
                      <td><code>frameDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of each frame in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>looping</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the animation loops (defaults to
                        <code>false</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>originX</code></td>
                      <td><code>number</code></td>
                      <td>Horizontal origin offset in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>originY</code></td>
                      <td><code>number</code></td>
                      <td>Vertical origin offset in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>frameHeight</code></td>
                      <td><code>number</code></td>
                      <td>Height of each frame.</td>
                    </tr>
                    <tr>
                      <td><code>currentFrame</code></td>
                      <td><code>number</code></td>
                      <td>Index of the current frame.</td>
                    </tr>
                    <tr>
                      <td><code>elapsedTime</code></td>
                      <td><code>number</code></td>
                      <td>Accumulated time since the last frame change.</td>
                    </tr>
                    <tr>
                      <td><code>active</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the animation is currently playing.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>image</code></td>
                      <td><code>CanvasImageSource</code></td>
                      <td>Source image for the sprite sheet.</td>
                    </tr>
                    <tr>
                      <td><code>frameWidth</code></td>
                      <td><code>number</code></td>
                      <td>Width of a single frame in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>frameCount</code></td>
                      <td><code>number</code></td>
                      <td>Number of frames in the sprite sheet.</td>
                    </tr>
                    <tr>
                      <td><code>frameDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of each frame in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>looping</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the animation loops (default
                        <code>false</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>originX</code></td>
                      <td><code>number</code></td>
                      <td>Horizontal origin offset in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>originY</code></td>
                      <td><code>number</code></td>
                      <td>Vertical origin offset in pixels.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Throws an error if the <code>image</code> does not have a
                  <code>height</code> property.
                </p>
                <h5 id="public-function-update">
                  public function <code>update()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>deltaTime</code></td>
                      <td><code>number</code></td>
                      <td>Time passed since the last update.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Updates the <code>currentFrame</code> and
                  <code>active</code> properties based on elapsed time.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-isactive">
                  public function <code>isActive()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>  whether the animation is
                  currently active.
                </p>
                <h5 id="public-function-lifetime">
                  public function <code>lifeTime()</code>
                </h5>
                <p>
                  Returns <code>number | undefined</code>  total length of the
                  animation in milliseconds or <code>undefined</code> for
                  looping animations.
                </p>
                <h5 id="public-function-draw">
                  public function <code>draw()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate for drawing.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate for drawing.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Draws the current active frame onto <code>ctx</code> at
                  <code>[x, y]</code> adjusted by origin offsets.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-reset">
                  public function <code>reset()</code>
                </h5>
                <p>
                  Resets the animation to the first frame and resets elapsed
                  time.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-setorigin">
                  public function <code>setOrigin()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>xRatio</code></td>
                      <td><code>number</code></td>
                      <td>New horizontal origin in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>yRatio</code></td>
                      <td><code>number</code></td>
                      <td>New vertical origin in pixels.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Updates the origin offsets used for drawing.</p>
                <p>Returns <code>void</code>.</p>
                <h3 id="animatedspriteloaderts">AnimatedSpriteLoader.ts</h3>
                <h4 id="class-animatedspriteloader">
                  class <code>AnimatedSpriteLoader</code>
                </h4>
                <p>
                  Manages loading, colorizing, caching, and creation of
                  <a href="#class-animatedsprite"
                    >class <code>AnimatedSprite</code></a
                  >
                  instances.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteImageMap</code></td>
                      <td><code>Map&lt;FxType, HTMLCanvasElement&gt;</code></td>
                      <td>
                        Stores loaded sprite images as canvases keyed by
                        <code>FxType</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>coloredAnimatedSpriteCache</code></td>
                      <td><code>Map&lt;string, HTMLCanvasElement&gt;</code></td>
                      <td>Caches colorized canvases per owner.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-loadallanimatedspriteimages">
                  public function <code>loadAllAnimatedSpriteImages()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Loads all images referenced in
                  <code>ANIMATED_SPRITE_CONFIG</code> into canvases. Logs an
                  error for any failed loads.
                </p>
                <h5 id="private-function-createregularanimatedsprite">
                  private function <code>createRegularAnimatedSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxType</code></td>
                      <td><code>FxType</code></td>
                      <td>The FX type to create an animation for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns
                  <a href="#class-animatedsprite"
                    >class <code>AnimatedSprite</code></a
                  >
                  | null. Returns <code>null</code> if the configuration or base
                  image is missing.
                </p>
                <h5 id="private-function-getcoloredanimatedsprite">
                  private function <code>getColoredAnimatedSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>owner</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player owning the animation.</td>
                    </tr>
                    <tr>
                      <td><code>fxType</code></td>
                      <td><code>FxType</code></td>
                      <td>The FX type.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>The theme to colorize with.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>HTMLCanvasElement | null</code>. Returns
                  <code>null</code> if the configuration or base image is
                  missing.
                </p>
                <h5 id="private-function-createcoloredanimatedspriteforunit">
                  private function
                  <code>createColoredAnimatedSpriteForUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxType</code></td>
                      <td><code>FxType</code></td>
                      <td>The FX type.</td>
                    </tr>
                    <tr>
                      <td><code>owner</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player owning the animation.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>The theme to colorize with.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns
                  <a href="#class-animatedsprite"
                    >class <code>AnimatedSprite</code></a
                  >
                  | null. Returns <code>null</code> if the configuration or
                  colorized image is missing.
                </p>
                <h5 id="public-function-createanimatedsprite">
                  public function <code>createAnimatedSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxType</code></td>
                      <td><code>FxType</code></td>
                      <td>The FX type.</td>
                    </tr>
                    <tr>
                      <td><code>owner?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional owner to colorize the sprite for.</td>
                    </tr>
                    <tr>
                      <td><code>theme?</code></td>
                      <td><code>Theme</code></td>
                      <td>Optional theme for colorization.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns
                  <a href="#class-animatedsprite"
                    >class <code>AnimatedSprite</code></a
                  >
                  | null. Returns <code>null</code> if the resources or
                  configuration are unavailable.
                </p>
                <p>
                  See also:
                  <a href="#private-function-createregularanimatedsprite"
                    >function <code>createRegularAnimatedSprite()</code></a
                  >,
                  <a href="#private-function-getcoloredanimatedsprite"
                    >function <code>getColoredAnimatedSprite()</code></a
                  >
                </p>
                <h3 id="gamerendererts">GameRenderer.ts</h3>
                <h4 id="function-createrenderer">
                  function <code>createRenderer()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>The canvas element for rendering.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game instance.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>The event bus for handling events.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>GameRenderer</code>.</p>
                <p>
                  Initializes various UI layers, sets up event listeners, and
                  prepares the canvas for rendering. Also handles references to
                  modals, sidebars, panels, and other game layers.
                </p>
                <h4 id="class-gamerenderer">class <code>GameRenderer</code></h4>
                <p>
                  Manages rendering of the entire game onto a canvas, including
                  layered drawing, transformations, and FPS tracking.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles coordinate transformations for rendering.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>Stores state for UI layers.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context of the canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_1">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game instance.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for handling events.</td>
                    </tr>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas element for rendering.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Manages rendering transformations.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>State for UI components.</td>
                    </tr>
                    <tr>
                      <td><code>layers</code></td>
                      <td><code>Layer[]</code></td>
                      <td>Array of layers to render.</td>
                    </tr>
                    <tr>
                      <td><code>fpsDisplay</code></td>
                      <td><code>FPSDisplay</code></td>
                      <td>Layer for FPS tracking.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Throws an error if the 2D canvas context is unavailable.</p>
                <h5 id="public-function-initialize">
                  public function <code>initialize()</code>
                </h5>
                <p>
                  Sets up event listeners, appends canvas to the DOM,
                  initializes layers, and starts the render loop.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-resizecanvas">
                  public function <code>resizeCanvas()</code>
                </h5>
                <p>
                  Resizes the canvas to match the window size and updates the
                  transform handler.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-redraw">
                  public function <code>redraw()</code>
                </h5>
                <p>
                  Calls <code>redraw()</code> on all layers that implement it.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-rendergame">
                  public function <code>renderGame()</code>
                </h5>
                <p>
                  Handles the main render loop: clears the canvas, applies
                  transformations, renders all layers in order, updates FPS, and
                  logs slow frames.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-tick">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Calls <code>tick()</code> on all layers that implement it.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-resize">
                  public function <code>resize()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>width</code></td>
                      <td><code>number</code></td>
                      <td>New width of the canvas.</td>
                    </tr>
                    <tr>
                      <td><code>height</code></td>
                      <td><code>number</code></td>
                      <td>New height of the canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Resizes the canvas accounting for
                  <code>devicePixelRatio</code>.
                </p>
                <p>Returns <code>void</code>.</p>
                <h3 id="nameboxcalculatorts">NameBoxCalculator.ts</h3>
                <h4 id="interface-point">interface <code>Point</code></h4>
                <p>Represents a 2D point.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="interface-rectangle">
                  interface <code>Rectangle</code>
                </h4>
                <p>Represents a rectangle.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the top-left corner</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the top-left corner</td>
                    </tr>
                    <tr>
                      <td><code>width</code></td>
                      <td><code>number</code></td>
                      <td>Width of the rectangle</td>
                    </tr>
                    <tr>
                      <td><code>height</code></td>
                      <td><code>number</code></td>
                      <td>Height of the rectangle</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="public-function-placename">
                  public function <code>placeName()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>Game</code></td>
                      <td>The game instance</td>
                    </tr>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>Player</code></td>
                      <td>The player whose name is being placed</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>NameViewData</code>. Computes the optimal
                  position and font size for a player's name based on the
                  largest cluster of tiles they control. Falls back to the
                  bounding box of border tiles if the largest cluster is not
                  available.
                </p>
                <p>
                  See also:
                  <a href="#public-function-creategrid"
                    >function <code>createGrid()</code></a
                  >,
                  <a href="#public-function-findlargestinscribedrectangle"
                    >function <code>findLargestInscribedRectangle()</code></a
                  >,
                  <a href="#public-function-calculatefontsize"
                    >function <code>calculateFontSize()</code></a
                  >
                </p>
                <h4 id="public-function-creategrid">
                  public function <code>createGrid()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>Game</code></td>
                      <td>The game instance</td>
                    </tr>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>Player</code></td>
                      <td>The player for whom the grid is created</td>
                    </tr>
                    <tr>
                      <td><code>boundingBox</code></td>
                      <td><code>{ min: Point; max: Point }</code></td>
                      <td>Bounding box to generate the grid within</td>
                    </tr>
                    <tr>
                      <td><code>scalingFactor</code></td>
                      <td><code>number</code></td>
                      <td>Factor to scale the grid by</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean[][]</code>. Generates a boolean
                  occupancy grid representing tiles controlled or owned by the
                  player. Each cell is <code>true</code> if it is a lake, owned
                  by the player, or contains fallout; otherwise
                  <code>false</code>.
                </p>
                <p>
                  See also:
                  <a href="#interface-point">interface <code>Point</code></a>
                </p>
                <h4 id="public-function-findlargestinscribedrectangle">
                  public function <code>findLargestInscribedRectangle()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>grid</code></td>
                      <td><code>boolean[][]</code></td>
                      <td>Occupancy grid</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Rectangle</code>. Finds the largest rectangle of
                  <code>true</code> values within a boolean grid.
                </p>
                <p>
                  See also:
                  <a href="#interface-rectangle"
                    >interface <code>Rectangle</code></a
                  >,
                  <a href="#public-function-largestrectangleinhistogram"
                    >function <code>largestRectangleInHistogram()</code></a
                  >
                </p>
                <h4 id="public-function-largestrectangleinhistogram">
                  public function <code>largestRectangleInHistogram()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>widths</code></td>
                      <td><code>number[]</code></td>
                      <td>Array representing column heights in a histogram</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Rectangle</code>. Computes the largest rectangle
                  that can be formed in a histogram represented by the input
                  array.
                </p>
                <p>
                  See also:
                  <a href="#interface-rectangle"
                    >interface <code>Rectangle</code></a
                  >
                </p>
                <h4 id="public-function-calculatefontsize">
                  public function <code>calculateFontSize()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>rectangle</code></td>
                      <td><code>Rectangle</code></td>
                      <td>The rectangle to fit the name into</td>
                    </tr>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>string</code></td>
                      <td>The name string to fit</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>number</code>. Calculates the font size that
                  will fit the provided name within the given rectangle,
                  constrained by width and height.
                </p>
                <p>
                  See also:
                  <a href="#interface-rectangle"
                    >interface <code>Rectangle</code></a
                  >
                </p>
                <h3 id="progressbarts">ProgressBar.ts</h3>
                <h4 id="class-progressbar">class <code>ProgressBar</code></h4>
                <p>
                  Renders a progress/loading bar on a canvas context and allows
                  updating its progress dynamically.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>colors</code></td>
                      <td><code>string[]</code></td>
                      <td>
                        Optional array of colors used to display progress
                        segments. Defaults to gray if empty.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>
                        Canvas rendering context for drawing the progress bar.
                      </td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>
                        X-coordinate of the progress bar's top-left corner.
                      </td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>
                        Y-coordinate of the progress bar's top-left corner.
                      </td>
                    </tr>
                    <tr>
                      <td><code>w</code></td>
                      <td><code>number</code></td>
                      <td>Width of the progress bar.</td>
                    </tr>
                    <tr>
                      <td><code>h</code></td>
                      <td><code>number</code></td>
                      <td>Height of the progress bar.</td>
                    </tr>
                    <tr>
                      <td><code>progress</code></td>
                      <td><code>number</code></td>
                      <td>
                        Current progress value between 0 and 1. Defaults to 0.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_2">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>colors?</code></td>
                      <td><code>string[]</code></td>
                      <td>
                        Optional array of colors for the progress segments.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context to render on.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the top-left corner.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the top-left corner.</td>
                    </tr>
                    <tr>
                      <td><code>w</code></td>
                      <td><code>number</code></td>
                      <td>Width of the progress bar.</td>
                    </tr>
                    <tr>
                      <td><code>h</code></td>
                      <td><code>number</code></td>
                      <td>Height of the progress bar.</td>
                    </tr>
                    <tr>
                      <td><code>progress?</code></td>
                      <td><code>number</code></td>
                      <td>
                        Optional initial progress from 0 to 1. Defaults to 0.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>ProgressBar</code>. Initializes the progress bar
                  and draws its initial state.
                </p>
                <h5 id="public-function-setprogress">
                  public function <code>setProgress()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>progress</code></td>
                      <td><code>number</code></td>
                      <td>
                        Progress value between 0 and 1. Values outside this
                        range are clamped.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the progress value and
                  redraws the bar. Fills background, draws the progress portion
                  with the appropriate color, and stores the updated progress.
                </p>
                <h5 id="public-function-clear">
                  public function <code>clear()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Clears the area occupied by the
                  progress bar, including a padding of
                  <code>CLEAR_PADDING</code> pixels.
                </p>
                <h5 id="public-function-getx">
                  public function <code>getX()</code>
                </h5>
                <p>
                  Returns <code>number</code>. Returns the X-coordinate of the
                  progress bar.
                </p>
                <h5 id="public-function-gety">
                  public function <code>getY()</code>
                </h5>
                <p>
                  Returns <code>number</code>. Returns the Y-coordinate of the
                  progress bar.
                </p>
                <h5 id="public-function-getprogress">
                  public function <code>getProgress()</code>
                </h5>
                <p>
                  Returns <code>number</code>. Returns the current progress
                  value between 0 and 1.
                </p>
                <h3 id="spriteloaderts">SpriteLoader.ts</h3>
                <h4 id="constants">Constants</h4>
                <h5 id="type-traintypesprite">
                  type <code>TrainTypeSprite</code>
                </h5>
                <p>Defines train sprite categories.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>Engine</code></td>
                      <td><code>"Engine"</code></td>
                      <td>Engine sprite</td>
                    </tr>
                    <tr>
                      <td><code>Carriage</code></td>
                      <td><code>"Carriage"</code></td>
                      <td>Carriage sprite</td>
                    </tr>
                    <tr>
                      <td><code>LoadedCarriage</code></td>
                      <td><code>"LoadedCarriage"</code></td>
                      <td>Loaded carriage sprite</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="sprite_config"><code>SPRITE_CONFIG</code></h5>
                <p>
                  Partial mapping of unit types and train sprites to image URLs.
                </p>
                <h5 id="spritemap"><code>spriteMap</code></h5>
                <p>
                  Map storing loaded <code>ImageBitmap</code> objects for each
                  unit type or train sprite.
                </p>
                <h5 id="coloredspritecache"><code>coloredSpriteCache</code></h5>
                <p>
                  Map caching colorized <code>HTMLCanvasElement</code> instances
                  keyed by unit, owner, and color combination.
                </p>
                <h4 id="public-function-loadallsprites">
                  public function <code>loadAllSprites()</code>
                </h4>
                <p>
                  Returns <code>Promise&lt;void&gt;</code>. Preloads all sprites
                  defined in <code>SPRITE_CONFIG</code> as
                  <code>ImageBitmap</code> and populates <code>spriteMap</code>.
                  Logs warnings if URLs are missing and errors if loading fails.
                </p>
                <h4 id="private-function-traintypetospritetype">
                  private function <code>trainTypeToSpriteType()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance representing a train</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TrainTypeSprite</code>. Maps train attributes
                  (engine, carriage, loaded) to the appropriate sprite type.
                </p>
                <h4 id="private-function-getspriteforunit">
                  private function <code>getSpriteForUnit()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>ImageBitmap | null</code>. Retrieves the
                  <code>ImageBitmap</code> for a given unit, handling train
                  types via <code>trainTypeToSpriteType()</code>. Returns
                  <code>null</code> if no sprite is loaded.
                </p>
                <h4 id="public-function-isspriteready">
                  public function <code>isSpriteReady()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Indicates whether the sprite for
                  the unit is loaded and ready for rendering.
                </p>
                <h4 id="public-function-colorizecanvas">
                  public function <code>colorizeCanvas()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>source</code></td>
                      <td>
                        <code
                          >CanvasImageSource &amp; { width: number; height:
                          number }</code
                        >
                      </td>
                      <td>Source image to colorize</td>
                    </tr>
                    <tr>
                      <td><code>colorA</code></td>
                      <td><code>Colord</code></td>
                      <td>Territory color replacement for light gray pixels</td>
                    </tr>
                    <tr>
                      <td><code>colorB</code></td>
                      <td><code>Colord</code></td>
                      <td>Border color replacement for dark gray pixels</td>
                    </tr>
                    <tr>
                      <td><code>colorC</code></td>
                      <td><code>Colord</code></td>
                      <td>
                        Spawn highlight color replacement for medium gray pixels
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>HTMLCanvasElement</code>. Creates a new canvas,
                  draws the source image, and replaces grayscale pixels with the
                  provided colors.
                </p>
                <h4 id="private-function-computespritekey">
                  private function <code>computeSpriteKey()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance</td>
                    </tr>
                    <tr>
                      <td><code>territoryColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Territory color used for coloring</td>
                    </tr>
                    <tr>
                      <td><code>borderColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Border color used for coloring</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Computes a unique key for caching
                  colorized sprites based on unit, owner, train type, and
                  colors.
                </p>
                <h4 id="public-function-getcoloredsprite">
                  public function <code>getColoredSprite()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance to render</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Theme providing spawn highlight color</td>
                    </tr>
                    <tr>
                      <td><code>customTerritoryColor?</code></td>
                      <td><code>Colord</code></td>
                      <td>Optional custom territory color</td>
                    </tr>
                    <tr>
                      <td><code>customBorderColor?</code></td>
                      <td><code>Colord</code></td>
                      <td>Optional custom border color</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>HTMLCanvasElement</code>. Retrieves or generates
                  a colorized sprite canvas for the unit using
                  <code>colorizeCanvas()</code>. Uses
                  <code>coloredSpriteCache</code> for performance. Throws an
                  error if the sprite is unavailable.
                </p>
                <p>
                  See also:
                  <a href="#public-function-colorizecanvas"
                    >function <code>colorizeCanvas()</code></a
                  >,
                  <a href="#private-function-getspriteforunit"
                    >function <code>getSpriteForUnit()</code></a
                  >
                </p>
                <h3 id="transformhandlerts">TransformHandler.ts</h3>
                <h4 id="constants_1">Constants</h4>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>GOTO_INTERVAL_MS</code></td>
                      <td><code>number</code></td>
                      <td>
                        Interval in milliseconds for camera movement updates
                        (default 16ms).
                      </td>
                    </tr>
                    <tr>
                      <td><code>CAMERA_MAX_SPEED</code></td>
                      <td><code>number</code></td>
                      <td>Maximum speed for camera movement.</td>
                    </tr>
                    <tr>
                      <td><code>CAMERA_SMOOTHING</code></td>
                      <td><code>number</code></td>
                      <td>
                        Smoothing factor for camera movement interpolation.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-transformhandler">
                  class <code>TransformHandler</code>
                </h4>
                <p>
                  Handles camera transformations including zooming, panning,
                  centering, and smooth movements within a game viewport.
                </p>
                <p><strong>Properties:</strong></p>
                <p>
                  | Name | Type | Description | | ------------------ |
                  --------------- |
                  -------------------------------------------------------------
                  | ---------------------------------------- | |
                  <code>scale</code> | <code>number</code> | Current zoom level.
                  Defaults to 1.8. | | <code>_boundingRect</code> |
                  <code>DOMRect</code> | Current canvas bounding rectangle. | |
                  <code>offsetX</code> | <code>number</code> | Horizontal camera
                  offset. | | <code>offsetY</code> | <code>number</code> |
                  Vertical camera offset. | | <code>lastGoToCallTime</code> |
                  <code>number | null</code> | Timestamp of the last camera goTo
                  call. | | <code>target</code> | <code>Cell | null</code> |
                  Current target cell for camera movement. | |
                  <code>intervalID</code> | <code>NodeJS.Timeout | null</code> |
                  Interval ID for smooth camera movement. | |
                  <code>changed</code> | <code>boolean</code> | Tracks if the
                  camera transform has changed since last update. |
                </p>
                <h5 id="public-constructor-constructor_3">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus to listen for input and camera events.</td>
                    </tr>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas element for the game viewport.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the camera transform handler and registers event
                  listeners.
                </p>
                <h5 id="public-function-updatecanvasboundingrect">
                  public function <code>updateCanvasBoundingRect()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Updates the internal
                  <code>_boundingRect</code> based on the current canvas size.
                </p>
                <h5 id="public-function-boundingrect">
                  public function <code>boundingRect()</code>
                </h5>
                <p>
                  Returns <code>DOMRect</code>. Retrieves the current canvas
                  bounding rectangle.
                </p>
                <h5 id="public-function-width">
                  public function <code>width()</code>
                </h5>
                <p>Returns <code>number</code>. Width of the canvas.</p>
                <h5 id="public-function-haschanged">
                  public function <code>hasChanged()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Indicates whether the camera
                  transform has changed.
                </p>
                <h5 id="public-function-resetchanged">
                  public function <code>resetChanged()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Resets the
                  <code>changed</code> flag.
                </p>
                <h5 id="public-function-handletransform">
                  public function <code>handleTransform()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context to apply the transformation to.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Applies zoom and pan
                  transformations to the canvas context, disabling image
                  smoothing for pixelated effect.
                </p>
                <h5 id="public-function-worldtoscreencoordinates">
                  public function <code>worldToScreenCoordinates()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>Cell</code></td>
                      <td>Game world cell to convert.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>{ x: number; y: number }</code>. Converts world
                  coordinates to screen coordinates.
                </p>
                <h5 id="public-function-screentoworldcoordinates">
                  public function <code>screenToWorldCoordinates()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>screenX</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate on screen.</td>
                    </tr>
                    <tr>
                      <td><code>screenY</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate on screen.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Cell</code>. Converts screen coordinates to
                  world coordinates.
                </p>
                <h5 id="public-function-screenboundingrect">
                  public function <code>screenBoundingRect()</code>
                </h5>
                <p>
                  Returns <code>[Cell, Cell]</code>. Returns top-left and
                  bottom-right cells currently visible on the screen.
                </p>
                <h5 id="public-function-isonscreen">
                  public function <code>isOnScreen()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>Cell</code></td>
                      <td>Cell to check.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Determines if a cell is within
                  the current camera view.
                </p>
                <h5 id="public-function-screencenter">
                  public function <code>screenCenter()</code>
                </h5>
                <p>
                  Returns <code>{ screenX: number; screenY: number }</code>.
                  Computes the screen coordinates of the viewport center.
                </p>
                <h5 id="public-function-ongotoplayer">
                  public function <code>onGoToPlayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>GoToPlayerEvent</code></td>
                      <td>Event containing player to center on.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Initiates smooth camera movement to
                  the player's position.
                </p>
                <h5 id="public-function-ongotoposition">
                  public function <code>onGoToPosition()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>GoToPositionEvent</code></td>
                      <td>Event containing world coordinates to center on.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Initiates smooth camera movement to
                  the specified position.
                </p>
                <h5 id="public-function-ongotounit">
                  public function <code>onGoToUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>GoToUnitEvent</code></td>
                      <td>Event containing unit to center on.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Initiates smooth camera movement to
                  the unit's last tile.
                </p>
                <h5 id="public-function-centercamera">
                  public function <code>centerCamera()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Centers the camera on the local
                  player's position.
                </p>
                <h5 id="private-function-goto">
                  private function <code>goTo()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Moves the camera smoothly towards
                  the target cell, respecting maximum speed and smoothing
                  constraints. Clears target once reached.
                </p>
                <h5 id="public-function-onzoom">
                  public function <code>onZoom()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>ZoomEvent</code></td>
                      <td>
                        Event containing zoom delta and mouse coordinates.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Adjusts camera scale and offsets to
                  zoom around a point. Clamps scale and
                </p>
                <h3 id="uistatets">UIState.ts</h3>
                <h4 id="interface-uistate">interface <code>UIState</code></h4>
                <p>
                  Represents the current state of the user interface related to
                  game actions.
                </p>
                <p>
                  | Name | Type | Description | | ---------------- | --------- |
                  ----------------------------------------------------------------------
                  |
                  ---------------------------------------------------------------------------------------------
                  | | <code>attackRatio</code> | <code>number</code> | Ratio
                  used for attacks, e.g., proportion of available units to
                  deploy. | | <code>ghostStructure</code> |
                  <code>UnitType | null</code> | Optional unit type representing
                  a ghosted structure in the UI, or <code>null</code> if none is
                  selected. |
                </p>
                <h3 id="fxconquestfxts">./fx/ConquestFx.ts</h3>
                <h4 id="public-function-conquestfxfactory">
                  public function <code>conquestFxFactory()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loader for animated conquest sprites.</td>
                    </tr>
                    <tr>
                      <td><code>conquest</code></td>
                      <td><code>ConquestUpdate</code></td>
                      <td>
                        Update containing conquest information such as gold and
                        conquered player ID.
                      </td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Game view instance providing player positions.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Fx[]</code>. Generates a list of visual effects
                  representing a conquest event, including:
                </p>
                <ul>
                  <li>Animated conquest sprite with fade effect.</li>
                  <li>
                    Text displaying gold gained, positioned near the conquered
                    player's location.
                  </li>
                </ul>
                <p>
                  See also:
                  <a href="#class-spritefx">class <code>SpriteFx</code></a
                  >, <a href="#class-fadefx">class <code>FadeFx</code></a
                  >, <a href="#class-textfx">class <code>TextFx</code></a
                  >,
                  <a href="#class-animatedspriteloader"
                    >class <code>AnimatedSpriteLoader</code></a
                  >
                </p>
                <h3 id="fxfxts">./fx/Fx.ts</h3>
                <h4 id="interface-fx">interface <code>Fx</code></h4>
                <p>Represents a visual effect in the game.</p>
                <h5 id="public-function-rendertick">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since the last tick in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context used for rendering the effect.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Indicates whether the effect is
                  still active (<code>true</code>) or has finished
                  (<code>false</code>).
                </p>
                <h4 id="enum-fxtype">enum <code>FxType</code></h4>
                <p>Enumerates types of effects available in the game.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>MiniFire</code></td>
                      <td>Small fire effect</td>
                    </tr>
                    <tr>
                      <td><code>MiniSmoke</code></td>
                      <td>Small smoke effect</td>
                    </tr>
                    <tr>
                      <td><code>MiniBigSmoke</code></td>
                      <td>Large smoke effect</td>
                    </tr>
                    <tr>
                      <td><code>MiniSmokeAndFire</code></td>
                      <td>Combined smoke and fire effect</td>
                    </tr>
                    <tr>
                      <td><code>MiniExplosion</code></td>
                      <td>Small explosion effect</td>
                    </tr>
                    <tr>
                      <td><code>UnitExplosion</code></td>
                      <td>Explosion effect for units</td>
                    </tr>
                    <tr>
                      <td><code>BuildingExplosion</code></td>
                      <td>Explosion effect for buildings</td>
                    </tr>
                    <tr>
                      <td><code>SinkingShip</code></td>
                      <td>Sinking ship effect</td>
                    </tr>
                    <tr>
                      <td><code>Nuke</code></td>
                      <td>Nuclear explosion effect</td>
                    </tr>
                    <tr>
                      <td><code>SAMExplosion</code></td>
                      <td>Surface-to-air missile explosion effect</td>
                    </tr>
                    <tr>
                      <td><code>UnderConstruction</code></td>
                      <td>Effect for under-construction structures</td>
                    </tr>
                    <tr>
                      <td><code>Dust</code></td>
                      <td>Dust effect</td>
                    </tr>
                    <tr>
                      <td><code>Conquest</code></td>
                      <td>Conquest effect</td>
                    </tr>
                    <tr>
                      <td><code>Tentacle</code></td>
                      <td>Tentacle effect</td>
                    </tr>
                    <tr>
                      <td><code>Shark</code></td>
                      <td>Shark effect</td>
                    </tr>
                    <tr>
                      <td><code>Bubble</code></td>
                      <td>Bubble effect</td>
                    </tr>
                    <tr>
                      <td><code>Tornado</code></td>
                      <td>Tornado effect</td>
                    </tr>
                  </tbody>
                </table>
                <h3 id="fxnukeareats">./fx/NukeArea.ts</h3>
                <h4 id="class-nukeareafx">class <code>NukeAreaFx</code></h4>
                <p>
                  Represents a visual effect showing a nuclear explosion area
                  with inner and outer circles.
                </p>
                <p>
                  Implements:
                  <a href="#interface-fx">interface <code>Fx</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>lifeTime</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since effect started.</td>
                    </tr>
                    <tr>
                      <td><code>ended</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the effect has been marked for
                        fade-out.
                      </td>
                    </tr>
                    <tr>
                      <td><code>endAnimationDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of fade-out in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>startAnimationDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of start animation in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>innerDiameter</code></td>
                      <td><code>number</code></td>
                      <td>Diameter of the inner circle.</td>
                    </tr>
                    <tr>
                      <td><code>outerDiameter</code></td>
                      <td><code>number</code></td>
                      <td>Diameter of the outer circle.</td>
                    </tr>
                    <tr>
                      <td><code>offset</code></td>
                      <td><code>number</code></td>
                      <td>Current dash offset for rotating outer circle.</td>
                    </tr>
                    <tr>
                      <td><code>dashSize</code></td>
                      <td><code>number</code></td>
                      <td>Length of dashes for outer circle stroke.</td>
                    </tr>
                    <tr>
                      <td><code>rotationSpeed</code></td>
                      <td><code>number</code></td>
                      <td>
                        Rotation speed of outer dashed circle in pixels per
                        second.
                      </td>
                    </tr>
                    <tr>
                      <td><code>baseAlpha</code></td>
                      <td><code>number</code></td>
                      <td>Base transparency for the effect.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_4">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of effect center.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of effect center.</td>
                    </tr>
                    <tr>
                      <td><code>magnitude</code></td>
                      <td><code>NukeMagnitude</code></td>
                      <td>
                        Nuke magnitude defining inner and outer diameters.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes a nuke area effect with scaling and dashed
                  rotation for the outer circle.
                </p>
                <h5 id="public-function-end">
                  public function <code>end()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Marks the effect for fade-out,
                  resetting <code>lifeTime</code> for end animation.
                </p>
                <h5 id="public-function-rendertick_1">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>
                        Time elapsed since last render tick in milliseconds.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context to render the effect.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Renders the nuke area effect for
                  this tick. Returns <code>true</code> if the effect is still
                  active, <code>false</code> if finished. Draws inner and outer
                  circles with alpha blending and animated outer dash rotation.
                </p>
                <p>
                  See also: <a href="#interface-fx">interface <code>Fx</code></a
                  >,
                  <a href="../../../core/configuration/Config"
                    >type <code>NukeMagnitude</code></a
                  >
                </p>
                <h3 id="fxnukefxts">./fx/NukeFx.ts</h3>
                <h4 id="class-shockwavefx">class <code>ShockwaveFx</code></h4>
                <p>
                  Represents a shockwave effect as a growing white circle for
                  nuclear explosions.
                </p>
                <p>
                  Implements:
                  <a href="#interface-fx">interface <code>Fx</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>lifeTime</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since effect started.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the shockwave center.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the shockwave center.</td>
                    </tr>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of the shockwave in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>maxRadius</code></td>
                      <td><code>number</code></td>
                      <td>Maximum radius the shockwave can reach.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_5">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of effect center.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of effect center.</td>
                    </tr>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of the shockwave in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>maxRadius</code></td>
                      <td><code>number</code></td>
                      <td>Maximum radius of the shockwave.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-rendertick_2">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since last tick in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context to render the effect.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Renders the shockwave for the
                  current tick. Returns <code>true</code> if the effect is still
                  active, <code>false</code> if finished.
                </p>
                <h4 id="private-function-addspriteincircle">
                  private function <code>addSpriteInCircle()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loader for animated sprites.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>Center X-coordinate for spawning sprites.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Center Y-coordinate for spawning sprites.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Radius of the spawn circle.</td>
                    </tr>
                    <tr>
                      <td><code>num</code></td>
                      <td><code>number</code></td>
                      <td>Number of sprites to spawn.</td>
                    </tr>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>FxType</code></td>
                      <td>Type of effect to spawn.</td>
                    </tr>
                    <tr>
                      <td><code>result</code></td>
                      <td><code>Fx[]</code></td>
                      <td>Array to push spawned Fx instances into.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Game view instance for validating spawn positions.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Spawns <code>num</code> effects of
                  <code>type</code> randomly within a circular area, validating
                  coordinates and terrain.
                </p>
                <h4 id="public-function-nukefxfactory">
                  public function <code>nukeFxFactory()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loader for animated nuke sprites.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of nuke center.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of nuke center.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Radius for shockwave and debris placement.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Game view instance for terrain checks.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Fx[]</code>. Generates all visual effects for a
                  nuclear explosion, including:
                </p>
                <ul>
                  <li>Central explosion sprite.</li>
                  <li>Shockwave (<code>ShockwaveFx</code>).</li>
                  <li>
                    Randomized debris and desolation sprites using
                    <code>addSpriteInCircle</code>.
                  </li>
                </ul>
                <p>
                  See also:
                  <a href="#class-spritefx">class <code>SpriteFx</code></a
                  >, <a href="#class-fadefx">class <code>FadeFx</code></a
                  >, <a href="#interface-fx">interface <code>Fx</code></a
                  >, <a href="#enum-fxtype">enum <code>FxType</code></a
                  >,
                  <a href="#class-shockwavefx">class <code>ShockwaveFx</code></a
                  >,
                  <a href="#class-animatedspriteloader"
                    >class <code>AnimatedSpriteLoader</code></a
                  >
                </p>
                <h3 id="fxspritefxts">./fx/SpriteFx.ts</h3>
                <h4 id="class-movespritefx">class <code>MoveSpriteFx</code></h4>
                <p>
                  Moves an existing <code>SpriteFx</code> instance from its
                  current position to a target position over time, optionally
                  fading in and out.
                </p>
                <p>
                  Implements:
                  <a href="#interface-fx">interface <code>Fx</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>originX</code></td>
                      <td><code>number</code></td>
                      <td>Initial X-coordinate of the sprite.</td>
                    </tr>
                    <tr>
                      <td><code>originY</code></td>
                      <td><code>number</code></td>
                      <td>Initial Y-coordinate of the sprite.</td>
                    </tr>
                    <tr>
                      <td><code>fxToMove</code></td>
                      <td><code>SpriteFx</code></td>
                      <td>The sprite to move.</td>
                    </tr>
                    <tr>
                      <td><code>toX</code></td>
                      <td><code>number</code></td>
                      <td>Target X-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>toY</code></td>
                      <td><code>number</code></td>
                      <td>Target Y-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>fadeIn</code></td>
                      <td><code>number</code></td>
                      <td>Optional fade-in fraction (default 0.1).</td>
                    </tr>
                    <tr>
                      <td><code>fadeOut</code></td>
                      <td><code>number</code></td>
                      <td>Optional fade-out fraction (default 0.9).</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_6">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxToMove</code></td>
                      <td><code>SpriteFx</code></td>
                      <td>The sprite to move.</td>
                    </tr>
                    <tr>
                      <td><code>toX</code></td>
                      <td><code>number</code></td>
                      <td>Target X-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>toY</code></td>
                      <td><code>number</code></td>
                      <td>Target Y-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>fadeIn?</code></td>
                      <td><code>number</code></td>
                      <td>Optional fade-in fraction.</td>
                    </tr>
                    <tr>
                      <td><code>fadeOut?</code></td>
                      <td><code>number</code></td>
                      <td>Optional fade-out fraction.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-rendertick_3">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since last tick in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context for rendering.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Updates the sprite position and
                  renders it with fade-in/out transparency. Returns
                  <code>false</code> when animation ends.
                </p>
                <h4 id="class-fadefx">class <code>FadeFx</code></h4>
                <p>
                  Fades an existing <code>SpriteFx</code> instance in and out
                  over time.
                </p>
                <p>
                  Implements:
                  <a href="#interface-fx">interface <code>Fx</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxToFade</code></td>
                      <td><code>SpriteFx</code></td>
                      <td>Sprite to fade.</td>
                    </tr>
                    <tr>
                      <td><code>fadeIn</code></td>
                      <td><code>number</code></td>
                      <td>Fraction of duration for fade-in.</td>
                    </tr>
                    <tr>
                      <td><code>fadeOut</code></td>
                      <td><code>number</code></td>
                      <td>Fraction of duration for fade-out.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_7">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fxToFade</code></td>
                      <td><code>SpriteFx</code></td>
                      <td>Sprite to fade.</td>
                    </tr>
                    <tr>
                      <td><code>fadeIn</code></td>
                      <td><code>number</code></td>
                      <td>Fraction of duration to fade in.</td>
                    </tr>
                    <tr>
                      <td><code>fadeOut</code></td>
                      <td><code>number</code></td>
                      <td>Fraction of duration to fade out.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-rendertick_4">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since last tick in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context for rendering.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Renders the sprite with computed
                  transparency based on fade-in/out. Returns
                  <code>false</code> when animation ends.
                </p>
                <h4 id="class-spritefx">class <code>SpriteFx</code></h4>
                <p>
                  Animated sprite effect that can be optionally colored based on
                  owner and theme.
                </p>
                <p>
                  Implements:
                  <a href="#interface-fx">interface <code>Fx</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <p>
                  | Name | Type | Description | | ---------------- |
                  --------------- |
                  ------------------------------------------------------------------
                  | ------------------------------- | |
                  <code>animatedSprite</code> |
                  <code>AnimatedSprite | null</code> | The underlying animated
                  sprite. | | <code>elapsedTime</code> | <code>number</code> |
                  Time elapsed since animation started. | |
                  <code>duration</code> | <code>number</code> | Duration of
                  animation in milliseconds. | | <code>waitToTheEnd</code> |
                  <code>boolean</code> | Whether to wait for sprite lifetime
                  instead of specified duration. | | <code>x</code> |
                  <code>number</code> | X-coordinate of sprite position. | |
                  <code>y</code> | <code>number</code> | Y-coordinate of sprite
                  position. |
                </p>
                <h5 id="public-constructor-constructor_8">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loader to create animated sprite.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>Initial X-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Initial Y-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>fxType</code></td>
                      <td><code>FxType</code></td>
                      <td>Type of effect.</td>
                    </tr>
                    <tr>
                      <td><code>duration?</code></td>
                      <td><code>number</code></td>
                      <td>Optional duration for the effect.</td>
                    </tr>
                    <tr>
                      <td><code>owner?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional owner to colorize sprite.</td>
                    </tr>
                    <tr>
                      <td><code>theme?</code></td>
                      <td><code>Theme</code></td>
                      <td>Optional theme for coloring.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-rendertick_5">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>Time elapsed since last tick in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context for rendering.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Updates the animated sprite and
                  draws it. Returns <code>false</code> if the animation has
                  finished.
                </p>
                <h5 id="public-function-getelapsedtime">
                  public function <code>getElapsedTime()</code>
                </h5>
                <p>
                  Returns <code>number</code>. The elapsed time since the
                  animation started.
                </p>
                <h5 id="public-function-getduration">
                  public function <code>getDuration()</code>
                </h5>
                <p>
                  Returns <code>number</code>. The total duration of the
                  animation.
                </p>
                <p>
                  See also: <a href="#interface-fx">interface <code>Fx</code></a
                  >,
                  <a href="#class-animatedsprite"
                    >class <code>AnimatedSprite</code></a
                  >,
                  <a href="#class-animatedspriteloader"
                    >class <code>AnimatedSpriteLoader</code></a
                  >, <a href="#enum-fxtype">enum <code>FxType</code></a
                  >, <a href="#class-fadefx">class <code>FadeFx</code></a>
                </p>
                <h3 id="fxtargetfxts">./fx/TargetFx.ts</h3>
                <h4 id="class-targetfx">class <code>TargetFx</code></h4>
                <p>
                  Implements a pulsing/red targeting effect on the canvas,
                  optionally persistent.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>lifeTime</code></td>
                      <td><code>number</code></td>
                      <td>Tracks elapsed time of the effect.</td>
                    </tr>
                    <tr>
                      <td><code>ended</code></td>
                      <td><code>boolean</code></td>
                      <td>Marks whether the effect is in fade-out phase.</td>
                    </tr>
                    <tr>
                      <td><code>endFade</code></td>
                      <td><code>number</code></td>
                      <td>Duration of fade-out in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>offset</code></td>
                      <td><code>number</code></td>
                      <td>Offset for dash rotation animation.</td>
                    </tr>
                    <tr>
                      <td><code>rotationSpeed</code></td>
                      <td><code>number</code></td>
                      <td>Rotation speed in pixels per second.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Inner circle radius.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the target effect.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the target effect.</td>
                    </tr>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>
                        Total duration in ms if not persistent. Optional;
                        defaults to <code>0</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>persistent</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        If <code>true</code>, effect loops indefinitely until
                        <code>end()</code> is called. Optional; defaults to
                        <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-end_1">
                  public function <code>end()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Triggers the fade-out for persistent effects. Resets
                  <code>lifeTime</code> to 0 for fade timing.
                </p>
                <h5 id="public-function-rendertick_6">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>Elapsed time since last frame in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas rendering context.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. <code>true</code> if the effect
                  is still active and should continue rendering;
                  <code>false</code> if the effect has ended.
                </p>
                <p>Behavior:</p>
                <ul>
                  <li>
                    Updates internal <code>lifeTime</code> and computes alpha
                    for fade-in, fade-out, or pulsing.
                  </li>
                  <li>
                    Draws two concentric circles with dashed stroke animation.
                  </li>
                  <li>
                    Outer circle dashes rotate in opposite directions relative
                    to the inner circle.
                  </li>
                </ul>
                <h3 id="fxtextfxts">./fx/TextFx.ts</h3>
                <h4 id="class-textfx">class <code>TextFx</code></h4>
                <p>
                  Displays floating text with fade-out and vertical rise over a
                  duration.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>lifeTime</code></td>
                      <td><code>number</code></td>
                      <td>Tracks elapsed time since creation.</td>
                    </tr>
                    <tr>
                      <td><code>text</code></td>
                      <td><code>string</code></td>
                      <td>Text content to display.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of text origin.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of text origin.</td>
                    </tr>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Total display duration in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>riseDistance</code></td>
                      <td><code>number</code></td>
                      <td>
                        Vertical rise in pixels during the effect. Optional;
                        defaults to <code>30</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>font</code></td>
                      <td><code>string</code></td>
                      <td>
                        CSS font string for text rendering. Optional; defaults
                        to <code>"11px sans-serif"</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>{ r: number; g: number; b: number }</code></td>
                      <td>
                        RGB color of the text. Optional; defaults to white
                        <code>{r:255,g:255,b:255}</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-rendertick_7">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>Elapsed time since last frame in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas rendering context.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. <code>true</code> if the text is
                  still visible; <code>false</code> once the duration has
                  elapsed.
                </p>
                <p>Behavior:</p>
                <ul>
                  <li>Increments <code>lifeTime</code>.</li>
                  <li>
                    Computes vertical position based on elapsed time and
                    <code>riseDistance</code>.
                  </li>
                  <li>Computes fade-out alpha based on elapsed time.</li>
                  <li>
                    Draws the text centered at <code>(x, currentY)</code> with
                    computed alpha.
                  </li>
                </ul>
                <h3 id="fxtimelinets">./fx/Timeline.ts</h3>
                <h4 id="class-timeline">class <code>Timeline</code></h4>
                <p>Schedules and executes delayed tasks in sequence.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tasks</code></td>
                      <td><code>TimedTask[]</code></td>
                      <td>
                        Array of scheduled tasks with delay and execution state.
                      </td>
                    </tr>
                    <tr>
                      <td><code>timeElapsed</code></td>
                      <td><code>number</code></td>
                      <td>Total elapsed time since timeline start.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-add">
                  public function <code>add()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>delay</code></td>
                      <td><code>number</code></td>
                      <td>
                        Delay in milliseconds before the action is triggered.
                      </td>
                    </tr>
                    <tr>
                      <td><code>action</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>Callback to execute after delay.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Timeline</code>. Adds a task to the timeline and
                  allows chaining.
                </p>
                <h5 id="public-function-update_1">
                  public function <code>update()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>dt</code></td>
                      <td><code>number</code></td>
                      <td>Time delta in milliseconds since last update.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the timeline, triggers any
                  tasks whose delay has elapsed.
                </p>
                <h5 id="public-function-iscomplete">
                  public function <code>isComplete()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. <code>true</code> if all tasks
                  have been triggered; otherwise <code>false</code>.
                </p>
                <p>
                  <strong>Internal type <code>TimedTask</code></strong>
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>delay</code></td>
                      <td><code>number</code></td>
                      <td>
                        Milliseconds after timeline start to trigger the action.
                      </td>
                    </tr>
                    <tr>
                      <td><code>action</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>Function to execute when delay elapses.</td>
                    </tr>
                    <tr>
                      <td><code>triggered</code></td>
                      <td><code>boolean</code></td>
                      <td>Tracks whether the task has already executed.</td>
                    </tr>
                  </tbody>
                </table>
                <h3 id="fxunitexplosionfxts">./fx/UnitExplosionFx.ts</h3>
                <h4 id="class-unitexplosionfx">
                  class <code>UnitExplosionFx</code>
                </h4>
                <p>
                  Implements a timed explosion effect composed of multiple
                  <code>SpriteFx</code> instances.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>timeline</code></td>
                      <td><code>Timeline</code></td>
                      <td>
                        Manages the scheduling of multiple explosions over time.
                      </td>
                    </tr>
                    <tr>
                      <td><code>explosions</code></td>
                      <td><code>Fx[]</code></td>
                      <td>List of active explosion effects.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-unitexplosionfx">
                  public constructor <code>UnitExplosionFx()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loader for animated sprite resources.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the central explosion point.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the central explosion point.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Reference to the game view for coordinate validation.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes a <code>Timeline</code> with three explosion
                  events at offsets relative to <code>(x, y)</code>.
                </p>
                <h5 id="public-function-rendertick_8">
                  public function <code>renderTick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>
                        Time elapsed since last render tick in milliseconds.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ctx</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context for drawing explosions.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Returns <code>true</code> if the
                  explosion effect is still active; <code>false</code> if all
                  explosions have completed.
                </p>
                <p>Behavior:</p>
                <ul>
                  <li>
                    Updates the timeline and triggers scheduled explosions.
                  </li>
                  <li>Renders all active <code>SpriteFx</code> explosions.</li>
                  <li>
                    Returns <code>true</code> until all explosions are done and
                    the timeline is complete.
                  </li>
                </ul>
                <h3 id="layersadtimerts">./layers/AdTimer.ts</h3>
                <h4 id="class-adtimer">class <code>AdTimer</code></h4>
                <p>
                  Manages timed removal of sticky advertisements based on game
                  ticks.
                </p>
                <p>
                  Implements: <a href="#"><code>Layer</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>isHidden</code></td>
                      <td><code>boolean</code></td>
                      <td>Tracks whether ads have been hidden.</td>
                    </tr>
                    <tr>
                      <td><code>g</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the game view instance.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-adtimer">
                  public constructor <code>AdTimer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>g</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Game view instance used to track ticks and
                        configuration.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the layer. Currently a placeholder with no
                  behavior.
                </p>
                <h5 id="public-async-function-tick">
                  public async function <code>tick()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Checks whether the sticky ads should be removed based on game
                  ticks. If the ads are due to be removed, it calls
                  <code>window.fusetag.destroySticky()</code> and sets
                  <code>isHidden</code> to <code>true</code>. Logs action to the
                  console.
                </p>
                <h3 id="layersalertframets">./layers/AlertFrame.ts</h3>
                <h4 id="class-alertframe">class <code>AlertFrame</code></h4>
                <p>
                  Displays a visual alert border when the current player is
                  betrayed in-game. Implements
                  <a href="#">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        The game instance associated with this alert layer.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>Stores user preferences for alert visibility.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isActive</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Internal state indicating if the alert is currently
                        active.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>animationTimeout</code></td>
                      <td><code>number | null</code></td>
                      <td>
                        Timeout ID for controlling alert animation lifecycle.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_9">
                  public constructor <code>constructor()</code>
                </h5>
                <p>
                  Initializes the alert frame and injects the alert CSS into the
                  document if not already present.
                </p>
                <p>Returns <code>AlertFrame</code>.</p>
                <h5 id="public-function-init_1">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Initializes event listeners for
                  <code>BrokeAllianceUpdate</code> events from the game.
                </p>
                <h5 id="public-function-tick_1">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Called each frame to check for
                  <code>BrokeAllianceUpdate</code> events. Triggers alerts when
                  the current player is betrayed.
                </p>
                <h5 id="public-function-shouldtransform">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Indicates that the alert frame
                  is not affected by camera transformations. Always returns
                  <code>false</code>.
                </p>
                <h5 id="private-function-onbrokeallianceupdate">
                  private function <code>onBrokeAllianceUpdate()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>update</code></td>
                      <td><code>BrokeAllianceUpdate</code></td>
                      <td>
                        Update information about the broken alliance event.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Activates the alert if the current
                  player is the betrayed player.
                </p>
                <p>
                  See also:
                  <a href="#private-function-activatealert"
                    >function <code>activateAlert()</code></a
                  >
                </p>
                <h5 id="private-function-activatealert">
                  private function <code>activateAlert()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Sets <code>isActive</code> to
                  <code>true</code> and requests a render update if user
                  settings allow alert frames.
                </p>
                <h5 id="public-function-dismissalert">
                  public function <code>dismissAlert()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Deactivates the alert, clears any
                  running animation timeout, and requests a render update.
                </p>
                <h5 id="public-function-render_6">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the alert border
                  using HTML and CSS if <code>isActive</code> is true.
                  Automatically dismisses the alert after animation ends.
                </p>
                <h3 id="layersbuildmenuts">./layers/BuildMenu.ts</h3>
                <h4 id="interface-builditemdisplay">
                  interface <code>BuildItemDisplay</code>
                </h4>
                <p>Represents an item displayed in the build menu.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>UnitType</code></td>
                      <td>The type of unit or structure</td>
                    </tr>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>string</code></td>
                      <td>URL or path to the icon image</td>
                    </tr>
                    <tr>
                      <td><code>description?</code></td>
                      <td><code>string</code></td>
                      <td>
                        Optional translation key for the item's description
                      </td>
                    </tr>
                    <tr>
                      <td><code>key?</code></td>
                      <td><code>string</code></td>
                      <td>Optional translation key for the item's name</td>
                    </tr>
                    <tr>
                      <td><code>countable?</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional flag indicating whether to show unit count
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="const-buildtable">const <code>buildTable</code></h4>
                <p>
                  A 2D array of
                  <a href="#interface-builditemdisplay">BuildItemDisplay</a>
                  representing the layout of the build menu.
                </p>
                <h4 id="const-flattenedbuildtable">
                  const <code>flattenedBuildTable</code>
                </h4>
                <p>
                  Flattened version of <code>buildTable</code> for easy
                  iteration.
                </p>
                <h4 id="class-buildmenu">class <code>BuildMenu</code></h4>
                <p>
                  Displays and manages the in-game build menu, allowing players
                  to build or upgrade units and structures. Implements
                  <a href="#">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game instance associated with this menu</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus for listening to and emitting input/game
                        events
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>clickedTile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile that was clicked to open the build menu</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActions</code></td>
                      <td><code>PlayerActions | null</code></td>
                      <td>
                        Actions available to the player for the clicked tile
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>filteredBuildTable</code></td>
                      <td><code>BuildItemDisplay[][]</code></td>
                      <td>
                        Current filtered build table after removing disabled
                        units
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles screen-to-world coordinate conversions</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_hidden</code></td>
                      <td><code>boolean</code></td>
                      <td>Internal state controlling menu visibility</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_2">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Sets up event listeners to open,
                  close, or hide the build menu based on game events.
                </p>
                <h5 id="public-function-tick_2">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Called each frame to refresh the
                  menu if it is visible.
                </p>
                <h5 id="public-function-canbuildorupgrade">
                  public function <code>canBuildOrUpgrade()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>item</code></td>
                      <td><code>BuildItemDisplay</code></td>
                      <td>The item to check for build or upgrade capability</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Returns <code>true</code> if the
                  current player can build or upgrade the specified item.
                </p>
                <h5 id="public-function-cost">
                  public function <code>cost()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>item</code></td>
                      <td><code>BuildItemDisplay</code></td>
                      <td>The item to get the cost for</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Gold</code>. Returns the gold cost to build or
                  upgrade the item, or <code>0</code> if unavailable.
                </p>
                <h5 id="public-function-count">
                  public function <code>count()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>item</code></td>
                      <td><code>BuildItemDisplay</code></td>
                      <td>The item to count units for</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Returns the number of units of
                  the specified type the player controls. Returns
                  <code>"?"</code> if unknown.
                </p>
                <h5 id="public-function-sendbuildorupgrade">
                  public function <code>sendBuildOrUpgrade()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>buildableUnit</code></td>
                      <td><code>BuildableUnit</code></td>
                      <td>The unit or structure to build or upgrade</td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>The tile on which to perform the action</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits the appropriate event to
                  build or upgrade the unit and hides the menu.
                </p>
                <h5 id="public-function-render_7">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the build menu UI
                  with rows of build buttons, icons, names, descriptions, costs,
                  and unit counts. Disabled buttons are styled appropriately.
                </p>
                <h5 id="public-function-hidemenu">
                  public function <code>hideMenu()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Hides the build menu and triggers a
                  render update.
                </p>
                <h5 id="public-function-showmenu">
                  public function <code>showMenu()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>clickedTile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile that was clicked to open the menu</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Shows the build menu at the clicked
                  tile and refreshes available actions.
                </p>
                <h5 id="private-function-refresh">
                  private function <code>refresh()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Updates
                  <code>playerActions</code> for the clicked tile and filters
                  the build table for enabled units.
                </p>
                <h5 id="private-function-getbuildableunits">
                  private function <code>getBuildableUnits()</code>
                </h5>
                <p>
                  Returns <code>BuildItemDisplay[][]</code>. Returns a filtered
                  build table removing disabled units.
                </p>
                <h5 id="getter-isvisible">getter <code>isVisible</code></h5>
                <p>
                  Returns <code>boolean</code>. Returns <code>true</code> if the
                  build menu is currently visible.
                </p>
                <h3 id="layerschatdisplayts">./layers/ChatDisplay.ts</h3>
                <h4 id="interface-chatevent">
                  interface <code>ChatEvent</code>
                </h4>
                <p>Represents a single chat message event in the display.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>description</code></td>
                      <td><code>string</code></td>
                      <td>The message content</td>
                    </tr>
                    <tr>
                      <td><code>unsafeDescription?</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional flag indicating whether HTML should be rendered
                        unsafely
                      </td>
                    </tr>
                    <tr>
                      <td><code>createdAt</code></td>
                      <td><code>number</code></td>
                      <td>
                        Timestamp or tick count when the message was created
                      </td>
                    </tr>
                    <tr>
                      <td><code>highlight?</code></td>
                      <td><code>boolean</code></td>
                      <td>Optional flag to highlight the message</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-chatdisplay">class <code>ChatDisplay</code></h4>
                <p>
                  Displays in-game chat messages and updates dynamically.
                  Implements <a href="#">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for receiving game and input events</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        The game instance for accessing player and update data
                      </td>
                    </tr>
                    <tr>
                      <td><code>active</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the chat display is active</td>
                    </tr>
                    <tr>
                      <td><code>_hidden</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Internal state controlling visibility of the chat UI
                      </td>
                    </tr>
                    <tr>
                      <td><code>newEvents</code></td>
                      <td><code>number</code></td>
                      <td>Count of new chat events while hidden</td>
                    </tr>
                    <tr>
                      <td><code>chatEvents</code></td>
                      <td><code>ChatEvent[]</code></td>
                      <td>Array of chat events displayed in the chat UI</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-togglehidden">
                  private function <code>toggleHidden()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Toggles <code>_hidden</code> state
                  and resets <code>newEvents</code> if chat is being shown.
                </p>
                <h5 id="private-function-addevent">
                  private function <code>addEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>ChatEvent</code></td>
                      <td>The chat event to add</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Adds a chat event to
                  <code>chatEvents</code> and increments
                  <code>newEvents</code> if hidden.
                </p>
                <h5 id="private-function-removeevent">
                  private function <code>removeEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>index</code></td>
                      <td><code>number</code></td>
                      <td>Index of the chat event to remove</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Removes the chat event at the given
                  index.
                </p>
                <h5 id="public-function-ondisplaymessageevent">
                  public function <code>onDisplayMessageEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>DisplayMessageUpdate</code></td>
                      <td>
                        Game update event containing chat message information
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Adds a new chat event if it is of
                  type <code>MessageType.CHAT</code> and relevant to the current
                  player.
                </p>
                <h5 id="public-function-init_3">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Placeholder for initialization
                  logic.
                </p>
                <h5 id="public-function-tick_3">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Processes game updates for display
                  events, filters chat messages, trims to the last 100 messages,
                  and triggers a render update.
                </p>
                <h5 id="private-function-getchatcontent">
                  private function <code>getChatContent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>chat</code></td>
                      <td><code>ChatEvent</code></td>
                      <td>Chat event to render</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns
                  <code
                    >string | DirectiveResult&lt;typeof
                    UnsafeHTMLDirective&gt;</code
                  >. Returns sanitized HTML using <code>unsafeHTML</code> for
                  messages marked as <code>unsafeDescription</code>, otherwise
                  returns plain text.
                </p>
                <h5 id="public-function-render_8">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the chat UI,
                  including hide/show buttons, new event counter, and a table of
                  chat messages. Handles CSS classes based on
                  <code>_hidden</code> and <code>newEvents</code>.
                </p>
                <h5 id="public-function-createrenderroot_3">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Returns <code>this</code>. Disables shadow DOM and renders
                  directly into the host element.
                </p>
                <h3 id="layerschatintegrationts">
                  ./layers/ChatIntegration.ts
                </h3>
                <h4 id="class-chatintegration">
                  class <code>ChatIntegration</code>
                </h4>
                <p>
                  Integrates quick chat and modal chat functionality for in-game
                  communication.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ctModal</code></td>
                      <td><code>ChatModal</code></td>
                      <td>Reference to the chat modal DOM element</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game instance used to determine player state</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for sending quick chat events</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_10">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Game instance</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus instance</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>ChatIntegration</code>. Initializes the chat
                  modal and ensures the element exists in the DOM. Throws an
                  error if the modal is missing.
                </p>
                <h5 id="public-function-setupchatmodal">
                  public function <code>setupChatModal()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>sender</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player sending chat messages</td>
                    </tr>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player receiving chat messages</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Sets the sender and recipient on
                  the chat modal.
                </p>
                <h5 id="public-function-createquickchatmenu">
                  public function <code>createQuickChatMenu()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>
                        The player who will receive the quick chat messages
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>MenuElement[]</code>. Generates a hierarchical
                  menu of quick chat phrases grouped by category. Each menu item
                  contains display text, color, tooltip, and an action that
                  either opens the chat modal or sends a quick chat event.
                </p>
                <h5 id="public-function-shortentext">
                  public function <code>shortenText()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>text</code></td>
                      <td><code>string</code></td>
                      <td>The text string to shorten</td>
                    </tr>
                    <tr>
                      <td><code>maxLength?</code></td>
                      <td><code>number</code></td>
                      <td>
                        Optional maximum length for the text. Defaults to 15.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Truncates the text and appends
                  <code>...</code> if it exceeds <code>maxLength</code>.
                </p>
                <h3 id="layerschatmodalts">./layers/ChatModal.ts</h3>
                <h4 id="type-quickchatphrase">
                  type <code>QuickChatPhrase</code>
                </h4>
                <p>Represents a single quick chat phrase.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Property</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>key</code></td>
                      <td><code>string</code></td>
                      <td>Unique key identifier for the phrase</td>
                    </tr>
                    <tr>
                      <td><code>requiresPlayer</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the phrase requires a player selection
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="type-quickchatphrases">
                  type <code>QuickChatPhrases</code>
                </h4>
                <p>
                  Mapping of category IDs to arrays of
                  <code>QuickChatPhrase</code>.
                </p>
                <h4 id="class-chatmodal">class <code>ChatModal</code></h4>
                <p>
                  Manages the chat modal UI, including phrase selection, player
                  selection, and sending quick chat messages.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>modalEl</code></td>
                      <td>
                        <code>HTMLElement</code> &amp; { open: () =&gt; void;
                        close: () =&gt; void; }
                      </td>
                      <td>Reference to the underlying modal element</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>players</code></td>
                      <td><code>PlayerView[]</code></td>
                      <td>
                        List of players available for quick chat selection
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerSearchQuery</code></td>
                      <td><code>string</code></td>
                      <td>Current search query for filtering players</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>previewText</code></td>
                      <td><code>string | null</code></td>
                      <td>
                        Text preview of the selected phrase with substitutions
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>requiresPlayerSelection</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the current phrase requires player
                        selection
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedCategory</code></td>
                      <td><code>string | null</code></td>
                      <td>ID of the currently selected category</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedPhraseText</code></td>
                      <td><code>string | null</code></td>
                      <td>Display text of the currently selected phrase</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedPhraseTemplate</code></td>
                      <td><code>string | null</code></td>
                      <td>
                        Template string of the selected phrase before
                        substitutions
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedQuickChatKey</code></td>
                      <td><code>string | null</code></td>
                      <td>Full key of the selected phrase</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedPlayer</code></td>
                      <td><code>PlayerView | null</code></td>
                      <td>Player selected for substitution in the phrase</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player receiving the chat message</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>sender</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player sending the chat message</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus used to emit <code>SendQuickChatEvent</code>s
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>g</code></td>
                      <td><code>GameView</code></td>
                      <td>Game instance for player information</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>quickChatPhrases</code></td>
                      <td>
                        <code
                          >Record&lt;string, Array&lt;{ text: string;
                          requiresPlayer: boolean }&gt;&gt;</code
                        >
                      </td>
                      <td>Predefined phrases per category</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>categories</code></td>
                      <td><code>Array&lt;{ id: string }&gt;</code></td>
                      <td>List of available chat categories</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-initeventbus">
                  public function <code>initEventBus()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus instance to listen for CloseViewEvent</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Sets up event listeners for modal
                  closing.
                </p>
                <h5 id="public-function-open">
                  public function <code>open()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>sender?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional sender of the message</td>
                    </tr>
                    <tr>
                      <td><code>recipient?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional recipient of the message</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Opens the modal and initializes
                  player list if sender and recipient are provided.
                </p>
                <h5 id="public-function-close">
                  public function <code>close()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Resets modal state and closes the
                  modal.
                </p>
                <h5 id="public-function-setrecipient">
                  public function <code>setRecipient()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>value</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player to set as recipient</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the recipient property.
                </p>
                <h5 id="public-function-setsender">
                  public function <code>setSender()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>value</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player to set as sender</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>. Updates the sender property.</p>
                <h5 id="public-function-openwithselection">
                  public function <code>openWithSelection()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>categoryId</code></td>
                      <td><code>string</code></td>
                      <td>Category ID to preselect</td>
                    </tr>
                    <tr>
                      <td><code>phraseKey</code></td>
                      <td><code>string</code></td>
                      <td>Key of the phrase to preselect</td>
                    </tr>
                    <tr>
                      <td><code>sender?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional sender</td>
                    </tr>
                    <tr>
                      <td><code>recipient?</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Optional recipient</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Opens the modal with the given
                  category and phrase selected.
                </p>
                <h5 id="private-function-selectcategory">
                  private function <code>selectCategory()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>categoryId</code></td>
                      <td><code>string</code></td>
                      <td>ID of the category to select</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates modal state to reflect
                  selected category.
                </p>
                <h5 id="private-function-selectphrase">
                  private function <code>selectPhrase()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>phrase</code></td>
                      <td><code>QuickChatPhrase</code></td>
                      <td>Phrase to select</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates modal state with selected
                  phrase and determines if player selection is required.
                </p>
                <h5 id="private-function-selectplayer">
                  private function <code>selectPlayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player selected for phrase substitution</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates modal state to include the
                  selected player.
                </p>
                <h5 id="private-function-sendchatmessage">
                  private function <code>sendChatMessage()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendQuickChatEvent</code> using the sender, recipient,
                  selected phrase key, and optional selected player ID. Resets
                  modal state.
                </p>
                <h5 id="private-function-onplayersearchinput">
                  private function <code>onPlayerSearchInput()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Input event from the player search box</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the player search query and
                  triggers re-render.
                </p>
                <h5 id="private-function-getsortedfilteredplayers">
                  private function <code>getSortedFilteredPlayers()</code>
                </h5>
                <p>
                  Returns <code>PlayerView[]</code>. Returns the list of players
                  sorted alphabetically and filtered based on the current search
                  query.
                </p>
                <h5 id="private-function-getfullquickchatkey">
                  private function <code>getFullQuickChatKey()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>category</code></td>
                      <td><code>string</code></td>
                      <td>Category ID</td>
                    </tr>
                    <tr>
                      <td><code>phraseKey</code></td>
                      <td><code>string</code></td>
                      <td>Phrase key</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Concatenates category and phrase
                  key into a full quick chat key.
                </p>
                <h5 id="private-function-renderphrasepreview">
                  private function <code>renderPhrasePreview()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>phrase</code></td>
                      <td><code>{ key: string }</code></td>
                      <td>Phrase object</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Returns the translated text of
                  the phrase for preview purposes.
                </p>
                <h5 id="private-function-getphrasesforcategory">
                  private function <code>getPhrasesForCategory()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>categoryId</code></td>
                      <td><code>string</code></td>
                      <td>Category ID</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>QuickChatPhrase[]</code>. Returns the list of
                  phrases for the given category.
                </p>
                <p>render(): import("lit").TemplateResult</p>
                <h3 id="layerscontrolpanelts">./layers/ControlPanel.ts</h3>
                <h4 id="class-controlpanel">class <code>ControlPanel</code></h4>
                <p>
                  Represents the in-game control panel overlay, displaying troop
                  counts, gold, and attack ratio. Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the current game view.</td>
                    </tr>
                    <tr>
                      <td><code>clientID</code></td>
                      <td><code>ClientID</code></td>
                      <td>Identifier for the client/player.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus for listening and dispatching game events.
                      </td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>Tracks the UI state, including attack ratio.</td>
                    </tr>
                    <tr>
                      <td><code>attackRatio</code></td>
                      <td><code>number</code></td>
                      <td>
                        Current attack ratio (01). Managed with state
                        decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_maxTroops</code></td>
                      <td><code>number</code></td>
                      <td>
                        Maximum troops for the player. Managed with state
                        decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>troopRate</code></td>
                      <td><code>number</code></td>
                      <td>
                        Rate of troop increase per tick. Managed with state
                        decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_troops</code></td>
                      <td><code>number</code></td>
                      <td>
                        Current number of troops. Managed with state decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the control panel is visible. Managed with state
                        decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_gold</code></td>
                      <td><code>Gold</code></td>
                      <td>
                        Player's current gold. Managed with state decorator.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_troopRateIsIncreasing</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates if troop rate is increasing.</td>
                    </tr>
                    <tr>
                      <td><code>_lastTroopIncreaseRate</code></td>
                      <td><code>number</code></td>
                      <td>Stores last tick's troop increase rate.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_4">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the control panel settings from local storage and
                  sets up event listeners for attack ratio changes via
                  <a href="#class-attackratioevent">AttackRatioEvent</a>.
                  Updates the UI state when the attack ratio changes.
                </p>
                <h5 id="public-function-tick_4">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates the control panel each game tick. Shows or hides the
                  panel based on player status, updates troop count, troop rate,
                  maximum troops, and gold, and triggers a UI re-render. Calls
                  <a href="#private-function-updatetroopincrease"
                    >updateTroopIncrease()</a
                  >
                  every 5 ticks.
                </p>
                <h5 id="private-function-updatetroopincrease">
                  private function <code>updateTroopIncrease()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Compares the current troop increase rate with the previous
                  tick and updates <code>_troopRateIsIncreasing</code> to
                  reflect whether it is increasing. Updates
                  <code>_lastTroopIncreaseRate</code>.
                </p>
                <h5 id="public-function-onattackratiochange">
                  public function <code>onAttackRatioChange()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>newRatio</code></td>
                      <td><code>number</code></td>
                      <td>The new attack ratio (01).</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates <code>uiState.attackRatio</code> to match
                  <code>newRatio</code>.
                </p>
                <h5 id="public-function-renderlayer">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas context to render on.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Renders any necessary canvas elements for the control panel.
                  Currently empty.
                </p>
                <h5 id="public-function-shouldtransform_1">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates whether the layer should apply canvas
                  transformations. Returns <code>false</code>.
                </p>
                <h5 id="public-function-setvisibile">
                  public function <code>setVisibile()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the control panel should be visible.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Sets <code>_isVisible</code> and requests a UI update.</p>
                <h5 id="public-function-render_9">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>import("lit").TemplateResult</code>.</p>
                <p>
                  Renders the control panel HTML using
                  <a href="https://lit.dev/">LitElement</a> templating. Includes
                  troop and gold display, attack ratio slider, and dynamic
                  styling based on state variables.
                </p>
                <h5 id="public-function-createrenderroot_4">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>HTMLElement</code>.</p>
                <p>
                  Overrides <code>LitElement</code> method to disable shadow
                  DOM, allowing global Tailwind CSS styling.
                </p>
                <h3 id="layersemojitablets">./layers/EmojiTable.ts</h3>
                <h4 id="class-emojitable">class <code>EmojiTable</code></h4>
                <p>
                  Displays a floating emoji selection table that can send emoji
                  intents to players.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Reactive state indicating whether the emoji table is
                        visible.
                      </td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>
                        Handles screen-to-world coordinate transformations.
                      </td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The current game view instance.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-initeventbus_1">
                  public function <code>initEventBus()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus to listen for ShowEmojiMenuEvent and
                        CloseViewEvent.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Registers event listeners to show
                  or hide the emoji table and handle emoji selection. Handles
                  validation of target player and tile ownership.
                </p>
                <p>
                  See also:
                  <a href="#">class <code>SendEmojiIntentEvent</code></a
                  >, <a href="#">class <code>TerraNulliusImpl</code></a>
                </p>
                <h5 id="private-property-onemojiclicked">
                  private property <code>onEmojiClicked</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>onEmojiClicked</code></td>
                      <td><code>(emoji: string) =&gt; void</code></td>
                      <td>
                        Callback function invoked when an emoji is clicked.
                        Initially a no-op.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-render_10">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult | null</code>. Generates the HTML
                  content for the emoji table using Lit <code>html</code>.
                  Returns <code>null</code> if <code>isVisible</code> is false.
                  Includes styling and event handlers for interaction.
                </p>
                <h5 id="public-function-hidetable">
                  public function <code>hideTable()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Hides the emoji table and requests
                  a DOM update.
                </p>
                <h5 id="public-function-showtable">
                  public function <code>showTable()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>oneEmojiClicked</code></td>
                      <td><code>(emoji: string) =&gt; void</code></td>
                      <td>Callback executed when an emoji is clicked.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Shows the emoji table and assigns
                  the click callback.
                </p>
                <h5 id="public-function-createrenderroot_5">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Returns <code>HTMLElement</code>. Overrides LitElement
                  behavior to disable shadow DOM and allow Tailwind CSS styling.
                </p>
                <h3 id="layerseventsdisplayts">./layers/EventsDisplay.ts</h3>
                <h4 id="class-eventsdisplay">
                  class <code>EventsDisplay</code>
                </h4>
                <p>
                  Manages the display of in-game events, chat messages, alliance
                  updates, and attacks. Implements the
                  <code>Layer</code> interface.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus for emitting and listening to game-related
                        events.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Current game view instance.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>active</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates if the display is active.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>events</code></td>
                      <td><code>GameEvent[]</code></td>
                      <td>List of events currently shown in the display.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>alliancesCheckedAt</code></td>
                      <td><code>Map&lt;number, Tick&gt;</code></td>
                      <td>Tracks last checked tick for each alliance by ID.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>incomingAttacks</code></td>
                      <td><code>AttackUpdate[]</code></td>
                      <td>Tracks incoming attacks.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>outgoingAttacks</code></td>
                      <td><code>AttackUpdate[]</code></td>
                      <td>Tracks outgoing attacks.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>outgoingLandAttacks</code></td>
                      <td><code>AttackUpdate[]</code></td>
                      <td>Tracks outgoing land-based attacks.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>outgoingBoats</code></td>
                      <td><code>UnitView[]</code></td>
                      <td>Tracks transport ship units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_hidden</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the display is currently hidden.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Visibility of the events display panel.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>newEvents</code></td>
                      <td><code>number</code></td>
                      <td>Counter for new events when hidden.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>latestGoldAmount</code></td>
                      <td><code>bigint | null</code></td>
                      <td>Tracks last gold change for animation.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>goldAmountAnimating</code></td>
                      <td><code>boolean</code></td>
                      <td>Controls animation state for gold change.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>goldAmountTimeoutId</code></td>
                      <td>
                        <code>ReturnType&lt;typeof setTimeout&gt; | null</code>
                      </td>
                      <td>Timeout reference for gold animation.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventsFilters</code></td>
                      <td><code>Map&lt;MessageCategory, boolean&gt;</code></td>
                      <td>Tracks which categories are filtered out.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_5">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Initializes the layer (currently
                  empty placeholder).
                </p>
                <h5 id="public-function-tick_5">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Updates event display state,
                  filters expired events, updates incoming/outgoing attacks, and
                  requests UI update.
                </p>
                <h5 id="public-function-disconnectedcallback">
                  public function <code>disconnectedCallback()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Cleans up resources like gold
                  animation timeout when the element is removed from DOM.
                </p>
                <h5 id="public-function-shouldtransform_2">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Returns <code>false</code> to
                  indicate this layer does not require coordinate
                  transformation.
                </p>
                <h5 id="public-function-renderlayer_1">
                  public function <code>renderLayer()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Placeholder for
                  <code>Layer</code> interface; actual rendering is handled in
                  <code>render()</code>.
                </p>
                <h5 id="private-function-renderbutton">
                  private function <code>renderButton()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>options</code></td>
                      <td><code>object</code></td>
                      <td>
                        Options for rendering a button including content, click
                        handler, CSS classes, disabled state, translation, and
                        visibility.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>. Generates a button with
                  specified content and options.
                </p>
                <h5 id="private-function-rendertogglebutton">
                  private function <code>renderToggleButton()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>src</code></td>
                      <td><code>string</code></td>
                      <td>Image source for the toggle button.</td>
                    </tr>
                    <tr>
                      <td><code>category</code></td>
                      <td><code>MessageCategory</code></td>
                      <td>Event category to toggle.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>. Renders an event filter
                  toggle button.
                </p>
                <h5 id="private-function-togglehidden_1">
                  private function <code>toggleHidden()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Toggles the
                  <code>_hidden</code> state and resets new events counter.
                </p>
                <h5 id="private-function-toggleeventfilter">
                  private function <code>toggleEventFilter()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>filterName</code></td>
                      <td><code>MessageCategory</code></td>
                      <td>The category of events to toggle filter state.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the event filter and
                  refreshes display.
                </p>
                <h5 id="private-function-checkforallianceexpirations">
                  private function <code>checkForAllianceExpirations()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Checks player's alliances for
                  imminent expiration and adds events to notify the player.
                </p>
                <h5 id="private-function-addevent_1">
                  private function <code>addEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>GameEvent</code></td>
                      <td>Event object to add to the display.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Adds the event to the display and
                  increments new event counter if hidden.
                </p>
                <h5 id="private-function-removeevent_1">
                  private function <code>removeEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>index</code></td>
                      <td><code>number</code></td>
                      <td>Index of the event to remove.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Removes the event at the given
                  index.
                </p>
                <h5 id="event-handlers-onxevent">Event Handlers (onXEvent)</h5>
                <p>
                  Each <code>onXEvent</code> function handles a specific game
                  update type and adds corresponding <code>GameEvent</code>s:
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Function</th>
                      <th>Parameter</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>onDisplayMessageEvent</code></td>
                      <td><code>DisplayMessageUpdate</code></td>
                      <td>Handles standard messages including gold changes.</td>
                    </tr>
                    <tr>
                      <td><code>onDisplayChatEvent</code></td>
                      <td><code>DisplayChatMessageUpdate</code></td>
                      <td>Handles chat messages and formatting.</td>
                    </tr>
                    <tr>
                      <td><code>onAllianceRequestEvent</code></td>
                      <td><code>AllianceRequestUpdate</code></td>
                      <td>Handles incoming alliance requests.</td>
                    </tr>
                    <tr>
                      <td><code>onAllianceRequestReplyEvent</code></td>
                      <td><code>AllianceRequestReplyUpdate</code></td>
                      <td>Handles replies to alliance requests.</td>
                    </tr>
                    <tr>
                      <td><code>onBrokeAllianceEvent</code></td>
                      <td><code>BrokeAllianceUpdate</code></td>
                      <td>Handles events where alliances are broken.</td>
                    </tr>
                    <tr>
                      <td><code>onAllianceExpiredEvent</code></td>
                      <td><code>AllianceExpiredUpdate</code></td>
                      <td>Handles notifications of alliance expiration.</td>
                    </tr>
                    <tr>
                      <td><code>onTargetPlayerEvent</code></td>
                      <td><code>TargetPlayerUpdate</code></td>
                      <td>Handles attack requests between players.</td>
                    </tr>
                    <tr>
                      <td><code>onEmojiMessageEvent</code></td>
                      <td><code>EmojiUpdate</code></td>
                      <td>Handles emoji messages sent between players.</td>
                    </tr>
                    <tr>
                      <td><code>onUnitIncomingEvent</code></td>
                      <td><code>UnitIncomingUpdate</code></td>
                      <td>Handles incoming unit attacks.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-helper-functions-for-rendering">
                  Private helper functions for rendering
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Function</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>getEventDescription</code></td>
                      <td>
                        Returns event description; uses
                        <code>unsafeHTML</code> if
                        <code>unsafeDescription</code> is true.
                      </td>
                    </tr>
                    <tr>
                      <td><code>attackWarningOnClick</code></td>
                      <td>
                        Handles click on an incoming attack, navigating to
                        attacker or position.
                      </td>
                    </tr>
                    <tr>
                      <td><code>renderIncomingAttacks</code></td>
                      <td>Renders incoming attacks as buttons.</td>
                    </tr>
                    <tr>
                      <td><code>renderOutgoingAttacks</code></td>
                      <td>Renders outgoing attacks with cancel buttons.</td>
                    </tr>
                    <tr>
                      <td><code>renderOutgoingLandAttacks</code></td>
                      <td>
                        Renders outgoing land attacks with cancel buttons.
                      </td>
                    </tr>
                    <tr>
                      <td><code>renderBoats</code></td>
                      <td>Renders transport units with cancel buttons.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-render_11">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the events panel
                  including toggle buttons, events table, incoming/outgoing
                  attacks, and animation effects.
                </p>
                <h5 id="public-function-createrenderroot_6">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Returns <code>HTMLElement</code>. Disables shadow DOM to allow
                  global styling (Tailwind CSS).
                </p>
                <h3 id="layersfpsdisplayts">./layers/FPSDisplay.ts</h3>
                <h4 id="class-fpsdisplay">class <code>FPSDisplay</code></h4>
                <p>
                  Displays a draggable FPS overlay, showing current FPS,
                  60-second average, and frame time. Implements the
                  <code>Layer</code> interface.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus for listening to performance overlay toggle
                        events.
                      </td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>
                        Stores user preferences including performance overlay
                        visibility.
                      </td>
                    </tr>
                    <tr>
                      <td><code>currentFPS</code></td>
                      <td><code>number</code></td>
                      <td>Current FPS calculated from recent frame times.</td>
                    </tr>
                    <tr>
                      <td><code>averageFPS</code></td>
                      <td><code>number</code></td>
                      <td>Average FPS over the last 60 seconds.</td>
                    </tr>
                    <tr>
                      <td><code>frameTime</code></td>
                      <td><code>number</code></td>
                      <td>Duration of the last frame in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the FPS overlay is visible.</td>
                    </tr>
                    <tr>
                      <td><code>isDragging</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the overlay is being dragged.</td>
                    </tr>
                    <tr>
                      <td><code>position</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>Overlay position in pixels.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_6">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Registers an event listener for
                  <code>TogglePerformanceOverlayEvent</code> to toggle
                  performance overlay visibility in user settings.
                </p>
                <h5 id="public-function-setvisible">
                  public function <code>setVisible()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the FPS overlay should be shown</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>. Updates the visibility state.</p>
                <h5 id="private-function-handleclose">
                  private function <code>handleClose()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Handles click on the close button
                  and toggles performance overlay in user settings.
                </p>
                <h5 id="private-function-handlemousedown">
                  private function <code>handleMouseDown()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>MouseEvent</code></td>
                      <td>Mouse event triggered by user interaction</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Initiates dragging unless the close
                  button is clicked.
                </p>
                <h5 id="private-function-handlemousemove">
                  private function <code>handleMouseMove()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td>MouseEvent</td>
                      <td>Mouse movement event during dragging</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the overlay position based
                  on mouse movement, keeping it within viewport bounds.
                </p>
                <h5 id="private-function-handlemouseup">
                  private function <code>handleMouseUp()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Stops dragging and removes event
                  listeners.
                </p>
                <h5 id="public-function-updatefps">
                  public function <code>updateFPS()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>frameDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration of the current frame (ms)</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates current FPS, average FPS
                  over 60 seconds, and frame time. Requests DOM update.
                </p>
                <h5 id="public-function-shouldtransform_3">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Indicates whether the layer
                  should be transformed; always returns <code>false</code>.
                </p>
                <h5 id="private-function-getfpscolor">
                  private function <code>getFPSColor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>fps</code></td>
                      <td><code>number</code></td>
                      <td>FPS value to determine color</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Returns a CSS class string based
                  on FPS thresholds (<code>fps-good</code>,
                  <code>fps-warning</code>, <code>fps-bad</code>).
                </p>
                <h5 id="public-function-render_12">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Generates HTML for the
                  overlay with current FPS, average FPS, and frame time.
                  Positions the overlay according to <code>position</code> and
                  applies dragging style if <code>isDragging</code> is true.
                </p>
                <h3 id="layersfxlayerts">./layers/FxLayer.ts</h3>
                <h4 id="class-fxlayer">class <code>FxLayer</code></h4>
                <p>
                  Manages all visual effects (FX) on the game layer, including
                  unit events, bonus events, nuke events, and environmental
                  animations.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>The canvas used for rendering FX.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context for the FX canvas.</td>
                    </tr>
                    <tr>
                      <td><code>lastRandomEvent</code></td>
                      <td><code>number</code></td>
                      <td>Counter for random environmental FX.</td>
                    </tr>
                    <tr>
                      <td><code>randomEventRate</code></td>
                      <td><code>number</code></td>
                      <td>Interval threshold for random FX events.</td>
                    </tr>
                    <tr>
                      <td><code>lastRefresh</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of the last FX layer refresh.</td>
                    </tr>
                    <tr>
                      <td><code>refreshRate</code></td>
                      <td><code>number</code></td>
                      <td>Interval threshold (ms) for redrawing FX.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme configuration.</td>
                    </tr>
                    <tr>
                      <td><code>animatedSpriteLoader</code></td>
                      <td><code>AnimatedSpriteLoader</code></td>
                      <td>Loads and caches animated sprites.</td>
                    </tr>
                    <tr>
                      <td><code>allFx</code></td>
                      <td><code>Fx[]</code></td>
                      <td>List of active FX instances.</td>
                    </tr>
                    <tr>
                      <td><code>boatTargetFxByUnitId</code></td>
                      <td><code>Map&lt;number, TargetFx&gt;</code></td>
                      <td>
                        Persistent FX markers for transport ships by unit ID.
                      </td>
                    </tr>
                    <tr>
                      <td><code>nukeTargetFxByUnitId</code></td>
                      <td><code>Map&lt;number, NukeAreaFx&gt;</code></td>
                      <td>Persistent FX markers for nukes by unit ID.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_11">
                  public constructor <code>constructor()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game instance this FX layer belongs to.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the FX layer, sets the theme from the game
                  configuration, and prepares internal state.
                </p>
                <h5 id="public-function-shouldtransform_4">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Determines whether the FX layer requires transformation;
                  always returns <code>true</code>.
                </p>
                <h5 id="public-function-tick_6">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates the FX layer state. Processes random events, boat
                  targets, and all pending game updates (units, bonus events,
                  railroad events, conquest events). Skips processing if FX
                  layer is disabled in user settings.
                </p>
                <h5 id="private-function-manageboattargetfx">
                  private function <code>manageBoatTargetFx()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Removes FX markers for transport ships that have reached their
                  target, retreated, or become inactive.
                </p>
                <h5 id="private-function-createnuketargetfxifowned">
                  private function <code>createNukeTargetFxIfOwned()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to potentially assign a nuke target FX.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a persistent nuke target FX for the current player or
                  teammates if the unit is active and owned by the player or
                  same team.
                </p>
                <h5 id="public-function-onbonusevent">
                  public function <code>onBonusEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>bonus</code></td>
                      <td><code>BonusEventUpdate</code></td>
                      <td>Bonus event update from the game.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Displays textual FX for gold or troop bonuses for the current
                  player only.
                </p>
                <h5 id="public-function-addtextfx">
                  public function <code>addTextFx()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>text</code></td>
                      <td><code>string</code></td>
                      <td>Text to display.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Adds a floating text FX at the specified location.</p>
                <h5 id="public-function-randomevent">
                  public function <code>randomEvent()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates random environmental FX (Shark, Bubble, Tornado,
                  Tentacle, MiniSmoke) at random ocean locations.
                </p>
                <h5 id="public-function-onunitevent">
                  public function <code>onUnitEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit triggering FX.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Dispatches FX handling based on the unit type (TransportShip,
                  AtomBomb, MIRVWarhead, HydrogenBomb, Warship, Shell, Train,
                  DefensePost, City, Port, MissileSilo, SAMLauncher, Factory).
                </p>
                <h5 id="public-function-onshellevent">
                  public function <code>onShellEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Shell unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates mini explosion FX for inactive shell units that
                  reached their target.
                </p>
                <h5 id="public-function-ontrainevent">
                  public function <code>onTrainEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Train unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates mini explosion FX for inactive trains that did not
                  reach their target.
                </p>
                <h5 id="public-function-onrailroadevent">
                  public function <code>onRailroadEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>railroad</code></td>
                      <td><code>RailroadUpdate</code></td>
                      <td>Railroad event update.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates FX along railroad tiles based on a 1/3 chance per
                  tile.
                </p>
                <h5 id="public-function-onconquestevent">
                  public function <code>onConquestEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>conquest</code></td>
                      <td><code>ConquestUpdate</code></td>
                      <td>Conquest event update.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Displays FX and plays sound effect for conquests belonging to
                  the current player.
                </p>
                <h5 id="public-function-onwarshipevent">
                  public function <code>onWarshipEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Warship unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates explosion FX for inactive warships and adds a
                  sinking ship sprite.
                </p>
                <h5 id="public-function-onstructureevent">
                  public function <code>onStructureEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Structure unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Adds building explosion FX for inactive structures.</p>
                <h5 id="public-function-onnukeevent">
                  public function <code>onNukeEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Nuclear unit.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Explosion radius.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Handles nuke impact, removing FX markers, and delegating to
                  SAM interception or nuke explosion handlers.
                </p>
                <h5 id="private-function-handlenukeexplosion">
                  private function <code>handleNukeExplosion()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Nuclear unit.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Explosion radius.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Generates nuke explosion FX using <code>nukeFxFactory</code>.
                </p>
                <h5 id="private-function-handlesaminterception">
                  private function <code>handleSAMInterception()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Nuclear unit intercepted by SAM.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Generates SAM explosion and shockwave FX.</p>
                <h5 id="public-async-function-init">
                  public async function <code>init()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Initializes FX layer canvas and loads all animated sprites.
                </p>
                <h5 id="public-function-redraw_1">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Prepares the canvas and context for rendering FX, disables
                  image smoothing, and sets canvas dimensions to match the game.
                </p>
                <h5 id="public-function-renderlayer_2">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context of the main game canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the FX layer onto the main game canvas if FX are
                  enabled, refreshing periodically based on
                  <code>refreshRate</code>.
                </p>
                <h5 id="private-function-renderallfx">
                  private function <code>renderAllFx()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context.</td>
                    </tr>
                    <tr>
                      <td><code>delta</code></td>
                      <td><code>number</code></td>
                      <td>Time since last render (ms).</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears the FX canvas and renders all active FX.</p>
                <h5 id="private-function-rendercontextfx">
                  private function <code>renderContextFx()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Duration since last render (ms).</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Iterates through all FX, updating and removing inactive ones.
                </p>
                <h3 id="layersgameleftsidebarts">
                  ./layers/GameLeftSidebar.ts
                </h3>
                <h4 id="class-gameleftsidebar">
                  class <code>GameLeftSidebar</code>
                </h4>
                <p>
                  Manages the left sidebar in the game UI, displaying player
                  team labels, leaderboard, and team statistics. Implements the
                  <code>Layer</code> interface.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>isLeaderboardShow</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the leaderboard is visible.</td>
                    </tr>
                    <tr>
                      <td><code>isTeamLeaderboardShow</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the team leaderboard is visible.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the sidebar is visible.</td>
                    </tr>
                    <tr>
                      <td><code>isPlayerTeamLabelVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the player's team label is visible.
                      </td>
                    </tr>
                    <tr>
                      <td><code>playerTeam</code></td>
                      <td><code>string \| null</code></td>
                      <td>Stores the player's team identifier.</td>
                    </tr>
                    <tr>
                      <td><code>playerColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Color associated with the player's team.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Game view instance for accessing player and game state.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_shownOnInit</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Tracks whether the sidebar was initially shown on large
                        screens.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="public-function-createrenderroot_7">
                  public function <code>createRenderRoot()</code>
                </h4>
                <p>
                  Returns <code>this</code>. Disables shadow DOM to allow global
                  styles.
                </p>
                <h4 id="public-function-init_7">
                  public function <code>init()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Initializes sidebar visibility,
                  shows player team label if in a team game, and sets default
                  visibility for large screens.
                </p>
                <h4 id="public-function-tick_7">
                  public function <code>tick()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Updates the sidebar state each game
                  tick, including player team label, leaderboard visibility, and
                  initial sidebar setup after spawn phase.
                </p>
                <h4 id="private-function-toggleleaderboard">
                  private function <code>toggleLeaderboard()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Toggles visibility of the main
                  leaderboard.
                </p>
                <h4 id="private-function-toggleteamleaderboard">
                  private function <code>toggleTeamLeaderboard()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Toggles visibility of the team
                  leaderboard.
                </p>
                <h4 id="private-getter-isteamgame">
                  private getter <code>isTeamGame()</code>
                </h4>
                <p>
                  Returns <code>boolean</code>. Determines whether the current
                  game mode is a team game.
                </p>
                <h4 id="private-function-gettranslatedplayerteamlabel">
                  private function <code>getTranslatedPlayerTeamLabel()</code>
                </h4>
                <p>
                  Returns <code>string</code>. Retrieves the localized team
                  label; falls back to the team identifier if no translation is
                  found.
                </p>
                <h4 id="public-function-render_13">
                  public function <code>render()</code>
                </h4>
                <p>
                  Returns <code>TemplateResult</code>. Generates the sidebar
                  HTML structure including team label, leaderboard buttons, and
                  embedded leaderboard and team stats components. Applies
                  dynamic visibility and styling based on state.
                </p>
                <h3 id="layersgamerightsidebarts">
                  ./layers/GameRightSidebar.ts
                </h3>
                <h4 id="class-gamerightsidebar">
                  class <code>GameRightSidebar</code>
                </h4>
                <p>
                  Manages the right sidebar in the game UI, including replay
                  controls, pause/play functionality, timer display, settings,
                  and exit actions. Implements the <code>Layer</code> interface.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Game view instance for accessing player and game state.
                      </td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for emitting UI events.</td>
                    </tr>
                    <tr>
                      <td><code>_isSinglePlayer</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the game is single-player or a replay.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_isReplayVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the replay panel is visible.</td>
                    </tr>
                    <tr>
                      <td><code>_isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the sidebar is visible.</td>
                    </tr>
                    <tr>
                      <td><code>isPaused</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the game is paused.</td>
                    </tr>
                    <tr>
                      <td><code>timer</code></td>
                      <td><code>number</code></td>
                      <td>Tracks the game timer in seconds.</td>
                    </tr>
                    <tr>
                      <td><code>hasWinner</code></td>
                      <td><code>boolean</code></td>
                      <td>Tracks whether a winner has been determined.</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="public-function-createrenderroot_8">
                  public function <code>createRenderRoot()</code>
                </h4>
                <p>
                  Returns <code>this</code>. Disables shadow DOM to allow global
                  styles.
                </p>
                <h4 id="public-function-init_8">
                  public function <code>init()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Initializes the sidebar, sets
                  <code>_isSinglePlayer</code>, visibility, and spawn phase
                  state.
                </p>
                <h4 id="public-function-tick_8">
                  public function <code>tick()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Updates timer logic, checks for
                  game winner, and handles spawn phase adjustments.
                </p>
                <h4 id="private-function-secondstohms">
                  private function <code>secondsToHms()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>d</code></td>
                      <td><code>number</code></td>
                      <td>Number of seconds to convert.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Converts seconds to a
                  human-readable format (h, m, s). Uses <code>"-"</code> as
                  fallback for zero.
                </p>
                <h4 id="private-function-togglereplaypanel">
                  private function <code>toggleReplayPanel()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Toggles visibility of the replay
                  panel and emits <code>ShowReplayPanelEvent</code> with the
                  updated state and <code>_isSinglePlayer</code> flag.
                </p>
                <h4 id="private-function-onpausebuttonclick">
                  private function <code>onPauseButtonClick()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Toggles the paused state and emits
                  a <code>PauseGameEvent</code>.
                </p>
                <h4 id="private-function-onexitbuttonclick">
                  private function <code>onExitButtonClick()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Handles exit logic, including
                  player confirmation if alive, then redirects to the home page.
                </p>
                <h4 id="private-function-onsettingsbuttonclick">
                  private function <code>onSettingsButtonClick()</code>
                </h4>
                <p>
                  Returns <code>void</code>. Emits
                  <code>ShowSettingsModalEvent</code> to display settings panel.
                </p>
                <h4 id="public-function-render_14">
                  public function <code>render()</code>
                </h4>
                <p>
                  Returns <code>TemplateResult</code>. Renders the sidebar HTML,
                  including replay, pause/play, settings, exit buttons, and game
                  timer. Applies dynamic visibility and styling based on state.
                </p>
                <h4 id="private-function-mayberenderreplaybuttons">
                  private function <code>maybeRenderReplayButtons()</code>
                </h4>
                <p>
                  Returns <code>TemplateResult</code>. Conditionally renders
                  replay and pause/play buttons if
                  <code>_isSinglePlayer</code> or the game is a replay.
                </p>
                <h3 id="layersheadsupmessagets">./layers/HeadsUpMessage.ts</h3>
                <h4 id="class-headsupmessage">
                  class <code>HeadsUpMessage</code>
                </h4>
                <p>
                  Displays a temporary spawn selection message during the game's
                  spawn phase.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The current game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the message is currently visible.
                        Managed internally.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_9">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>LitElement</code>.</p>
                <p>
                  Overrides LitElement's shadow DOM root creation to render into
                  the light DOM, enabling external CSS styling.
                </p>
                <h5 id="public-function-init_9">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the message by making it visible and requesting an
                  update to render.
                </p>
                <h5 id="public-function-tick_9">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates visibility based on the game state. Hides the message
                  once the spawn phase ends.
                </p>
                <h5 id="public-function-render_15">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Renders the message element if <code>isVisible</code> is
                  <code>true</code>. Uses <code>translateText</code> to display
                  a localized prompt: "choose_spawn".
                </p>
                <p>
                  <strong>See also:</strong>
                  <a href="#layer">Layer interface</a>
                </p>
                <h3 id="layerslayerts">./layers/Layer.ts</h3>
                <h4 id="interface-layer">interface <code>Layer</code></h4>
                <p>
                  Defines the lifecycle and rendering contract for all game
                  layers. Layers can optionally implement these methods to
                  manage state, rendering, and transformations.
                </p>
                <p><strong>Optional Methods:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>init</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>
                        Optional initialization logic for the layer. Called once
                        when the layer is first set up.
                      </td>
                    </tr>
                    <tr>
                      <td><code>tick</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>
                        Optional per-frame update logic. Called every game tick.
                      </td>
                    </tr>
                    <tr>
                      <td><code>renderLayer</code></td>
                      <td>
                        <code
                          >(context: CanvasRenderingContext2D) =&gt; void</code
                        >
                      </td>
                      <td>
                        Optional rendering logic for the layer. Receives a
                        canvas rendering context to draw to.
                      </td>
                    </tr>
                    <tr>
                      <td><code>shouldTransform</code></td>
                      <td><code>() =&gt; boolean</code></td>
                      <td>
                        Optional indicator whether the layer should apply
                        transformations like translation/scaling. Returns
                        <code>true</code> or <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>redraw</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>
                        Optional method to refresh or re-initialize the layer's
                        internal canvas or state. Called when the layer needs a
                        complete redraw.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p><strong>Usage:</strong></p>
                <p>
                  Layers implementing this interface are managed by the game's
                  rendering system. Methods are all optional, allowing flexible
                  layer implementations that only override necessary behaviors.
                </p>
                <h3 id="layersleaderboardts">./layers/Leaderboard.ts</h3>
                <h4 id="interface-entry">interface <code>Entry</code></h4>
                <p>Represents a single player entry in the leaderboard.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>string</code></td>
                      <td>Player's display name</td>
                    </tr>
                    <tr>
                      <td><code>position</code></td>
                      <td><code>number</code></td>
                      <td>Player's position on the leaderboard</td>
                    </tr>
                    <tr>
                      <td><code>score</code></td>
                      <td><code>string</code></td>
                      <td>Player's score as a formatted percentage</td>
                    </tr>
                    <tr>
                      <td><code>gold</code></td>
                      <td><code>string</code></td>
                      <td>Player's gold formatted as string</td>
                    </tr>
                    <tr>
                      <td><code>troops</code></td>
                      <td><code>string</code></td>
                      <td>Player's troops formatted as string</td>
                    </tr>
                    <tr>
                      <td><code>isMyPlayer</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the entry corresponds to the current player
                      </td>
                    </tr>
                    <tr>
                      <td><code>isOnSameTeam</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the player is on the same team as the current
                        player
                      </td>
                    </tr>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Reference to the PlayerView instance</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-gotoplayerevent">
                  class <code>GoToPlayerEvent</code>
                </h4>
                <p>
                  Implements <code>GameEvent</code>. Event to navigate to a
                  specific player.
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player to navigate to</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <h4 id="class-gotopositionevent">
                  class <code>GoToPositionEvent</code>
                </h4>
                <p>
                  Implements <code>GameEvent</code>. Event to navigate to
                  specific coordinates.
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <h4 id="class-gotounitevent">
                  class <code>GoToUnitEvent</code>
                </h4>
                <p>
                  Implements <code>GameEvent</code>. Event to navigate to a
                  specific unit.
                </p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to navigate to</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <h4 id="class-leaderboard">class <code>Leaderboard</code></h4>
                <p>
                  Displays the game leaderboard and handles sorting, updating,
                  and player navigation.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView | null</code></td>
                      <td>Current game view instance</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus | null</code></td>
                      <td>Event bus for emitting player navigation events</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>players</code></td>
                      <td><code>Entry[]</code></td>
                      <td>Array of leaderboard entries</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the leaderboard is visible</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>showTopFive</code></td>
                      <td><code>boolean</code></td>
                      <td>Flag to show only the top five players</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_sortKey</code></td>
                      <td><code>'tiles' | 'gold' | 'troops'</code></td>
                      <td>Current sort key</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_sortOrder</code></td>
                      <td><code>'asc' | 'desc'</code></td>
                      <td>Current sort order</td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_10">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Returns <code>HTMLElement</code>. Overrides LitElement to use
                  light DOM for Tailwind styling.
                </p>
                <h5 id="public-function-init_10">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Placeholder initialization method.
                </p>
                <h5 id="public-function-tick_10">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Updates the leaderboard every 10
                  ticks if visible.
                </p>
                <h5 id="private-function-setsort">
                  private function <code>setSort()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>key</code></td>
                      <td><code>'tiles' | 'gold' | 'troops'</code></td>
                      <td>Sorting key to apply</td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates the sort key and order,
                  then refreshes the leaderboard.
                </p>
                <h5 id="private-function-updateleaderboard">
                  private function <code>updateLeaderboard()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Computes the current leaderboard
                  entries based on game state, sort order, and whether to show
                  only top five. Ensures current player is included if not in
                  top five.
                </p>
                <p>
                  See also:
                  <a href="#interface-entry">interface <code>Entry</code></a>
                </p>
                <h5 id="private-function-handlerowclickplayer">
                  private function <code>handleRowClickPlayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player clicked on the leaderboard row</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits
                  <code>GoToPlayerEvent</code> via the event bus.
                </p>
                <h5 id="public-function-renderlayer_3">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas rendering context</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Placeholder for rendering the
                  leaderboard layer.
                </p>
                <h5 id="public-function-shouldtransform_5">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Indicates whether the
                  leaderboard layer requires canvas transformations. Always
                  returns false.
                </p>
                <h5 id="public-function-render_16">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the leaderboard
                  HTML including header row, sortable columns, and entries.
                  Handles clicks to sort and toggle top-five visibility.
                </p>
                <h4 id="private-function-formatpercentage">
                  private function <code>formatPercentage()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>value</code></td>
                      <td><code>number</code></td>
                      <td>Value between 0 and 1 to format as percentage</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Formats a number as a percentage
                  string with one decimal place. Returns <code>0%</code> if the
                  input is NaN.
                </p>
                <h3 id="layersmainradialmenuts">./layers/MainRadialMenu.ts</h3>
                <h4 id="class-mainradialmenu">
                  class <code>MainRadialMenu</code>
                </h4>
                <p>
                  Manages the main radial menu for player actions, including
                  build menus, emoji table, chat integration, and UI updates.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>radialMenu</code></td>
                      <td><code>RadialMenu</code></td>
                      <td>
                        Core radial menu instance handling menu display and
                        interactions
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActionHandler</code></td>
                      <td><code>PlayerActionHandler</code></td>
                      <td>
                        Handles player actions triggered from the radial menu
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>chatIntegration</code></td>
                      <td><code>ChatIntegration</code></td>
                      <td>
                        Integrates chat functionality for interacting with other
                        players
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>clickedTile</code></td>
                      <td><code>TileRef | null</code></td>
                      <td>
                        The last clicked tile for which the menu was opened
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="constructor">constructor</h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing and emitting events</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Current game view instance</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Converts screen coordinates to world coordinates</td>
                    </tr>
                    <tr>
                      <td><code>emojiTable</code></td>
                      <td><code>EmojiTable</code></td>
                      <td>Reference to the emoji table component</td>
                    </tr>
                    <tr>
                      <td><code>buildMenu</code></td>
                      <td><code>BuildMenu</code></td>
                      <td>Reference to the build menu component</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>UI state management instance</td>
                    </tr>
                    <tr>
                      <td><code>playerPanel</code></td>
                      <td><code>PlayerPanel</code></td>
                      <td>Reference to the player panel component</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the radial menu, player action handler, and chat
                  integration.
                </p>
                <h5 id="public-function-init_11">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Sets up the radial menu and
                  subscribes to <code>ContextMenuEvent</code> to open the menu
                  when the player right-clicks a valid tile.
                </p>
                <h5 id="private-async-function-updateplayeractions">
                  private async function <code>updatePlayerActions()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The current player</td>
                    </tr>
                    <tr>
                      <td><code>actions</code></td>
                      <td><code>PlayerActions</code></td>
                      <td>
                        Available actions for the player on the clicked tile
                      </td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>The tile for which actions are computed</td>
                    </tr>
                    <tr>
                      <td><code>screenX?</code></td>
                      <td><code>number</code></td>
                      <td>Optional X coordinate for menu display</td>
                    </tr>
                    <tr>
                      <td><code>screenY?</code></td>
                      <td><code>number</code></td>
                      <td>Optional Y coordinate for menu display</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Promise&lt;void&gt;</code>. Updates the radial
                  menu parameters, chat modal, build menu, and emoji table based
                  on the provided player actions and tile. Shows or refreshes
                  the radial menu at the specified screen coordinates.
                </p>
                <h5 id="public-async-function-tick_1">
                  public async function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>Promise&lt;void&gt;</code>. Periodically
                  refreshes the radial menu actions every 5 game ticks if the
                  menu is visible.
                </p>
                <h5 id="public-function-renderlayer_4">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas rendering context</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Renders the radial menu layer onto
                  the canvas.
                </p>
                <h5 id="public-function-shouldtransform_6">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Indicates whether the radial
                  menu layer requires canvas transformations.
                </p>
                <h5 id="public-function-closemenu">
                  public function <code>closeMenu()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Hides the radial menu, build menu,
                  emoji table, and player panel if any are visible.
                </p>
                <h3 id="layersmultitabmodalts">./layers/MultiTabModal.ts</h3>
                <h4 id="class-multitabmodal">
                  class <code>MultiTabModal</code>
                </h4>
                <p>
                  Displays a modal warning when multiple tabs are detected for
                  the same player. Handles countdown, penalty display, and event
                  dispatching.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Current game view instance</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>detector</code></td>
                      <td><code>MultiTabDetector</code></td>
                      <td>Monitors multi-tab activity</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>
                        Duration of penalty in milliseconds (default: 5000)
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>countdown</code></td>
                      <td><code>number</code></td>
                      <td>Countdown in seconds for the modal display</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the modal is currently visible</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>fakeIp</code></td>
                      <td><code>string</code></td>
                      <td>Fake IP displayed in the modal</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>deviceFingerprint</code></td>
                      <td><code>string</code></td>
                      <td>Fake device fingerprint displayed in the modal</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>reported</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the multi-tab violation is reported</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>intervalId</code></td>
                      <td><code>number | undefined</code></td>
                      <td>ID of the interval timer for countdown</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_11">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Returns <code>HTMLElement</code>. Disables shadow DOM to allow
                  Tailwind styling.
                </p>
                <h5 id="public-function-tick_11">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Monitors multi-tab activity and
                  shows the modal when detected, unless the game is in spawn
                  phase, singleplayer, or dev environment.
                </p>
                <h5 id="public-function-init_12">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Initializes fake IP, device
                  fingerprint, and reported status.
                </p>
                <h5 id="private-function-generatefakeip">
                  private function <code>generateFakeIp()</code>
                </h5>
                <p>
                  Returns <code>string</code>. Generates a random IP address in
                  <code>xxx.xxx.xxx.xxx</code> format.
                </p>
                <h5 id="private-function-generatedevicefingerprint">
                  private function <code>generateDeviceFingerprint()</code>
                </h5>
                <p>
                  Returns <code>string</code>. Generates a random 32-character
                  hexadecimal device fingerprint.
                </p>
                <h5 id="public-function-show">
                  public function <code>show()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>duration</code></td>
                      <td><code>number</code></td>
                      <td>Duration in milliseconds to display the modal</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Shows the modal, starts the
                  countdown timer, and requests a DOM update.
                </p>
                <h5 id="public-function-hide">
                  public function <code>hide()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Hides the modal, clears the
                  countdown timer, dispatches
                  <code>penalty-complete</code> event, and requests a DOM
                  update.
                </p>
                <h5 id="public-function-disconnectedcallback_1">
                  public function <code>disconnectedCallback()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Ensures interval timer is cleared
                  when the element is removed from the DOM.
                </p>
                <h5 id="public-function-render_17">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>. Renders the modal HTML
                  including warning messages, fake IP and fingerprint, countdown
                  timer, progress bar, and penalty information.
                </p>
                <h3 id="layersnamelayerts">./layers/NameLayer.ts</h3>
                <h4 id="class-renderinfo">class <code>RenderInfo</code></h4>
                <p>Tracks rendering information for a player.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>icons</code></td>
                      <td><code>Map&lt;string, HTMLImageElement&gt;</code></td>
                      <td>Maps icon identifiers to HTML image elements</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player associated with this render info</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastRenderCalc</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of last render calculation</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>location</code></td>
                      <td><code>Cell | null</code></td>
                      <td>Last known screen location of the player's name</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>fontSize</code></td>
                      <td><code>number</code></td>
                      <td>Current font size for rendering the name</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>fontColor</code></td>
                      <td><code>string</code></td>
                      <td>Current font color for rendering the name</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>element</code></td>
                      <td><code>HTMLElement</code></td>
                      <td>
                        HTML element representing the player's name and icons
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-namelayer-implements-layer">
                  class <code>NameLayer</code> implements <code>Layer</code>
                </h4>
                <p>
                  Manages the rendering of player names, flags, troops, and
                  associated icons on a separate layer.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>The canvas used for the layer</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastChecked</code></td>
                      <td><code>number</code></td>
                      <td>Last time the layer was checked for updates</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renderCheckRate</code></td>
                      <td><code>number</code></td>
                      <td>Frequency (ms) for checking renders</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renderRefreshRate</code></td>
                      <td><code>number</code></td>
                      <td>
                        Minimum time (ms) between individual render updates
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>rand</code></td>
                      <td><code>PseudoRandom</code></td>
                      <td>
                        Random number generator for slight render variations
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renders</code></td>
                      <td><code>RenderInfo[]</code></td>
                      <td>List of all active render info objects</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>seenPlayers</code></td>
                      <td><code>Set&lt;PlayerView&gt;</code></td>
                      <td>Tracks players already initialized for rendering</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>firstPlace</code></td>
                      <td><code>PlayerView | null</code></td>
                      <td>Player currently in first place</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme used for colors and fonts</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>User settings such as dark mode</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Determines if the layer should be visible</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p><strong>Constructor Parameters:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game view instance</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles coordinate transforms</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing to game events</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_13">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Initializes the canvas, container,
                  event listeners, and prepares the layer for rendering.
                </p>
                <h5 id="public-function-tick_12">
                  public function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>void</code>. Updates the render list with alive
                  players, initializing new <code>RenderInfo</code> objects for
                  unseen players.
                </p>
                <h5 id="public-function-renderlayer_5">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>mainContex</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>The main canvas context to draw the layer on</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Positions the layer container,
                  triggers rendering updates based on
                  <code>renderCheckRate</code>, and draws the canvas onto the
                  main context.
                </p>
                <h5 id="public-function-shouldtransform_7">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Always returns
                  <code>false</code>, indicating the layer does not require
                  transform scaling.
                </p>
                <h5 id="public-function-redraw_2">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>. Updates the theme colors.</p>
                <h4 id="private-function-onalternateviewchange">
                  private function <code>onAlternateViewChange()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>AlternateViewEvent</code></td>
                      <td>Event indicating a change in alternate view mode</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates <code>isVisible</code> and
                  refreshes visibility for all rendered elements.
                </p>
                <h4 id="private-function-updateelementvisibility">
                  private function <code>updateElementVisibility()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>RenderInfo</code></td>
                      <td>Render info object to update visibility for</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Hides or shows the HTML element
                  based on player state, zoom scale, screen position, and
                  visibility flags.
                </p>
                <h4 id="private-function-createplayerelement">
                  private function <code>createPlayerElement()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player for whom the element is being created</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>HTMLDivElement</code>. Creates a new HTML
                  element for displaying the player's name, flag, troops, and
                  icons. Initializes it off-screen and hidden.
                </p>
                <h4 id="public-function-renderplayerinfo">
                  public function <code>renderPlayerInfo()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>RenderInfo</code></td>
                      <td>The render info object to update and display</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Updates font size, color,
                  positions, and icons for a player. Removes the element if the
                  player is no longer alive or visible.
                </p>
                <p>
                  See also:
                  <a href="#class-renderinfo">class <code>RenderInfo</code></a>
                </p>
                <h4 id="private-function-createiconelement">
                  private function <code>createIconElement()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>src</code></td>
                      <td><code>string</code></td>
                      <td>Source URL of the icon image</td>
                    </tr>
                    <tr>
                      <td><code>size</code></td>
                      <td><code>number</code></td>
                      <td>Pixel size of the icon</td>
                    </tr>
                    <tr>
                      <td><code>id</code></td>
                      <td><code>string</code></td>
                      <td>Identifier for the icon</td>
                    </tr>
                    <tr>
                      <td><code>center?</code></td>
                      <td><code>boolean</code></td>
                      <td>Optional. If true, centers the icon vertically</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>HTMLImageElement</code>. Creates an icon element
                  with appropriate size, data attributes, and optional
                  centering.
                </p>
                <h3 id="layersplayeractionhandlerts">
                  ./layers/PlayerActionHandler.ts
                </h3>
                <h4 id="class-playeractionhandler">
                  class <code>PlayerActionHandler</code>
                </h4>
                <p>
                  Handles player action intents by emitting corresponding events
                  through the <code>EventBus</code>.
                </p>
                <p><strong>Constructor Parameters:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus used to emit player action events</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>
                        User interface state for retrieving parameters such as
                        attack ratios
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-getplayeractions">
                  public function <code>getPlayerActions()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>
                        Player whose available actions are being retrieved
                      </td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to query actions on</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Promise&lt;PlayerActions&gt;</code>. Retrieves
                  available actions for the player on the specified tile.
                </p>
                <h5 id="public-function-handleattack">
                  public function <code>handleAttack()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player performing the attack</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>targetId</code></td>
                      <td><code>string | null</code></td>
                      <td>Optional ID of the target player</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendAttackIntentEvent</code> with the troop count
                  calculated from the attack ratio.
                </p>
                <h5 id="public-function-handleboatattack">
                  public function <code>handleBoatAttack()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player performing the boat attack</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>targetId</code></td>
                      <td><code>PlayerID | null</code></td>
                      <td>Optional target player ID</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>targetTile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile being attacked</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>spawnTile</code></td>
                      <td><code>TileRef | null</code></td>
                      <td>Optional spawn tile for the boat attack</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendBoatAttackIntentEvent</code> with calculated troop
                  count.
                </p>
                <h5 id="public-function-findbesttransportshipspawn">
                  public function <code>findBestTransportShipSpawn()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player requesting a transport ship spawn</td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to consider for spawning</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Promise&lt;TileRef | false&gt;</code>. Finds the
                  optimal transport ship spawn for the player at a given tile.
                  Returns <code>false</code> if no valid spawn exists.
                </p>
                <h5 id="public-function-handlespawn">
                  public function <code>handleSpawn()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to spawn a unit</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendSpawnIntentEvent</code> for the specified tile.
                </p>
                <h5 id="public-function-handlealliancerequest">
                  public function <code>handleAllianceRequest()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player sending the alliance request</td>
                    </tr>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player receiving the alliance request</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendAllianceRequestIntentEvent</code>.
                </p>
                <h5 id="public-function-handlebreakalliance">
                  public function <code>handleBreakAlliance()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player breaking the alliance</td>
                    </tr>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player with whom the alliance is broken</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendBreakAllianceIntentEvent</code>.
                </p>
                <h5 id="public-function-handletargetplayer">
                  public function <code>handleTargetPlayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>targetId</code></td>
                      <td><code>string | null</code></td>
                      <td>Optional ID of the target player</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendTargetPlayerIntentEvent</code> if
                  <code>targetId</code> is not null.
                </p>
                <h5 id="public-function-handledonategold">
                  public function <code>handleDonateGold()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player receiving the gold donation</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendDonateGoldIntentEvent</code>.
                </p>
                <h5 id="public-function-handledonatetroops">
                  public function <code>handleDonateTroops()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player receiving the troop donation</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendDonateTroopsIntentEvent</code>.
                </p>
                <h5 id="public-function-handleembargo">
                  public function <code>handleEmbargo()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>recipient</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player being embargoed</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>action</code></td>
                      <td><code>"start" | "stop"</code></td>
                      <td>Action to start or stop the embargo</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendEmbargoIntentEvent</code> with the specified action.
                </p>
                <h5 id="public-function-handleemoji">
                  public function <code>handleEmoji()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>targetPlayer</code></td>
                      <td><code>PlayerView | "AllPlayers"</code></td>
                      <td>Player or all players receiving the emoji</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>emojiIndex</code></td>
                      <td><code>number</code></td>
                      <td>Index of the emoji being sent</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendEmojiIntentEvent</code>.
                </p>
                <h5 id="public-function-handledeleteunit">
                  public function <code>handleDeleteUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitId</code></td>
                      <td><code>number</code></td>
                      <td>ID of the unit to delete</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Emits a
                  <code>SendDeleteUnitIntentEvent</code>.
                </p>
                <h3 id="layersplayerinfooverlayts">
                  ./layers/PlayerInfoOverlay.ts
                </h3>
                <h4 id="class-playerinfooverlay">
                  class <code>PlayerInfoOverlay</code>
                </h4>
                <p>
                  Displays detailed information about players or units in an
                  overlay. Integrates with
                  <a href="#class-transformhandler"
                    >class <code>TransformHandler</code></a
                  >
                  and listens for mouse and context events to determine which
                  information to display.
                </p>
                <h5 id="public-property-game">
                  public property <code>game</code>
                </h5>
                <p>Type: <code>GameView</code></p>
                <p>The current game view instance.</p>
                <h5 id="public-property-eventbus">
                  public property <code>eventBus</code>
                </h5>
                <p>Type: <code>EventBus</code></p>
                <p>
                  Event bus for subscribing to relevant events such as mouse
                  movement and context menu actions.
                </p>
                <h5 id="public-property-transform">
                  public property <code>transform</code>
                </h5>
                <p>Type: <code>TransformHandler</code></p>
                <p>
                  Handles coordinate transformations between screen and world
                  space.
                </p>
                <h5 id="private-state-_isinfovisible">
                  private state <code>_isInfoVisible</code>
                </h5>
                <p>Type: <code>boolean</code></p>
                <p>Tracks whether the overlay is currently visible.</p>
                <h5 id="private-state-player">
                  private state <code>player</code>
                </h5>
                <p>Type: <code>PlayerView | null</code></p>
                <p>
                  The currently hovered player. <code>null</code> if no player
                  is hovered.
                </p>
                <h5 id="private-state-playerprofile">
                  private state <code>playerProfile</code>
                </h5>
                <p>Type: <code>PlayerProfile | null</code></p>
                <p>
                  Profile information of the hovered player, loaded
                  asynchronously.
                </p>
                <h5 id="private-state-unit">private state <code>unit</code></h5>
                <p>Type: <code>UnitView | null</code></p>
                <p>
                  The currently hovered unit. <code>null</code> if no unit is
                  hovered.
                </p>
                <h5 id="public-function-init_14">
                  public function <code>init()</code>
                </h5>
                <p>
                  Initializes event listeners for mouse movements, context
                  menus, and closing radial menus. Marks the overlay as active.
                </p>
                <h5 id="public-function-hide_1">
                  public function <code>hide()</code>
                </h5>
                <p>
                  Hides the overlay and clears the currently displayed player
                  and unit.
                </p>
                <h5 id="public-function-maybeshow">
                  public function <code>maybeShow()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the mouse in screen space.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the mouse in screen space.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Displays player or unit info if the coordinates correspond to
                  a valid tile or nearby unit.
                </p>
                <h5 id="public-function-tick_13">
                  public function <code>tick()</code>
                </h5>
                <p>Requests a UI update every tick.</p>
                <h5 id="public-function-renderlayer_6">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>The rendering context to draw the layer.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Implements the <a href="#class-layer">Layer</a> interface.
                  Empty placeholder for compatibility.
                </p>
                <h5 id="public-function-shouldtransform_8">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>
                  Returns <code>boolean</code>. Always returns
                  <code>false</code>.
                </p>
                <h5 id="public-function-setvisible_1">
                  public function <code>setVisible()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>Determines whether the overlay is visible.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Updates <code>_isInfoVisible</code> and requests a UI update.
                </p>
                <h5 id="private-function-getrelationclass">
                  private function <code>getRelationClass()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>relation</code></td>
                      <td><code>Relation</code></td>
                      <td>Relation type of another player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a Tailwind CSS class string for coloring relation
                  indicators.
                </p>
                <h5 id="private-function-getrelationname">
                  private function <code>getRelationName()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>relation</code></td>
                      <td><code>Relation</code></td>
                      <td>Relation type of another player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns a translated text string describing the relation.</p>
                <h5 id="private-function-displayunitcount">
                  private function <code>displayUnitCount()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player whose units are counted.</td>
                    </tr>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>UnitType</code></td>
                      <td>The type of unit to display.</td>
                    </tr>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>string</code></td>
                      <td>Icon URL representing the unit type.</td>
                    </tr>
                    <tr>
                      <td><code>description</code></td>
                      <td><code>string</code></td>
                      <td>Translation key for the unit description.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a <code>TemplateResult</code> displaying the unit
                  count, or an empty string if the unit type is disabled.
                </p>
                <h5 id="private-function-allianceexpirationtext">
                  private function <code>allianceExpirationText()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>alliance</code></td>
                      <td><code>AllianceView</code></td>
                      <td>Alliance object with expiration info.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a formatted string representing the remaining alliance
                  duration.
                </p>
                <h5 id="private-function-renderplayerinfo">
                  private function <code>renderPlayerInfo()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player to render info for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a <code>TemplateResult</code> rendering the player's
                  info, including flag, name, troops, gold, units, and alliance
                  relations.
                </p>
                <h5 id="private-function-renderunitinfo">
                  private function <code>renderUnitInfo()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to render info for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns a <code>TemplateResult</code> rendering the unit's
                  owner, type, and health.
                </p>
                <h5 id="protected-function-createrenderroot">
                  protected function <code>createRenderRoot()</code>
                </h5>
                <p>
                  Overrides the default LitElement render root to return
                  <code>this</code>, disabling shadow DOM to allow global
                  Tailwind styling.
                </p>
                <h3 id="layersplayerpanelts">./layers/PlayerPanel.ts</h3>
                <h4 id="class-playerpanel">class <code>PlayerPanel</code></h4>
                <p>
                  Defines the player interaction panel component for the game
                  UI.<br />
                  Displays player details, alliance information, resources, and
                  actionable buttons (chat, trade, alliance, emoji).<br />
                  Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>g</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Reference to the active
                        <a href="#class-gameview">class <code>GameView</code></a
                        >.
                      </td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>
                        Event bus used for communication between UI elements and
                        game logic.
                      </td>
                    </tr>
                    <tr>
                      <td><code>emojiTable</code></td>
                      <td><code>EmojiTable</code></td>
                      <td>Reference to the global emoji selector.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>
                        The current
                        <a href="#class-uistate">class <code>UIState</code></a>
                        for UI rendering context.
                      </td>
                    </tr>
                    <tr>
                      <td><code>actions</code></td>
                      <td><code>PlayerActions \ \| null</code></td>
                      <td>
                        Holds the current player action permissions and
                        statuses.
                      </td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef \ \| null</code></td>
                      <td>The tile currently being examined.</td>
                    </tr>
                    <tr>
                      <td><code>_profileForPlayerId</code></td>
                      <td><code>number \ \| null</code></td>
                      <td>
                        Caches the last loaded player profile ID for
                        optimization.
                      </td>
                    </tr>
                    <tr>
                      <td><code>sendTarget</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>Target player for sending resources (stateful).</td>
                    </tr>
                    <tr>
                      <td><code>sendMode</code></td>
                      <td><code>"troops" \| "gold" \| "none"</code></td>
                      <td>Current send mode type (stateful).</td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>Visibility state of the panel.</td>
                    </tr>
                    <tr>
                      <td><code>allianceExpiryText</code></td>
                      <td><code>string \| null</code></td>
                      <td>Human-readable alliance expiry text.</td>
                    </tr>
                    <tr>
                      <td><code>allianceExpirySeconds</code></td>
                      <td><code>number \| null</code></td>
                      <td>Remaining seconds before alliance expires.</td>
                    </tr>
                    <tr>
                      <td><code>otherProfile</code></td>
                      <td><code>PlayerProfile \| null</code></td>
                      <td>Loaded profile of the other player.</td>
                    </tr>
                    <tr>
                      <td><code>ctModal</code></td>
                      <td><code>ChatModal</code></td>
                      <td>Cached chat modal reference.</td>
                    </tr>
                  </tbody>
                </table>
                <hr />
                <h5 id="protected-function-createrenderroot_1">
                  protected function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>
                  Overrides LitElements shadow DOM root creation to render
                  directly into the main DOM tree.
                </p>
                <hr />
                <h5 id="public-function-initeventbus_2">
                  public function <code>initEventBus()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>The central event bus instance to subscribe to.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Registers handlers for view close events and hides the panel
                  when appropriate.
                </p>
                <hr />
                <h5 id="public-function-init_15">
                  public function <code>init()</code>
                </h5>
                <p>
                  Returns <code>void</code>.<br />
                  Initializes event listeners and binds the
                  <code>ChatModal</code> component. Logs a warning if the modal
                  is not found.
                </p>
                <hr />
                <h5 id="public-async-function-tick_2">
                  public async function <code>tick()</code>
                </h5>
                <p>
                  Returns <code>Promise&lt;void&gt;</code>.<br />
                  Refreshes the displayed player data and interaction state when
                  the panel is visible.<br />
                  Fetches profiles, updates alliance timers, and requests UI
                  updates.<br />
                  Returns early if no visible tile is active.
                </p>
                <hr />
                <h5 id="public-function-show_1">
                  public function <code>show()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>actions</code></td>
                      <td><code>PlayerActions</code></td>
                      <td>Current player interaction permissions.</td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>
                        Tile reference used to determine ownership and context.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Displays the panel for the given tile and initializes action
                  context.
                </p>
                <hr />
                <h5 id="public-function-hide_2">
                  public function <code>hide()</code>
                </h5>
                <p>
                  Returns <code>void</code>.<br />
                  Hides the panel and resets transient state such as send mode
                  and target.
                </p>
                <hr />
                <h5 id="private-function-handleclose_1">
                  private function <code>handleClose()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>DOM event triggering panel closure.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Stops propagation and hides the panel.
                </p>
                <hr />
                <h5 id="private-function-handleallianceclick">
                  private function <code>handleAllianceClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>The originating UI event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Sends a
                  <a href="#class-sendalliancerequestintentevent"
                    >class <code>SendAllianceRequestIntentEvent</code></a
                  >
                  via the
                  <a href="#class-eventbus">class <code>EventBus</code></a
                  >.<br />
                  Hides the panel afterward.
                </p>
                <hr />
                <h5 id="private-function-handlebreakallianceclick">
                  private function <code>handleBreakAllianceClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>The UI event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendbreakallianceintentevent"
                    >class <code>SendBreakAllianceIntentEvent</code></a
                  >
                  to request breaking the alliance.<br />
                  Hides the panel afterward.
                </p>
                <hr />
                <h5 id="private-function-opensendtroops">
                  private function <code>openSendTroops()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>target</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player to send troops to.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Sets internal state to enable troop send mode.
                </p>
                <hr />
                <h5 id="private-function-opensendgold">
                  private function <code>openSendGold()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>target</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player to send gold to.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Sets internal state to enable gold send mode.
                </p>
                <hr />
                <h5 id="private-function-handledonatetroopclick">
                  private function <code>handleDonateTroopClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Opens the send troop panel for the specified player.
                </p>
                <hr />
                <h5 id="private-function-handledonategoldclick">
                  private function <code>handleDonateGoldClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Opens the send gold panel for the specified player.
                </p>
                <hr />
                <h5 id="private-function-closesend">
                  private function <code>closeSend()</code>
                </h5>
                <p>
                  Returns <code>void</code>.<br />
                  Resets sending state to default (none).
                </p>
                <hr />
                <h5 id="private-function-confirmsend">
                  private function <code>confirmSend()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td>
                        <code
                          >CustomEvent&lt;{ amount: number; closePanel?: boolean
                          }&gt;</code
                        >
                      </td>
                      <td>
                        The confirmation event with amount and close flag.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Confirms resource send, resets send mode, and optionally hides
                  the panel.
                </p>
                <hr />
                <h5 id="private-function-handleembargoclick">
                  private function <code>handleEmbargoClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendembargointentevent"
                    >class <code>SendEmbargoIntentEvent</code></a
                  >
                  with <code>"start"</code> action and hides the panel.
                </p>
                <hr />
                <h5 id="private-function-handlestopembargoclick">
                  private function <code>handleStopEmbargoClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendembargointentevent"
                    >class <code>SendEmbargoIntentEvent</code></a
                  >
                  with <code>"stop"</code> action and hides the panel.
                </p>
                <hr />
                <h5 id="private-function-onstoptradingallclick">
                  private function <code>onStopTradingAllClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendembargoallintentevent"
                    >class <code>SendEmbargoAllIntentEvent</code></a
                  >
                  to stop all trading.
                </p>
                <hr />
                <h5 id="private-function-onstarttradingallclick">
                  private function <code>onStartTradingAllClic()k</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendembargoallintentevent"
                    >class <code>SendEmbargoAllIntentEvent</code></a
                  >
                  to resume all trading.
                </p>
                <hr />
                <h5 id="private-function-handleemojiclick">
                  private function <code>handleEmojiClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Displays the
                  <a href="#class-emojitable">class <code>EmojiTable</code></a>
                  for emoji selection and emits a
                  <a href="#class-sendemojiintentevent"
                    >class <code>SendEmojiIntentEvent</code></a
                  >
                  when an emoji is chosen.<br />
                  Hides both the emoji table and the panel after completion.
                </p>
                <hr />
                <h5 id="private-function-handlechat">
                  private function <code>handleChat()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>sender</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The message sender.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The recipient player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Opens the chat modal between the two players. Logs a warning
                  if the chat modal is missing.
                </p>
                <hr />
                <h5 id="private-function-handletargetclick">
                  private function <code>handleTargetClick()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>Event</code></td>
                      <td>Click event.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>.<br />
                  Emits a
                  <a href="#class-sendtargetplayerintentevent"
                    >class <code>SendTargetPlayerIntentEvent</code></a
                  >
                  and hides the panel.
                </p>
                <hr />
                <h5 id="private-function-identitychipprops">
                  private function <code>identityChipProps()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>PlayerType</code></td>
                      <td>Type of the player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns
                  <code
                    >{ labelKey: string; aria: string; classes: string; icon:
                    string }</code
                  >.<br />
                  Provides styling and metadata for identity chips depending on
                  player type.
                </p>
                <hr />
                <h5 id="private-function-getrelationclass_1">
                  private function <code>getRelationClass()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>relation</code></td>
                      <td><code>Relation</code></td>
                      <td>The relation state between players.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>.<br />
                  Computes the CSS class string for visual relation
                  representation.
                </p>
                <hr />
                <h5 id="private-function-getrelationname_1">
                  private function <code>getRelationName()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>relation</code></td>
                      <td><code>Relation</code></td>
                      <td>The relation enum value.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>.<br />
                  Translates the relation into localized text.
                </p>
                <hr />
                <h5 id="private-function-getexpirycolorclass">
                  private function <code>getExpiryColorClass()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>seconds</code></td>
                      <td><code>number \| null</code></td>
                      <td>Remaining seconds or <code>null</code>.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>.<br />
                  Determines color class based on remaining time thresholds.
                </p>
                <hr />
                <h5 id="private-function-gettraitorremainingseconds">
                  private function <code>getTraitorRemainingSeconds()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player to check for traitor time.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>number | null</code>.<br />
                  Calculates the remaining seconds for traitor status or returns
                  <code>null</code> if not applicable.
                </p>
                <hr />
                <h5 id="private-function-rendertraitorbadge">
                  private function <code>renderTraitorBadge()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player being rendered.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Renders the traitor badge UI with remaining time if
                  applicable.
                </p>
                <hr />
                <h5 id="private-function-renderrelationpillifnation">
                  private function <code>renderRelationPillIfNation()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The target player.</td>
                    </tr>
                    <tr>
                      <td><code>my</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Renders relation pill only for nation-type players when
                  conditions are met.
                </p>
                <hr />
                <h5 id="private-function-renderidentityrow">
                  private function <code>renderIdentityRow()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The displayed player.</td>
                    </tr>
                    <tr>
                      <td><code>my</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The local player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Renders the player identity row including flag, name, player
                  type, and relation details.
                </p>
                <hr />
                <h5 id="private-function-renderresources">
                  private function <code>renderResources()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Displays current gold and troop resources for the given
                  player.
                </p>
                <hr />
                <h5 id="private-function-renderstats">
                  private function <code>renderStats()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                    <tr>
                      <td><code>my</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Local player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Displays betrayal count and trading status between players.
                </p>
                <hr />
                <h5 id="private-function-renderalliances">
                  private function <code>renderAlliances()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The player whose alliances to list.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Displays a scrollable list of the players allies.
                </p>
                <hr />
                <h5 id="private-function-renderallianceexpiry">
                  private function <code>renderAllianceExpiry()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Shows remaining alliance time with dynamic color styling.<br />
                  Returns an empty template if expiry data is missing.
                </p>
                <hr />
                <h5 id="private-function-renderactions">
                  private function <code>renderActions()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>my</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Local player.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Target player.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Renders all available player action buttons depending on
                  permissions and relation state.
                </p>
                <hr />
                <h5 id="public-function-render_18">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>TemplateResult</code>.<br />
                  Renders the entire <code>PlayerPanel</code> UI including
                  identity, stats, resources, and action buttons.<br />
                  If visibility or ownership conditions fail, returns an empty
                  template and logs a warning when appropriate.
                </p>
                <h3 id="layersradialmenuts">./layers/RadialMenu.ts</h3>
                <h4 id="class-closeradialmenuevent">
                  class <code>CloseRadialMenuEvent</code>
                </h4>
                <p>
                  Event emitted to signal that a <code>RadialMenu</code> has
                  been closed.
                </p>
                <h5 id="constructor-closeradialmenuevent">
                  constructor <code>CloseRadialMenuEvent()</code>
                </h5>
                <p>
                  Initializes a new instance of
                  <code>CloseRadialMenuEvent</code>.
                </p>
                <h4 id="interface-tooltipitem">
                  interface <code>TooltipItem</code>
                </h4>
                <p>Defines a tooltip text entry.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>text</code></td>
                      <td><code>string</code></td>
                      <td>The text to display in the tooltip.</td>
                    </tr>
                    <tr>
                      <td><code>className</code></td>
                      <td><code>string</code></td>
                      <td>CSS class applied to the tooltip element.</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="interface-radialmenuconfig">
                  interface <code>RadialMenuConfig</code>
                </h4>
                <p>
                  Configuration options for a <code>RadialMenu</code> instance.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>menuSize?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Base size of the menu in pixels.</td>
                    </tr>
                    <tr>
                      <td><code>submenuScale?</code></td>
                      <td><code>number</code></td>
                      <td>
                        Optional. Scale factor applied to nested submenus.
                      </td>
                    </tr>
                    <tr>
                      <td><code>centerButtonSize?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Radius of the central button.</td>
                    </tr>
                    <tr>
                      <td><code>iconSize?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Default size of menu icons.</td>
                    </tr>
                    <tr>
                      <td><code>centerIconSize?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Size of the icon on the center button.</td>
                    </tr>
                    <tr>
                      <td><code>disabledColor?</code></td>
                      <td><code>string</code></td>
                      <td>Optional. Color applied to disabled menu items.</td>
                    </tr>
                    <tr>
                      <td><code>menuTransitionDuration?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Duration of animations in milliseconds.</td>
                    </tr>
                    <tr>
                      <td><code>mainMenuInnerRadius?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Inner radius of the main menu.</td>
                    </tr>
                    <tr>
                      <td><code>centerButtonIcon?</code></td>
                      <td><code>string</code></td>
                      <td>Optional. URL or path to the center button icon.</td>
                    </tr>
                    <tr>
                      <td><code>maxNestedLevels?</code></td>
                      <td><code>number</code></td>
                      <td>Optional. Maximum allowed submenu depth.</td>
                    </tr>
                    <tr>
                      <td><code>innerRadiusIncrement?</code></td>
                      <td><code>number</code></td>
                      <td>
                        Optional. Increase of inner radius per submenu level.
                      </td>
                    </tr>
                    <tr>
                      <td><code>tooltipStyle?</code></td>
                      <td><code>string</code></td>
                      <td>Optional. Custom CSS styles for tooltips.</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-radialmenu-implements-layer">
                  class <code>RadialMenu</code> implements <code>Layer</code>
                </h4>
                <p>
                  Manages interactive radial menus with multiple nested levels,
                  central button actions, and tooltips.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>menuElement</code></td>
                      <td>
                        <code
                          >d3.Selection&lt;HTMLDivElement, unknown, null,
                          undefined&gt;</code
                        >
                      </td>
                      <td>
                        The container <code>div</code> holding the menu SVG.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>tooltipElement</code></td>
                      <td><code>HTMLDivElement \| null</code></td>
                      <td>The DOM element used for displaying tooltips.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates whether the menu is currently displayed.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>currentLevel</code></td>
                      <td><code>number</code></td>
                      <td>Current menu level (0 = main menu).</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>menuStack</code></td>
                      <td><code>MenuElement[][]</code></td>
                      <td>Stack of previous menu levels for navigation.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>currentMenuItems</code></td>
                      <td><code>MenuElement[]</code></td>
                      <td>Currently active menu items.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>config</code></td>
                      <td><code>Required&lt;RadialMenuConfig&gt;</code></td>
                      <td>
                        Effective configuration object with defaults applied.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>backIconSize</code></td>
                      <td><code>number</code></td>
                      <td>Computed size of the back button icon.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>centerButtonState</code></td>
                      <td><code>"default" \| "back"</code></td>
                      <td>Current state of the center button.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>isTransitioning</code></td>
                      <td><code>boolean</code></td>
                      <td>True when a menu animation is in progress.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastHideTime</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of last menu hide event.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>reopenCooldownMs</code></td>
                      <td><code>number</code></td>
                      <td>Minimum interval before reopening the menu.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>anchorX</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate for menu center positioning.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>anchorY</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate for menu center positioning.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>menuGroups</code></td>
                      <td>
                        <code
                          >Map&lt;number, d3.Selection&lt;SVGGElement, unknown,
                          null, undefined&gt;&gt;</code
                        >
                      </td>
                      <td>Group elements for each menu level.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>menuPaths</code></td>
                      <td>
                        <code
                          >Map&lt;string, d3.Selection&lt;SVGPathElement,
                          unknown, null, undefined&gt;&gt;</code
                        >
                      </td>
                      <td>Mapping of menu item IDs to their SVG paths.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>menuIcons</code></td>
                      <td>
                        <code
                          >Map&lt;string, d3.Selection&lt;SVGImageElement,
                          unknown, null, undefined&gt;&gt;</code
                        >
                      </td>
                      <td>
                        Mapping of menu item IDs to their icons/text elements.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedItemId</code></td>
                      <td><code>string \| null</code></td>
                      <td>ID of the currently selected menu item.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>submenuHoverTimeout</code></td>
                      <td><code>number \| null</code></td>
                      <td>Timeout ID for submenu hover delay.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>backButtonHoverTimeout</code></td>
                      <td><code>number \| null</code></td>
                      <td>Timeout ID for back button hover delay.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>navigationInProgress</code></td>
                      <td><code>boolean</code></td>
                      <td>True if a submenu navigation animation is active.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>originalCenterButtonIcon</code></td>
                      <td><code>string</code></td>
                      <td>
                        Stored reference to the original center button icon.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>params</code></td>
                      <td><code>MenuElementParams \| null</code></td>
                      <td>
                        Current runtime parameters applied to menu actions.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="constructor-radialmenu">
                  constructor <code>RadialMenu()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus used for emitting menu events.</td>
                    </tr>
                    <tr>
                      <td><code>rootMenu</code></td>
                      <td><code>MenuElement</code></td>
                      <td>The top-level menu item structure.</td>
                    </tr>
                    <tr>
                      <td><code>centerButtonElement</code></td>
                      <td><code>CenterButtonElement</code></td>
                      <td>The central button for menu actions.</td>
                    </tr>
                    <tr>
                      <td><code>config?</code></td>
                      <td><code>RadialMenuConfig</code></td>
                      <td>Optional configuration overrides.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes a new <code>RadialMenu</code> instance and applies
                  default configuration values.
                </p>
                <h5 id="public-function-init_16">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the menu by creating DOM elements and subscribing
                  to close events.
                </p>
                <h5 id="public-function-showradialmenu">
                  public function <code>showRadialMenu()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of menu center.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of menu center.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Displays the menu at the specified position if reopening is
                  allowed.
                </p>
                <h5 id="public-function-hideradialmenu">
                  public function <code>hideRadialMenu()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Hides the menu, clears hover states, tooltips, and cached
                  elements. Updates <code>lastHideTime</code>.
                </p>
                <h5 id="public-function-disableallbuttons">
                  public function <code>disableAllButtons()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Disables all current menu items and resets the center button
                  state.
                </p>
                <h5 id="public-function-updatecenterbuttonstate">
                  public function <code>updateCenterButtonState()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>state</code></td>
                      <td><code>CenterButtonState</code></td>
                      <td>
                        New center button state (<code>"default"</code> or
                        <code>"back"</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates visual state and interactivity of the center button.
                </p>
                <h5 id="public-function-ismenuvisible">
                  public function <code>isMenuVisible()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>Indicates whether the radial menu is currently visible.</p>
                <h5 id="public-function-getcurrentlevel">
                  public function <code>getCurrentLevel()</code>
                </h5>
                <p>Returns <code>number</code>.</p>
                <p>Returns the current active menu level.</p>
                <h5 id="public-function-setparams">
                  public function <code>setParams()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>params</code></td>
                      <td><code>MenuElementParams</code></td>
                      <td>Parameters to be used for menu actions and state.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Sets runtime parameters for menu behavior.</p>
                <h5 id="public-function-refreshmenu">
                  public function <code>refreshMenu()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Redraws the current menu level if the menu is visible.</p>
                <h5 id="public-function-refresh">
                  public function <code>refresh()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Refreshes all menu items, updating disabled states, icons, and
                  cooldowns based on current parameters.
                </p>
                <h5 id="public-function-renderlayer_7">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Canvas rendering context (not used).</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Implements <code>Layer</code> interface. Canvas rendering not
                  required.
                </p>
                <h5 id="public-function-shouldtransform_9">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Always returns <code>false</code>. Implements
                  <code>Layer</code> interface.
                </p>
                <hr />
                <h3 id="layersradialmenuelementsts">
                  ./layers/RadialMenuElements.ts
                </h3>
                <h4 id="interface-menuelementparams">
                  interface <code>MenuElementParams</code>
                </h4>
                <p>
                  Parameters passed to
                  <a href="#interface-menuelement">MenuElement</a> handlers and
                  submenus.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView</code></td>
                      <td>The current player.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selected</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>The selected player, if any.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>
                        The tile reference associated with the menu action.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActions</code></td>
                      <td><code>PlayerActions</code></td>
                      <td>Current player actions.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Current game state.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>buildMenu</code></td>
                      <td><code>BuildMenu</code></td>
                      <td>Build menu instance.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>emojiTable</code></td>
                      <td><code>EmojiTable</code></td>
                      <td>Emoji table instance.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActionHandler</code></td>
                      <td><code>PlayerActionHandler</code></td>
                      <td>Handles player actions.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerPanel</code></td>
                      <td><code>PlayerPanel</code></td>
                      <td>Player panel UI handler.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>chatIntegration</code></td>
                      <td><code>ChatIntegration</code></td>
                      <td>Handles chat menu generation.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for emitting and listening to events.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>closeMenu</code></td>
                      <td><code>() =&gt; void</code></td>
                      <td>Callback to close the menu.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <hr />
                <h4 id="interface-menuelement">
                  interface <code>MenuElement</code>
                </h4>
                <p>Represents a single element in a radial or sub-menu.</p>
                <p><strong>Properties:</strong></p>
                <p>
                  | Name | Type | Description | | --------------- |
                  ---------------------------------------------- |
                  ---------------------------------------------------------------
                  |
                  ----------------------------------------------------------------------------------------------------------
                  | | <code>id</code> | <code>string</code> | Unique identifier
                  of the menu element. | | <code>name</code> |
                  <code>string</code> | Display name or internal key. | |
                  <code>displayed?</code> |
                  <code
                    >boolean | ((params: MenuElementParams) =&gt; boolean)</code
                  >
                  | Optional. Determines whether the element is displayed. Can
                  be a boolean or a function returning a boolean. | |
                  <code>color?</code> | <code>string</code> | Optional. Color of
                  the element. | | <code>icon?</code> | <code>string</code> |
                  Optional. Icon image path. | | <code>text?</code> |
                  <code>string</code> | Optional. Text to display on the
                  element. | | <code>fontSize?</code> | <code>string</code> |
                  Optional. Font size for <code>text</code>. | |
                  <code>tooltipItems?</code> | <code>TooltipItem[]</code> |
                  Optional. Tooltip items for the element. | |
                  <code>tooltipKeys?</code> | <code>TooltipKey[]</code> |
                  Optional. Tooltip keys for localization. | |
                  <code>cooldown?</code> |
                  <code>(params: MenuElementParams) =&gt; number</code> |
                  Optional. Returns cooldown value for the element. | |
                  <code>disabled</code> |
                  <code>(params: MenuElementParams) =&gt; boolean</code> |
                  Determines if the element is disabled. | |
                  <code>action?</code> |
                  <code>(params: MenuElementParams) =&gt; void</code> |
                  Optional. Action executed when the element is activated. | |
                  <code>subMenu?</code> |
                  <code>(params: MenuElementParams) =&gt; MenuElement[]</code> |
                  Optional. Returns submenu elements if the element has
                  children. |
                </p>
                <hr />
                <h4 id="interface-tooltipkey">
                  interface <code>TooltipKey</code>
                </h4>
                <p>Represents a key used to generate tooltips.</p>
                <p><strong>Properties:</strong></p>
                <p>
                  | Name | Type | Description | | ----------- |
                  ---------------------- | ---------------------------------- |
                  ------------------------------------------------------- | |
                  <code>key</code> | <code>string</code> | Localization key for
                  tooltip. | | <code>className</code> | <code>string</code> |
                  CSS class for styling the tooltip. | | <code>params?</code> |
                  <code>Record&lt;string, string | number&gt;</code> | Optional.
                  Parameters for localized string substitution. |
                </p>
                <hr />
                <h4 id="interface-centerbuttonelement">
                  interface <code>CenterButtonElement</code>
                </h4>
                <p>
                  Special element representing the center button of a radial
                  menu.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>disabled</code></td>
                      <td>
                        <code>(params: MenuElementParams) =&gt; boolean</code>
                      </td>
                      <td>Determines if the center button is disabled.</td>
                    </tr>
                    <tr>
                      <td><code>action</code></td>
                      <td>
                        <code>(params: MenuElementParams) =&gt; void</code>
                      </td>
                      <td>
                        Action executed when the center button is pressed.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr />
                <h4 id="constant-colors">constant <code>COLORS</code></h4>
                <p>Color configuration for menu elements and tooltips.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>build</code></td>
                      <td><code>string</code></td>
                      <td>Build color <code>#ebe250</code>.</td>
                    </tr>
                    <tr>
                      <td><code>building</code></td>
                      <td><code>string</code></td>
                      <td>Building color <code>#2c2c2c</code>.</td>
                    </tr>
                    <tr>
                      <td><code>boat</code></td>
                      <td><code>string</code></td>
                      <td>Boat color <code>#3f6ab1</code>.</td>
                    </tr>
                    <tr>
                      <td><code>ally</code></td>
                      <td><code>string</code></td>
                      <td>Ally action color <code>#53ac75</code>.</td>
                    </tr>
                    <tr>
                      <td><code>breakAlly</code></td>
                      <td><code>string</code></td>
                      <td>Break alliance color <code>#c74848</code>.</td>
                    </tr>
                    <tr>
                      <td><code>delete</code></td>
                      <td><code>string</code></td>
                      <td>Delete action color <code>#ff0000</code>.</td>
                    </tr>
                    <tr>
                      <td><code>info</code></td>
                      <td><code>string</code></td>
                      <td>Info color <code>#64748B</code>.</td>
                    </tr>
                    <tr>
                      <td><code>target</code></td>
                      <td><code>string</code></td>
                      <td>Target action color <code>#ff0000</code>.</td>
                    </tr>
                    <tr>
                      <td><code>attack</code></td>
                      <td><code>string</code></td>
                      <td>Attack color <code>#ff0000</code>.</td>
                    </tr>
                    <tr>
                      <td><code>infoDetails</code></td>
                      <td><code>string</code></td>
                      <td>Detailed info color <code>#7f8c8d</code>.</td>
                    </tr>
                    <tr>
                      <td><code>infoEmoji</code></td>
                      <td><code>string</code></td>
                      <td>Emoji info color <code>#f1c40f</code>.</td>
                    </tr>
                    <tr>
                      <td><code>trade</code></td>
                      <td><code>string</code></td>
                      <td>Trade action color <code>#008080</code>.</td>
                    </tr>
                    <tr>
                      <td><code>embargo</code></td>
                      <td><code>string</code></td>
                      <td>Embargo action color <code>#6600cc</code>.</td>
                    </tr>
                    <tr>
                      <td><code>tooltip</code></td>
                      <td><code>object</code></td>
                      <td>Nested tooltip colors.</td>
                    </tr>
                    <tr>
                      <td><code>chat</code></td>
                      <td><code>object</code></td>
                      <td>Nested chat message colors.</td>
                    </tr>
                  </tbody>
                </table>
                <hr />
                <h4 id="enum-slot">enum <code>Slot</code></h4>
                <p>Predefined radial menu slots.</p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>Info</code></td>
                      <td><code>"info"</code></td>
                    </tr>
                    <tr>
                      <td><code>Boat</code></td>
                      <td><code>"boat"</code></td>
                    </tr>
                    <tr>
                      <td><code>Build</code></td>
                      <td><code>"build"</code></td>
                    </tr>
                    <tr>
                      <td><code>Attack</code></td>
                      <td><code>"attack"</code></td>
                    </tr>
                    <tr>
                      <td><code>Ally</code></td>
                      <td><code>"ally"</code></td>
                    </tr>
                    <tr>
                      <td><code>Back</code></td>
                      <td><code>"back"</code></td>
                    </tr>
                    <tr>
                      <td><code>Delete</code></td>
                      <td><code>"delete"</code></td>
                    </tr>
                  </tbody>
                </table>
                <hr />
                <h4 id="public-function-getallenabledunits">
                  public function <code>getAllEnabledUnits()</code>
                </h4>
                <p>Returns <code>Set&lt;UnitType&gt;</code>.</p>
                <p>
                  Returns all enabled units depending on whether it is for the
                  current player or other players, filtered by
                  <code>config.isUnitDisabled()</code>.
                </p>
                <h5 id="behavior">Behavior</h5>
                <ul>
                  <li>
                    Adds specific structure and unit types depending on
                    <code>myPlayer</code>. |
                  </li>
                  <li>Checks <code>config</code> for disabled units.</li>
                </ul>
                <hr />
                <h4 id="public-function-createmenuelements">
                  public function <code>createMenuElements()</code>
                </h4>
                <p>Returns <code>MenuElement[]</code>.</p>
                <p>Generates menu elements for attack or build submenus.</p>
                <p><strong>Parameters:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>params</code></td>
                      <td><code>MenuElementParams</code></td>
                      <td>Context parameters.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>filterType</code></td>
                      <td><code>"attack" | "build"</code></td>
                      <td>Type of menu to create.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>elementIdPrefix</code></td>
                      <td><code>string</code></td>
                      <td>Prefix used for element <code>id</code>s.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="behavior_1">Behavior</h5>
                <ul>
                  <li>
                    Filters <code>flattenedBuildTable</code> based on
                    <code>unitTypes</code> and <code>filterType</code>.
                  </li>
                  <li>
                    Sets <code>disabled</code>, <code>color</code>,
                    <code>icon</code>, and <code>tooltipItems</code> for each
                    element.
                  </li>
                  <li>
                    Assigns an <code>action</code> that builds or upgrades units
                    and closes the menu. |
                  </li>
                </ul>
                <hr />
                <h4 id="all-exported-menuelement-constants">
                  All exported <code>MenuElement</code> constants
                </h4>
                <p>Each follows the pattern:</p>
                <ul>
                  <li>
                    <strong>Properties:</strong> <code>id</code>,
                    <code>name</code>, <code>disabled</code>,
                    <code>color</code>, <code>icon</code>, optional
                    <code>text</code>, <code>tooltipItems</code>,
                    <code>tooltipKeys</code>.
                  </li>
                  <li>
                    <strong>Optional methods:</strong> <code>action</code>,
                    <code>subMenu</code>.
                  </li>
                </ul>
                <p><strong>Exported Elements:</strong></p>
                <ul>
                  <li>
                    <code>infoMenuElement</code>  Info button. Disabled if no
                    selected player or in spawn phase.
                  </li>
                  <li>
                    <code>attackMenuElement</code>  Attack submenu. Disabled in
                    spawn phase. Calls <code>createMenuElements</code> with
                    <code>filterType="attack"</code>.
                  </li>
                  <li>
                    <code>buildMenuElement</code>  Build submenu. Disabled in
                    spawn phase. Calls <code>createMenuElements</code> with
                    <code>filterType="build"</code>.
                  </li>
                  <li>
                    <code>boatMenuElement</code>  Boat action. Disabled if
                    transport ship unavailable. Action is async.
                  </li>
                  <li>
                    <code>deleteUnitElement</code>  Delete unit. Disabled based
                    on ownership, land status, cooldown, and selection radius.
                  </li>
                  <li>
                    <code>rootMenuElement</code>  Root menu aggregating info,
                    build/attack, ally, delete, and boat elements based on
                    conditions.
                  </li>
                </ul>
                <h5 id="example-deleteunitelement-action-behavior">
                  Example: <code>deleteUnitElement</code> action behavior
                </h5>
                <ul>
                  <li>
                    Filters units within <code>DELETE_SELECTION_RADIUS</code>.
                  </li>
                  <li>Sorts by Manhattan distance.</li>
                  <li>
                    Calls
                    <code>playerActionHandler.handleDeleteUnit()</code> for the
                    closest unit.
                  </li>
                  <li>Calls <code>closeMenu()</code>.</li>
                </ul>
                <hr />
                <h4 id="exported-centerbuttonelement-constant">
                  exported <code>CenterButtonElement</code> constant
                </h4>
                <p>Represents the center button in the radial menu.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>disabled</code></td>
                      <td>
                        <code>(params: MenuElementParams) =&gt; boolean</code>
                      </td>
                      <td>
                        Returns true if the tile is water, in spawn phase with
                        other player, or if <code>canAttack</code> is false.
                      </td>
                    </tr>
                    <tr>
                      <td><code>action</code></td>
                      <td>
                        <code>(params: MenuElementParams) =&gt; void</code>
                      </td>
                      <td>
                        Executes <code>handleSpawn</code> if in spawn phase,
                        otherwise <code>handleAttack</code>. Closes the menu
                        afterwards.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h3 id="layersrailroadlayerts">./layers/RailroadLayer.ts</h3>
                <h4 id="class-railroadlayer">
                  class <code>RailroadLayer</code>
                </h4>
                <p>
                  Handles rendering, color management, and updating of railroad
                  tiles within the game view. Implements
                  <a href="#class-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Offscreen canvas used to draw the railroad layer.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D drawing context of the <code>canvas</code>.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Theme configuration used for colorizing elements.</td>
                    </tr>
                    <tr>
                      <td><code>existingRailroads</code></td>
                      <td><code>Map&lt;TileRef, RailRef&gt;</code></td>
                      <td>Tracks active rail tiles and their metadata.</td>
                    </tr>
                    <tr>
                      <td><code>nextRailIndexToCheck</code></td>
                      <td><code>number</code></td>
                      <td>
                        Index for iterating tiles to update colors
                        incrementally.
                      </td>
                    </tr>
                    <tr>
                      <td><code>railTileList</code></td>
                      <td><code>TileRef[]</code></td>
                      <td>List of tiles currently containing railroads.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the current game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>
                        Manages scaling and transformations for rendering.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5
                  id="public-constructor-constructorgame-gameview-transformhandler-transformhandler"
                >
                  public constructor
                  <code
                    >constructor(game: GameView, transformHandler:
                    TransformHandler)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The active game view to render railroads for.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>
                        Handles scaling and transformation during rendering.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the <code>theme</code> from the game
                  configuration.
                </p>
                <h5 id="public-function-shouldtransform_10">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates that this layer should be affected by
                  transformations (scaling, translation) during rendering.
                </p>
                <h5 id="public-function-tick_14">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Processes railroad updates received since the last tick,
                  delegating each to
                  <a href="#private-function-handlerailroadrendering"
                    >private function <code>handleRailroadRendering()</code></a
                  >.
                </p>
                <h5 id="public-function-updaterailcolors">
                  public function <code>updateRailColors()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Incrementally updates rail colors based on ownership changes.
                  Processes a maximum of
                  <code>railTileList.length / 60</code> tiles per call to
                  prevent performance spikes. Updates ownership in
                  <code>existingRailroads</code> and repaints affected tiles
                  using
                  <a href="#public-function-paintrail"
                    >function <code>paintRail()</code></a
                  >.
                </p>
                <h5 id="public-function-init_17">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the layer by calling
                  <a href="#public-function-redraw"
                    >function <code>redraw()</code></a
                  >.
                </p>
                <h5 id="public-function-redraw_3">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Recreates the offscreen canvas and repaints all rail tiles in
                  <code>existingRailroads</code>. Enables smooth scaling for
                  better visual quality. Throws an error if 2D context is not
                  supported.
                </p>
                <h5
                  id="public-function-renderlayercontext-canvasrenderingcontext2d"
                >
                  public function
                  <code>renderLayer(context: CanvasRenderingContext2D)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context to render the railroad layer onto.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the offscreen canvas onto the given
                  <code>context</code>, applying transparency proportional to
                  the current <code>transformHandler.scale</code>. Ensures
                  proper alpha blending for smooth zoom transitions.
                </p>
                <h5
                  id="private-function-handlerailroadrenderingrailupdate-railroadupdate"
                >
                  private function
                  <code
                    >handleRailroadRendering(railUpdate: RailroadUpdate)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>railUpdate</code></td>
                      <td><code>RailroadUpdate</code></td>
                      <td>
                        Update data containing the railroad tiles and their
                        active status.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  For each tile in <code>railUpdate.railTiles</code>, either
                  paints or clears the railroad depending on
                  <code>railUpdate.isActive</code>.
                </p>
                <p>
                  See also:
                  <a href="#private-function-paintrailroad"
                    >private function <code>paintRailroad()</code></a
                  >,
                  <a href="#private-function-clearrailroad"
                    >private function <code>clearRailroad()</code></a
                  >
                </p>
                <h5 id="private-function-paintrailroadrailroad-railtile">
                  private function
                  <code>paintRailroad(railRoad: RailTile)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>railRoad</code></td>
                      <td><code>RailTile</code></td>
                      <td>The railroad tile to paint.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Increments occurrence if the tile exists, otherwise adds it to
                  <code>existingRailroads</code> and <code>railTileList</code>,
                  then paints it using
                  <a href="#public-function-paintrail"
                    >public function <code>paintRail()</code></a
                  >.
                </p>
                <h5 id="private-function-clearrailroadrailroad-railtile">
                  private function
                  <code>clearRailroad(railRoad: RailTile)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>railRoad</code></td>
                      <td><code>RailTile</code></td>
                      <td>The railroad tile to clear.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Decrements occurrence of the tile and removes it from
                  <code>existingRailroads</code> and
                  <code>railTileList</code> if it reaches zero. Clears the tile
                  from <code>context</code>, with a larger rectangle for water
                  tiles. Throws an error if the layer is uninitialized.
                </p>
                <h5 id="public-function-paintrailrailroad-railtile">
                  public function <code>paintRail(railRoad: RailTile)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>railRoad</code></td>
                      <td><code>RailTile</code></td>
                      <td>The railroad tile to render.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints the railroad tile on <code>context</code>. If the tile
                  is over water, paints a bridge first using
                  <a href="#private-function-paintbridge"
                    >private function <code>paintBridge()</code></a
                  >. Determines color based on owner; defaults to white if no
                  owner. Uses
                  <a href="#private-function-paintrailrects"
                    >private function <code>paintRailRects()</code></a
                  >
                  to render rail segments. Throws an error if
                  <code>context</code> is uninitialized.
                </p>
                <h5
                  id="private-function-paintrailrectscontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype"
                >
                  private function
                  <code
                    >paintRailRects(context: CanvasRenderingContext2D, x:
                    number, y: number, direction: RailType)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context to draw onto.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the tile.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the tile.</td>
                    </tr>
                    <tr>
                      <td><code>direction</code></td>
                      <td><code>RailType</code></td>
                      <td>Type/direction of the rail.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints each rectangle segment of a railroad tile as determined
                  by <code>getRailroadRects(direction)</code>.
                </p>
                <h5
                  id="private-function-paintbridgecontext-canvasrenderingcontext2d-x-number-y-number-direction-railtype"
                >
                  private function
                  <code
                    >paintBridge(context: CanvasRenderingContext2D, x: number,
                    y: number, direction: RailType)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context to draw onto.</td>
                    </tr>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the tile.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the tile.</td>
                    </tr>
                    <tr>
                      <td><code>direction</code></td>
                      <td><code>RailType</code></td>
                      <td>Type/direction of the rail.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints bridge underlay rectangles for water tiles using
                  <code>getBridgeRects(direction)</code>. Preserves previous
                  <code>context</code> state via
                  <code>save()</code>/<code>restore()</code>.
                </p>
                <h3 id="layersrailroadspritests">
                  ./layers/RailroadSprites.ts
                </h3>
                <h4 id="function-getrailroadrectstype-railtype">
                  function <code>getRailroadRects(type: RailType)</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>RailType</code></td>
                      <td>
                        The type/direction of railroad for which rectangle
                        coordinates are requested.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Returns an array of rectangles <code>[x, y, w, h]</code> for
                  the given <code>RailType</code>. Throws an error if an
                  unsupported <code>RailType</code> is provided.
                </p>
                <h5 id="function-horizontalrailroadrects">
                  function <code>horizontalRailroadRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a horizontal railroad
                  segment.
                </p>
                <h5 id="function-verticalrailroadrects">
                  function <code>verticalRailroadRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a vertical railroad
                  segment.
                </p>
                <h5 id="function-toprightrailroadcornerrects">
                  function <code>topRightRailroadCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a top-right railroad corner
                  segment.
                </p>
                <h5 id="function-topleftrailroadcornerrects">
                  function <code>topLeftRailroadCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a top-left railroad corner
                  segment.
                </p>
                <h5 id="function-bottomrightrailroadcornerrects">
                  function <code>bottomRightRailroadCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a bottom-right railroad
                  corner segment.
                </p>
                <h5 id="function-bottomleftrailroadcornerrects">
                  function <code>bottomLeftRailroadCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Provides rectangle coordinates for a bottom-left railroad
                  corner segment.
                </p>
                <h4 id="function-getbridgerectstype-railtype">
                  function <code>getBridgeRects(type: RailType)</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>RailType</code></td>
                      <td>
                        The type/direction of railroad for which bridge
                        rectangles are requested.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number[][]</code>.</p>
                <p>
                  Returns an array of rectangles
                  <code>[x, y, w, h]</code> representing bridge underlays for
                  the given <code>RailType</code>. Throws an error if an
                  unsupported <code>RailType</code> is provided.
                </p>
                <h5 id="function-horizontalbridge">
                  function <code>horizontalBridge()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for horizontal bridge rectangles.</p>
                <h5 id="function-verticalbridge">
                  function <code>verticalBridge()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for vertical bridge rectangles.</p>
                <h5 id="function-toprightbridgecornerrects">
                  function <code>topRightBridgeCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for the top-right corner bridge segment.</p>
                <h5 id="function-bottomleftbridgecornerrects">
                  function <code>bottomLeftBridgeCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for the bottom-left corner bridge segment.</p>
                <h5 id="function-topleftbridgecornerrects">
                  function <code>topLeftBridgeCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for the top-left corner bridge segment.</p>
                <h5 id="function-bottomrightbridgecornerrects">
                  function <code>bottomRightBridgeCornerRects()</code>
                </h5>
                <p>Returns <code>number[][]</code>.</p>
                <p>Coordinates for the bottom-right corner bridge segment.</p>
                <h3 id="layerssamradiuslayerts">./layers/SAMRadiusLayer.ts</h3>
                <h4 id="class-samradiuslayer">
                  class <code>SAMRadiusLayer</code>
                </h4>
                <p>
                  Renders and manages the defense radii of SAM launchers.
                  Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Internal off-screen canvas for drawing SAM radii.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D drawing context for <code>canvas</code>.</td>
                    </tr>
                    <tr>
                      <td><code>samLaunchers</code></td>
                      <td><code>Map&lt;number, number&gt;</code></td>
                      <td>
                        Tracks active SAM launcher IDs mapped to their owner's
                        <code>smallID()</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>needsRedraw</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether the layer needs to be redrawn.</td>
                    </tr>
                    <tr>
                      <td><code>hoveredShow</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        True if the stroke should show due to hover over
                        SAM/Atom/Hydrogen option.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ghostShow</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        True if the stroke should show due to an active ghost
                        build.
                      </td>
                    </tr>
                    <tr>
                      <td><code>showStroke</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Computed stroke visibility based on hover/ghost states.
                      </td>
                    </tr>
                    <tr>
                      <td><code>dashOffset</code></td>
                      <td><code>number</code></td>
                      <td>Current offset for dashed stroke animation.</td>
                    </tr>
                    <tr>
                      <td><code>rotationSpeed</code></td>
                      <td><code>number</code></td>
                      <td>
                        Speed of stroke dash animation in pixels per second.
                      </td>
                    </tr>
                    <tr>
                      <td><code>lastTickTime</code></td>
                      <td><code>number</code></td>
                      <td>
                        Timestamp of the last <code>tick()</code> for animation
                        calculations.
                      </td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the game view.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for listening and emitting events.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Tracks canvas transformations to trigger redraws.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>Current UI state, including ghost structure.</td>
                    </tr>
                  </tbody>
                </table>
                <h5
                  id="public-constructor-samradiuslayergame-eventbus-transformhandler-uistate"
                >
                  public constructor
                  <code
                    >SAMRadiusLayer(game, eventBus, transformHandler,
                    uiState)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game view to track SAM launchers.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing to toggle events.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles canvas transformations.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>Tracks ghost structures for display.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>SAMRadiusLayer</code>.</p>
                <p>
                  Initializes internal canvas and 2D context. Throws an error if
                  2D context is unsupported.
                </p>
                <h5 id="public-function-init_18">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Registers a listener on <code>eventBus</code> for
                  <a href="#class-togglestructureevent"
                    >class <code>ToggleStructureEvent</code></a
                  >
                  and performs an initial <code>redraw()</code>.
                </p>
                <h5 id="private-function-handletogglestructuree">
                  private function <code>handleToggleStructure(e)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>ToggleStructureEvent</code></td>
                      <td>
                        Event indicating which structures are being hovered or
                        toggled.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates <code>hoveredShow</code> if SAMLauncher is included in
                  the event and updates <code>showStroke</code> accordingly.
                </p>
                <h5 id="private-function-updatestrokevisibility">
                  private function <code>updateStrokeVisibility()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Computes <code>showStroke</code> from
                  <code>hoveredShow</code> and <code>ghostShow</code>. Marks
                  <code>needsRedraw</code> if visibility changes.
                </p>
                <h5 id="public-function-shouldtransform_11">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Always returns <code>true</code>. Used by
                  <a href="#interface-layer">interface <code>Layer</code></a> to
                  indicate that canvas transformations should be applied.
                </p>
                <h5 id="public-function-tick_15">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates tracked SAM launchers based on
                  <code>game.updatesSinceLastTick()</code>. Handles ghost
                  structure visibility, updates animation dash offset, and
                  triggers <code>redraw()</code> if necessary.
                </p>
                <h5 id="public-function-renderlayercontext">
                  public function <code>renderLayer(context)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context of the main canvas to render onto.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the internal off-screen canvas onto the provided
                  context.
                </p>
                <h5 id="public-function-redraw_4">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Clears the internal canvas, updates active SAM launchers,
                  computes circle positions and radii, and draws the union of
                  all SAM ranges using
                  <a href="#private-function-drawcirclesunion"
                    >private function <code>drawCirclesUnion</code></a
                  >.
                </p>
                <h5 id="private-function-drawcirclesunioncircles">
                  private function <code>drawCirclesUnion(circles)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>circles</code></td>
                      <td>
                        <code
                          >Array&lt;{ x: number; y: number; r: number; owner:
                          number }&gt;</code
                        >
                      </td>
                      <td>
                        Array of circles representing SAM range positions,
                        radii, and owners.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Fills the union of circles and strokes only the outer arcs to
                  visually combine overlapping SAM ranges. Skips drawing if
                  <code>showStroke</code> is false. Uses dashed animated strokes
                  and separates boundaries by owner for clarity.
                </p>
                <h3 id="layerssendresourcesmodalts">
                  ./layers/SendResourcesModal.ts
                </h3>
                <h4 id="class-sendresourcemodal">
                  class <code>SendResourceModal</code>
                </h4>
                <p>
                  Modal for sending resources (troops or gold) to another
                  player.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus \| null</code></td>
                      <td>Event bus for emitting send intent events.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>open</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the modal is open. Defaults to
                        <code>false</code>.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>mode</code></td>
                      <td><code>'troops' \| 'gold'</code></td>
                      <td>
                        Type of resource to send. Defaults to
                        <code>'troops'</code>.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>total</code></td>
                      <td><code>number \| bigint</code></td>
                      <td>Total amount of resource available to send.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState \| null</code></td>
                      <td>
                        Optional UI state to seed initial percent selection.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>format</code></td>
                      <td><code>(n: number) =&gt; string</code></td>
                      <td>
                        Function to format numbers. Defaults to
                        <code>renderTroops()</code>.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>myPlayer</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>The sending player.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>target</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>The receiving player.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>gameView</code></td>
                      <td><code>GameView \| null</code></td>
                      <td>Reference to the current game view.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>heading</code></td>
                      <td><code>string \| null</code></td>
                      <td>Optional heading text for the modal.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>sendAmount</code></td>
                      <td><code>number</code></td>
                      <td>Internal state representing the amount to send.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedPercent</code></td>
                      <td><code>number \| null</code></td>
                      <td>
                        Internal state of currently selected percentage for
                        sending.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p><strong>Constants:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>PRESETS</code></td>
                      <td><code>readonly number[]</code></td>
                      <td>
                        Preset percentages for sending (10, 25, 50, 75, 100).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_12">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>Overrides shadow DOM root to allow Tailwind CSS styling.</p>
                <h5 id="protected-function-connectedcallback">
                  protected function <code>connectedCallback()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes <code>selectedPercent</code> and computes
                  <code>sendAmount</code> based on <code>uiState</code> and
                  total resource.
                </p>
                <h5 id="protected-function-updatedchanged">
                  protected function <code>updated(changed)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>changed</code></td>
                      <td><code>Map&lt;string, unknown&gt;</code></td>
                      <td>Map of changed properties.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates <code>sendAmount</code> when relevant properties
                  (<code>total</code>, <code>mode</code>, <code>target</code>,
                  <code>gameView</code>) change. Handles auto-closing if sender
                  or target is dead.
                </p>
                <h5 id="private-function-closemodal">
                  private function <code>closeModal()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Dispatches a <code>close</code> custom event to close the
                  modal.
                </p>
                <h5 id="private-function-confirm">
                  private function <code>confirm()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Validates sender and target are alive and
                  <code>eventBus</code> is available. Emits
                  <a href="#class-senddonatetroopsintentevent"
                    >class <code>SendDonateTroopsIntentEvent</code></a
                  >
                  or
                  <a href="#class-senddonategoldintentevent"
                    >class <code>SendDonateGoldIntentEvent</code></a
                  >
                  depending on mode. Closes the modal on success.
                </p>
                <h5 id="private-function-handlekeydowne">
                  private function <code>handleKeydown(e)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>KeyboardEvent</code></td>
                      <td>Keyboard event.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Handles Escape to close modal and Enter to confirm send.</p>
                <h5 id="private-function-tonumx">
                  private function <code>toNum(x)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>unknown</code></td>
                      <td>Value to convert to number.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>
                  Converts <code>bigint</code> or other numeric-like values to
                  <code>number</code>.
                </p>
                <h5 id="private-function-gettotalnumber">
                  private function <code>getTotalNumber()</code>
                </h5>
                <p>Returns <code>number</code>.</p>
                <p>
                  Returns total available resource if sender is alive, otherwise
                  0.
                </p>
                <h5 id="private-function-sanitizepercentp">
                  private function <code>sanitizePercent(p)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>p</code></td>
                      <td><code>number</code></td>
                      <td>Percent value to sanitize.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>Clamps percent between 0 and 100.</p>
                <h5 id="private-function-getcapacityleft">
                  private function <code>getCapacityLeft()</code>
                </h5>
                <p>Returns <code>number | null</code>.</p>
                <p>
                  Computes remaining capacity for troops. Returns
                  <code>null</code> for gold or if target/gameView is missing.
                </p>
                <h5 id="private-function-getpercentbasis">
                  private function <code>getPercentBasis()</code>
                </h5>
                <p>Returns <code>number</code>.</p>
                <p>Returns the total number available to send.</p>
                <h5 id="private-function-limitamountproposed">
                  private function <code>limitAmount(proposed)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>proposed</code></td>
                      <td><code>number</code></td>
                      <td>Proposed send amount.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>
                  Limits the proposed amount to total available and capacity
                  constraints.
                </p>
                <h5 id="private-function-clampsendn">
                  private function <code>clampSend(n)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>n</code></td>
                      <td><code>number</code></td>
                      <td>Amount to clamp.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>Clamps send amount based on total and capacity.</p>
                <h5 id="private-function-percentofbasisn">
                  private function <code>percentOfBasis(n)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>n</code></td>
                      <td><code>number</code></td>
                      <td>Amount to compute percent of basis.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>Computes percentage of basis.</p>
                <h5 id="private-function-keepafterallowed">
                  private function <code>keepAfter(allowed)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>allowed</code></td>
                      <td><code>number</code></td>
                      <td>Amount allowed to send.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>
                  Computes the remaining resource after sending
                  <code>allowed</code>.
                </p>
                <h5 id="private-function-getfillcolor">
                  private function <code>getFillColor()</code>
                </h5>
                <p>Returns <code>string</code>.</p>
                <p>Returns purple for troops, amber for gold.</p>
                <h5 id="private-function-getminkeepratio">
                  private function <code>getMinKeepRatio()</code>
                </h5>
                <p>Returns <code>number</code>.</p>
                <p>Minimum ratio to keep for troops (0.3) or gold (0).</p>
                <h5 id="private-function-istargetalive">
                  private function <code>isTargetAlive()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>Checks if the target player is alive.</p>
                <h5 id="private-function-issenderalive">
                  private function <code>isSenderAlive()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>Checks if the sending player is alive.</p>
                <h5 id="private-function-renderheader">
                  private function <code>renderHeader()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>
                  Renders modal header with optional <code>heading</code> and
                  close button.
                </p>
                <h5 id="private-function-renderavailable">
                  private function <code>renderAvailable()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>Displays total available resource.</p>
                <h5 id="private-function-renderpresetspercentnow">
                  private function <code>renderPresets(percentNow)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>percentNow</code></td>
                      <td><code>number</code></td>
                      <td>Current percent selection.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>Renders preset percentage buttons.</p>
                <h5 id="private-function-rendersliderpercentnow">
                  private function <code>renderSlider(percentNow)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>percentNow</code></td>
                      <td><code>number</code></td>
                      <td>Current percent selection.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>
                  Renders slider input for selecting send amount, including
                  optional capacity marker.
                </p>
                <h5 id="private-function-rendercapacitynoteallowed">
                  private function <code>renderCapacityNote(allowed)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>allowed</code></td>
                      <td><code>number</code></td>
                      <td>Allowed send amount.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>
                  Displays note when send amount is capped by target capacity.
                </p>
                <h5 id="private-function-rendersummaryallowed">
                  private function <code>renderSummary(allowed)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>allowed</code></td>
                      <td><code>number</code></td>
                      <td>Allowed send amount.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>Displays summary of send and remaining resources.</p>
                <h5 id="private-function-renderactions_1">
                  private function <code>renderActions()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>
                  Renders Cancel and Send buttons, disables if sending is not
                  allowed.
                </p>
                <h5 id="private-function-renderdeadnote">
                  private function <code>renderDeadNote()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>Displays message when target player is dead.</p>
                <h5 id="private-function-rendersliderstyles">
                  private function <code>renderSliderStyles()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>Provides inline CSS styles for slider input.</p>
                <h5 id="public-function-render_19">
                  public function <code>render()</code>
                </h5>
                <p>
                  Returns <code>import('lit').TemplateResult | undefined</code>.
                </p>
                <p>
                  Renders the entire modal if <code>open</code> is true,
                  including header, available resource, presets, slider,
                  capacity note, summary, actions, and slider styles.
                </p>
                <h3 id="layerssettingsmodalts">./layers/SettingsModal.ts</h3>
                <h4 id="class-showsettingsmodalevent">
                  class <code>ShowSettingsModalEvent</code>
                </h4>
                <p>
                  Represents an event to toggle the visibility of the settings
                  modal.
                </p>
                <h5
                  id="public-constructor-showsettingsmodaleventisvisible-shouldpause-ispaused"
                >
                  public constructor
                  <code
                    >ShowSettingsModalEvent(isVisible?, shouldPause?,
                    isPaused?)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>isVisible?</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional. Indicates whether the modal should be visible.
                        Defaults to <code>true</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>shouldPause?</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional. Indicates if the game should pause when the
                        modal opens. Defaults to <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isPaused?</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional. Indicates if the game is already paused when
                        the modal opens. Defaults to <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-settingsmodal">
                  class <code>SettingsModal</code>
                </h4>
                <p>
                  Displays and manages the settings modal. Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing and emitting events.</td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>Reference to the current user settings.</td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Internal state tracking whether the modal is visible.
                        Defaults to <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>alternateView</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Tracks whether the alternate terrain view is enabled.
                        Defaults to <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>modalOverlay</code></td>
                      <td><code>HTMLElement</code></td>
                      <td>Reference to the modal overlay element.</td>
                    </tr>
                    <tr>
                      <td><code>shouldPause</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the game should pause when the modal opens.
                        Defaults to <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>wasPausedWhenOpened</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Tracks if the game was paused when the modal opened.
                        Defaults to <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-init_19">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes volume settings via <code>SoundManager</code> and
                  subscribes to
                  <a href="#class-showsettingsmodalevent"
                    >class <code>ShowSettingsModalEvent</code></a
                  >
                  to open the modal and optionally pause the game.
                </p>
                <h5 id="public-function-createrenderroot_13">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>Overrides the default shadow DOM root to allow styling.</p>
                <h5 id="public-function-connectedcallback">
                  public function <code>connectedCallback()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Adds global event listeners for click and keydown events to
                  detect outside clicks and escape key presses.
                </p>
                <h5 id="public-function-disconnectedcallback_2">
                  public function <code>disconnectedCallback()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Removes previously added global event listeners.</p>
                <h5 id="private-function-handleoutsideclickevent">
                  private function <code>handleOutsideClick(event)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>MouseEvent</code></td>
                      <td>
                        Click event to detect if it occurred outside the modal.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Closes the modal if an outside click is detected.</p>
                <h5 id="private-function-handlekeydownevent">
                  private function <code>handleKeyDown(event)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>KeyboardEvent</code></td>
                      <td>Keydown event to detect Escape key.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Closes the modal if Escape is pressed.</p>
                <h5 id="public-function-openmodal">
                  public function <code>openModal()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Sets <code>isVisible</code> to true, prevents body scrolling,
                  and requests an update.
                </p>
                <h5 id="public-function-closemodal">
                  public function <code>closeModal()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Sets <code>isVisible</code> to false, restores body scrolling,
                  requests an update, and calls <code>pauseGame(false)</code>.
                </p>
                <h5 id="private-function-pausegamepause">
                  private function <code>pauseGame(pause)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>pause</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates whether to pause or unpause the game.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Pauses the game if <code>shouldPause</code> is true and the
                  game was not already paused when opened.
                </p>
                <h5 id="private-function-onterrainbuttonclick">
                  private function <code>onTerrainButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles the alternate terrain view and emits
                  <a href="#class-alternateviewevent"
                    >class <code>AlternateViewEvent</code></a
                  >.
                </p>
                <h5 id="private-function-ontoggleemojisbuttonclick">
                  private function <code>onToggleEmojisButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Toggles emoji display in <code>userSettings</code>.</p>
                <h5 id="private-function-ontogglestructurespritesbuttonclick">
                  private function
                  <code>onToggleStructureSpritesButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles structure sprite display in <code>userSettings</code>.
                </p>
                <h5 id="private-function-ontogglespecialeffectsbuttonclick">
                  private function
                  <code>onToggleSpecialEffectsButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles special effects display in <code>userSettings</code>.
                </p>
                <h5 id="private-function-ontoggledarkmodebuttonclick">
                  private function <code>onToggleDarkModeButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles dark mode in <code>userSettings</code> and emits
                  <a href="#class-refreshgraphicsevent"
                    >class <code>RefreshGraphicsEvent</code></a
                  >.
                </p>
                <h5 id="private-function-ontogglerandomnamemodebuttonclick">
                  private function
                  <code>onToggleRandomNameModeButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles anonymous/random name display in
                  <code>userSettings</code>.
                </p>
                <h5 id="private-function-ontoggleleftclickopensmenu">
                  private function <code>onToggleLeftClickOpensMenu()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles left-click opens menu behavior in
                  <code>userSettings</code>.
                </p>
                <h5 id="private-function-ontoggleperformanceoverlaybuttonclick">
                  private function
                  <code>onTogglePerformanceOverlayButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Toggles performance overlay display in
                  <code>userSettings</code>.
                </p>
                <h5 id="private-function-onexitbuttonclick_1">
                  private function <code>onExitButtonClick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Redirects the page to the home URL (<code>/</code>).</p>
                <h5 id="private-function-onvolumechangeevent">
                  private function <code>onVolumeChange(event)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>Event</code></td>
                      <td>Input event from background music volume slider.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates background music volume in
                  <code>userSettings</code> and via <code>SoundManager</code>.
                </p>
                <h5 id="private-function-onsoundeffectsvolumechangeevent">
                  private function
                  <code>onSoundEffectsVolumeChange(event)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>Event</code></td>
                      <td>Input event from sound effects volume slider.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates sound effects volume in <code>userSettings</code> and
                  via <code>SoundManager</code>.
                </p>
                <h5 id="public-function-render_20">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult | null</code>.</p>
                <p>
                  Renders the modal when <code>isVisible</code> is true,
                  including controls for volume, dark mode, terrain, emoji
                  toggles, structure sprites, special effects, random names,
                  left-click menu behavior, performance overlay, and exit
                  button.
                </p>
                <h3 id="layersspawntimerts">./layers/SpawnTimer.ts</h3>
                <h4 id="class-spawntimer">class <code>SpawnTimer</code></h4>
                <p>
                  Displays a progress bar representing the spawn phase and team
                  tile ratios. Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the current game view.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>
                        Tracks canvas transformations, unused for this layer.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ratios</code></td>
                      <td><code>number[]</code></td>
                      <td>
                        Array of width ratios for each segment of the progress
                        bar.
                      </td>
                    </tr>
                    <tr>
                      <td><code>colors</code></td>
                      <td><code>string[]</code></td>
                      <td>
                        Array of colors corresponding to each ratio segment.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Determines whether the spawn timer is visible. Defaults
                        to <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_14">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>
                  Sets fixed position styling for the progress bar and disables
                  pointer events.
                </p>
                <h5 id="public-function-init_20">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Initializes <code>isVisible</code> to true.</p>
                <h5 id="public-function-tick_16">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates <code>ratios</code> and <code>colors</code> based on
                  the game state:
                </p>
                <ul>
                  <li>
                    If the game is in the spawn phase, shows a single segment
                    filling proportionally to elapsed turns.
                  </li>
                  <li>
                    If the game mode is <code>Team</code>, calculates segment
                    ratios based on team-owned tiles and applies team colors
                    from the theme.
                  </li>
                  <li>Requests update via <code>requestUpdate()</code>.</li>
                </ul>
                <h5 id="public-function-shouldtransform_12">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Always returns <code>false</code> since the layer does not
                  require canvas transformations.
                </p>
                <h5 id="public-function-render_21">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>import('lit').TemplateResult</code>.</p>
                <p>
                  Renders a horizontal bar composed of colored divs
                  corresponding to <code>ratios</code> and <code>colors</code>.
                  Returns empty content if the layer is invisible or there is no
                  data to render.
                </p>
                <h4 id="private-function-sumiteratorvalues">
                  private function <code>sumIterator(values)</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>values</code></td>
                      <td><code>MapIterator&lt;number&gt;</code></td>
                      <td>Iterator over numeric values to sum.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>Computes the sum of all values in the provided iterator.</p>
                <h3 id="layersstructuredrawingutilsts">
                  ./layers/StructureDrawingUtils.ts
                </h3>
                <h4 id="constants_2">Constants</h4>
                <p>
                  <strong><code>STRUCTURE_SHAPES</code></strong>
                  <code>Partial&lt;Record&lt;UnitType, ShapeType&gt;&gt;</code>
                  Maps <code>UnitType</code> values to corresponding shape
                  strings used for rendering.
                </p>
                <p>
                  <strong><code>LEVEL_SCALE_FACTOR</code></strong>
                  <code>number</code>  Factor used to scale level indicators.
                </p>
                <p>
                  <strong><code>ICON_SCALE_FACTOR_ZOOMED_IN</code></strong>
                  <code>number</code>  Scaling factor for icons when zoomed in.
                </p>
                <p>
                  <strong><code>ICON_SCALE_FACTOR_ZOOMED_OUT</code></strong>
                  <code>number</code>  Scaling factor for icons when zoomed
                  out.
                </p>
                <p>
                  <strong><code>DOTS_ZOOM_THRESHOLD</code></strong>
                  <code>number</code>  Zoom threshold for rendering dots.
                </p>
                <p>
                  <strong><code>ZOOM_THRESHOLD</code></strong>
                  <code>number</code>  Zoom threshold for rendering icons or
                  levels.
                </p>
                <p>
                  <strong><code>ICON_SIZE</code></strong>
                  <code>{ [shape in ShapeType]: number }</code>  Default icon
                  size per shape.
                </p>
                <p>
                  <strong><code>OFFSET_ZOOM_Y</code></strong>
                  <code>number</code>  Vertical offset applied when zooming.
                </p>
                <h4 id="type-shapetype">Type <code>ShapeType</code></h4>
                <p>Represents valid shape identifiers for structures.</p>
                <ul>
                  <li>
                    <code>triangle</code> | <code>square</code> |
                    <code>pentagon</code> | <code>octagon</code> |
                    <code>circle</code> | <code>cross</code>
                  </li>
                </ul>
                <h4 id="class-spritefactory">
                  class <code>SpriteFactory</code>
                </h4>
                <p>
                  Responsible for generating PIXI sprites for structures,
                  including icons, level indicators, ghost containers, and range
                  graphics.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>The theme used for coloring sprites.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Reference to the game view for coordinate and
                        configuration data.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>
                        Handles conversion between world and screen coordinates.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renderSprites</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Flag indicating whether full sprite rendering is
                        enabled.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>textureCache</code></td>
                      <td><code>Map&lt;string, PIXI.Texture&gt;</code></td>
                      <td>
                        Caches generated textures keyed by type and state.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>structuresInfos</code></td>
                      <td>
                        <code
                          >Map&lt;UnitType, { iconPath: string; image:
                          HTMLImageElement | null }&gt;</code
                        >
                      </td>
                      <td>
                        Stores image paths and loaded images for each structure
                        type.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="constructor-spritefactory">
                  constructor <code>SpriteFactory()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Theme for coloring sprites.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Game view reference.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles coordinate transformations.</td>
                    </tr>
                    <tr>
                      <td><code>renderSprites</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether to render sprites fully.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Initializes structure icons by loading their images.</p>
                <h5 id="private-function-loadicon">
                  private function <code>loadIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitInfo</code></td>
                      <td>
                        <code
                          >{ iconPath: string; image: HTMLImageElement | null
                          }</code
                        >
                      </td>
                      <td>Structure icon information.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>UnitType</code></td>
                      <td>Type of structure.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Loads the icon image and sets it on
                  <code>unitInfo.image</code>. Logs errors on load failure.
                </p>
                <h5 id="private-function-invalidatetexturecache">
                  private function <code>invalidateTextureCache()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>UnitType</code></td>
                      <td>
                        Structure type whose cached textures should be
                        invalidated.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Removes cached textures for the specified structure type.</p>
                <h5 id="public-function-createghostcontainer">
                  public function <code>createGhostContainer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player owning the structure.</td>
                    </tr>
                    <tr>
                      <td><code>ghostStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage to which the ghost container is added.</td>
                    </tr>
                    <tr>
                      <td><code>pos</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>Position to place the container.</td>
                    </tr>
                    <tr>
                      <td><code>structureType</code></td>
                      <td><code>UnitType</code></td>
                      <td>Type of structure.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Container</code>.</p>
                <p>
                  Creates a semi-transparent container representing a ghost
                  structure at the specified position.
                </p>
                <h5 id="public-function-createunitcontainer">
                  public function <code>createUnitContainer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>The unit to render.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>options</code></td>
                      <td>
                        <code
                          >{ type?: "icon" | "dot" | "level"; stage:
                          PIXI.Container }</code
                        >
                      </td>
                      <td>
                        Rendering options; <code>type</code> is optional and
                        defaults to icon rendering.
                      </td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Container</code>.</p>
                <p>
                  Creates a container for the unit with the appropriate sprite,
                  level indicator, or dot representation. Adds container to the
                  specified stage.
                </p>
                <h5 id="private-function-createtexture">
                  private function <code>createTexture()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>UnitType</code></td>
                      <td>Structure type.</td>
                    </tr>
                    <tr>
                      <td><code>owner</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player owning the structure.</td>
                    </tr>
                    <tr>
                      <td><code>isConstruction</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the structure is under construction.</td>
                    </tr>
                    <tr>
                      <td><code>isMarkedForDeletion</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the structure is marked for deletion.</td>
                    </tr>
                    <tr>
                      <td><code>renderIcon</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether to render the full icon.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Texture</code>.</p>
                <p>
                  Generates or retrieves a cached texture for a structure. Uses
                  <code>createIcon()</code> when shape is defined.
                </p>
                <h5 id="private-function-createicon">
                  private function <code>createIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>owner</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player owning the structure.</td>
                    </tr>
                    <tr>
                      <td><code>structureType</code></td>
                      <td><code>UnitType</code></td>
                      <td>Type of structure.</td>
                    </tr>
                    <tr>
                      <td><code>isConstruction</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the structure is under construction.</td>
                    </tr>
                    <tr>
                      <td><code>isMarkedForDeletion</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether the structure is marked for deletion.</td>
                    </tr>
                    <tr>
                      <td><code>shape</code></td>
                      <td><code>string</code></td>
                      <td>Shape to render.</td>
                    </tr>
                    <tr>
                      <td><code>renderIcon</code></td>
                      <td><code>boolean</code></td>
                      <td>Whether to render the full icon.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Texture</code>.</p>
                <p>
                  Draws the structure icon onto a canvas, including optional
                  construction colors, borders, deletion marks, and the base
                  image if present. Throws on unknown shapes.
                </p>
                <h5 id="public-function-createrange">
                  public function <code>createRange()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>UnitType</code></td>
                      <td>Structure type whose range is drawn.</td>
                    </tr>
                    <tr>
                      <td><code>stage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage to which the range container is added.</td>
                    </tr>
                    <tr>
                      <td><code>pos</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>Position to place the range circle.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>PIXI.Container | null</code>. Returns
                  <code>null</code> if type does not have a defined range.
                </p>
                <p>
                  Creates a semi-transparent range indicator for structures with
                  applicable ranges.
                </p>
                <h5 id="private-function-getimagecolored">
                  private function <code>getImageColored()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>image</code></td>
                      <td><code>HTMLImageElement</code></td>
                      <td>Base image to colorize.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>string</code></td>
                      <td>Color to apply.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>HTMLCanvasElement</code>.</p>
                <p>
                  Applies the specified color to the given image using a
                  temporary canvas and returns the result.
                </p>
                <h3 id="layersstructureiconslayerts">
                  ./layers/StructureIconsLayer.ts
                </h3>
                <h4 id="class-structurerenderinfo">
                  class <code>StructureRenderInfo</code>
                </h4>
                <p>
                  Holds rendering information for a single unit's structure
                  icon, level, and dot representations.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>The unit this render info represents.</td>
                    </tr>
                    <tr>
                      <td><code>owner</code></td>
                      <td><code>PlayerID</code></td>
                      <td>ID of the player owning the unit.</td>
                    </tr>
                    <tr>
                      <td><code>iconContainer</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Container for the unit's icon sprite.</td>
                    </tr>
                    <tr>
                      <td><code>levelContainer</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Container for the unit's level sprite.</td>
                    </tr>
                    <tr>
                      <td><code>dotContainer</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Container for the unit's dot representation.</td>
                    </tr>
                    <tr>
                      <td><code>level</code></td>
                      <td><code>number</code></td>
                      <td>Current level of the unit. Defaults to 0.</td>
                    </tr>
                    <tr>
                      <td><code>underConstruction</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Whether the unit is under construction. Defaults to
                        <code>true</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isOnScreen</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the unit is currently visible on screen.
                        Defaults to <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="class-structureiconslayer">
                  class <code>StructureIconsLayer</code>
                </h4>
                <p>
                  Manages rendering, updating, and interaction for structure
                  icons, levels, and dots on the game map.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ghostUnit</code></td>
                      <td>
                        <code
                          >{ container: PIXI.Container; range: PIXI.Container \|
                          null; buildableUnit: BuildableUnit; } \| null</code
                        >
                      </td>
                      <td>
                        Currently active ghost structure being placed, or
                        <code>null</code> if none.
                      </td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>pixicanvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas used for rendering PIXI stages.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>iconsStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage containing icon sprites.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>ghostStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage containing ghost sprites.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>levelsStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage containing level sprites.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>dotsStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Stage containing dot sprites.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>rootStage</code></td>
                      <td><code>PIXI.Container</code></td>
                      <td>Root container holding all stages.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActions</code></td>
                      <td><code>PlayerActions \| null</code></td>
                      <td>Actions available to the current player.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current game theme.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renderer</code></td>
                      <td><code>PIXI.Renderer</code></td>
                      <td>Renderer for drawing the PIXI canvas.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renders</code></td>
                      <td><code>StructureRenderInfo[]</code></td>
                      <td>Active rendered structures.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>seenUnits</code></td>
                      <td><code>Set&lt;UnitView&gt;</code></td>
                      <td>Units that have been seen and rendered.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>mousePos</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>Current mouse position in pixels.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>renderSprites</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Flag indicating if structure sprites should be rendered.
                      </td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>factory</code></td>
                      <td><code>SpriteFactory</code></td>
                      <td>Factory for creating PIXI sprites.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>structures</code></td>
                      <td>
                        <code>Map&lt;UnitType, { visible: boolean }&gt;</code>
                      </td>
                      <td>Visibility settings per unit type.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastGhostQueryAt</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of last ghost update.</td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>potentialUpgrade</code></td>
                      <td><code>StructureRenderInfo \| undefined</code></td>
                      <td>
                        Stores the render info of a potential upgradeable unit.
                      </td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-structureiconslayer">
                  public constructor <code>StructureIconsLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the main game view.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for handling game and input events.</td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>Current UI state for the game.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles coordinate transformations and scaling.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes internal structures, sprite factory, and theme.
                </p>
                <h5 id="public-function-setuprenderer">
                  public function <code>setupRenderer()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Initializes the PIXI renderer and sets up stages for icons,
                  levels, dots, and ghosts. Loads bitmap fonts required for
                  sprite rendering.
                </p>
                <h5 id="public-function-shouldtransform_13">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates whether this layer should be affected by map
                  transformations. Always returns <code>false</code>.
                </p>
                <h5 id="public-function-init_21">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Sets up event listeners for mouse and toggle events, window
                  resize, initializes the renderer, and triggers an initial
                  redraw.
                </p>
                <h5 id="public-function-resizecanvas_1">
                  public function <code>resizeCanvas()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates canvas dimensions and resizes the PIXI renderer to
                  match the current window size.
                </p>
                <h5 id="public-function-tick_17">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates rendered structures based on the latest game unit
                  updates and user settings.
                </p>
                <h5 id="public-function-redraw_5">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Resizes the canvas and prepares for rendering the next frame.
                </p>
                <h5 id="public-function-renderlayer_8">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>mainContext</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>The 2D rendering context of the main canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Renders all visible structures, levels, and dots. Updates
                  ghost structures and positions based on transformations and
                  zoom level.
                </p>
                <h5 id="public-function-renderghost">
                  public function <code>renderGhost()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates and renders the ghost structure at the current mouse
                  position. Handles build and upgrade availability, visual
                  filters, and scaling. Applies a 50ms throttling for
                  performance.
                </p>
                <h5 id="private-function-createstructure">
                  private function <code>createStructure()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>MouseUpEvent</code></td>
                      <td>
                        Mouse event used to determine structure placement.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Finalizes placement or upgrade of a ghost structure and emits
                  the corresponding build or upgrade event. Removes the ghost
                  structure after action.
                </p>
                <h5 id="private-function-moveghost">
                  private function <code>moveGhost()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>e</code></td>
                      <td><code>MouseMoveEvent</code></td>
                      <td>Mouse event with updated coordinates.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates the position of the ghost structure based on mouse
                  movement.
                </p>
                <h5 id="private-function-createghoststructure">
                  private function <code>createGhostStructure()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>type</code></td>
                      <td><code>UnitType \| null</code></td>
                      <td>
                        Type of unit to create a ghost for, or
                        <code>null</code>.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a ghost structure container, range overlay, and
                  placeholder <code>BuildableUnit</code> for visual placement
                  feedback.
                </p>
                <h5 id="private-function-clearghoststructure">
                  private function <code>clearGhostStructure()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Destroys the current ghost structure and clears any potential
                  upgrade highlighting.
                </p>
                <h5 id="private-function-removeghoststructure">
                  private function <code>removeGhostStructure()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Calls <code>clearGhostStructure()</code> and resets the
                  <code>uiState.ghostStructure</code> to <code>null</code>.
                </p>
                <h5 id="private-function-togglestructures">
                  private function <code>toggleStructures()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>toggleStructureType</code></td>
                      <td><code>UnitType[] \| null</code></td>
                      <td>
                        Array of structure types to show;
                        <code>null</code> shows all structures.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates visibility of structure types and triggers
                  modifications for all rendered units.
                </p>
                <h5 id="private-function-findrenderbyunit">
                  private function <code>findRenderByUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitView</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to find the corresponding render info for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>StructureRenderInfo | undefined</code>.</p>
                <p>
                  Searches the active renders array for the render info
                  corresponding to the given unit.
                </p>
                <h5 id="private-function-handleactiveunit">
                  private function <code>handleActiveUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitView</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being processed.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates or creates rendering for active units, checking for
                  construction, deletion, ownership, and level changes.
                </p>
                <h5 id="private-function-handleinactiveunit">
                  private function <code>handleInactiveUnit()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitView</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being processed.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Deletes structure rendering for units no longer active.</p>
                <h5 id="private-function-modifyvisibility">
                  private function <code>modifyVisibility()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>
                        Render info of the structure to update visibility for.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Adjusts alpha and outline filters based on the visibility of
                  the structure type.
                </p>
                <h5 id="private-function-checkfordeletionstate">
                  private function <code>checkForDeletionState()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameters</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being checked for deletion.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Recreates the icon and dot sprites if the unit is marked for
                  deletion.
                </p>
                <h5 id="private-function-checkforconstructionstate">
                  private function <code>checkForConstructionState()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameters</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being checked.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates sprite containers if a unit has finished construction.
                </p>
                <h5 id="private-function-checkforownershipchange">
                  private function <code>checkForOwnershipChange()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameters</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being checked.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates sprite containers if the unit ownership has changed.
                </p>
                <h5 id="private-function-checkforlevelchange">
                  private function <code>checkForLevelChange()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameters</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit being checked.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates level sprite container if the unit's level has
                  changed.
                </p>
                <h5 id="private-function-computenewlocation">
                  private function <code>computeNewLocation()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Calculates on-screen position for icon, level, and dot
                  containers based on world coordinates, scaling, and zoom
                  thresholds.
                </p>
                <h5 id="private-function-addnewstructure">
                  private function <code>addNewStructure()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitView</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to add rendering for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates new render info for a unit, adds it to active renders,
                  computes its location, and applies visibility rules.
                </p>
                <h5 id="private-function-createlevelsprite">
                  private function <code>createLevelSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to create a level sprite for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Container</code>.</p>
                <p>
                  Uses <code>SpriteFactory</code> to create the level
                  representation for a unit.
                </p>
                <h5 id="private-function-createdotsprite">
                  private function <code>createDotSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to create a dot sprite for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Container</code>.</p>
                <p>
                  Uses <code>SpriteFactory</code> to create the dot
                  representation for a unit.
                </p>
                <h5 id="private-function-createiconsprite">
                  private function <code>createIconSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to create an icon sprite for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>PIXI.Container</code>.</p>
                <p>
                  Uses <code>SpriteFactory</code> to create the icon
                  representation for a unit.
                </p>
                <h5 id="private-function-deletestructure">
                  private function <code>deleteStructure()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>render</code></td>
                      <td><code>StructureRenderInfo</code></td>
                      <td>Render info of the structure to delete.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Destroys all sprite containers and removes the structure from
                  the active renders and seen units.
                </p>
                <h3 id="layersstructurelayersts">
                  ./layers/StructureLayers.ts
                </h3>
                <h4 id="class-structurelayer">
                  class <code>StructureLayer</code>
                </h4>
                <p>
                  Renders unit structures, borders, and territories on a
                  dedicated canvas layer. Handles icon loading, scaling, and
                  updates based on game events.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>
                        Main canvas used for rendering the structure layer.
                      </td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context for the main canvas.</td>
                    </tr>
                    <tr>
                      <td><code>unitIcons</code></td>
                      <td><code>Map&lt;string, HTMLImageElement&gt;</code></td>
                      <td>Maps unit types to loaded icon images.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme configuration.</td>
                    </tr>
                    <tr>
                      <td><code>tempCanvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Temporary canvas for high-quality icon rendering.</td>
                    </tr>
                    <tr>
                      <td><code>tempContext</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context for <code>tempCanvas</code>.</td>
                    </tr>
                    <tr>
                      <td><code>unitConfigs</code></td>
                      <td>
                        <code
                          >Partial&lt;Record&lt;UnitType,
                          UnitRenderConfig&gt;&gt;</code
                        >
                      </td>
                      <td>
                        Configuration for supported unit types, including icon
                        paths, border radii, and territory radii.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-structurelayer">
                  public constructor <code>StructureLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        Game view providing units, updates, and configuration.
                      </td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for game events.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handler for coordinate transformations.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the structure layer, loads unit icons, and sets up
                  temporary rendering resources.
                </p>
                <h5 id="public-function-shouldtransform_14">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates that this layer requires coordinate transformations
                  for rendering.
                </p>
                <h5 id="public-function-tick_18">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Processes game updates since the last tick, updating unit
                  rendering as necessary.
                </p>
                <h5 id="public-function-init_22">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Initializes and redraws the structure layer.</p>
                <h5 id="public-function-redraw_6">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a new canvas, sets scaling options, decodes loaded
                  unit icons, and renders all units.
                </p>
                <h5 id="public-function-renderlayer_9">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context to draw this layer onto.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the structure layer onto the provided context if the
                  zoom level and user settings allow it.
                </p>
                <h5 id="private-function-loadicon_1">
                  private function <code>loadIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>string</code></td>
                      <td>The type of unit to load the icon for.</td>
                    </tr>
                    <tr>
                      <td><code>config</code></td>
                      <td><code>UnitRenderConfig</code></td>
                      <td>Configuration containing icon path and radii.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Loads a unit icon image and stores it in
                  <code>unitIcons</code>. Logs success or failure.
                </p>
                <h5 id="private-function-loadicondata">
                  private function <code>loadIconData()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Loads all configured unit icons using <code>loadIcon()</code>.
                </p>
                <h5 id="private-function-isunittypesupported">
                  private function <code>isUnitTypeSupported()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>UnitType</code></td>
                      <td>Unit type to check support for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>boolean</code>. Returns <code>true</code> if the
                  unit type exists in <code>unitConfigs</code>.
                </p>
                <h5 id="private-function-handleunitrendering">
                  private function <code>handleUnitRendering()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit instance to render.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Handles clearing, border drawing,
                  and icon rendering for a single unit. Skips unsupported types
                  or inactive units.
                </p>
                <p>
                  See also:
                  <a href="#private-function-drawborder"
                    >private function <code>drawBorder()</code></a
                  >,
                  <a href="#private-function-rendericon"
                    >private function <code>renderIcon()</code></a
                  >
                </p>
                <h5 id="private-function-drawborder">
                  private function <code>drawBorder()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to draw borders for.</td>
                    </tr>
                    <tr>
                      <td><code>borderColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Color to use for the border.</td>
                    </tr>
                    <tr>
                      <td><code>config</code></td>
                      <td><code>UnitRenderConfig</code></td>
                      <td>Rendering configuration for the unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Draws the unit's border and
                  territory cells on the canvas using the provided colors.
                </p>
                <h5 id="private-function-rendericon">
                  private function <code>renderIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>image</code></td>
                      <td><code>HTMLImageElement</code></td>
                      <td>Icon image to render.</td>
                    </tr>
                    <tr>
                      <td><code>startX</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate for the icon placement.</td>
                    </tr>
                    <tr>
                      <td><code>startY</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate for the icon placement.</td>
                    </tr>
                    <tr>
                      <td><code>width</code></td>
                      <td><code>number</code></td>
                      <td>Width to render the icon.</td>
                    </tr>
                    <tr>
                      <td><code>height</code></td>
                      <td><code>number</code></td>
                      <td>Height to render the icon.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit associated with the icon.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Draws the icon onto the main canvas
                  using the temporary high-resolution canvas. Handles scaling
                  and alpha channel.
                </p>
                <h5 id="public-function-paintcell">
                  public function <code>paintCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>Cell</code></td>
                      <td>Cell to paint.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Color to paint the cell.</td>
                    </tr>
                    <tr>
                      <td><code>alpha</code></td>
                      <td><code>number</code></td>
                      <td>Alpha value (0255) for the cell.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Clears the cell and fills it with
                  the specified color and transparency.
                </p>
                <h5 id="public-function-clearcell">
                  public function <code>clearCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>Cell</code></td>
                      <td>Cell to clear.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Clears the cell area on the main
                  canvas.
                </p>
                <h3 id="layersteamstatsts">./layers/TeamStats.ts</h3>
                <h4 id="class-teamstats">class <code>TeamStats</code></h4>
                <p>
                  Displays team statistics in a grid view, including scores,
                  resources, and unit counts. Updates periodically based on game
                  ticks and supports toggling between different unit views.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>
                        The game view providing players, teams, and game state.
                      </td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing to game events.</td>
                    </tr>
                    <tr>
                      <td><code>visible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the team stats layer is visible. Defaults
                        to <code>false</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>teams</code></td>
                      <td><code>TeamEntry[]</code></td>
                      <td>Array of aggregated team statistics.</td>
                    </tr>
                    <tr>
                      <td><code>_shownOnInit</code></td>
                      <td><code>boolean</code></td>
                      <td>Internal flag to track initial display state.</td>
                    </tr>
                    <tr>
                      <td><code>showUnits</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Determines whether to show unit breakdowns
                        (<code>true</code>) or score/gold/troops
                        (<code>false</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor">public constructor</h5>
                <p>
                  Uses default LitElement constructor. No custom parameters.
                </p>
                <h5 id="public-function-createrenderroot_15">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>Uses the light DOM to allow Tailwind styling.</p>
                <h5 id="public-function-init_23">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Placeholder for interface compliance; no initialization
                  required.
                </p>
                <h5 id="public-function-tick_19">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates team statistics based on game mode and ticks. Only
                  updates when in <code>Team</code> game mode and visible.
                  Refreshes every 10 ticks or once on initial display.
                </p>
                <p>
                  See also:
                  <a href="#private-function-updateteamstats"
                    >private function <code>updateTeamStats()</code></a
                  >
                </p>
                <h5 id="private-function-updateteamstats">
                  private function <code>updateTeamStats()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Aggregates statistics for all teams, including total score,
                  gold, troops, cities, launchers, SAMs, and warships. Updates
                  <code>teams</code> property and triggers re-render.
                </p>
                <h5 id="public-function-renderlayer_10">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context to render the layer on.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>void</code>. Empty implementation for interface
                  compliance.
                </p>
                <h5 id="public-function-shouldtransform_15">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates that this layer does not require coordinate
                  transformations.
                </p>
                <h5 id="public-function-render_22">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Renders the team stats as an HTML grid. Supports toggling
                  between resource view and unit view via a button. Uses
                  translation utilities for headers and Tailwind CSS for
                  styling.
                </p>
                <h4 id="interface-teamentry">
                  interface <code>TeamEntry</code>
                </h4>
                <p>Aggregates team statistics for display.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>teamName</code></td>
                      <td><code>string</code></td>
                      <td>Name of the team.</td>
                    </tr>
                    <tr>
                      <td><code>totalScoreStr</code></td>
                      <td><code>string</code></td>
                      <td>Formatted score percentage string.</td>
                    </tr>
                    <tr>
                      <td><code>totalGold</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total gold for the team.</td>
                    </tr>
                    <tr>
                      <td><code>totalTroops</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total troop count.</td>
                    </tr>
                    <tr>
                      <td><code>totalSAMs</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total SAM launchers.</td>
                    </tr>
                    <tr>
                      <td><code>totalLaunchers</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total missile silos.</td>
                    </tr>
                    <tr>
                      <td><code>totalWarShips</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total warships.</td>
                    </tr>
                    <tr>
                      <td><code>totalCities</code></td>
                      <td><code>string</code></td>
                      <td>Formatted total cities.</td>
                    </tr>
                    <tr>
                      <td><code>totalScoreSort</code></td>
                      <td><code>number</code></td>
                      <td>Numeric score used for sorting teams.</td>
                    </tr>
                    <tr>
                      <td><code>players</code></td>
                      <td><code>PlayerView[]</code></td>
                      <td>Array of players belonging to the team.</td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="private-function-formatpercentage_1">
                  private function <code>formatPercentage()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>value</code></td>
                      <td><code>number</code></td>
                      <td>Score fraction (01) to format as a percentage.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>string</code>. Converts a numeric fraction to a
                  percentage string with precision, returning "0%" if NaN and
                  "100%" for exact full score.
                </p>
                <h3 id="layersterrainlayerts">./layers/TerrainLayer.ts</h3>
                <h4 id="class-terrainlayer">class <code>TerrainLayer</code></h4>
                <p>
                  Implements the <code>Layer</code> interface to manage the
                  terrain rendering layer for a game view. Handles canvas
                  creation, image data initialization, and layer rendering.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas element where terrain is drawn.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context for the canvas.</td>
                    </tr>
                    <tr>
                      <td><code>imageData</code></td>
                      <td><code>ImageData</code></td>
                      <td>Pixel data for terrain rendering.</td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme applied to terrain colors.</td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles layer transformations and scaling.</td>
                    </tr>
                  </tbody>
                </table>
                <h5
                  id="public-constructor-constructorgame-gameview-transformhandler-transformhandler_1"
                >
                  public constructor
                  <code
                    >constructor(game: GameView, transformHandler:
                    TransformHandler)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles layer transformations and scaling.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the <code>TerrainLayer</code> with references to
                  the game and transformation handler.
                </p>
                <h5 id="public-function-shouldtransform_16">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Determines whether this layer should apply transformations.
                  Always returns <code>true</code>.
                </p>
                <h5 id="public-function-tick_20">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates the layer state. If the game's theme has changed from
                  the last rendered <code>theme</code>, redraws the terrain
                  layer.
                </p>
                <h5 id="public-function-init_24">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes the terrain layer by drawing the canvas for the
                  first time. Logs a message upon redraw.
                </p>
                <h5 id="protected-function-redraw">
                  protected function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a new canvas sized to the game view, obtains the 2D
                  rendering context, initializes image data, and renders it onto
                  the canvas. Throws an error if 2D context is unsupported.
                </p>
                <h5 id="protected-function-initimagedata">
                  protected function <code>initImageData()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes pixel data for the terrain layer based on the
                  current theme. Iterates over each tile in the game view and
                  sets RGBA values according to the theme's terrain color.
                </p>
                <h5
                  id="public-function-renderlayercontext-canvasrenderingcontext2d_1"
                >
                  public function
                  <code>renderLayer(context: CanvasRenderingContext2D)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>
                        Rendering context where the terrain layer is drawn.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the terrain canvas onto the given rendering context.
                  Enables low-quality image smoothing if the scale is below 1;
                  otherwise, disables smoothing.
                </p>
                <h3 id="layersterritorylayerts">./layers/TerritoryLayer.ts</h3>
                <h4 id="class-territorylayer">
                  class <code>TerritoryLayer</code>
                </h4>
                <p>
                  Implements the <code>Layer</code> interface to manage
                  territory visualization and highlights in the game view.
                  Handles drawing, alternative views, spawn highlights, player
                  borders, and queued tile rendering.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>User settings influencing rendering behavior.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Main canvas for territory rendering.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context for the main canvas.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>imageData</code></td>
                      <td><code>ImageData</code></td>
                      <td>Pixel data for territory layer.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>alternativeImageData</code></td>
                      <td><code>ImageData</code></td>
                      <td>Pixel data for alternative view mode.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>borderAnimTime</code></td>
                      <td><code>number</code></td>
                      <td>Timer for breathing border animation.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>cachedTerritoryPatternsEnabled</code></td>
                      <td><code>boolean \| undefined</code></td>
                      <td>
                        Flag indicating if territory pattern caching is enabled.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>tileToRenderQueue</code></td>
                      <td>
                        <code
                          >PriorityQueue&lt;{ tile: TileRef; lastUpdate: number
                          }&gt;</code
                        >
                      </td>
                      <td>Queue of tiles pending render updates.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>random</code></td>
                      <td><code>PseudoRandom</code></td>
                      <td>
                        Random number generator instance for rendering order.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme applied to territory colors.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>highlightCanvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas for spawn and focus highlights.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>highlightContext</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context for highlights.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>highlightedTerritory</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>Currently highlighted territory, if any.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>alternativeView</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates if alternative view mode is active.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastDragTime</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of last drag event.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>nodrawDragDuration</code></td>
                      <td><code>number</code></td>
                      <td>Duration to skip rendering during drag (ms).</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastMousePosition</code></td>
                      <td><code>{ x: number; y: number } \| null</code></td>
                      <td>Last mouse position for territory highlighting.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>refreshRate</code></td>
                      <td><code>number</code></td>
                      <td>Minimum refresh interval (ms) for rendering.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastRefresh</code></td>
                      <td><code>number</code></td>
                      <td>Timestamp of last render.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastFocusedPlayer</code></td>
                      <td><code>PlayerView \| null</code></td>
                      <td>Last player that had focus.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the game view instance.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for input and updates.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles layer transformations and scaling.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5
                  id="public-constructor-constructorgame-gameview-eventbus-eventbus-transformhandler-transformhandler-usersettings-usersettings"
                >
                  public constructor
                  <code
                    >constructor(game: GameView, eventBus: EventBus,
                    transformHandler: TransformHandler, userSettings:
                    UserSettings)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for input events.</td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Layer transformation handler.</td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>User settings for rendering preferences.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Initializes the territory layer with the game, event bus,
                  transform handler, and user settings. Sets initial theme and
                  cache flags.
                </p>
                <h5 id="public-function-shouldtransform_17">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Determines whether this layer should apply transformations.
                  Always returns <code>true</code>.
                </p>
                <h5
                  id="public-async-function-paintplayerborderplayer-playerview"
                >
                  public async function
                  <code>paintPlayerBorder(player: PlayerView)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player whose border is to be painted.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>Immediately paints all tiles along the player's border.</p>
                <h5 id="public-function-tick_21">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates territory highlights and enqueues tiles for rendering.
                  Handles spawn phase highlights, unit updates, alliance
                  changes, embargoes, and focused player borders.
                </p>
                <h5 id="private-function-spawnhighlight">
                  private function <code>spawnHighlight()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates spawn highlights for human players. Uses team colors
                  or default highlight color and paints tiles within a defined
                  radius from player centers.
                </p>
                <h5 id="private-function-drawfocusedplayerhighlight">
                  private function <code>drawFocusedPlayerHighlight()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws a breathing highlight ring around the currently focused
                  player using <code>drawBreathingRing()</code>.
                </p>
                <h5 id="public-function-init_25">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Registers input event listeners for mouse-over, alternate
                  view, and drag events. Initializes the layer by calling
                  <code>redraw()</code>.
                </p>
                <h5 id="public-function-onmouseoverevent-mouseoverevent">
                  public function
                  <code>onMouseOver(event: MouseOverEvent)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>MouseOverEvent</code></td>
                      <td>Mouse-over event containing cursor position.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates last mouse position and refreshes the highlighted
                  territory.
                </p>
                <h5 id="private-function-updatehighlightedterritory">
                  private function <code>updateHighlightedTerritory()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Determines the territory under the cursor in alternative view
                  mode. Redraws borders if the highlighted territory changes.
                </p>
                <h5
                  id="private-function-getterritoryatcellcell-x-number-y-number"
                >
                  private function
                  <code
                    >getTerritoryAtCell(cell: { x: number; y: number })</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>Cell coordinates to check.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>PlayerView | null</code>. Returns
                  <code>null</code> if cell is invalid or unowned.
                </p>
                <h5 id="public-function-redraw_7">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Recreates main and highlight canvases, initializes image data,
                  and paints all tiles according to ownership and alternative
                  view settings.
                </p>
                <h5 id="public-function-redrawborderplayers-playerview">
                  public function
                  <code>redrawBorder(...players: PlayerView[])</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>players</code></td>
                      <td><code>PlayerView[]</code></td>
                      <td>Players whose borders are to be redrawn.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>Promise&lt;void[]&gt;</code>.</p>
                <p>Redraws the border tiles for the given players.</p>
                <h5 id="public-function-initimagedata">
                  public function <code>initImageData()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Clears all image data by setting alpha channels to 0.</p>
                <h5
                  id="public-function-renderlayercontext-canvasrenderingcontext2d_2"
                >
                  public function
                  <code>renderLayer(context: CanvasRenderingContext2D)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Rendering context for the layer.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Renders the territory and highlight canvases. Throttles
                  updates according to <code>refreshRate</code> and drag state.
                </p>
                <h5 id="protected-function-renderterritory">
                  protected function <code>renderTerritory()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Processes a batch of tiles from the render queue and paints
                  them, including neighbor tiles for smooth border updates.
                </p>
                <h5
                  id="public-function-paintterritorytile-tileref-isborder-boolean-false"
                >
                  public function
                  <code
                    >paintTerritory(tile: TileRef, isBorder: boolean =
                    false)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to paint.</td>
                    </tr>
                    <tr>
                      <td><code>isBorder</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Optional; whether the tile is a border tile. Defaults to
                        <code>false</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints a tile according to ownership, border status,
                  alternative view, and highlight rules.
                </p>
                <h5 id="public-function-alternateviewcolorother-playerview">
                  public function
                  <code>alternateViewColor(other: PlayerView)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player whose color is to be determined.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>Colord</code>. Computes color for a tile in
                  alternative view mode based on ownership, ally/enemy status,
                  or neutrality.
                </p>
                <h5
                  id="public-function-paintalternateviewtiletile-tileref-other-playerview"
                >
                  public function
                  <code
                    >paintAlternateViewTile(tile: TileRef, other:
                    PlayerView)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to paint.</td>
                    </tr>
                    <tr>
                      <td><code>other</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player whose color to use.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Paints a tile in alternative view mode.</p>
                <h5
                  id="public-function-painttileimagedata-imagedata-tile-tileref-color-colord-alpha-number"
                >
                  public function
                  <code
                    >paintTile(imageData: ImageData, tile: TileRef, color:
                    Colord, alpha: number)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>imageData</code></td>
                      <td><code>ImageData</code></td>
                      <td>ImageData buffer to modify.</td>
                    </tr>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile index to paint.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Color to apply.</td>
                    </tr>
                    <tr>
                      <td><code>alpha</code></td>
                      <td><code>number</code></td>
                      <td>Alpha transparency value.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates pixel data for a tile with the given color and alpha.
                </p>
                <h5 id="public-function-cleartiletile-tileref">
                  public function <code>clearTile(tile: TileRef)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile index to clear.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Sets alpha to 0 in both <code>imageData</code> and
                  <code>alternativeImageData</code>.
                </p>
                <h5 id="public-function-clearalternativetiletile-tileref">
                  public function
                  <code>clearAlternativeTile(tile: TileRef)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile index to clear in alternative view.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Sets alpha to 0 in <code>alternativeImageData</code> only.
                </p>
                <h5 id="public-function-enqueuetiletile-tileref">
                  public function <code>enqueueTile(tile: TileRef)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to enqueue for rendering.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Adds a tile to the render queue with a small random offset to
                  stagger updates.
                </p>
                <h5
                  id="public-async-function-enqueueplayerborderplayer-playerview"
                >
                  public async function
                  <code>enqueuePlayerBorder(player: PlayerView)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>player</code></td>
                      <td><code>PlayerView</code></td>
                      <td>Player whose border tiles to enqueue.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>Enqueues all border tiles of a player for rendering.</p>
                <h5
                  id="public-function-painthighlighttiletile-tileref-color-colord-alpha-number"
                >
                  public function
                  <code
                    >paintHighlightTile(tile: TileRef, color: Colord, alpha:
                    number)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to highlight.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Highlight color.</td>
                    </tr>
                    <tr>
                      <td><code>alpha</code></td>
                      <td><code>number</code></td>
                      <td>Alpha transparency value.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Paints a highlight tile on the highlight canvas.</p>
                <h5 id="public-function-clearhighlighttiletile-tileref">
                  public function <code>clearHighlightTile(tile: TileRef)</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>tile</code></td>
                      <td><code>TileRef</code></td>
                      <td>Tile to clear from highlight canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears a highlight tile.</p>
                <h5
                  id="private-function-drawbreathingringcx-number-cy-number-minrad-number-maxrad-number-radius-number-transparentcolor-colord-breathingcolor-colord"
                >
                  private function
                  <code
                    >drawBreathingRing(cx: number, cy: number, minRad: number,
                    maxRad: number, radius: number, transparentColor: Colord,
                    breathingColor: Colord)</code
                  >
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cx</code></td>
                      <td><code>number</code></td>
                      <td>Center x-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>cy</code></td>
                      <td><code>number</code></td>
                      <td>Center y-coordinate.</td>
                    </tr>
                    <tr>
                      <td><code>minRad</code></td>
                      <td><code>number</code></td>
                      <td>Minimum radius of the ring.</td>
                    </tr>
                    <tr>
                      <td><code>maxRad</code></td>
                      <td><code>number</code></td>
                      <td>Maximum radius of the ring.</td>
                    </tr>
                    <tr>
                      <td><code>radius</code></td>
                      <td><code>number</code></td>
                      <td>Current radius for breathing animation.</td>
                    </tr>
                    <tr>
                      <td><code>transparentColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Base color for transparent ring portion.</td>
                    </tr>
                    <tr>
                      <td><code>breathingColor</code></td>
                      <td><code>Colord</code></td>
                      <td>Color used for breathing ring portion.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws a radial breathing highlight ring for spawn or focus
                  effects.
                </p>
                <h3 id="layersuilayerts">./layers/UILayer.ts</h3>
                <h4 id="class-uilayer">class <code>UILayer</code></h4>
                <p>
                  Layer responsible for drawing UI elements that overlay the
                  game, including selection boxes, health bars, and loading
                  bars.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>The internal canvas used to draw UI elements.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D \| null</code></td>
                      <td>Canvas rendering context for drawing operations.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme \| null</code></td>
                      <td>Current theme used for UI colorization.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>userSettings</code></td>
                      <td><code>UserSettings</code></td>
                      <td>Stores user preferences for UI display.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectionAnimTime</code></td>
                      <td><code>number</code></td>
                      <td>
                        Tracks animation time for selection box pulsation.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>allProgressBars</code></td>
                      <td>
                        <code
                          >Map&lt;number, { unit: UnitView; progressBar:
                          ProgressBar }&gt;</code
                        >
                      </td>
                      <td>
                        Tracks progress bars for units currently in progress.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>allHealthBars</code></td>
                      <td><code>Map&lt;number, ProgressBar&gt;</code></td>
                      <td>Tracks health bars for active units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedUnit</code></td>
                      <td><code>UnitView \| null</code></td>
                      <td>Currently selected unit.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>lastSelectionBoxCenter</code></td>
                      <td>
                        <code
                          >{ x: number; y: number; size: number } \| null</code
                        >
                      </td>
                      <td>
                        Stores previous selection box position for clearing.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>SELECTION_BOX_SIZE</code></td>
                      <td><code>number</code></td>
                      <td>Size of selection boxes (constant).</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the main game view.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing to game events.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Handles coordinate transformations for drawing.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-shouldtransform_18">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Determines whether this layer should apply coordinate
                  transformations. Always returns <code>true</code>.
                </p>
                <h5 id="public-function-tick_22">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Updates animation states and UI elements:</p>
                <ul>
                  <li>Increments <code>selectionAnimTime</code>.</li>
                  <li>Redraws selection box for selected warships.</li>
                  <li>Processes unit updates since the last tick.</li>
                  <li>Updates progress bars.</li>
                </ul>
                <h5 id="public-function-init_26">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Initializes the UI layer:</p>
                <ul>
                  <li>Subscribes to unit selection events.</li>
                  <li>Calls <code>redraw()</code> to initialize the canvas.</li>
                </ul>
                <h5 id="public-function-renderlayer_11">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Context to render the layer onto.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the internal canvas onto the provided context, centered
                  on the game view.
                </p>
                <h5 id="public-function-redraw_8">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a new internal canvas and obtains its rendering
                  context. Sets canvas size to match game dimensions.
                </p>
                <h5 id="private-function-onunitevent">
                  private function <code>onUnitEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>The unit whose UI state has changed.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Updates UI elements based on unit type and state:</p>
                <ul>
                  <li>
                    Creates loading bars for constructions or partially ready
                    units.
                  </li>
                  <li>Draws health bars for warships.</li>
                  <li>Skips inactive or undefined units.</li>
                </ul>
                <h5 id="private-function-clearicon">
                  private function <code>clearIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>HTMLImageElement</code></td>
                      <td>Icon to clear.</td>
                    </tr>
                    <tr>
                      <td><code>startX</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of icon position.</td>
                    </tr>
                    <tr>
                      <td><code>startY</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of icon position.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Clears the area occupied by the icon on the internal canvas.
                </p>
                <h5 id="private-function-drawicon">
                  private function <code>drawIcon()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>HTMLImageElement</code></td>
                      <td>Icon image to draw.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit owning the icon.</td>
                    </tr>
                    <tr>
                      <td><code>startX</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate for drawing.</td>
                    </tr>
                    <tr>
                      <td><code>startY</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate for drawing.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws a filled rectangle using the unit's border color, then
                  overlays the icon image.
                </p>
                <h5 id="private-function-onunitselection">
                  private function <code>onUnitSelection()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>UnitSelectionEvent</code></td>
                      <td>Event containing unit selection state.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Handles selection events:</p>
                <ul>
                  <li>Sets or clears <code>selectedUnit</code>.</li>
                  <li>Draws or clears the selection box as appropriate.</li>
                </ul>
                <h5 id="private-function-clearselectionbox">
                  private function <code>clearSelectionBox()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>Center X-coordinate of the selection box.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Center Y-coordinate of the selection box.</td>
                    </tr>
                    <tr>
                      <td><code>size</code></td>
                      <td><code>number</code></td>
                      <td>Half-size of the selection box.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Clears the selection box border by clearing cells around the
                  specified coordinates.
                </p>
                <h5 id="public-function-drawselectionbox">
                  public function <code>drawSelectionBox()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit around which the selection box is drawn.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws a pulsating selection box for active units:</p>
                <ul>
                  <li>
                    Calculates opacity based on <code>selectionAnimTime</code>.
                  </li>
                  <li>Uses owner color brightened by 20%.</li>
                  <li>Clears previous box if the unit has moved.</li>
                </ul>
                <p>
                  See also:
                  <a href="#private-function-clearselectionbox"
                    >private function <code>clearSelectionBox()</code></a
                  >
                </p>
                <h5 id="public-function-drawhealthbar">
                  public function <code>drawHealthBar()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Warship unit to draw health bar for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws a health bar for active warships:</p>
                <ul>
                  <li>
                    Clears existing bar if health is full or unit is inactive.
                  </li>
                  <li>
                    Creates new <code>ProgressBar</code> if unit has partial
                    health.
                  </li>
                </ul>
                <h5 id="private-function-updateprogressbars">
                  private function <code>updateProgressBars()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Updates all active progress bars:</p>
                <ul>
                  <li>Increments progress.</li>
                  <li>Clears bars that have reached completion.</li>
                </ul>
                <h5 id="private-function-getprogress">
                  private function <code>getProgress()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to calculate progress for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>
                  Computes progress for constructions, missile silos, and
                  deletable units:
                </p>
                <ul>
                  <li>
                    Returns <code>1</code> for inactive or undefined units.
                  </li>
                  <li>
                    Calculates construction completion or deletion progress.
                  </li>
                </ul>
                <h5 id="private-function-deletionprogress">
                  private function <code>deletionProgress()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Current game view.</td>
                    </tr>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit marked for deletion.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>number</code>.</p>
                <p>
                  Calculates progress based on remaining ticks until deletion.
                  Returns <code>1</code> if unit is not marked for deletion.
                </p>
                <h5 id="public-function-createloadingbar">
                  public function <code>createLoadingBar()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to create a loading bar for.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates a new <code>ProgressBar</code> for units in progress
                  if one does not already exist.
                </p>
                <p>
                  See also:
                  <a href="#private-function-updateprogressbars"
                    >private function <code>updateProgressBars()</code></a
                  >
                </p>
                <h5 id="public-function-paintcell_1">
                  public function <code>paintCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the cell.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the cell.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Color to paint.</td>
                    </tr>
                    <tr>
                      <td><code>alpha</code></td>
                      <td><code>number</code></td>
                      <td>Alpha transparency (0-255).</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints a single pixel on the canvas with the specified color
                  and alpha.
                </p>
                <h5 id="public-function-clearcell_1">
                  public function <code>clearCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X-coordinate of the cell.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y-coordinate of the cell.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears a single pixel on the internal canvas.</p>
                <h3 id="layersunitdisplayts">./layers/UnitDisplay.ts</h3>
                <h4 id="class-unitdisplay">class <code>UnitDisplay</code></h4>
                <p>
                  Displays unit counts and build options in the UI. Provides
                  interactive unit selection and hotkey overlays.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>Reference to the current game view.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus for subscribing and emitting events.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>uiState</code></td>
                      <td><code>UIState</code></td>
                      <td>
                        Tracks current UI state, including ghost structures.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>playerActions</code></td>
                      <td><code>PlayerActions \| null</code></td>
                      <td>Tracks available buildable units for the player.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>keybinds</code></td>
                      <td>
                        <code
                          >Record&lt;string, { value: string; key: string
                          }&gt;</code
                        >
                      </td>
                      <td>Stores keybinds loaded from local storage.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_cities</code></td>
                      <td><code>number</code></td>
                      <td>Count of City units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_warships</code></td>
                      <td><code>number</code></td>
                      <td>Count of Warship units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_factories</code></td>
                      <td><code>number</code></td>
                      <td>Count of Factory units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_missileSilo</code></td>
                      <td><code>number</code></td>
                      <td>Count of Missile Silo units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_port</code></td>
                      <td><code>number</code></td>
                      <td>Count of Port units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_defensePost</code></td>
                      <td><code>number</code></td>
                      <td>Count of Defense Post units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_samLauncher</code></td>
                      <td><code>number</code></td>
                      <td>Count of SAM Launcher units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>allDisabled</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if all units are disabled in configuration.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>_hoveredUnit</code></td>
                      <td><code>UnitType \| null</code></td>
                      <td>Currently hovered unit type for tooltip display.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-createrenderroot_16">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>
                  Overrides LitElement's <code>createRenderRoot</code> to render
                  directly in the light DOM.
                </p>
                <h5 id="public-function-init_27">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Initializes the unit display:</p>
                <ul>
                  <li>Loads saved keybinds from local storage.</li>
                  <li>
                    Checks which units are disabled and sets
                    <code>allDisabled</code> flag.
                  </li>
                  <li>Triggers an update of the component.</li>
                </ul>
                <h5 id="private-function-cost">
                  private function <code>cost()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>item</code></td>
                      <td><code>UnitType</code></td>
                      <td>The unit type to query.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>Gold</code>.</p>
                <p>
                  Returns the cost of the given unit type based on
                  <code>playerActions</code>. Returns <code>0n</code> if the
                  unit is not buildable.
                </p>
                <h5 id="private-function-canbuild">
                  private function <code>canBuild()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>item</code></td>
                      <td><code>UnitType</code></td>
                      <td>Unit type to check for build eligibility.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>boolean</code>.</p>
                <p>Determines if the player can build the specified unit:</p>
                <ul>
                  <li>
                    Considers unit disable status, available gold, and
                    prerequisite structures.
                  </li>
                </ul>
                <h5 id="public-function-tick_23">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates unit counts from the player's current units and
                  refreshes <code>playerActions</code>. Triggers component
                  re-render.
                </p>
                <h5 id="public-function-render_23">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>TemplateResult | null</code>.</p>
                <p>Renders the unit display UI:</p>
                <ul>
                  <li>
                    Returns <code>null</code> if the game or player is not
                    available, in spawn phase, or if all units are disabled.
                  </li>
                  <li>
                    Builds two UI sections: regular units and military units
                    (warships and nuclear devices).
                  </li>
                  <li>
                    Each unit is rendered via <code>renderUnitItem()</code>.
                  </li>
                </ul>
                <h5 id="private-function-renderunititem">
                  private function <code>renderUnitItem()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>icon</code></td>
                      <td><code>string</code></td>
                      <td>URL or import of the unit icon image.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>number</code></td>
                      <td><code>number \| null</code></td>
                      <td>
                        Count of units, <code>null</code> if not applicable.
                      </td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>unitType</code></td>
                      <td><code>UnitType</code></td>
                      <td>Unit type being rendered.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>structureKey</code></td>
                      <td><code>string</code></td>
                      <td>Key used for translations and identifiers.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>hotkey</code></td>
                      <td><code>string</code></td>
                      <td>Assigned hotkey for building this unit.</td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>Renders a single unit UI element:</p>
                <ul>
                  <li>Hides element if unit is disabled.</li>
                  <li>
                    Displays tooltip on hover with name, description, and cost.
                  </li>
                  <li>Shows hotkey in the top-left corner.</li>
                  <li>
                    Handles click to select/deselect ghost structure in
                    <code>uiState</code>.
                  </li>
                  <li>
                    Emits <code>ToggleStructureEvent</code> to show or hide
                    related structures when hovered.
                  </li>
                </ul>
                <p>
                  See also:
                  <a href="#private-function-cost"
                    >function <code>cost()</code></a
                  >,
                  <a href="#private-function-canbuild"
                    >function <code>canBuild()</code></a
                  >
                </p>
                <h3 id="layersunitlayerts">./layers/UnitLayer.ts</h3>
                <h4 id="class-unitlayer">class <code>UnitLayer</code></h4>
                <p>
                  Manages rendering of all units and their movement trails.
                  Handles unit selection, movement intents, and alternate view
                  overlays.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>canvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Main canvas for unit sprites.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D rendering context of <code>canvas</code>.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transportShipTrailCanvas</code></td>
                      <td><code>HTMLCanvasElement</code></td>
                      <td>Canvas for rendering transport ship trails.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>unitTrailContext</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>2D context for unit trails.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>unitToTrail</code></td>
                      <td><code>Map&lt;UnitView, TileRef[]&gt;</code></td>
                      <td>Tracks the tile trail for each moving unit.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>theme</code></td>
                      <td><code>Theme</code></td>
                      <td>Current theme for color configuration.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>alternateView</code></td>
                      <td><code>boolean</code></td>
                      <td>Indicates if alternate coloring view is active.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>oldShellTile</code></td>
                      <td><code>Map&lt;UnitView, TileRef&gt;</code></td>
                      <td>Tracks previous positions for shell units.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>transformHandler</code></td>
                      <td><code>TransformHandler</code></td>
                      <td>Converts between screen and world coordinates.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>selectedUnit</code></td>
                      <td><code>UnitView \| null</code></td>
                      <td>Currently selected unit.</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><code>WARSHIP_SELECTION_RADIUS</code></td>
                      <td><code>number</code></td>
                      <td>
                        Radius for selecting warships near a click, in game
                        cells.
                      </td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-function-shouldtransform_19">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates that this layer should be transformed based on game
                  world coordinates.
                </p>
                <h5 id="public-function-tick_24">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates unit sprites based on changes since the last tick.
                </p>
                <h5 id="public-function-init_28">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Initializes event listeners and loads all sprites. Subscribes
                  to:
                </p>
                <ul>
                  <li><code>AlternateViewEvent</code></li>
                  <li><code>MouseUpEvent</code></li>
                  <li><code>UnitSelectionEvent</code></li>
                </ul>
                <h5 id="private-function-findwarshipsnearcell">
                  private function <code>findWarshipsNearCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>cell</code></td>
                      <td><code>{ x: number; y: number }</code></td>
                      <td>World coordinates to check for nearby warships.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>UnitView[]</code>.</p>
                <p>
                  Finds player-owned warships near the given cell within
                  <code>WARSHIP_SELECTION_RADIUS</code>, sorted by proximity.
                </p>
                <h5 id="private-function-onmouseup">
                  private function <code>onMouseUp()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>MouseUpEvent</code></td>
                      <td>
                        Mouse release event containing screen coordinates.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Handles warship selection and movement intents on mouse
                  release.
                </p>
                <h5 id="private-function-onunitselectionchange">
                  private function <code>onUnitSelectionChange()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>UnitSelectionEvent</code></td>
                      <td>Event indicating unit selection/deselection.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Updates <code>selectedUnit</code> based on selection events.
                </p>
                <h5 id="private-function-handleunitdeactivation">
                  private function <code>handleUnitDeactivation()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to check for deactivation.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Deselects a unit if it has been deactivated.</p>
                <h5 id="public-function-renderlayer_12">
                  public function <code>renderLayer()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>Target rendering context.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the unit and trail canvases onto the provided context.
                </p>
                <h5 id="public-function-onalternativeviewevent">
                  public function <code>onAlternativeViewEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>event</code></td>
                      <td><code>AlternateViewEvent</code></td>
                      <td>Event toggling alternate view mode.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Sets <code>alternateView</code> and redraws the layer.</p>
                <h5 id="public-function-redraw_9">
                  public function <code>redraw()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Creates canvases and contexts for units and trails. Clears and
                  repaints all units and trails.
                </p>
                <h5 id="private-function-updateunitssprites">
                  private function <code>updateUnitsSprites()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitIds</code></td>
                      <td><code>number[]</code></td>
                      <td>List of unit IDs to update.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears and redraws the sprites of the specified units.</p>
                <h5 id="private-function-clearunitscells">
                  private function <code>clearUnitsCells()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitViews</code></td>
                      <td><code>UnitView[]</code></td>
                      <td>Units to clear from the canvas.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears the previous sprite positions of active units.</p>
                <h5 id="private-function-drawunitscells">
                  private function <code>drawUnitsCells()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unitViews</code></td>
                      <td><code>UnitView[]</code></td>
                      <td>Units to draw.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws each unit using <code>onUnitEvent()</code>.</p>
                <h5 id="private-function-relationship">
                  private function <code>relationship()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>
                        Unit whose relationship to the player is determined.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>Relationship</code>.</p>
                <p>Determines if the unit belongs to self, ally, or enemy.</p>
                <h5 id="public-function-onunitevent_1">
                  public function <code>onUnitEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to process.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Dispatches unit handling to specialized methods based on unit
                  type. Deselects deactivated units.
                </p>
                <h5 id="private-function-handlewarshipevent">
                  private function <code>handleWarShipEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Warship unit to draw.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws warship sprite with optional red target indicator.</p>
                <h5 id="private-function-handleshellevent">
                  private function <code>handleShellEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Shell unit to process.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Clears previous positions and paints current and last
                  positions of shell units.
                </p>
                <h5 id="private-function-handlemissileevent">
                  private function <code>handleMissileEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Missile unit to process.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws interception missiles.</p>
                <h5 id="private-function-drawtrail">
                  private function <code>drawTrail()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>trail</code></td>
                      <td><code>number[]</code></td>
                      <td>Tile indices for the trail.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Color of the trail.</td>
                    </tr>
                    <tr>
                      <td><code>rel</code></td>
                      <td><code>Relationship</code></td>
                      <td>Unit relationship determining coloring.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Paints a trail of tiles for moving units.</p>
                <h5 id="private-function-cleartrail">
                  private function <code>clearTrail()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit whose trail is cleared.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Removes the unit's trail from the canvas and repaints
                  overlapping trails.
                </p>
                <h5 id="private-function-handlenuke">
                  private function <code>handleNuke()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Nuclear unit to process.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the trail and sprite of nukes. Clears trail if inactive.
                  Supports line interpolation for fast-moving units.
                </p>
                <h5 id="private-function-handlemirvwarhead">
                  private function <code>handleMIRVWarhead()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>MIRV warhead to process.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Paints MIRV warhead position and clears last tile.</p>
                <h5 id="private-function-handletradeshipevent">
                  private function <code>handleTradeShipEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Trade ship unit to draw.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws trade ship sprite.</p>
                <h5 id="private-function-handletrainevent">
                  private function <code>handleTrainEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Train unit to draw.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Draws train sprite.</p>
                <h5 id="private-function-handleboatevent">
                  private function <code>handleBoatEvent()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Transport ship unit to draw.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws boat sprite with trail and clears trail if inactive.
                </p>
                <h5 id="public-function-paintcell_2">
                  public function <code>paintCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X coordinate in canvas pixels.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y coordinate in canvas pixels.</td>
                    </tr>
                    <tr>
                      <td><code>relationship</code></td>
                      <td><code>Relationship</code></td>
                      <td>Relationship of unit to player.</td>
                    </tr>
                    <tr>
                      <td><code>color</code></td>
                      <td><code>Colord</code></td>
                      <td>Base color.</td>
                    </tr>
                    <tr>
                      <td><code>alpha</code></td>
                      <td><code>number</code></td>
                      <td>Alpha transparency (0255).</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>
                        Optional context; defaults to main <code>context</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Paints a single canvas pixel according to relationship or
                  color and alpha.
                </p>
                <h5 id="public-function-clearcell_2">
                  public function <code>clearCell()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>x</code></td>
                      <td><code>number</code></td>
                      <td>X coordinate in canvas pixels.</td>
                    </tr>
                    <tr>
                      <td><code>y</code></td>
                      <td><code>number</code></td>
                      <td>Y coordinate in canvas pixels.</td>
                    </tr>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>CanvasRenderingContext2D</code></td>
                      <td>
                        Optional context; defaults to main <code>context</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>Clears a single pixel in the given canvas context.</p>
                <h5 id="public-function-drawsprite">
                  public function <code>drawSprite()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>unit</code></td>
                      <td><code>UnitView</code></td>
                      <td>Unit to draw.</td>
                    </tr>
                    <tr>
                      <td><code>customTerritoryColor?</code></td>
                      <td><code>Colord</code></td>
                      <td>Optional custom color for the unit.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Returns <code>void</code>.</p>
                <p>
                  Draws the unit's sprite on the canvas, applying alternate view
                  coloring or opacity adjustments if the unit is not targetable.
                </p>
                <p>
                  See also:
                  <a href="#public-function-paintcell"
                    >function <code>paintCell()</code></a
                  >,
                  <a href="#public-function-clearcell"
                    >function <code>clearCell()</code></a
                  >
                </p>
                <h3 id="layerswinmodalts">./layers/WinModal.ts</h3>
                <h4 id="class-winmodal">class <code>WinModal</code></h4>
                <p>
                  Manages the display and interaction of the win modal,
                  including showing victory messages, pattern support buttons,
                  and handling user actions.
                </p>
                <p>
                  Implements:
                  <a href="#interface-layer">interface <code>Layer</code></a>
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>game</code></td>
                      <td><code>GameView</code></td>
                      <td>The current game view instance.</td>
                    </tr>
                    <tr>
                      <td><code>eventBus</code></td>
                      <td><code>EventBus</code></td>
                      <td>Event bus used to emit game events.</td>
                    </tr>
                    <tr>
                      <td><code>hasShownDeathModal</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Tracks whether the death modal has already been
                        displayed.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isVisible</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the modal is currently visible. Managed as
                        a reactive <code>@state()</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>showButtons</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Determines whether the action buttons are displayed.
                        Managed as a reactive <code>@state()</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>isWin</code></td>
                      <td><code>boolean</code></td>
                      <td>
                        Indicates if the current outcome is a win. Managed as a
                        private reactive <code>@state()</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>patternContent</code></td>
                      <td><code>TemplateResult \| null</code></td>
                      <td>
                        Stores dynamically loaded pattern button content.
                        Managed as a private reactive <code>@state()</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>_title</code></td>
                      <td><code>string</code></td>
                      <td>Stores the modal title for display.</td>
                    </tr>
                    <tr>
                      <td><code>rand</code></td>
                      <td><code>number</code></td>
                      <td>
                        Random number used to determine modal content fallback.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_12">
                  public constructor <code>constructor()</code>
                </h5>
                <p>
                  Initializes a <code>WinModal</code> instance. Overrides shadow
                  DOM creation to use the light DOM.
                </p>
                <h5 id="public-function-createrenderroot_17">
                  public function <code>createRenderRoot()</code>
                </h5>
                <p>Returns <code>this</code>.</p>
                <p>
                  Overrides default LitElement behavior to prevent creation of a
                  shadow DOM.
                </p>
                <h5 id="public-function-render_24">
                  public function <code>render()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Renders the modal container, title, content (pattern buttons
                  or Steam wishlist), and action buttons. Applies animation
                  classes when visible.
                </p>
                <h5 id="public-function-innerhtml">
                  public function <code>innerHtml()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Determines which inner content to render: either pattern
                  buttons via
                  <a href="#public-function-renderpatternbutton"
                    >function <code>renderPatternButton()</code></a
                  >
                  or a Steam wishlist link via
                  <a href="#public-function-steamwishlist"
                    >function <code>steamWishlist()</code></a
                  >.
                </p>
                <h5 id="public-function-renderpatternbutton">
                  public function <code>renderPatternButton()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Renders the container for the support pattern button,
                  including title, description, and dynamically loaded
                  <code>patternContent</code>.
                </p>
                <h5 id="public-async-function-loadpatterncontent">
                  public async function <code>loadPatternContent()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Loads and filters purchasable patterns for the current user.
                  Dynamically creates <code>pattern-button</code> elements and
                  sets <code>patternContent</code>. Falls back to empty content
                  if no purchasable patterns exist.
                </p>
                <h5 id="public-function-steamwishlist">
                  public function <code>steamWishlist()</code>
                </h5>
                <p>Returns <code>TemplateResult</code>.</p>
                <p>
                  Renders a Steam wishlist link as fallback content if inside an
                  iframe or based on random chance.
                </p>
                <h5 id="public-async-function-show">
                  public async function <code>show()</code>
                </h5>
                <p>Returns <code>Promise&lt;void&gt;</code>.</p>
                <p>
                  Displays the modal by loading pattern content, setting
                  visibility, and revealing buttons after a delay.
                </p>
                <h5 id="public-function-hide_3">
                  public function <code>hide()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Hides the modal and action buttons.</p>
                <h5 id="private-function-_handleexit">
                  private function <code>_handleExit()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>Hides the modal and redirects the user to the home page.</p>
                <h5 id="public-function-init_29">
                  public function <code>init()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >. Placeholder initialization function.
                </p>
                <h5 id="public-function-tick_25">
                  public function <code>tick()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Checks game state updates and displays the modal when
                  appropriate, such as on death or victory. Emits
                  <a href="#class-sendwinnevent"
                    >class <code>SendWinnerEvent</code></a
                  >
                  via <code>eventBus</code> when a winner is detected. Updates
                  <code>_title</code> and <code>isWin</code> accordingly.
                </p>
                <h5 id="public-function-renderlayer_13">
                  public function <code>renderLayer()</code>
                </h5>
                <p>Returns <code>void</code>.</p>
                <p>
                  Implements
                  <a href="#interface-layer">interface <code>Layer</code></a
                  >. Placeholder for rendering to canvas.
                </p>
                <h5 id="public-function-shouldtransform_20">
                  public function <code>shouldTransform()</code>
                </h5>
                <p>Returns <code>boolean</code>.</p>
                <p>
                  Indicates whether the layer requires canvas transformation.
                  Always returns <code>false</code>.
                </p>
                <h2 id="style">Style</h2>
                <h2 id="data">Data</h2>
                <h2 id="sound">Sound</h2>
                <h3 id="soundmanagerts">SoundManager.ts</h3>
                <h4 id="class-soundmanager">class <code>SoundManager</code></h4>
                <p>
                  Manages background music and sound effects using Howler.js.
                  Handles track sequencing, volume, and playback.
                </p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>backgroundMusic</code></td>
                      <td><code>Howl[]</code></td>
                      <td>Array of background music tracks.</td>
                    </tr>
                    <tr>
                      <td><code>currentTrack</code></td>
                      <td><code>number</code></td>
                      <td>Index of the currently playing background track.</td>
                    </tr>
                    <tr>
                      <td><code>soundEffects</code></td>
                      <td><code>Map&lt;SoundEffect, Howl&gt;</code></td>
                      <td>
                        Loaded sound effects mapped by <code>SoundEffect</code>.
                      </td>
                    </tr>
                    <tr>
                      <td><code>soundEffectsVolume</code></td>
                      <td><code>number</code></td>
                      <td>
                        Volume level for sound effects (defaults to
                        <code>1</code>).
                      </td>
                    </tr>
                    <tr>
                      <td><code>backgroundMusicVolume</code></td>
                      <td><code>number</code></td>
                      <td>
                        Volume level for background music (defaults to
                        <code>0</code>).
                      </td>
                    </tr>
                  </tbody>
                </table>
                <h5 id="public-constructor-constructor_13">
                  public constructor <code>constructor()</code>
                </h5>
                <p>No parameters.</p>
                <p>
                  Initializes background music tracks and loads default sound
                  effects.
                </p>
                <p>Throws an error if Howl fails to initialize.</p>
                <h5 id="public-function-playbackgroundmusic">
                  public function <code>playBackgroundMusic()</code>
                </h5>
                <p>No parameters.</p>
                <p>
                  Plays the current background music track if not already
                  playing.
                </p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-stopbackgroundmusic">
                  public function <code>stopBackgroundMusic()</code>
                </h5>
                <p>No parameters.</p>
                <p>Stops the currently playing background music track.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-setbackgroundmusicvolume">
                  public function <code>setBackgroundMusicVolume()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>volume</code></td>
                      <td><code>number</code></td>
                      <td>
                        Volume level between <code>0</code> and <code>1</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Sets the volume of all background music tracks.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="private-function-playnext">
                  private function <code>playNext()</code>
                </h5>
                <p>No parameters.</p>
                <p>Advances to the next background track and plays it.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-loadsoundeffect">
                  public function <code>loadSoundEffect()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>SoundEffect</code></td>
                      <td>Name of the sound effect.</td>
                    </tr>
                    <tr>
                      <td><code>src</code></td>
                      <td><code>string</code></td>
                      <td>Source file path for the sound effect.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Loads a sound effect if not already loaded.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-playsoundeffect">
                  public function <code>playSoundEffect()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>SoundEffect</code></td>
                      <td>Name of the sound effect to play.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Plays a loaded sound effect.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-setsoundeffectsvolume">
                  public function <code>setSoundEffectsVolume()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>volume</code></td>
                      <td><code>number</code></td>
                      <td>
                        Volume level between <code>0</code> and <code>1</code>.
                      </td>
                    </tr>
                  </tbody>
                </table>
                <p>Sets the volume for all loaded sound effects.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-stopsoundeffect">
                  public function <code>stopSoundEffect()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>SoundEffect</code></td>
                      <td>Name of the sound effect to stop.</td>
                    </tr>
                  </tbody>
                </table>
                <p>Stops a playing sound effect.</p>
                <p>Returns <code>void</code>.</p>
                <h5 id="public-function-unloadsoundeffect">
                  public function <code>unloadSoundEffect()</code>
                </h5>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>name</code></td>
                      <td><code>SoundEffect</code></td>
                      <td>Name of the sound effect to unload.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Unloads a sound effect and removes it from the internal map.
                </p>
                <p>Returns <code>void</code>.</p>
                <h4 id="enum-soundeffect">enum <code>SoundEffect</code></h4>
                <p>Defines available sound effect identifiers.</p>
                <p><strong>Properties:</strong></p>
                <table>
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>KaChing</code></td>
                      <td><code>string</code></td>
                      <td>Identifier for the "ka-ching" sound effect.</td>
                    </tr>
                  </tbody>
                </table>
                <h2 id="utilities">Utilities</h2>
                <h3 id="replayspeedmultiplierts">ReplaySpeedMultiplier.ts</h3>
                <h4 id="enum-replayspeedmultiplier">
                  enum <code>ReplaySpeedMultiplier</code>
                </h4>
                <p>
                  Enum containing speed multiplier names (<code>string</code>)
                  and their values (<code>number</code>).
                </p>
                <h4 id="const-defaultreplayspeedmultiplier">
                  const <code>defaultReplaySpeedMultiplier</code>
                </h4>
                <p>The default replay speed multiplier.</p>
                <h3 id="renderunittypeoptionsts">RenderUnitTypeOptions.ts</h3>
                <h4 id="interface-unittyperendercontext">
                  interface <code>UnitTypeRenderContext</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Property</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>disabledUnits</code></td>
                      <td><code>UnitType[]</code></td>
                      <td>Array of disabled units.</td>
                    </tr>
                    <tr>
                      <td><code>toggleUnit</code></td>
                      <td>
                        <code
                          >(unit: UnitType, checked: boolean) =&gt; void</code
                        >
                      </td>
                      <td>Function to toggle a unit's visibility.</td>
                    </tr>
                  </tbody>
                </table>
                <h4 id="const-unitoptions">const <code>unitOptions</code></h4>
                <p>
                  Array of objects containing unit types (<code>UnitType</code>)
                  and their translation keys (<code>string</code>).
                </p>
                <h4 id="function-renderunittypeoptions">
                  function <code>renderUnitTypeOptions()</code>
                </h4>
                <table>
                  <thead>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>context</code></td>
                      <td><code>UnitTypeRenderContext</code></td>
                      <td>The rendering context for unit types.</td>
                    </tr>
                  </tbody>
                </table>
                <p>
                  Returns <code>TemplateResult[]</code>  an array of
                  <a href="#">lit-html</a> template strings, each containing the
                  HTML for a unit type and a checkbox.
                </p>
              </div>
            </div>
            <footer>
              <div
                class="rst-footer-buttons"
                role="navigation"
                aria-label="Footer Navigation"
              >
                <a
                  href="../develop/"
                  class="btn btn-neutral float-left"
                  title="Development reference"
                  ><span class="icon icon-circle-arrow-left"></span> Previous</a
                >
                <a
                  href="../server/"
                  class="btn btn-neutral float-right"
                  title="Server reference"
                  >Next <span class="icon icon-circle-arrow-right"></span
                ></a>
              </div>

              <hr />

              <div role="contentinfo">
                <!-- Copyright etc -->
              </div>

              Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a
              <a href="https://github.com/readthedocs/sphinx_rtd_theme"
                >theme</a
              >
              provided by <a href="https://readthedocs.org">Read the Docs</a>.
            </footer>
          </div>
        </div>
      </section>
    </div>

    <div class="rst-versions" role="note" aria-label="Versions">
      <span class="rst-current-version" data-toggle="rst-current-version">
        <span
          ><a href="../develop/" style="color: #fcfcfc"
            >&laquo; Previous</a
          ></span
        >

        <span
          ><a href="../server/" style="color: #fcfcfc">Next &raquo;</a></span
        >
      </span>
    </div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>
      var base_url = "..";
    </script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../search/main.js"></script>
    <script>
      jQuery(function () {
        SphinxRtdTheme.Navigation.enable(true);
      });
    </script>
  </body>
</html>
